"use strict";(self.webpackChunkblog_backend=self.webpackChunkblog_backend||[]).push([[9789],{75730:(M,g,t)=>{t.r(g),t.d(g,{default:()=>S});var e=t(67294),o=t(86896),a=t(87631),v=t(64593),P=t(17034),p=t(49066),i=t(41580),f=t(185),y=t(53979),C=t(29728),j=t(38939),O=t(8060),n=t(79031),s=t(37909),d=t(75515),r=t(15234),c=t(11047),m=t(12028),D=t(8934),B=t(30815),l=t(20022),E=t(80826),T=t(93742);const U=h=>{const x=(()=>h.startsWith("/")?`${window.strapi.backendURL}${h}`:h.startsWith("http")?h:`${window.strapi.backendURL}/${h}`)();return window.open(x,"_blank"),window.focus()};var K=t(90306);const S=()=>{(0,a.go)();const{formatMessage:h}=(0,o.Z)(),{data:x,isLoading:W,isError:b,deleteMutation:N,regenerateDocMutation:V}=(0,K.Z)(),[L,R]=(0,e.useState)(!1),[Q,Z]=(0,e.useState)(!1),[H,w]=(0,e.useState)(),F=4,z=(x?.docVersions?.length||0)+1,I=u=>{const A=x?.prefix.startsWith("/")?"":"/";U(`${A}${x?.prefix}/v${u}`)},X=u=>{V.mutate({version:u,prefix:x?.prefix})},G=()=>{R(!L)},Y=async()=>{Z(!0),await N.mutateAsync({prefix:x?.prefix,version:H}),R(!L),Z(!1)},J=u=>{w(u),R(!L)},$=h({id:(0,T.O)("plugin.name"),defaultMessage:"Documentation"});return b?e.createElement(P.A,null,e.createElement(p.D,null,e.createElement(i.x,{paddingTop:8},e.createElement(a.Hn,null)))):e.createElement(P.A,null,e.createElement(v.q,{title:$}),e.createElement(f.o,{"aria-busy":W},e.createElement(y.T,{title:$,subtitle:h({id:(0,T.O)("pages.PluginPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.createElement(a.jW,{permissions:E.Z.open},e.createElement(C.z,{onClick:()=>I(x?.currentVersion),startIcon:e.createElement(D.Z,null)},h({id:(0,T.O)("pages.PluginPage.Button.open"),defaultMessage:"Open Documentation"})))}),e.createElement(p.D,null,W&&e.createElement(a.dO,null,"Plugin is loading"),x?.docVersions.length?e.createElement(j.i,{colCount:F,rowCount:z},e.createElement(O.h,null,e.createElement(n.Tr,null,e.createElement(s.Th,null,e.createElement(d.Z,{variant:"sigma",textColor:"neutral600"},h({id:(0,T.O)("pages.PluginPage.table.version"),defaultMessage:"Version"}))),e.createElement(s.Th,null,e.createElement(d.Z,{variant:"sigma",textColor:"neutral600"},h({id:(0,T.O)("pages.PluginPage.table.generated"),defaultMessage:"Last Generated"}))))),e.createElement(r.p,null,x.docVersions.sort((u,A)=>u.generatedDate<A.generatedDate?1:-1).map(u=>e.createElement(n.Tr,{key:u.version},e.createElement(s.Td,{width:"50%"},e.createElement(d.Z,null,u.version)),e.createElement(s.Td,{width:"50%"},e.createElement(d.Z,null,u.generatedDate)),e.createElement(s.Td,null,e.createElement(c.k,{justifyContent:"end",...a.UW},e.createElement(m.h,{onClick:()=>I(u.version),noBorder:!0,icon:e.createElement(D.Z,null),label:h({id:(0,T.O)("pages.PluginPage.table.icon.show"),defaultMessage:"Open {target}"},{target:`${u.version}`})}),e.createElement(a.jW,{permissions:E.Z.regenerate},e.createElement(m.h,{onClick:()=>X(u.version),noBorder:!0,icon:e.createElement(B.Z,null),label:h({id:(0,T.O)("pages.PluginPage.table.icon.regenerate"),defaultMessage:"Regenerate {target}"},{target:`${u.version}`})})),e.createElement(a.jW,{permissions:E.Z.update},u.version!==x.currentVersion&&e.createElement(m.h,{onClick:()=>J(u.version),noBorder:!0,icon:e.createElement(l.Z,null),label:h({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${u.version}`})})))))))):e.createElement(a.x7,null)),e.createElement(a.QH,{isConfirmButtonLoading:Q,onConfirm:Y,onToggleDialog:G,isOpen:L})))}},90306:(M,g,t)=>{t.d(g,{Z:()=>p});var e=t(88767),o=t(87631),a=t(49950),v=t(798);const p=()=>{const i=(0,e.useQueryClient)(),f=(0,o.lm)(),{isLoading:y,isError:C,data:j}=(0,e.useQuery)(["get-documentation",a.Z],async()=>{try{const{data:l}=await d(`/${a.Z}/getInfos`);return l}catch{return f({type:"warning",message:{id:"notification.error"}}),null}}),{del:O,post:n,put:s,get:d}=(0,o.kY)(),r=l=>{f({type:"warning",message:l.response.payload.message})},c=(l,E)=>{i.invalidateQueries("get-documentation"),f({type:l,message:{id:(0,v.Z)(E)}})},m=(0,e.useMutation)(({prefix:l,version:E})=>O(`${l}/deleteDoc/${E}`),{onSuccess:()=>c("info","notification.delete.success"),onError:l=>r(l)}),D=(0,e.useMutation)(({prefix:l,body:E})=>s(`${l}/updateSettings`,E),{onSuccess:()=>c("success","notification.update.success"),onError:r}),B=(0,e.useMutation)(({prefix:l,version:E})=>n(`${l}/regenerateDoc`,{version:E}),{onSuccess:()=>c("info","notification.generate.success"),onError:l=>r(l)});return{data:j,isLoading:y,isError:C,deleteMutation:m,submitMutation:D,regenerateDocMutation:B}}},798:(M,g,t)=>{t.d(g,{Z:()=>a});var e=t(49950);const a=v=>`${e.Z}.${v}`},93742:(M,g,t)=>{t.d(g,{O:()=>e.Z});var e=t(798)},49066:(M,g,t)=>{t.d(g,{D:()=>a});var e=t(85893),o=t(41580);const a=({children:v})=>(0,e.jsx)(o.x,{paddingLeft:10,paddingRight:10,children:v})},53979:(M,g,t)=>{t.d(g,{T:()=>C});var e=t(85893),o=t(67294),a=t(71997);const v=n=>{const s=(0,o.useRef)(null),[d,r]=(0,o.useState)(!0),c=([m])=>{r(m.isIntersecting)};return(0,o.useEffect)(()=>{const m=s.current,D=new IntersectionObserver(c,n);return m&&D.observe(s.current),()=>{m&&D.disconnect()}},[s,n]),[s,d]};var P=t(95355);const p=(n,s)=>{const d=(0,P.W)(s);(0,o.useLayoutEffect)(()=>{const r=new ResizeObserver(d);return Array.isArray(n)?n.forEach(c=>{c.current&&r.observe(c.current)}):n.current&&r.observe(n.current),()=>{r.disconnect()}},[n,d])};var i=t(41580),f=t(11047),y=t(75515);const C=n=>{const s=(0,o.useRef)(null),[d,r]=(0,o.useState)(null),[c,m]=v({root:null,rootMargin:"0px",threshold:0});return p(c,()=>{c.current&&r(c.current.getBoundingClientRect())}),(0,o.useEffect)(()=>{s.current&&r(s.current.getBoundingClientRect())},[s]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:d?.height},ref:c,children:m&&(0,e.jsx)(O,{ref:s,...n})}),!m&&(0,e.jsx)(O,{...n,sticky:!0,width:d?.width})]})};C.displayName="HeaderLayout";const j=(0,a.ZP)(i.x)`
  width: ${({width:n})=>n?`${n/16}rem`:void 0};
  z-index: ${({theme:n})=>n.zIndices[1]};
`,O=o.forwardRef(({navigationAction:n,primaryAction:s,secondaryAction:d,subtitle:r,title:c,sticky:m,width:D,...B},l)=>{const E=typeof r=="string";return m?(0,e.jsx)(j,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:D,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(f.k,{justifyContent:"space-between",children:[(0,e.jsxs)(f.k,{children:[n&&(0,e.jsx)(i.x,{paddingRight:3,children:n}),(0,e.jsxs)(i.x,{children:[(0,e.jsx)(y.Z,{variant:"beta",as:"h1",...B,children:c}),E?(0,e.jsx)(y.Z,{variant:"pi",textColor:"neutral600",children:r}):r]}),d?(0,e.jsx)(i.x,{paddingLeft:4,children:d}):null]}),(0,e.jsx)(f.k,{children:s?(0,e.jsx)(i.x,{paddingLeft:2,children:s}):void 0})]})}):(0,e.jsxs)(i.x,{ref:l,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0,children:[n?(0,e.jsx)(i.x,{paddingBottom:2,children:n}):null,(0,e.jsxs)(f.k,{justifyContent:"space-between",children:[(0,e.jsxs)(f.k,{minWidth:0,children:[(0,e.jsx)(y.Z,{as:"h1",variant:"alpha",...B,children:c}),d?(0,e.jsx)(i.x,{paddingLeft:4,children:d}):null]}),s]}),E?(0,e.jsx)(y.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:r}):r]})})},17034:(M,g,t)=>{t.d(g,{A:()=>p});var e=t(85893),o=t(71997),a=t(41580);const v=(0,o.ZP)(a.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:i})=>i?"auto 1fr":"1fr"};
`,P=(0,o.ZP)(a.x)`
  overflow-x: hidden;
`,p=({sideNav:i,children:f})=>(0,e.jsxs)(v,{hasSideNav:!!i,children:[i,(0,e.jsx)(P,{paddingBottom:10,children:f})]})},185:(M,g,t)=>{t.d(g,{o:()=>P});var e=t(85893),o=t(71997),a=t(41580);const v=(0,o.ZP)(a.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,P=({labelledBy:p="main-content-title",...i})=>(0,e.jsx)(v,{"aria-labelledby":p,as:"main",id:"main-content",tabIndex:-1,...i})}}]);
