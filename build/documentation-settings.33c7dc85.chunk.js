"use strict";(self.webpackChunkblog_backend=self.webpackChunkblog_backend||[]).push([[8503],{31346:(M,c,t)=>{t.r(c),t.d(c,{default:()=>U});var e=t(67294),d=t(86896),m=t(14916),l=t(87631),P=t(185),y=t(53979),u=t(29728),f=t(49066),v=t(41580),A=t(11047),j=t(75515),O=t(11276),n=t(74571),o=t(20707),i=t(16364),s=t(85018),r=t(8934),g=t(94123),x=t(80826),E=t(93742),a=t(90306),p=t(71997),Z=t(25752);const W=(0,p.ZP)(Z.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:h})=>h.colors.neutral600};
    }
  }
`;var R=t(87561);const w=R.Ry().shape({restrictedAccess:R.O7(),password:R.Z_().when("restrictedAccess",(h,D)=>h?D.required(l.I0.required):D)}),U=()=>{(0,l.go)();const{formatMessage:h}=(0,d.Z)(),{submitMutation:D,data:B,isLoading:K}=(0,a.Z)(),[L,b]=(0,e.useState)(!1),$=T=>{D.mutate({prefix:B?.prefix,body:T})};return e.createElement(P.o,null,K?e.createElement(l.dO,null,"Plugin settings are loading"):e.createElement(m.J9,{initialValues:{restrictedAccess:B?.documentationAccess.restrictedAccess||!1,password:""},onSubmit:$,validationSchema:w},({handleSubmit:T,values:C,handleChange:F,errors:S,setFieldTouched:Q,setFieldValue:I})=>e.createElement(l.l0,{noValidate:!0,onSubmit:T},e.createElement(y.T,{title:h({id:(0,E.O)("plugin.name"),defaultMessage:"Documentation"}),subtitle:h({id:(0,E.O)("pages.SettingsPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:e.createElement(l.jW,{permissions:x.Z.update},e.createElement(u.z,{type:"submit",startIcon:e.createElement(s.Z,null)},h({id:(0,E.O)("pages.SettingsPage.Button.save"),defaultMessage:"Save"})))}),e.createElement(f.D,null,e.createElement(v.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(A.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(j.Z,{variant:"delta",as:"h2"},h({id:"global.settings",defaultMessage:"Settings"})),e.createElement(O.r,{gap:4},e.createElement(n.P,{col:6,s:12},e.createElement(o.s,{name:"restrictedAccess",label:h({id:(0,E.O)("pages.SettingsPage.toggle.label"),defaultMessage:"Restricted Access"}),hint:h({id:(0,E.O)("pages.SettingsPage.toggle.hint"),defaultMessage:"Make the documentation endpoint private"}),checked:C.restrictedAccess,onChange:()=>{C.restrictedAccess===!0&&(I("password","",!1),Q("password",!1,!1)),I("restrictedAccess",!C.restrictedAccess,!1)},onLabel:"On",offLabel:"Off"})),C.restrictedAccess&&e.createElement(n.P,{col:6,s:12},e.createElement(i.o,{label:h({id:"global.password",defaultMessage:"Password"}),name:"password",placeholder:"**********",type:L?"text":"password",value:C.password,onChange:F,error:S.password?h({id:S.password,defaultMessage:"Invalid value"}):null,endAction:e.createElement(W,{onClick:z=>{z.stopPropagation(),b(H=>!H)},label:h(L?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},L?e.createElement(r.Z,null):e.createElement(g.Z,null))})))))))))}},90306:(M,c,t)=>{t.d(c,{Z:()=>y});var e=t(88767),d=t(87631),m=t(49950),l=t(798);const y=()=>{const u=(0,e.useQueryClient)(),f=(0,d.lm)(),{isLoading:v,isError:A,data:j}=(0,e.useQuery)(["get-documentation",m.Z],async()=>{try{const{data:a}=await i(`/${m.Z}/getInfos`);return a}catch{return f({type:"warning",message:{id:"notification.error"}}),null}}),{del:O,post:n,put:o,get:i}=(0,d.kY)(),s=a=>{f({type:"warning",message:a.response.payload.message})},r=(a,p)=>{u.invalidateQueries("get-documentation"),f({type:a,message:{id:(0,l.Z)(p)}})},g=(0,e.useMutation)(({prefix:a,version:p})=>O(`${a}/deleteDoc/${p}`),{onSuccess:()=>r("info","notification.delete.success"),onError:a=>s(a)}),x=(0,e.useMutation)(({prefix:a,body:p})=>o(`${a}/updateSettings`,p),{onSuccess:()=>r("success","notification.update.success"),onError:s}),E=(0,e.useMutation)(({prefix:a,version:p})=>n(`${a}/regenerateDoc`,{version:p}),{onSuccess:()=>r("info","notification.generate.success"),onError:a=>s(a)});return{data:j,isLoading:v,isError:A,deleteMutation:g,submitMutation:x,regenerateDocMutation:E}}},798:(M,c,t)=>{t.d(c,{Z:()=>m});var e=t(49950);const m=l=>`${e.Z}.${l}`},93742:(M,c,t)=>{t.d(c,{O:()=>e.Z});var e=t(798)},49066:(M,c,t)=>{t.d(c,{D:()=>m});var e=t(85893),d=t(41580);const m=({children:l})=>(0,e.jsx)(d.x,{paddingLeft:10,paddingRight:10,children:l})},53979:(M,c,t)=>{t.d(c,{T:()=>A});var e=t(85893),d=t(67294),m=t(71997);const l=n=>{const o=(0,d.useRef)(null),[i,s]=(0,d.useState)(!0),r=([g])=>{s(g.isIntersecting)};return(0,d.useEffect)(()=>{const g=o.current,x=new IntersectionObserver(r,n);return g&&x.observe(o.current),()=>{g&&x.disconnect()}},[o,n]),[o,i]};var P=t(95355);const y=(n,o)=>{const i=(0,P.W)(o);(0,d.useLayoutEffect)(()=>{const s=new ResizeObserver(i);return Array.isArray(n)?n.forEach(r=>{r.current&&s.observe(r.current)}):n.current&&s.observe(n.current),()=>{s.disconnect()}},[n,i])};var u=t(41580),f=t(11047),v=t(75515);const A=n=>{const o=(0,d.useRef)(null),[i,s]=(0,d.useState)(null),[r,g]=l({root:null,rootMargin:"0px",threshold:0});return y(r,()=>{r.current&&s(r.current.getBoundingClientRect())}),(0,d.useEffect)(()=>{o.current&&s(o.current.getBoundingClientRect())},[o]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:i?.height},ref:r,children:g&&(0,e.jsx)(O,{ref:o,...n})}),!g&&(0,e.jsx)(O,{...n,sticky:!0,width:i?.width})]})};A.displayName="HeaderLayout";const j=(0,m.ZP)(u.x)`
  width: ${({width:n})=>n?`${n/16}rem`:void 0};
  z-index: ${({theme:n})=>n.zIndices[1]};
`,O=d.forwardRef(({navigationAction:n,primaryAction:o,secondaryAction:i,subtitle:s,title:r,sticky:g,width:x,...E},a)=>{const p=typeof s=="string";return g?(0,e.jsx)(j,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:x,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(f.k,{justifyContent:"space-between",children:[(0,e.jsxs)(f.k,{children:[n&&(0,e.jsx)(u.x,{paddingRight:3,children:n}),(0,e.jsxs)(u.x,{children:[(0,e.jsx)(v.Z,{variant:"beta",as:"h1",...E,children:r}),p?(0,e.jsx)(v.Z,{variant:"pi",textColor:"neutral600",children:s}):s]}),i?(0,e.jsx)(u.x,{paddingLeft:4,children:i}):null]}),(0,e.jsx)(f.k,{children:o?(0,e.jsx)(u.x,{paddingLeft:2,children:o}):void 0})]})}):(0,e.jsxs)(u.x,{ref:a,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0,children:[n?(0,e.jsx)(u.x,{paddingBottom:2,children:n}):null,(0,e.jsxs)(f.k,{justifyContent:"space-between",children:[(0,e.jsxs)(f.k,{minWidth:0,children:[(0,e.jsx)(v.Z,{as:"h1",variant:"alpha",...E,children:r}),i?(0,e.jsx)(u.x,{paddingLeft:4,children:i}):null]}),o]}),p?(0,e.jsx)(v.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:s}):s]})})},185:(M,c,t)=>{t.d(c,{o:()=>P});var e=t(85893),d=t(71997),m=t(41580);const l=(0,d.ZP)(m.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,P=({labelledBy:y="main-content-title",...u})=>(0,e.jsx)(l,{"aria-labelledby":y,as:"main",id:"main-content",tabIndex:-1,...u})}}]);
