(self.webpackChunkblog_backend=self.webpackChunkblog_backend||[]).push([[4482],{15535:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{"Insert code block":"Insert code block","Plain text":"Plain text"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={67:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck-content pre{background:hsla(0,0%,78%,.3);border:1px solid #c4c4c4;border-radius:2px;color:#353535;direction:ltr;font-style:normal;min-width:200px;padding:1em;tab-size:4;text-align:left;white-space:pre-wrap}.ck-content pre code{background:unset;border-radius:0;padding:0}.ck.ck-editor__editable pre{position:relative}.ck.ck-editor__editable pre[data-language]:after{content:attr(data-language);position:absolute}:root{--ck-color-code-block-label-background:#757575}.ck.ck-editor__editable pre[data-language]:after{background:var(--ck-color-code-block-label-background);color:#fff;font-family:var(--ck-font-face);font-size:10px;line-height:16px;padding:var(--ck-spacing-tiny) var(--ck-spacing-medium);right:10px;top:-1px;white-space:nowrap}.ck.ck-code-block-dropdown .ck-dropdown__panel{max-height:250px;overflow-x:hidden;overflow-y:auto}",""]);const a=v},609:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},62:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},492:(m,E,y)=>{m.exports=y(79)("./src/engine.js")},331:(m,E,y)=>{m.exports=y(79)("./src/enter.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{CodeBlock:()=>L,CodeBlockEditing:()=>Z,CodeBlockUI:()=>z});var m=Y(704),E=Y(331),y=Y(492),f=Y(209);function v(x){const c=x.t,D=x.config.get("codeBlock.languages");for(const W of D)W.label==="Plain text"&&(W.label=c("Plain text")),W.class===void 0&&(W.class=`language-${W.language}`);return D}function a(x,c,D){const W={};for(const q of x)c==="class"?W[q[c].split(" ").shift()]=q[D]:W[q[c]]=q[D];return W}function d(x){return x.data.match(/^(\s*)/)[0]}function A(x){const c=x.document.selection,D=[];if(c.isCollapsed)return[c.anchor];const W=c.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:q}of W){if(!q.is("$textProxy"))continue;const{parent:ae,startOffset:Ie}=q.textNode;if(!ae.is("element","codeBlock"))continue;const Ve=d(q.textNode),_e=x.createPositionAt(ae,Ie+Ve.length);D.push(_e)}return D}function H(x){const c=(0,f.first)(x.getSelectedBlocks());return!!c&&c.is("element","codeBlock")}function I(x,c){return!c.is("rootElement")&&!x.isLimit(c)&&x.checkChild(c.parent,"codeBlock")}class C extends m.Command{constructor(c){super(c),this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(c={}){const D=this.editor,W=D.model,q=W.document.selection,ae=v(D)[0],Ie=Array.from(q.getSelectedBlocks()),Ve=c.forceValue==null?!this.value:c.forceValue,_e=function(Me,Qe,dt){return Me.language?Me.language:Me.usePreviousLanguageChoice&&Qe?Qe:dt}(c,this._lastLanguage,ae.language);W.change(Me=>{Ve?this._applyCodeBlock(Me,Ie,_e):this._removeCodeBlock(Me,Ie)})}_getValue(){const c=this.editor.model.document.selection,D=(0,f.first)(c.getSelectedBlocks());return!(!D||!D.is("element","codeBlock"))&&D.getAttribute("language")}_checkEnabled(){if(this.value)return!0;const c=this.editor.model.document.selection,D=this.editor.model.schema,W=(0,f.first)(c.getSelectedBlocks());return!!W&&I(D,W)}_applyCodeBlock(c,D,W){this._lastLanguage=W;const q=this.editor.model.schema,ae=D.filter(Ie=>I(q,Ie));for(const Ie of ae)c.rename(Ie,"codeBlock"),c.setAttribute("language",W,Ie),q.removeDisallowedAttributes([Ie],c),Array.from(Ie.getChildren()).filter(Ve=>!q.checkChild(Ie,Ve)).forEach(Ve=>c.remove(Ve));ae.reverse().forEach((Ie,Ve)=>{const _e=ae[Ve+1];Ie.previousSibling===_e&&(c.appendElement("softBreak",_e),c.merge(c.createPositionBefore(Ie)))})}_removeCodeBlock(c,D){const W=D.filter(q=>q.is("element","codeBlock"));for(const q of W){const ae=c.createRangeOn(q);for(const Ie of Array.from(ae.getItems()).reverse())if(Ie.is("element","softBreak")&&Ie.parent.is("element","codeBlock")){const{position:Ve}=c.split(c.createPositionBefore(Ie)),_e=Ve.nodeAfter;c.rename(_e,"paragraph"),c.removeAttribute("language",_e),c.remove(Ie)}c.rename(q,"paragraph"),c.removeAttribute("language",q)}}}class me extends m.Command{constructor(c){super(c),this._indentSequence=c.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const c=this.editor.model;c.change(D=>{const W=A(c);for(const q of W){const ae=D.createText(this._indentSequence);c.insertContent(ae,q)}})}_checkEnabled(){return!!this._indentSequence&&H(this.editor.model.document.selection)}}class pe extends m.Command{constructor(c){super(c),this._indentSequence=c.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const c=this.editor.model;c.change(()=>{const D=A(c);for(const W of D){const q=ge(c,W,this._indentSequence);q&&c.deleteContent(c.createSelection(q))}})}_checkEnabled(){if(!this._indentSequence)return!1;const c=this.editor.model;return!!H(c.document.selection)&&A(c).some(D=>ge(c,D,this._indentSequence))}}function ge(x,c,D){const W=function(_e){let Me=_e.parent.getChild(_e.index);return Me&&!Me.is("element","softBreak")||(Me=_e.nodeBefore),!Me||Me.is("element","softBreak")?null:Me}(c);if(!W)return null;const q=d(W),ae=q.lastIndexOf(D);if(ae+D.length!==q.length||ae===-1)return null;const{parent:Ie,startOffset:Ve}=W;return x.createRange(x.createPositionAt(Ie,Ve+ae),x.createPositionAt(Ie,Ve+ae+D.length))}function X(x,c,D=!1){const W=a(c,"language","class"),q=a(c,"language","label");return(ae,Ie,Ve)=>{const{writer:_e,mapper:Me,consumable:Qe}=Ve;if(!Qe.consume(Ie.item,"insert"))return;const dt=Ie.item.getAttribute("language"),nt=Me.toViewPosition(x.createPositionBefore(Ie.item)),qe={};D&&(qe["data-language"]=q[dt],qe.spellcheck="false");const et=W[dt]?{class:W[dt]}:void 0,Nt=_e.createContainerElement("code",et),jt=_e.createContainerElement("pre",qe,Nt);_e.insert(nt,jt),Me.bindElements(Ie.item,Nt)}}const te="paragraph";class Z extends m.Plugin{static get pluginName(){return"CodeBlockEditing"}static get requires(){return[E.ShiftEnter]}constructor(c){super(c),c.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){const c=this.editor,D=c.model.schema,W=c.model,q=c.editing.view,ae=c.plugins.has("DocumentListEditing"),Ie=v(c);c.commands.add("codeBlock",new C(c)),c.commands.add("indentCodeBlock",new me(c)),c.commands.add("outdentCodeBlock",new pe(c)),this.listenTo(q.document,"tab",(Ve,_e)=>{const Me=_e.shiftKey?"outdentCodeBlock":"indentCodeBlock";c.commands.get(Me).isEnabled&&(c.execute(Me),_e.stopPropagation(),_e.preventDefault(),Ve.stop())},{context:"pre"}),D.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",isBlock:!0,allowAttributes:["language"]}),D.addAttributeCheck((Ve,_e)=>{const Me=Ve.endsWith("codeBlock")&&_e.startsWith("list")&&_e!=="list";return!(!ae||!Me)||!Ve.endsWith("codeBlock $text")&&void 0}),c.model.schema.addChildCheck((Ve,_e)=>{if(Ve.endsWith("codeBlock")&&_e.isObject)return!1}),c.editing.downcastDispatcher.on("insert:codeBlock",X(W,Ie,!0)),c.data.downcastDispatcher.on("insert:codeBlock",X(W,Ie)),c.data.downcastDispatcher.on("insert:softBreak",function(Ve){return(_e,Me,Qe)=>{if(Me.item.parent.name!=="codeBlock")return;const{writer:dt,mapper:nt,consumable:qe}=Qe;if(!qe.consume(Me.item,"insert"))return;const et=nt.toViewPosition(Ve.createPositionBefore(Me.item));dt.insert(et,dt.createText(`
`))}}(W),{priority:"high"}),c.data.upcastDispatcher.on("element:code",function(Ve,_e){const Me=a(_e,"class","language"),Qe=_e[0].language;return(dt,nt,qe)=>{const et=nt.viewItem,Nt=et.parent;if(!Nt||!Nt.is("element","pre")||nt.modelCursor.findAncestor("codeBlock"))return;const{consumable:jt,writer:yt}=qe;if(!jt.test(et,{name:!0}))return;const tt=yt.createElement("codeBlock"),Bt=[...et.getClassNames()];Bt.length||Bt.push("");for(const ye of Bt){const Ae=Me[ye];if(Ae){yt.setAttribute("language",Ae,tt);break}}tt.hasAttribute("language")||yt.setAttribute("language",Qe,tt),qe.convertChildren(et,tt),qe.safeInsert(tt,nt.modelCursor)&&(jt.consume(et,{name:!0}),qe.updateConversionResult(tt,nt))}}(0,Ie)),c.data.upcastDispatcher.on("text",(Ve,_e,{consumable:Me,writer:Qe})=>{let dt=_e.modelCursor;if(!Me.test(_e.viewItem)||!dt.findAncestor("codeBlock"))return;Me.consume(_e.viewItem);const nt=_e.viewItem.data.split(`
`).map(et=>Qe.createText(et)),qe=nt[nt.length-1];for(const et of nt)if(Qe.insert(et,dt),dt=dt.getShiftedBy(et.offsetSize),et!==qe){const Nt=Qe.createElement("softBreak");Qe.insert(Nt,dt),dt=Qe.createPositionAfter(Nt)}_e.modelRange=Qe.createRange(_e.modelCursor,dt),_e.modelCursor=dt}),c.data.upcastDispatcher.on("element:pre",(Ve,_e,{consumable:Me})=>{const Qe=_e.viewItem;if(Qe.findAncestor("pre"))return;const dt=Array.from(Qe.getChildren()),nt=dt.find(qe=>qe.is("element","code"));if(nt)for(const qe of dt)qe!==nt&&qe.is("$text")&&Me.consume(qe,{name:!0})},{priority:"high"}),this.listenTo(c.editing.view.document,"clipboardInput",(Ve,_e)=>{let Me=W.createRange(W.document.selection.anchor);if(_e.targetRanges&&(Me=c.editing.mapper.toModelRange(_e.targetRanges[0])),!Me.start.parent.is("element","codeBlock"))return;const Qe=_e.dataTransfer.getData("text/plain"),dt=new y.UpcastWriter(c.editing.view.document);_e.content=function(nt,qe){const et=nt.createDocumentFragment(),Nt=qe.split(`
`),jt=Nt.reduce((yt,tt,Bt)=>(yt.push(tt),Bt<Nt.length-1&&yt.push(nt.createElement("br")),yt),[]);return nt.appendChild(jt,et),et}(dt,Qe)}),this.listenTo(W,"getSelectedContent",(Ve,[_e])=>{const Me=_e.anchor;!_e.isCollapsed&&Me.parent.is("element","codeBlock")&&Me.hasSameParentAs(_e.focus)&&W.change(Qe=>{const dt=Ve.return;if(Me.parent.is("element")&&(dt.childCount>1||_e.containsEntireContent(Me.parent))){const qe=Qe.createElement("codeBlock",Me.parent.getAttributes());Qe.append(dt,qe);const et=Qe.createDocumentFragment();return Qe.append(qe,et),void(Ve.return=et)}const nt=dt.getChild(0);D.checkAttribute(nt,"code")&&Qe.setAttribute("code",!0,nt)})})}afterInit(){const c=this.editor,D=c.commands,W=D.get("indent"),q=D.get("outdent");W&&W.registerChildCommand(D.get("indentCodeBlock"),{priority:"highest"}),q&&q.registerChildCommand(D.get("outdentCodeBlock")),this.listenTo(c.editing.view.document,"enter",(ae,Ie)=>{c.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(function(Ve,_e){const Me=Ve.model,Qe=Me.document,dt=Ve.editing.view,nt=Qe.selection.getLastPosition(),qe=nt.nodeAfter;return _e||!Qe.selection.isCollapsed||!nt.isAtStart||!g(qe)?!1:(Ve.model.change(et=>{Ve.execute("enter");const Nt=Qe.selection.anchor.parent.previousSibling;et.rename(Nt,te),et.setSelection(Nt,"in"),Ve.model.schema.removeDisallowedAttributes([Nt],et),et.remove(qe)}),dt.scrollToTheSelection(),!0)}(c,Ie.isSoft)||function(Ve,_e){const Me=Ve.model,Qe=Me.document,dt=Ve.editing.view,nt=Qe.selection.getLastPosition(),qe=nt.nodeBefore;let et;if(_e||!Qe.selection.isCollapsed||!nt.isAtEnd||!qe||!qe.previousSibling)return!1;if(g(qe)&&g(qe.previousSibling))et=Me.createRange(Me.createPositionBefore(qe.previousSibling),Me.createPositionAfter(qe));else if(h(qe)&&g(qe.previousSibling)&&g(qe.previousSibling.previousSibling))et=Me.createRange(Me.createPositionBefore(qe.previousSibling.previousSibling),Me.createPositionAfter(qe));else{if(!(h(qe)&&g(qe.previousSibling)&&h(qe.previousSibling.previousSibling)&&qe.previousSibling.previousSibling&&g(qe.previousSibling.previousSibling.previousSibling)))return!1;et=Me.createRange(Me.createPositionBefore(qe.previousSibling.previousSibling.previousSibling),Me.createPositionAfter(qe))}return Ve.model.change(Nt=>{Nt.remove(et),Ve.execute("enter");const jt=Qe.selection.anchor.parent;Nt.rename(jt,te),Ve.model.schema.removeDisallowedAttributes([jt],Nt)}),dt.scrollToTheSelection(),!0}(c,Ie.isSoft)||function(Ve){const _e=Ve.model,Me=_e.document,Qe=Me.selection.getLastPosition(),dt=Qe.nodeBefore||Qe.textNode;let nt;dt&&dt.is("$text")&&(nt=d(dt)),Ve.model.change(qe=>{Ve.execute("shiftEnter"),nt&&qe.insertText(nt,Me.selection.anchor)})}(c),Ie.preventDefault(),ae.stop())},{context:"pre"})}}function h(x){return x&&x.is("$text")&&!x.data.match(/\S/)}function g(x){return x&&x.is("element","softBreak")}var r=Y(273),u=Y(62),w=Y.n(u),_=Y(67),T={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};w()(_.Z,T),_.Z.locals;class z extends m.Plugin{static get pluginName(){return"CodeBlockUI"}init(){const c=this.editor,D=c.t,W=c.ui.componentFactory,q=v(c);W.add("codeBlock",ae=>{const Ie=c.commands.get("codeBlock"),Ve=(0,r.createDropdown)(ae,r.SplitButtonView),_e=Ve.buttonView;return _e.set({label:D("Insert code block"),tooltip:!0,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',isToggleable:!0}),_e.bind("isOn").to(Ie,"value",Me=>!!Me),_e.on("execute",()=>{c.execute("codeBlock",{usePreviousLanguageChoice:!0}),c.editing.view.focus()}),Ve.on("execute",Me=>{c.execute("codeBlock",{language:Me.source._codeBlockLanguage,forceValue:!0}),c.editing.view.focus()}),Ve.class="ck-code-block-dropdown",Ve.bind("isEnabled").to(Ie),(0,r.addListToDropdown)(Ve,()=>this._getLanguageListItemDefinitions(q)),Ve})}_getLanguageListItemDefinitions(c){const D=this.editor.commands.get("codeBlock"),W=new f.Collection;for(const q of c){const ae={type:"button",model:new r.Model({_codeBlockLanguage:q.language,label:q.label,withText:!0})};ae.model.bind("isOn").to(D,"value",Ie=>Ie===ae.model._codeBlockLanguage),W.add(ae)}return W}}class L extends m.Plugin{static get requires(){return[Z,z]}static get pluginName(){return"CodeBlock"}}})(),(window.CKEditor5=window.CKEditor5||{}).codeBlock=Qt})()},46609:(ii,Gt,Y)=>{(function(Qt){const m=Qt.en=Qt.en||{};m.dictionary=Object.assign(m.dictionary||{},{Find:"Find","Find and replace":"Find and replace","Find in text\u2026":"Find in text\u2026","Match case":"Match case","Next result":"Next result","Previous result":"Previous result",Replace:"Replace","Replace all":"Replace all","Replace with\u2026":"Replace with\u2026","Show options":"Show options","Text to find must not be empty.":"Text to find must not be empty.","Tip: Find some text first in order to replace it.":"Tip: Find some text first in order to replace it.","Whole words only":"Whole words only"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var Qt={299:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck-find-result{background:var(--ck-color-highlight-background);color:var(--ck-color-text)}.ck-find-result_selected{background:#ff9633}",""]);const H=A},226:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-find-and-replace-form{max-width:100%}.ck.ck-find-and-replace-form fieldset{display:flex}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{position:absolute}.ck.ck-find-and-replace-form{width:400px}.ck.ck-find-and-replace-form:focus{outline:none}.ck.ck-find-and-replace-form fieldset{align-content:stretch;align-items:center;border:0;flex-direction:row;flex-wrap:nowrap;margin:0;padding:var(--ck-spacing-large)}.ck.ck-find-and-replace-form fieldset>.ck-button{flex:0 0 auto}[dir=ltr] .ck.ck-find-and-replace-form fieldset>*+*{margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form fieldset>*+*{margin-right:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form fieldset .ck-labeled-field-view{flex:1 1 auto}.ck.ck-find-and-replace-form fieldset .ck-labeled-field-view .ck-input{min-width:50px;width:100%}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find{align-items:flex-start}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button-find{font-weight:700}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button-find .ck-button__label{padding-left:var(--ck-spacing-large);padding-right:var(--ck-spacing-large)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button-prev>.ck-icon{transform:rotate(90deg)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button-next>.ck-icon{transform:rotate(-90deg)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{top:50%;transform:translateY(-50%)}[dir=ltr] .ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{left:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{color:var(--ck-color-base-border)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace{flex-wrap:wrap;justify-content:flex-end;margin-top:calc(var(--ck-spacing-large)*-1)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-labeled-field-view{margin-bottom:var(--ck-spacing-large)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-options-dropdown{margin-left:0;margin-right:auto}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-labeled-field-view,.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-labeled-field-view .ck-input{width:100%}@media screen and (max-width:600px){.ck.ck-find-and-replace-form{width:300px}.ck.ck-find-and-replace-form fieldset{flex-wrap:wrap}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-labeled-field-view{flex:1 0 auto;margin-bottom:var(--ck-spacing-standard);width:100%}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button{text-align:center}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button:first-of-type{flex:1 1 auto}[dir=ltr] .ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button:first-of-type{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button:first-of-type{margin-right:0}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button:first-of-type .ck-button__label{text-align:center;width:100%}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>:not(.ck-labeled-field-view){flex:1 1 auto}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-dropdown:not(.ck-labeled-field-view){flex-grow:0}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-button:not(.ck-labeled-field-view)>.ck-button__label{text-align:center;width:100%}}",""]);const H=A},764:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,'.ck-vertical-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck-vertical-form .ck-button:focus:after{display:none}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck.ck-responsive-form .ck-button:focus:after{display:none}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-width)*.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){border-radius:0;margin-top:var(--ck-spacing-large);padding:var(--ck-spacing-standard)}.ck.ck-responsive-form>.ck-button:last-child:not(:focus),.ck.ck-responsive-form>.ck-button:nth-last-child(2):not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}',""]);const H=A},609:f=>{"use strict";f.exports=function(v){var a=[];return a.toString=function(){return this.map(function(d){var A=v(d);return d[2]?"@media ".concat(d[2]," {").concat(A,"}"):A}).join("")},a.i=function(d,A,H){typeof d=="string"&&(d=[[null,d,""]]);var I={};if(H)for(var C=0;C<this.length;C++){var me=this[C][0];me!=null&&(I[me]=!0)}for(var pe=0;pe<d.length;pe++){var ge=[].concat(d[pe]);H&&I[ge[0]]||(A&&(ge[2]?ge[2]="".concat(A," and ").concat(ge[2]):ge[2]=A),a.push(ge))}},a}},62:(f,v,a)=>{"use strict";var d,A=function(){return d===void 0&&(d=Boolean(window&&document&&document.all&&!window.atob)),d},H=function(){var u={};return function(w){if(u[w]===void 0){var _=document.querySelector(w);if(window.HTMLIFrameElement&&_ instanceof window.HTMLIFrameElement)try{_=_.contentDocument.head}catch{_=null}u[w]=_}return u[w]}}(),I=[];function C(u){for(var w=-1,_=0;_<I.length;_++)if(I[_].identifier===u){w=_;break}return w}function me(u,w){for(var _={},T=[],z=0;z<u.length;z++){var L=u[z],x=w.base?L[0]+w.base:L[0],c=_[x]||0,D="".concat(x," ").concat(c);_[x]=c+1;var W=C(D),q={css:L[1],media:L[2],sourceMap:L[3]};W!==-1?(I[W].references++,I[W].updater(q)):I.push({identifier:D,updater:r(q,w),references:1}),T.push(D)}return T}function pe(u){var w=document.createElement("style"),_=u.attributes||{};if(_.nonce===void 0){var T=a.nc;T&&(_.nonce=T)}if(Object.keys(_).forEach(function(L){w.setAttribute(L,_[L])}),typeof u.insert=="function")u.insert(w);else{var z=H(u.insert||"head");if(!z)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");z.appendChild(w)}return w}var ge,X=(ge=[],function(u,w){return ge[u]=w,ge.filter(Boolean).join(`
`)});function te(u,w,_,T){var z=_?"":T.media?"@media ".concat(T.media," {").concat(T.css,"}"):T.css;if(u.styleSheet)u.styleSheet.cssText=X(w,z);else{var L=document.createTextNode(z),x=u.childNodes;x[w]&&u.removeChild(x[w]),x.length?u.insertBefore(L,x[w]):u.appendChild(L)}}function Z(u,w,_){var T=_.css,z=_.media,L=_.sourceMap;if(z?u.setAttribute("media",z):u.removeAttribute("media"),L&&typeof btoa<"u"&&(T+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(L))))," */")),u.styleSheet)u.styleSheet.cssText=T;else{for(;u.firstChild;)u.removeChild(u.firstChild);u.appendChild(document.createTextNode(T))}}var h=null,g=0;function r(u,w){var _,T,z;if(w.singleton){var L=g++;_=h||(h=pe(w)),T=te.bind(null,_,L,!1),z=te.bind(null,_,L,!0)}else _=pe(w),T=Z.bind(null,_,w),z=function(){(function(x){if(x.parentNode===null)return!1;x.parentNode.removeChild(x)})(_)};return T(u),function(x){if(x){if(x.css===u.css&&x.media===u.media&&x.sourceMap===u.sourceMap)return;T(u=x)}else z()}}f.exports=function(u,w){(w=w||{}).singleton||typeof w.singleton=="boolean"||(w.singleton=A());var _=me(u=u||[],w);return function(T){if(T=T||[],Object.prototype.toString.call(T)==="[object Array]"){for(var z=0;z<_.length;z++){var L=C(_[z]);I[L].references--}for(var x=me(T,w),c=0;c<_.length;c++){var D=C(_[c]);I[D].references===0&&(I[D].updater(),I.splice(D,1))}_=x}}}},704:(f,v,a)=>{f.exports=a(79)("./src/core.js")},273:(f,v,a)=>{f.exports=a(79)("./src/ui.js")},209:(f,v,a)=>{f.exports=a(79)("./src/utils.js")},79:f=>{"use strict";f.exports=CKEditor5.dll}},m={};function E(f){var v=m[f];if(v!==void 0)return v.exports;var a=m[f]={id:f,exports:{}};return Qt[f](a,a.exports,E),a.exports}E.n=f=>{var v=f&&f.__esModule?()=>f.default:()=>f;return E.d(v,{a:v}),v},E.d=(f,v)=>{for(var a in v)E.o(v,a)&&!E.o(f,a)&&Object.defineProperty(f,a,{enumerable:!0,get:v[a]})},E.o=(f,v)=>Object.prototype.hasOwnProperty.call(f,v),E.r=f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},E.nc=void 0;var y={};(()=>{"use strict";E.r(y),E.d(y,{FindAndReplace:()=>F,FindAndReplaceUtils:()=>kt});var f=E(704),v=E(273),a=E(209),d=E(62),A=E.n(d),H=E(764),I={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};A()(H.Z,I),H.Z.locals;var C=E(226),me={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};A()(C.Z,me),C.Z.locals;const pe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>';class ge extends v.View{constructor(N){super(N);const de=N.t;this.set("matchCount",0),this.set("highlightOffset",0),this.set("isDirty",!1),this.set("_areCommandsEnabled",{}),this.set("_resultsCounterText",""),this.set("_matchCase",!1),this.set("_wholeWordsOnly",!1),this.bind("_searchResultsFound").to(this,"matchCount",this,"isDirty",(Ce,$e)=>Ce>0&&!$e),this._findInputView=this._createInputField(de("Find in text\u2026")),this._replaceInputView=this._createInputField(de("Replace with\u2026")),this._findButtonView=this._createButton({label:de("Find"),class:"ck-button-find ck-button-action",withText:!0}),this._findPrevButtonView=this._createButton({label:de("Previous result"),class:"ck-button-prev",icon:pe,keystroke:"Shift+F3",tooltip:!0}),this._findNextButtonView=this._createButton({label:de("Next result"),class:"ck-button-next",icon:pe,keystroke:"F3",tooltip:!0}),this._optionsDropdown=this._createOptionsDropdown(),this._replaceButtonView=this._createButton({label:de("Replace"),class:"ck-button-replace",withText:!0}),this._replaceAllButtonView=this._createButton({label:de("Replace all"),class:"ck-button-replaceall",withText:!0}),this._findFieldsetView=this._createFindFieldset(),this._replaceFieldsetView=this._createReplaceFieldset(),this._focusTracker=new a.FocusTracker,this._keystrokes=new a.KeystrokeHandler,this._focusables=new v.ViewCollection,this._focusCycler=new v.FocusCycler({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this._keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-find-and-replace-form"],tabindex:"-1"},children:[new v.FormHeaderView(N,{label:de("Find and replace")}),this._findFieldsetView,this._replaceFieldsetView]}),(0,v.injectCssTransitionDisabler)(this)}render(){super.render(),(0,v.submitHandler)({view:this}),this._initFocusCycling(),this._initKeystrokeHandling()}destroy(){super.destroy(),this._focusTracker.destroy(),this._keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}reset(){this._findInputView.errorText=null,this.isDirty=!0}get _textToFind(){return this._findInputView.fieldView.element.value}get _textToReplace(){return this._replaceInputView.fieldView.element.value}_createFindFieldset(){const N=this.locale,de=new v.View(N);return this._findInputView.fieldView.on("input",()=>{this.isDirty=!0}),this._findButtonView.on("execute",this._onFindButtonExecute.bind(this)),this._findPrevButtonView.delegate("execute").to(this,"findPrevious"),this._findNextButtonView.delegate("execute").to(this,"findNext"),this._findPrevButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findPrevious:Ce})=>Ce),this._findNextButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findNext:Ce})=>Ce),this._injectFindResultsCounter(),de.setTemplate({tag:"fieldset",attributes:{class:["ck","ck-find-and-replace-form__find"]},children:[this._findInputView,this._findButtonView,this._findPrevButtonView,this._findNextButtonView]}),de}_onFindButtonExecute(){if(this._textToFind)this.isDirty=!1,this.fire("findNext",{searchText:this._textToFind,matchCase:this._matchCase,wholeWords:this._wholeWordsOnly});else{const N=this.t;this._findInputView.errorText=N("Text to find must not be empty.")}}_injectFindResultsCounter(){const N=this.locale,de=N.t,Ce=this.bindTemplate,$e=new v.View(N);this.bind("_resultsCounterText").to(this,"highlightOffset",this,"matchCount",(Tt,Ge)=>de("%0 of %1",[Tt,Ge])),$e.setTemplate({tag:"span",attributes:{class:["ck","ck-results-counter",Ce.if("isDirty","ck-hidden")]},children:[{text:Ce.to("_resultsCounterText")}]});const at=()=>{const Tt=this._findInputView.fieldView.element;if(!Tt||!(0,a.isVisible)(Tt))return;const Ge=new a.Rect($e.element).width,Ut=N.uiLanguageDirection==="ltr"?"paddingRight":"paddingLeft";Tt.style[Ut]=Ge?`calc( 2 * var(--ck-spacing-standard) + ${Ge}px )`:null};this.on("change:_resultsCounterText",at,{priority:"low"}),this.on("change:isDirty",at,{priority:"low"}),this._findInputView.template.children[0].children.push($e)}_createReplaceFieldset(){const N=this.locale,de=N.t,Ce=new v.View(N);return this._replaceButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:$e},at)=>$e&&at),this._replaceAllButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replaceAll:$e},at)=>$e&&at),this._replaceInputView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:$e},at)=>$e&&at),this._replaceInputView.bind("infoText").to(this._replaceInputView,"isEnabled",this._replaceInputView,"isFocused",($e,at)=>$e||!at?"":de("Tip: Find some text first in order to replace it.")),this._replaceButtonView.on("execute",()=>{this.fire("replace",{searchText:this._textToFind,replaceText:this._textToReplace})}),this._replaceAllButtonView.on("execute",()=>{this.fire("replaceAll",{searchText:this._textToFind,replaceText:this._textToReplace}),this.focus()}),Ce.setTemplate({tag:"fieldset",attributes:{class:["ck","ck-find-and-replace-form__replace"]},children:[this._replaceInputView,this._optionsDropdown,this._replaceButtonView,this._replaceAllButtonView]}),Ce}_createOptionsDropdown(){const N=this.locale,de=N.t,Ce=(0,v.createDropdown)(N);Ce.class="ck-options-dropdown",Ce.buttonView.set({withText:!1,label:de("Show options"),icon:f.icons.cog,tooltip:!0});const $e=new v.Model({withText:!0,label:de("Match case"),_isMatchCaseSwitch:!0}),at=new v.Model({withText:!0,label:de("Whole words only")});return $e.bind("isOn").to(this,"_matchCase"),at.bind("isOn").to(this,"_wholeWordsOnly"),Ce.on("execute",Tt=>{Tt.source._isMatchCaseSwitch?this._matchCase=!this._matchCase:this._wholeWordsOnly=!this._wholeWordsOnly,this.isDirty=!0}),(0,v.addListToDropdown)(Ce,new a.Collection([{type:"switchbutton",model:$e},{type:"switchbutton",model:at}])),Ce}_initFocusCycling(){[this._findInputView,this._findButtonView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView,this._optionsDropdown,this._replaceButtonView,this._replaceAllButtonView].forEach(N=>{this._focusables.add(N),this._focusTracker.add(N.element)})}_initKeystrokeHandling(){const N=Ce=>Ce.stopPropagation(),de=Ce=>{Ce.stopPropagation(),Ce.preventDefault()};this._keystrokes.listenTo(this.element),this._keystrokes.set("f3",Ce=>{de(Ce),this._findNextButtonView.fire("execute")}),this._keystrokes.set("shift+f3",Ce=>{de(Ce),this._findPrevButtonView.fire("execute")}),this._keystrokes.set("enter",Ce=>{const $e=Ce.target;$e===this._findInputView.fieldView.element?(this._areCommandsEnabled.findNext?this._findNextButtonView.fire("execute"):this._findButtonView.fire("execute"),de(Ce)):$e!==this._replaceInputView.fieldView.element||this.isDirty||(this._replaceButtonView.fire("execute"),de(Ce))}),this._keystrokes.set("shift+enter",Ce=>{Ce.target===this._findInputView.fieldView.element&&(this._areCommandsEnabled.findPrevious?this._findPrevButtonView.fire("execute"):this._findButtonView.fire("execute"),de(Ce))}),this._keystrokes.set("arrowright",N),this._keystrokes.set("arrowleft",N),this._keystrokes.set("arrowup",N),this._keystrokes.set("arrowdown",N),this.listenTo(this._findInputView.element,"selectstart",(Ce,$e)=>{$e.stopPropagation()},{priority:"high"}),this.listenTo(this._replaceInputView.element,"selectstart",(Ce,$e)=>{$e.stopPropagation()},{priority:"high"})}_createButton(N){const de=new v.ButtonView(this.locale);return de.set(N),de}_createInputField(N){const de=new v.LabeledFieldView(this.locale,v.createLabeledInputText);return de.label=N,de}}class X extends f.Plugin{static get pluginName(){return"FindAndReplaceUI"}constructor(N){super(N),this.formView=null}init(){const N=this.editor;N.ui.componentFactory.add("findAndReplace",de=>{const Ce=(0,v.createDropdown)(de);return Ce.bind("isEnabled").to(N.commands.get("find")),Ce.once("change:isOpen",()=>{this.formView=new ge(N.locale),Ce.panelView.children.add(this.formView),this._setupFormView(this.formView)}),Ce.on("change:isOpen",($e,at,Tt)=>{Tt?(this.formView.disableCssTransitions(),this.formView.reset(),this.formView._findInputView.fieldView.select(),this.formView.enableCssTransitions()):this.fire("searchReseted")},{priority:"low"}),this._setupDropdownButton(Ce),Ce})}_setupDropdownButton(N){const de=this.editor,Ce=de.locale.t;N.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286l-3.857-4.596z"/><path d="M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306zm-3.4-5.715c.562.305.742 1.106.354 1.494-.388.388-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.469 6.469 0 0 1 3.1.784z"/><path d="M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0zm11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0z"/></svg>',label:Ce("Find and replace"),keystroke:"CTRL+F",tooltip:!0}),de.keystrokes.set("Ctrl+F",($e,at)=>{N.isEnabled&&(N.isOpen=!0,at())})}_setupFormView(N){const de=this.editor.commands,Ce=this.editor.plugins.get("FindAndReplaceEditing").state,$e={before:-1,same:0,after:1};N.bind("highlightOffset").to(Ce,"highlightedResult",at=>at?Array.from(Ce.results).sort((Tt,Ge)=>$e[Tt.marker.getStart().compareWith(Ge.marker.getStart())]).indexOf(at)+1:0),N.listenTo(Ce.results,"change",()=>{N.matchCount=Ce.results.length}),N.bind("_areCommandsEnabled").to(de.get("findNext"),"isEnabled",de.get("findPrevious"),"isEnabled",de.get("replace"),"isEnabled",de.get("replaceAll"),"isEnabled",(at,Tt,Ge,Ut)=>({findNext:at,findPrevious:Tt,replace:Ge,replaceAll:Ut})),N.delegate("findNext","findPrevious","replace","replaceAll").to(this),N.on("change:isDirty",(at,Tt,Ge)=>{Ge&&this.fire("searchReseted")})}}class te extends f.Command{constructor(N,de){super(N),this.isEnabled=!0,this.affectsData=!1,this._state=de}execute(N,{matchCase:de,wholeWords:Ce}={}){const{editor:$e}=this,{model:at}=$e,Tt=$e.plugins.get("FindAndReplaceUtils");let Ge;typeof N=="string"?(Ge=Tt.findByTextCallback(N,{matchCase:de,wholeWords:Ce}),this._state.searchText=N):Ge=N;const Ut=at.document.getRootNames().reduce((ci,yi)=>Tt.updateFindResultFromRange(at.createRangeIn(at.document.getRoot(yi)),at,Ge,ci),null);return this._state.clear(at),this._state.results.addMany(Array.from(Ut)),this._state.highlightedResult=Ut.get(0),typeof N=="string"&&(this._state.searchText=N),this._state.matchCase=!!de,this._state.matchWholeWords=!!Ce,{results:Ut,findCallback:Ge}}}class Z extends f.Command{constructor(N,de){super(N),this.isEnabled=!0,this._state=de}execute(N,de){const{model:Ce}=this.editor;Ce.change($e=>{const at=de.marker.getRange();if(at.root.rootName==="$graveyard")return void this._state.results.remove(de);let Tt={};for(const Ge of at.getItems())if(Ge.is("$text")||Ge.is("$textProxy")){Tt=Ge.getAttributes();break}Ce.insertContent($e.createText(N,Tt),at),this._state.results.has(de)&&this._state.results.remove(de)})}}class h extends Z{execute(N,de){const{editor:Ce}=this,{model:$e}=Ce,at=Ce.plugins.get("FindAndReplaceUtils"),Tt=de instanceof a.Collection?de:$e.document.getRootNames().reduce((Ge,Ut)=>at.updateFindResultFromRange($e.createRangeIn($e.document.getRoot(Ut)),$e,at.findByTextCallback(de,this._state),Ge),null);Tt.length&&$e.change(()=>{[...Tt].forEach(Ge=>{super.execute(N,Ge)})})}}class g extends f.Command{constructor(N,de){super(N),this.affectsData=!1,this._state=de,this.isEnabled=!1,this.listenTo(this._state.results,"change",()=>{this.isEnabled=this._state.results.length>1})}refresh(){this.isEnabled=this._state.results.length>1}execute(){const N=this._state.results,de=N.getIndex(this._state.highlightedResult),Ce=de+1>=N.length?0:de+1;this._state.highlightedResult=this._state.results.get(Ce)}}class r extends g{execute(){const N=this._state.results.getIndex(this._state.highlightedResult),de=N-1<0?this._state.results.length-1:N-1;this._state.highlightedResult=this._state.results.get(de)}}class u{constructor(N){this.set("results",new a.Collection),this.set("highlightedResult",null),this.set("searchText",""),this.set("replaceText",""),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.results.on("change",(de,{removed:Ce,index:$e})=>{if((Ce=Array.from(Ce)).length){let at=!1;if(N.change(Tt=>{for(const Ge of Ce)this.highlightedResult===Ge&&(at=!0),N.markers.has(Ge.marker.name)&&Tt.removeMarker(Ge.marker)}),at){const Tt=$e>=this.results.length?0:$e;this.highlightedResult=this.results.get(Tt)}}})}clear(N){this.searchText="",N.change(de=>{if(this.highlightedResult){const Ce=this.highlightedResult.marker.name.split(":")[1],$e=N.markers.get(`findResultHighlighted:${Ce}`);$e&&de.removeMarker($e)}[...this.results].forEach(({marker:Ce})=>{de.removeMarker(Ce)})}),this.results.clear()}}(0,a.mix)(u,a.ObservableMixin);const w=typeof Y.g=="object"&&Y.g&&Y.g.Object===Object&&Y.g;var _=typeof self=="object"&&self&&self.Object===Object&&self;const T=w||_||Function("return this")(),z=T.Symbol,L=function(P,N){for(var de=-1,Ce=P==null?0:P.length,$e=Array(Ce);++de<Ce;)$e[de]=N(P[de],de,P);return $e},x=Array.isArray;var c=Object.prototype,D=c.hasOwnProperty,W=c.toString,q=z?z.toStringTag:void 0;const ae=function(P){var N=D.call(P,q),de=P[q];try{P[q]=void 0;var Ce=!0}catch{}var $e=W.call(P);return Ce&&(N?P[q]=de:delete P[q]),$e};var Ie=Object.prototype.toString;const Ve=function(P){return Ie.call(P)};var _e="[object Null]",Me="[object Undefined]",Qe=z?z.toStringTag:void 0;const dt=function(P){return P==null?P===void 0?Me:_e:Qe&&Qe in Object(P)?ae(P):Ve(P)},nt=function(P){return P!=null&&typeof P=="object"};var qe="[object Symbol]";const et=function(P){return typeof P=="symbol"||nt(P)&&dt(P)==qe};var Nt=1/0,jt=z?z.prototype:void 0,yt=jt?jt.toString:void 0;const tt=function P(N){if(typeof N=="string")return N;if(x(N))return L(N,P)+"";if(et(N))return yt?yt.call(N):"";var de=N+"";return de=="0"&&1/N==-Nt?"-0":de},Bt=function(P){return P==null?"":tt(P)};var ye=/[\\^$.*+?()[\]{}|]/g,Ae=RegExp(ye.source);const Ke=function(P){return(P=Bt(P))&&Ae.test(P)?P.replace(ye,"\\$&"):P};class kt extends f.Plugin{static get pluginName(){return"FindAndReplaceUtils"}updateFindResultFromRange(N,de,Ce,$e){const at=$e||new a.Collection;return de.change(Tt=>{[...N].forEach(({type:Ge,item:Ut})=>{if(Ge==="elementStart"&&de.schema.checkChild(Ut,"$text")){const ci=Ce({item:Ut,text:this.rangeToText(de.createRangeIn(Ut))});if(!ci)return;ci.forEach(yi=>{const Ni=`findResult:${(0,a.uid)()}`,Ii=Tt.addMarker(Ni,{usingOperation:!1,affectsData:!1,range:Tt.createRange(Tt.createPositionAt(Ut,yi.start),Tt.createPositionAt(Ut,yi.end))}),zi=function(Oi,Ui){const Wt=Oi.find(({marker:we})=>Ui.getStart().isBefore(we.getStart()));return Wt?Oi.getIndex(Wt):Oi.length}(at,Ii);at.add({id:Ni,label:yi.label,marker:Ii},zi)})}})}),at}rangeToText(N){return Array.from(N.getItems()).reduce((de,Ce)=>Ce.is("text")||Ce.is("textProxy")?de+Ce.data:`${de}
`,"")}findByTextCallback(N,de){let Ce="gu";de.matchCase||(Ce+="i");let $e=`(${Ke(N)})`;if(de.wholeWords){const Tt="[^a-zA-Z\xC0-\u024F\u1E00-\u1EFF]";new RegExp("^"+Tt).test(N)||($e=`(^|${Tt}|_)${$e}`),new RegExp(Tt+"$").test(N)||($e=`${$e}(?=_|${Tt}|$)`)}const at=new RegExp($e,Ce);return function({text:Tt}){return[...Tt.matchAll(at)].map(It)}}}function It(P){const N=P.length-1;let de=P.index;return P.length===3&&(de+=P[1].length),{label:P[N],start:de,end:de+P[N].length}}function Yt(P){return Object.prototype.toString.apply(P)=="[object Range]"}function zt(P){const N=Object.prototype.toString.apply(P);return N=="[object Window]"||N=="[object global]"}function ot(P){return Object.prototype.toString.call(P)=="[object Text]"}const Dt=["top","right","bottom","left","width","height"];class wt{constructor(N){const de=Yt(N);if(Object.defineProperty(this,"_source",{value:N._source||N,writable:!0,enumerable:!1}),xi(N)||de)if(de){const Ce=wt.getDomRangeRects(N);ni(this,wt.getBoundingRect(Ce))}else ni(this,N.getBoundingClientRect());else if(zt(N)){const{innerWidth:Ce,innerHeight:$e}=N;ni(this,{top:0,right:Ce,bottom:$e,left:0,width:Ce,height:$e})}else ni(this,N)}clone(){return new wt(this)}moveTo(N,de){return this.top=de,this.right=N+this.width,this.bottom=de+this.height,this.left=N,this}moveBy(N,de){return this.top+=de,this.right+=N,this.left+=N,this.bottom+=de,this}getIntersection(N){const de={top:Math.max(this.top,N.top),right:Math.min(this.right,N.right),bottom:Math.min(this.bottom,N.bottom),left:Math.max(this.left,N.left),width:0,height:0};return de.width=de.right-de.left,de.height=de.bottom-de.top,de.width<0||de.height<0?null:new wt(de)}getIntersectionArea(N){const de=this.getIntersection(N);return de?de.getArea():0}getArea(){return this.width*this.height}getVisible(){const N=this._source;let de=this.clone();if(!di(N)){let Ce=N.parentNode||N.commonAncestorContainer;for(;Ce&&!di(Ce);){const $e=new wt(Ce),at=de.getIntersection($e);if(!at)return null;at.getArea()<de.getArea()&&(de=at),Ce=Ce.parentNode}}return de}isEqual(N){for(const de of Dt)if(this[de]!==N[de])return!1;return!0}contains(N){const de=this.getIntersection(N);return!(!de||!de.isEqual(N))}excludeScrollbarsAndBorders(){const N=this._source;let de,Ce,$e;if(zt(N))de=N.innerWidth-N.document.documentElement.clientWidth,Ce=N.innerHeight-N.document.documentElement.clientHeight,$e=N.getComputedStyle(N.document.documentElement).direction;else{const at=function(Tt){const Ge=Tt.ownerDocument.defaultView.getComputedStyle(Tt);return{top:parseInt(Ge.borderTopWidth,10),right:parseInt(Ge.borderRightWidth,10),bottom:parseInt(Ge.borderBottomWidth,10),left:parseInt(Ge.borderLeftWidth,10)}}(N);de=N.offsetWidth-N.clientWidth-at.left-at.right,Ce=N.offsetHeight-N.clientHeight-at.top-at.bottom,$e=N.ownerDocument.defaultView.getComputedStyle(N).direction,this.left+=at.left,this.top+=at.top,this.right-=at.right,this.bottom-=at.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=de,$e==="ltr"?this.right-=de:this.left+=de,this.height-=Ce,this.bottom-=Ce,this}static getDomRangeRects(N){const de=[],Ce=Array.from(N.getClientRects());if(Ce.length)for(const $e of Ce)de.push(new wt($e));else{let $e=N.startContainer;ot($e)&&($e=$e.parentNode);const at=new wt($e.getBoundingClientRect());at.right=at.left,at.width=0,de.push(at)}return de}static getBoundingRect(N){const de={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let Ce=0;for(const $e of N)Ce++,de.left=Math.min(de.left,$e.left),de.top=Math.min(de.top,$e.top),de.right=Math.max(de.right,$e.right),de.bottom=Math.max(de.bottom,$e.bottom);return Ce==0?null:(de.width=de.right-de.left,de.height=de.bottom-de.top,new wt(de))}}function ni(P,N){for(const de of Dt)P[de]=N[de]}function di(P){return!!xi(P)&&P===P.ownerDocument.body}function xi(P){return P!==null&&typeof P=="object"&&P.nodeType===1&&typeof P.getBoundingClientRect=="function"}function bt(P,N,de){const Ce=N.clone().moveBy(0,de),$e=N.clone().moveBy(0,-de),at=new wt(P).excludeScrollbarsAndBorders();if(![$e,Ce].every(Tt=>at.contains(Tt))){let{scrollX:Tt,scrollY:Ge}=P;Ze($e,at)?Ge-=at.top-N.top+de:je(Ce,at)&&(Ge+=N.bottom-at.bottom+de),pt(N,at)?Tt-=at.left-N.left+de:Ct(N,at)&&(Tt+=N.right-at.right+de),P.scrollTo(Tt,Ge)}}function fe(P,N){const de=St(P);let Ce,$e;for(;P!=de.document.body;)$e=N(),Ce=new wt(P).excludeScrollbarsAndBorders(),Ce.contains($e)||(Ze($e,Ce)?P.scrollTop-=Ce.top-$e.top:je($e,Ce)&&(P.scrollTop+=$e.bottom-Ce.bottom),pt($e,Ce)?P.scrollLeft-=Ce.left-$e.left:Ct($e,Ce)&&(P.scrollLeft+=$e.right-Ce.right)),P=P.parentNode}function je(P,N){return P.bottom>N.bottom}function Ze(P,N){return P.top<N.top}function pt(P,N){return P.left<N.left}function Ct(P,N){return P.right>N.right}function St(P){return Yt(P)?P.startContainer.ownerDocument.defaultView:P.ownerDocument.defaultView}function Xt(P){if(Yt(P)){let N=P.commonAncestorContainer;return ot(N)&&(N=N.parentNode),N}return P.parentNode}function Zt(P,N){const de=St(P),Ce=new wt(P);if(de===N)return Ce;{let $e=de;for(;$e!=N;){const at=$e.frameElement,Tt=new wt(at).excludeScrollbarsAndBorders();Ce.moveBy(Tt.left,Tt.top),$e=$e.parent}}return Ce}const oi=function(P){var N=typeof P;return P!=null&&(N=="object"||N=="function")},bi=function(){return T.Date.now()};var gi=/\s/;const Ti=function(P){for(var N=P.length;N--&&gi.test(P.charAt(N)););return N};var Mt=/^\s+/;const Ei=function(P){return P&&P.slice(0,Ti(P)+1).replace(Mt,"")};var Ri=NaN,Yi=/^[-+]0x[0-9a-f]+$/i,ji=/^0b[01]+$/i,Pi=/^0o[0-7]+$/i,qi=parseInt;const nn=function(P){if(typeof P=="number")return P;if(et(P))return Ri;if(oi(P)){var N=typeof P.valueOf=="function"?P.valueOf():P;P=oi(N)?N+"":N}if(typeof P!="string")return P===0?P:+P;P=Ei(P);var de=ji.test(P);return de||Pi.test(P)?qi(P.slice(2),de?2:8):Yi.test(P)?Ri:+P};var Li="Expected a function",dn=Math.max,pi=Math.min;const fi=function(P,N,de){var Ce,$e,at,Tt,Ge,Ut,ci=0,yi=!1,Ni=!1,Ii=!0;if(typeof P!="function")throw new TypeError(Li);function zi(He){var J=Ce,R=$e;return Ce=$e=void 0,ci=He,Tt=P.apply(R,J)}function Oi(He){var J=He-Ut;return Ut===void 0||J>=N||J<0||Ni&&He-ci>=at}function Ui(){var He=bi();if(Oi(He))return Wt(He);Ge=setTimeout(Ui,function(J){var R=N-(J-Ut);return Ni?pi(R,at-(J-ci)):R}(He))}function Wt(He){return Ge=void 0,Ii&&Ce?zi(He):(Ce=$e=void 0,Tt)}function we(){var He=bi(),J=Oi(He);if(Ce=arguments,$e=this,Ut=He,J){if(Ge===void 0)return function(R){return ci=R,Ge=setTimeout(Ui,N),yi?zi(R):Tt}(Ut);if(Ni)return clearTimeout(Ge),Ge=setTimeout(Ui,N),zi(Ut)}return Ge===void 0&&(Ge=setTimeout(Ui,N)),Tt}return N=nn(N)||0,oi(de)&&(yi=!!de.leading,at=(Ni="maxWait"in de)?dn(nn(de.maxWait)||0,N):at,Ii="trailing"in de?!!de.trailing:Ii),we.cancel=function(){Ge!==void 0&&clearTimeout(Ge),ci=0,Ce=Ut=$e=Ge=void 0},we.flush=function(){return Ge===void 0?Tt:Wt(bi())},we};var Ki=E(299),ke={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};A()(Ki.Z,ke),Ki.Z.locals;class V extends f.Plugin{static get requires(){return[kt]}static get pluginName(){return"FindAndReplaceEditing"}init(){this._activeResults=null,this.state=new u(this.editor.model),this._defineConverters(),this._defineCommands(),this.listenTo(this.state,"change:highlightedResult",(de,Ce,$e,at)=>{const{model:Tt}=this.editor;Tt.change(Ge=>{if(at){const Ut=at.marker.name.split(":")[1],ci=Tt.markers.get(`findResultHighlighted:${Ut}`);ci&&Ge.removeMarker(ci)}if($e){const Ut=$e.marker.name.split(":")[1];Ge.addMarker(`findResultHighlighted:${Ut}`,{usingOperation:!1,affectsData:!1,range:$e.marker.getRange()})}})});const N=fi(function(de,Ce,$e){if($e){const at=this.editor.editing.view.domConverter,Tt=this.editor.editing.mapper.toViewRange($e.marker.getRange());(function({target:Ge,viewportOffset:Ut=0}){const ci=St(Ge);let yi=ci,Ni=null;for(;yi;){let Ii;Ii=Xt(yi==ci?Ge:Ni),fe(Ii,()=>Zt(Ge,yi));const zi=Zt(Ge,yi);if(bt(yi,zi,Ut),yi.parent!=yi){if(Ni=yi.frameElement,yi=yi.parent,!Ni)return}else yi=null}})({target:at.viewRangeToDom(Tt),viewportOffset:40})}}.bind(this),32);this.listenTo(this.state,"change:highlightedResult",N,{priority:"low"}),this.listenTo(this.editor,"destroy",N.cancel)}find(N){const{editor:de}=this,{model:Ce}=de,{findCallback:$e,results:at}=de.execute("find",N);return this._activeResults=at,this.listenTo(Ce.document,"change:data",()=>function(Tt,Ge,Ut){const ci=new Set,yi=new Set,Ni=Ge.model;Ni.document.differ.getChanges().forEach(Ii=>{Ii.name==="$text"||Ni.schema.isInline(Ii.position.nodeAfter)?(ci.add(Ii.position.parent),[...Ni.markers.getMarkersAtPosition(Ii.position)].forEach(zi=>{yi.add(zi.name)})):Ii.type==="insert"&&ci.add(Ii.position.nodeAfter)}),Ni.document.differ.getChangedMarkers().forEach(({name:Ii,data:{newRange:zi}})=>{zi&&zi.start.root.rootName==="$graveyard"&&yi.add(Ii)}),ci.forEach(Ii=>{[...Ni.markers.getMarkersIntersectingRange(Ni.createRangeIn(Ii))].forEach(zi=>yi.add(zi.name))}),Ni.change(Ii=>{yi.forEach(zi=>{Tt.has(zi)&&Tt.remove(zi),Ii.removeMarker(zi)})}),ci.forEach(Ii=>{Ge.plugins.get("FindAndReplaceUtils").updateFindResultFromRange(Ni.createRangeOn(Ii),Ni,Ut,Tt)})}(this._activeResults,de,$e)),this._activeResults}stop(){this._activeResults&&(this.stopListening(this.editor.model.document),this.state.clear(this.editor.model),this._activeResults=null)}_defineCommands(){this.editor.commands.add("find",new te(this.editor,this.state)),this.editor.commands.add("findNext",new g(this.editor,this.state)),this.editor.commands.add("findPrevious",new r(this.editor,this.state)),this.editor.commands.add("replace",new Z(this.editor,this.state)),this.editor.commands.add("replaceAll",new h(this.editor,this.state))}_defineConverters(){const{editor:N}=this;N.conversion.for("editingDowncast").markerToHighlight({model:"findResult",view:({markerName:de})=>{const[,Ce]=de.split(":");return{name:"span",classes:["ck-find-result"],attributes:{"data-find-result":Ce}}}}),N.conversion.for("editingDowncast").markerToHighlight({model:"findResultHighlighted",view:({markerName:de})=>{const[,Ce]=de.split(":");return{name:"span",classes:["ck-find-result_selected"],attributes:{"data-find-result":Ce}}}})}}class F extends f.Plugin{static get requires(){return[V,X]}static get pluginName(){return"FindAndReplace"}init(){const N=this.editor.plugins.get("FindAndReplaceUI"),de=this.editor.plugins.get("FindAndReplaceEditing"),Ce=de.state;N.on("findNext",($e,at)=>{at?(Ce.searchText=at.searchText,this.editor.execute("find",at.searchText,at)):this.editor.execute("findNext")}),N.on("findPrevious",($e,at)=>{at&&Ce.searchText!==at.searchText?this.editor.execute("find",at.searchText):this.editor.execute("findPrevious")}),N.on("replace",($e,at)=>{Ce.searchText!==at.searchText&&this.editor.execute("find",at.searchText);const Tt=Ce.highlightedResult;Tt&&this.editor.execute("replace",at.replaceText,Tt)}),N.on("replaceAll",($e,at)=>{Ce.searchText!==at.searchText&&this.editor.execute("find",at.searchText),this.editor.execute("replaceAll",at.replaceText,Ce.results)}),N.on("searchReseted",()=>{Ce.clear(this.editor.model),de.stop()})}}})(),(window.CKEditor5=window.CKEditor5||{}).findAndReplace=y})()},29781:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{"Horizontal line":"Horizontal line"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={73:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck-editor__editable .ck-horizontal-line{display:flow-root}.ck-content hr{background:#dedede;border:0;height:4px;margin:15px 0}",""]);const a=v},609:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},62:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},995:(m,E,y)=>{m.exports=y(79)("./src/widget.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{HorizontalLine:()=>C,HorizontalLineEditing:()=>A,HorizontalLineUI:()=>I});var m=Y(704),E=Y(995);class y extends m.Command{refresh(){const pe=this.editor.model,ge=pe.schema,X=pe.document.selection;this.isEnabled=function(te,Z,h){const g=function(r,u){const w=(0,E.findOptimalInsertionRange)(r,u),_=w.start.parent;return _.isEmpty&&!_.is("element","$root")?_.parent:_}(te,h);return Z.checkChild(g,"horizontalLine")}(X,ge,pe)}execute(){const pe=this.editor.model;pe.change(ge=>{const X=ge.createElement("horizontalLine");pe.insertObject(X,null,null,{setSelection:"after"})})}}var f=Y(62),v=Y.n(f),a=Y(73),d={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};v()(a.Z,d),a.Z.locals;class A extends m.Plugin{static get pluginName(){return"HorizontalLineEditing"}init(){const pe=this.editor,ge=pe.model.schema,X=pe.t,te=pe.conversion;ge.register("horizontalLine",{inheritAllFrom:"$blockObject"}),te.for("dataDowncast").elementToElement({model:"horizontalLine",view:(Z,{writer:h})=>h.createEmptyElement("hr")}),te.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(Z,{writer:h})=>{const g=X("Horizontal line"),r=h.createContainerElement("div",null,h.createEmptyElement("hr"));return h.addClass("ck-horizontal-line",r),h.setCustomProperty("hr",!0,r),function(u,w,_){return w.setCustomProperty("horizontalLine",!0,u),(0,E.toWidget)(u,w,{label:_})}(r,h,g)}}),te.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),pe.commands.add("horizontalLine",new y(pe))}}var H=Y(273);class I extends m.Plugin{static get pluginName(){return"HorizontalLineUI"}init(){const pe=this.editor,ge=pe.t;pe.ui.componentFactory.add("horizontalLine",X=>{const te=pe.commands.get("horizontalLine"),Z=new H.ButtonView(X);return Z.set({label:ge("Horizontal line"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',tooltip:!0}),Z.bind("isEnabled").to(te,"isEnabled"),this.listenTo(Z,"execute",()=>{pe.execute("horizontalLine"),pe.editing.view.focus()}),Z})}}class C extends m.Plugin{static get requires(){return[A,I,E.Widget]}static get pluginName(){return"HorizontalLine"}}})(),(window.CKEditor5=window.CKEditor5||{}).horizontalLine=Qt})()},78590:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{"Edit source":"Edit source","Empty snippet content":"Empty snippet content","HTML snippet":"HTML snippet","Insert HTML":"Insert HTML","No preview available":"No preview available","Paste raw HTML here...":"Paste raw HTML here...","Save changes":"Save changes"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={600:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck-widget.raw-html-embed{display:flow-root;font-style:normal;margin:.9em auto;min-width:15em;position:relative}.ck-widget.raw-html-embed:before{position:absolute;z-index:1}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper{display:flex;flex-direction:column;position:absolute}.ck-widget.raw-html-embed .raw-html-embed__preview{display:flex;overflow:hidden;position:relative}.ck-widget.raw-html-embed .raw-html-embed__preview-content{border-collapse:separate;border-spacing:7px;display:table;margin:auto;position:relative;width:100%}.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder{align-items:center;bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0}:root{--ck-html-embed-content-width:calc(100% - var(--ck-icon-size)*1.5);--ck-html-embed-source-height:10em;--ck-html-embed-unfocused-outline-width:1px;--ck-html-embed-content-min-height:calc(var(--ck-icon-size) + var(--ck-spacing-standard));--ck-html-embed-source-disabled-background:var(--ck-color-base-foreground);--ck-html-embed-source-disabled-color:#737373}.ck-widget.raw-html-embed{background-color:var(--ck-color-base-foreground);font-size:var(--ck-font-size-base)}.ck-widget.raw-html-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.raw-html-embed[dir=ltr]{text-align:left}.ck-widget.raw-html-embed[dir=rtl]{text-align:right}.ck-widget.raw-html-embed:before{background:#999;border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);content:attr(data-html-embed-label);font-family:var(--ck-font-face);font-size:var(--ck-font-size-tiny);left:var(--ck-spacing-standard);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);top:calc(var(--ck-html-embed-unfocused-outline-width)*-1);transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck-widget.raw-html-embed[dir=rtl]:before{left:auto;right:var(--ck-spacing-standard)}.ck-widget.raw-html-embed[dir=ltr] .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck.ck-editor__editable.ck-blurred .ck-widget.raw-html-embed.ck-widget_selected:before{padding:var(--ck-spacing-tiny) var(--ck-spacing-small);top:0}.ck.ck-editor__editable:not(.ck-blurred) .ck-widget.raw-html-embed.ck-widget_selected:before{background:var(--ck-color-focus-border);padding:var(--ck-spacing-tiny) var(--ck-spacing-small);top:0}.ck.ck-editor__editable .ck-widget.raw-html-embed:not(.ck-widget_selected):hover:before{padding:var(--ck-spacing-tiny) var(--ck-spacing-small);top:0}.ck-widget.raw-html-embed .raw-html-embed__content-wrapper{padding:var(--ck-spacing-standard)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper{right:var(--ck-spacing-standard);top:var(--ck-spacing-standard)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__save-button{color:var(--ck-color-button-save)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__cancel-button{color:var(--ck-color-button-cancel)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button:not(:first-child){margin-top:var(--ck-spacing-small)}.ck-widget.raw-html-embed[dir=rtl] .raw-html-embed__buttons-wrapper{left:var(--ck-spacing-standard);right:auto}.ck-widget.raw-html-embed .raw-html-embed__source{box-sizing:border-box;direction:ltr;font-family:monospace;font-size:var(--ck-font-size-base);height:var(--ck-html-embed-source-height);min-width:0;padding:var(--ck-spacing-standard);resize:none;tab-size:4;text-align:left;white-space:pre-wrap;width:var(--ck-html-embed-content-width)}.ck-widget.raw-html-embed .raw-html-embed__source[disabled]{-webkit-text-fill-color:var(--ck-html-embed-source-disabled-color);background:var(--ck-html-embed-source-disabled-background);color:var(--ck-html-embed-source-disabled-color);opacity:1}.ck-widget.raw-html-embed .raw-html-embed__preview{min-height:var(--ck-html-embed-content-min-height);width:var(--ck-html-embed-content-width)}.ck-editor__editable:not(.ck-read-only) .ck-widget.raw-html-embed .raw-html-embed__preview{pointer-events:none}.ck-widget.raw-html-embed .raw-html-embed__preview-content{background-color:var(--ck-color-base-foreground);box-sizing:border-box}.ck-widget.raw-html-embed .raw-html-embed__preview-content>*{margin-left:auto;margin-right:auto}.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder{color:var(--ck-html-embed-source-disabled-color)}",""]);const a=v},609:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},62:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},995:(m,E,y)=>{m.exports=y(79)("./src/widget.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{HtmlEmbed:()=>ge,HtmlEmbedEditing:()=>C,HtmlEmbedUI:()=>pe});var m=Y(704),E=Y(995),y=Y(273),f=Y(209);class v extends m.Command{refresh(){const te=this.editor.model,Z=te.schema,h=te.document.selection,g=a(h);this.isEnabled=function(r,u,w){const _=function(T,z){const L=(0,E.findOptimalInsertionRange)(T,z),x=L.start.parent;return x.isEmpty&&!x.is("element","$root")?x.parent:x}(r,w);return u.checkChild(_,"rawHtml")}(h,Z,te),this.value=g?g.getAttribute("value")||"":null}execute(te){const Z=this.editor.model,h=Z.document.selection;Z.change(g=>{let r;this.value!==null?r=a(h):(r=g.createElement("rawHtml"),Z.insertObject(r,null,null,{setSelection:"on"})),g.setAttribute("value",te,r)})}}function a(X){const te=X.getSelectedElement();return te&&te.is("element","rawHtml")?te:null}var d=Y(62),A=Y.n(d),H=Y(600),I={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};A()(H.Z,I),H.Z.locals;class C extends m.Plugin{static get pluginName(){return"HtmlEmbedEditing"}constructor(te){super(te),te.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:Z=>((0,f.logWarning)("html-embed-provide-sanitize-function"),{html:Z,hasChanged:!1})}),this._widgetButtonViewReferences=new Set}init(){const te=this.editor;te.model.schema.register("rawHtml",{inheritAllFrom:"$blockObject",allowAttributes:["value"]}),te.commands.add("htmlEmbed",new v(te)),this._setupConversion()}_setupConversion(){const te=this.editor,Z=te.t,h=te.editing.view,g=this._widgetButtonViewReferences,r=te.config.get("htmlEmbed");function u({domElement:_,editor:T,state:z,props:L}){_.textContent="";const x=_.ownerDocument;let c;if(z.isEditable){const W={isDisabled:!1,placeholder:L.textareaPlaceholder};c=w({domDocument:x,state:z,props:W}),_.append(c)}else if(z.showPreviews){const W={sanitizeHtml:L.sanitizeHtml};_.append(function({domDocument:q,state:ae,props:Ie,editor:Ve}){const _e=Ie.sanitizeHtml(ae.getRawHtmlValue()),Me=ae.getRawHtmlValue().length>0?Z("No preview available"):Z("Empty snippet content"),Qe=(0,f.createElement)(q,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},Me),dt=(0,f.createElement)(q,"div",{class:"raw-html-embed__preview-content",dir:Ve.locale.contentLanguageDirection}),nt=q.createRange(),qe=nt.createContextualFragment(_e.html);return dt.appendChild(qe),(0,f.createElement)(q,"div",{class:"raw-html-embed__preview"},[Qe,dt])}({domDocument:x,state:z,props:W,editor:T}))}else{const W={isDisabled:!0,placeholder:L.textareaPlaceholder};_.append(w({domDocument:x,state:z,props:W}))}const D={onEditClick:L.onEditClick,onSaveClick:()=>{L.onSaveClick(c.value)},onCancelClick:L.onCancelClick};_.prepend(function({editor:W,domDocument:q,state:ae,props:Ie}){const Ve=(0,f.createElement)(q,"div",{class:"raw-html-embed__buttons-wrapper"});if(ae.isEditable){const _e=me(W,"save",Ie.onSaveClick),Me=me(W,"cancel",Ie.onCancelClick);Ve.append(_e.element,Me.element),g.add(_e).add(Me)}else{const _e=me(W,"edit",Ie.onEditClick);Ve.append(_e.element),g.add(_e)}return Ve}({editor:T,domDocument:x,state:z,props:D}))}function w({domDocument:_,state:T,props:z}){const L=(0,f.createElement)(_,"textarea",{placeholder:z.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return L.disabled=z.isDisabled,L.value=T.getRawHtmlValue(),L}this.editor.editing.view.on("render",()=>{for(const _ of g){if(_.element.isConnected)return;_.destroy(),g.delete(_)}},{priority:"lowest"}),te.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),te.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:(_,{writer:T})=>T.createElement("rawHtml",{value:_.getCustomProperty("$rawContent")})}),te.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:(_,{writer:T})=>T.createRawElement("div",{class:"raw-html-embed"},function(z){z.innerHTML=_.getAttribute("value")||""})}),te.conversion.for("editingDowncast").elementToStructure({model:{name:"rawHtml",attributes:["value"]},view:(_,{writer:T})=>{let z,L,x;const c=T.createRawElement("div",{class:"raw-html-embed__content-wrapper"},function(q){z=q,u({domElement:q,editor:te,state:L,props:x}),z.addEventListener("mousedown",()=>{if(L.isEditable){const ae=te.model;ae.document.selection.getSelectedElement()!==_&&ae.change(Ie=>Ie.setSelection(_,"on"))}},!0)}),D={makeEditable(){L=Object.assign({},L,{isEditable:!0}),u({domElement:z,editor:te,state:L,props:x}),h.change(q=>{q.setAttribute("data-cke-ignore-events","true",c)}),z.querySelector("textarea").focus()},save(q){q!==L.getRawHtmlValue()?(te.execute("htmlEmbed",q),te.editing.view.focus()):this.cancel()},cancel(){L=Object.assign({},L,{isEditable:!1}),u({domElement:z,editor:te,state:L,props:x}),te.editing.view.focus(),h.change(q=>{q.removeAttribute("data-cke-ignore-events",c)})}};L={showPreviews:r.showPreviews,isEditable:!1,getRawHtmlValue:()=>_.getAttribute("value")||""},x={sanitizeHtml:r.sanitizeHtml,textareaPlaceholder:Z("Paste raw HTML here..."),onEditClick(){D.makeEditable()},onSaveClick(q){D.save(q)},onCancelClick(){D.cancel()}};const W=T.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":Z("HTML snippet"),dir:te.locale.uiLanguageDirection},c);return T.setCustomProperty("rawHtmlApi",D,W),T.setCustomProperty("rawHtml",!0,W),(0,E.toWidget)(W,T,{widgetLabel:Z("HTML snippet"),hasSelectionHandle:!0})}})}}function me(X,te,Z){const h=X.locale.t,g=new y.ButtonView(X.locale),r=X.commands.get("htmlEmbed");return g.set({class:`raw-html-embed__${te}-button`,icon:m.icons.pencil,tooltip:!0,tooltipPosition:X.locale.uiLanguageDirection==="rtl"?"e":"w"}),g.render(),te==="edit"?(g.set({icon:m.icons.pencil,label:h("Edit source")}),g.bind("isEnabled").to(r)):te==="save"?(g.set({icon:m.icons.check,label:h("Save changes")}),g.bind("isEnabled").to(r)):g.set({icon:m.icons.cancel,label:h("Cancel")}),g.on("execute",Z),g}class pe extends m.Plugin{static get pluginName(){return"HtmlEmbedUI"}init(){const te=this.editor,Z=te.t;te.ui.componentFactory.add("htmlEmbed",h=>{const g=te.commands.get("htmlEmbed"),r=new y.ButtonView(h);return r.set({label:Z("Insert HTML"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',tooltip:!0}),r.bind("isEnabled").to(g,"isEnabled"),this.listenTo(r,"execute",()=>{te.execute("htmlEmbed"),te.editing.view.focus(),te.editing.view.document.selection.getSelectedElement().getCustomProperty("rawHtmlApi").makeEditable()}),r})}}class ge extends m.Plugin{static get requires(){return[C,pe,E.Widget]}static get pluginName(){return"HtmlEmbed"}}})(),(window.CKEditor5=window.CKEditor5||{}).htmlEmbed=Qt})()},54132:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{"Remove Format":"Remove Format"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{RemoveFormat:()=>A,RemoveFormatEditing:()=>d,RemoveFormatUI:()=>f});var m=Y(704),E=Y(273);const y="removeFormat";class f extends m.Plugin{static get pluginName(){return"RemoveFormatUI"}init(){const I=this.editor,C=I.t;I.ui.componentFactory.add(y,me=>{const pe=I.commands.get(y),ge=new E.ButtonView(me);return ge.set({label:C("Remove Format"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>',tooltip:!0}),ge.bind("isOn","isEnabled").to(pe,"value","isEnabled"),this.listenTo(ge,"execute",()=>{I.execute(y),I.editing.view.focus()}),ge})}}var v=Y(209);class a extends m.Command{refresh(){const I=this.editor.model;this.isEnabled=!!(0,v.first)(this._getFormattingItems(I.document.selection,I.schema))}execute(){const I=this.editor.model,C=I.schema;I.change(me=>{for(const pe of this._getFormattingItems(I.document.selection,C))if(pe.is("selection"))for(const ge of this._getFormattingAttributes(pe,C))me.removeSelectionAttribute(ge);else{const ge=me.createRangeOn(pe);for(const X of this._getFormattingAttributes(pe,C))me.removeAttribute(X,ge)}})}*_getFormattingItems(I,C){const me=pe=>!!(0,v.first)(this._getFormattingAttributes(pe,C));for(const pe of I.getRanges())for(const ge of pe.getItems())!C.isBlock(ge)&&me(ge)&&(yield ge);for(const pe of I.getSelectedBlocks())me(pe)&&(yield pe);me(I)&&(yield I)}*_getFormattingAttributes(I,C){for(const[me]of I.getAttributes()){const pe=C.getAttributeProperties(me);pe&&pe.isFormatting&&(yield me)}}}class d extends m.Plugin{static get pluginName(){return"RemoveFormatEditing"}init(){const I=this.editor;I.commands.add("removeFormat",new a(I))}}class A extends m.Plugin{static get requires(){return[d,f]}static get pluginName(){return"RemoveFormat"}}})(),(window.CKEditor5=window.CKEditor5||{}).removeFormat=Qt})()},51207:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{All:"All","Almost equal to":"Almost equal to",Angle:"Angle","Approximately equal to":"Approximately equal to",Arrows:"Arrows","Asterisk operator":"Asterisk operator","Austral sign":"Austral sign","back with leftwards arrow above":"back with leftwards arrow above","Bitcoin sign":"Bitcoin sign","Cedi sign":"Cedi sign","Cent sign":"Cent sign","Character categories":"Character categories","Colon sign":"Colon sign","Contains as member":"Contains as member","Copyright sign":"Copyright sign","Cruzeiro sign":"Cruzeiro sign",Currency:"Currency","Currency sign":"Currency sign","Degree sign":"Degree sign","Division sign":"Division sign","Dollar sign":"Dollar sign","Dong sign":"Dong sign","Double dagger":"Double dagger","Double exclamation mark":"Double exclamation mark","Double low-9 quotation mark":"Double low-9 quotation mark","Double question mark":"Double question mark","downwards arrow to bar":"downwards arrow to bar","downwards dashed arrow":"downwards dashed arrow","downwards double arrow":"downwards double arrow","downwards simple arrow":"downwards simple arrow","Drachma sign":"Drachma sign","Element of":"Element of","Em dash":"Em dash","Empty set":"Empty set","En dash":"En dash","end with leftwards arrow above":"end with leftwards arrow above","Euro sign":"Euro sign","Euro-currency sign":"Euro-currency sign","Exclamation question mark":"Exclamation question mark","For all":"For all","Fraction slash":"Fraction slash","French franc sign":"French franc sign","German penny sign":"German penny sign","Greater-than or equal to":"Greater-than or equal to","Greater-than sign":"Greater-than sign","Guarani sign":"Guarani sign","Horizontal ellipsis":"Horizontal ellipsis","Hryvnia sign":"Hryvnia sign","Identical to":"Identical to","Indian rupee sign":"Indian rupee sign",Infinity:"Infinity",Integral:"Integral",Intersection:"Intersection","Inverted exclamation mark":"Inverted exclamation mark","Inverted question mark":"Inverted question mark","Kip sign":"Kip sign",Latin:"Latin","Latin capital letter a with breve":"Latin capital letter a with breve","Latin capital letter a with macron":"Latin capital letter a with macron","Latin capital letter a with ogonek":"Latin capital letter a with ogonek","Latin capital letter c with acute":"Latin capital letter c with acute","Latin capital letter c with caron":"Latin capital letter c with caron","Latin capital letter c with circumflex":"Latin capital letter c with circumflex","Latin capital letter c with dot above":"Latin capital letter c with dot above","Latin capital letter d with caron":"Latin capital letter d with caron","Latin capital letter d with stroke":"Latin capital letter d with stroke","Latin capital letter e with breve":"Latin capital letter e with breve","Latin capital letter e with caron":"Latin capital letter e with caron","Latin capital letter e with dot above":"Latin capital letter e with dot above","Latin capital letter e with macron":"Latin capital letter e with macron","Latin capital letter e with ogonek":"Latin capital letter e with ogonek","Latin capital letter eng":"Latin capital letter eng","Latin capital letter g with breve":"Latin capital letter g with breve","Latin capital letter g with cedilla":"Latin capital letter g with cedilla","Latin capital letter g with circumflex":"Latin capital letter g with circumflex","Latin capital letter g with dot above":"Latin capital letter g with dot above","Latin capital letter h with circumflex":"Latin capital letter h with circumflex","Latin capital letter h with stroke":"Latin capital letter h with stroke","Latin capital letter i with breve":"Latin capital letter i with breve","Latin capital letter i with dot above":"Latin capital letter i with dot above","Latin capital letter i with macron":"Latin capital letter i with macron","Latin capital letter i with ogonek":"Latin capital letter i with ogonek","Latin capital letter i with tilde":"Latin capital letter i with tilde","Latin capital letter j with circumflex":"Latin capital letter j with circumflex","Latin capital letter k with cedilla":"Latin capital letter k with cedilla","Latin capital letter l with acute":"Latin capital letter l with acute","Latin capital letter l with caron":"Latin capital letter l with caron","Latin capital letter l with cedilla":"Latin capital letter l with cedilla","Latin capital letter l with middle dot":"Latin capital letter l with middle dot","Latin capital letter l with stroke":"Latin capital letter l with stroke","Latin capital letter n with acute":"Latin capital letter n with acute","Latin capital letter n with caron":"Latin capital letter n with caron","Latin capital letter n with cedilla":"Latin capital letter n with cedilla","Latin capital letter o with breve":"Latin capital letter o with breve","Latin capital letter o with double acute":"Latin capital letter o with double acute","Latin capital letter o with macron":"Latin capital letter o with macron","Latin capital letter r with acute":"Latin capital letter r with acute","Latin capital letter r with caron":"Latin capital letter r with caron","Latin capital letter r with cedilla":"Latin capital letter r with cedilla","Latin capital letter s with acute":"Latin capital letter s with acute","Latin capital letter s with caron":"Latin capital letter s with caron","Latin capital letter s with cedilla":"Latin capital letter s with cedilla","Latin capital letter s with circumflex":"Latin capital letter s with circumflex","Latin capital letter t with caron":"Latin capital letter t with caron","Latin capital letter t with cedilla":"Latin capital letter t with cedilla","Latin capital letter t with stroke":"Latin capital letter t with stroke","Latin capital letter u with breve":"Latin capital letter u with breve","Latin capital letter u with double acute":"Latin capital letter u with double acute","Latin capital letter u with macron":"Latin capital letter u with macron","Latin capital letter u with ogonek":"Latin capital letter u with ogonek","Latin capital letter u with ring above":"Latin capital letter u with ring above","Latin capital letter u with tilde":"Latin capital letter u with tilde","Latin capital letter w with circumflex":"Latin capital letter w with circumflex","Latin capital letter y with circumflex":"Latin capital letter y with circumflex","Latin capital letter y with diaeresis":"Latin capital letter y with diaeresis","Latin capital letter z with acute":"Latin capital letter z with acute","Latin capital letter z with caron":"Latin capital letter z with caron","Latin capital letter z with dot above":"Latin capital letter z with dot above","Latin capital ligature ij":"Latin capital ligature ij","Latin capital ligature oe":"Latin capital ligature oe","Latin small letter a with breve":"Latin small letter a with breve","Latin small letter a with macron":"Latin small letter a with macron","Latin small letter a with ogonek":"Latin small letter a with ogonek","Latin small letter c with acute":"Latin small letter c with acute","Latin small letter c with caron":"Latin small letter c with caron","Latin small letter c with circumflex":"Latin small letter c with circumflex","Latin small letter c with dot above":"Latin small letter c with dot above","Latin small letter d with caron":"Latin small letter d with caron","Latin small letter d with stroke":"Latin small letter d with stroke","Latin small letter dotless i":"Latin small letter dotless i","Latin small letter e with breve":"Latin small letter e with breve","Latin small letter e with caron":"Latin small letter e with caron","Latin small letter e with dot above":"Latin small letter e with dot above","Latin small letter e with macron":"Latin small letter e with macron","Latin small letter e with ogonek":"Latin small letter e with ogonek","Latin small letter eng":"Latin small letter eng","Latin small letter f with hook":"Latin small letter f with hook","Latin small letter g with breve":"Latin small letter g with breve","Latin small letter g with cedilla":"Latin small letter g with cedilla","Latin small letter g with circumflex":"Latin small letter g with circumflex","Latin small letter g with dot above":"Latin small letter g with dot above","Latin small letter h with circumflex":"Latin small letter h with circumflex","Latin small letter h with stroke":"Latin small letter h with stroke","Latin small letter i with breve":"Latin small letter i with breve","Latin small letter i with macron":"Latin small letter i with macron","Latin small letter i with ogonek":"Latin small letter i with ogonek","Latin small letter i with tilde":"Latin small letter i with tilde","Latin small letter j with circumflex":"Latin small letter j with circumflex","Latin small letter k with cedilla":"Latin small letter k with cedilla","Latin small letter kra":"Latin small letter kra","Latin small letter l with acute":"Latin small letter l with acute","Latin small letter l with caron":"Latin small letter l with caron","Latin small letter l with cedilla":"Latin small letter l with cedilla","Latin small letter l with middle dot":"Latin small letter l with middle dot","Latin small letter l with stroke":"Latin small letter l with stroke","Latin small letter long s":"Latin small letter long s","Latin small letter n preceded by apostrophe":"Latin small letter n preceded by apostrophe","Latin small letter n with acute":"Latin small letter n with acute","Latin small letter n with caron":"Latin small letter n with caron","Latin small letter n with cedilla":"Latin small letter n with cedilla","Latin small letter o with breve":"Latin small letter o with breve","Latin small letter o with double acute":"Latin small letter o with double acute","Latin small letter o with macron":"Latin small letter o with macron","Latin small letter r with acute":"Latin small letter r with acute","Latin small letter r with caron":"Latin small letter r with caron","Latin small letter r with cedilla":"Latin small letter r with cedilla","Latin small letter s with acute":"Latin small letter s with acute","Latin small letter s with caron":"Latin small letter s with caron","Latin small letter s with cedilla":"Latin small letter s with cedilla","Latin small letter s with circumflex":"Latin small letter s with circumflex","Latin small letter t with caron":"Latin small letter t with caron","Latin small letter t with cedilla":"Latin small letter t with cedilla","Latin small letter t with stroke":"Latin small letter t with stroke","Latin small letter u with breve":"Latin small letter u with breve","Latin small letter u with double acute":"Latin small letter u with double acute","Latin small letter u with macron":"Latin small letter u with macron","Latin small letter u with ogonek":"Latin small letter u with ogonek","Latin small letter u with ring above":"Latin small letter u with ring above","Latin small letter u with tilde":"Latin small letter u with tilde","Latin small letter w with circumflex":"Latin small letter w with circumflex","Latin small letter y with circumflex":"Latin small letter y with circumflex","Latin small letter z with acute":"Latin small letter z with acute","Latin small letter z with caron":"Latin small letter z with caron","Latin small letter z with dot above":"Latin small letter z with dot above","Latin small ligature ij":"Latin small ligature ij","Latin small ligature oe":"Latin small ligature oe","Left double quotation mark":"Left double quotation mark","Left single quotation mark":"Left single quotation mark","Left-pointing double angle quotation mark":"Left-pointing double angle quotation mark","leftwards arrow to bar":"leftwards arrow to bar","leftwards dashed arrow":"leftwards dashed arrow","leftwards double arrow":"leftwards double arrow","leftwards simple arrow":"leftwards simple arrow","Less-than or equal to":"Less-than or equal to","Less-than sign":"Less-than sign","Lira sign":"Lira sign","Livre tournois sign":"Livre tournois sign","Logical and":"Logical and","Logical or":"Logical or",Macron:"Macron","Manat sign":"Manat sign",Mathematical:"Mathematical","Mill sign":"Mill sign","Minus sign":"Minus sign","Multiplication sign":"Multiplication sign","N-ary product":"N-ary product","N-ary summation":"N-ary summation",Nabla:"Nabla","Naira sign":"Naira sign","New sheqel sign":"New sheqel sign","Nordic mark sign":"Nordic mark sign","Not an element of":"Not an element of","Not equal to":"Not equal to","Not sign":"Not sign","on with exclamation mark with left right arrow above":"on with exclamation mark with left right arrow above",Overline:"Overline","Paragraph sign":"Paragraph sign","Partial differential":"Partial differential","Per mille sign":"Per mille sign","Per ten thousand sign":"Per ten thousand sign","Peseta sign":"Peseta sign","Peso sign":"Peso sign","Plus-minus sign":"Plus-minus sign","Pound sign":"Pound sign","Proportional to":"Proportional to","Question exclamation mark":"Question exclamation mark","Registered sign":"Registered sign","Reversed paragraph sign":"Reversed paragraph sign","Right double quotation mark":"Right double quotation mark","Right single quotation mark":"Right single quotation mark","Right-pointing double angle quotation mark":"Right-pointing double angle quotation mark","rightwards arrow to bar":"rightwards arrow to bar","rightwards dashed arrow":"rightwards dashed arrow","rightwards double arrow":"rightwards double arrow","rightwards simple arrow":"rightwards simple arrow","Ruble sign":"Ruble sign","Rupee sign":"Rupee sign","Section sign":"Section sign","Single left-pointing angle quotation mark":"Single left-pointing angle quotation mark","Single low-9 quotation mark":"Single low-9 quotation mark","Single right-pointing angle quotation mark":"Single right-pointing angle quotation mark","soon with rightwards arrow above":"soon with rightwards arrow above","Special characters":"Special characters","Spesmilo sign":"Spesmilo sign","Square root":"Square root","Tenge sign":"Tenge sign",Text:"Text","There exists":"There exists","Tilde operator":"Tilde operator","top with upwards arrow above":"top with upwards arrow above","Trade mark sign":"Trade mark sign","Tugrik sign":"Tugrik sign","Turkish lira sign":"Turkish lira sign","Two dot leader":"Two dot leader",Union:"Union","up down arrow with base":"up down arrow with base","upwards arrow to bar":"upwards arrow to bar","upwards dashed arrow":"upwards dashed arrow","upwards double arrow":"upwards double arrow","upwards simple arrow":"upwards simple arrow","Vulgar fraction one half":"Vulgar fraction one half","Vulgar fraction one quarter":"Vulgar fraction one quarter","Vulgar fraction three quarters":"Vulgar fraction three quarters","Won sign":"Won sign","Yen sign":"Yen sign"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={395:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-character-grid{max-width:100%}.ck.ck-character-grid .ck-character-grid__tiles{display:grid}:root{--ck-character-grid-tile-size:24px}.ck.ck-character-grid{max-height:200px;overflow-x:hidden;overflow-y:auto;width:350px}@media screen and (max-width:600px){.ck.ck-character-grid{width:190px}}.ck.ck-character-grid .ck-character-grid__tiles{grid-gap:var(--ck-spacing-standard);grid-template-columns:repeat(10,1fr);margin:var(--ck-spacing-standard) var(--ck-spacing-large)}@media screen and (max-width:600px){.ck.ck-character-grid .ck-character-grid__tiles{grid-template-columns:repeat(5,1fr)}}.ck.ck-character-grid .ck-character-grid__tile{border:0;font-size:1.2em;height:var(--ck-character-grid-tile-size);min-height:var(--ck-character-grid-tile-size);min-width:var(--ck-character-grid-tile-size);padding:0;transition:box-shadow .2s ease;width:var(--ck-character-grid-tile-size)}.ck.ck-character-grid .ck-character-grid__tile:focus:not(.ck-disabled),.ck.ck-character-grid .ck-character-grid__tile:hover:not(.ck-disabled){border:0;box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-character-grid .ck-character-grid__tile .ck-button__label{line-height:var(--ck-character-grid-tile-size);text-align:center;width:100%}",""]);const a=v},198:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-character-info{border-top:1px solid var(--ck-color-base-border);display:flex;justify-content:space-between;padding:var(--ck-spacing-small) var(--ck-spacing-large)}.ck.ck-character-info>*{font-size:var(--ck-font-size-small);text-transform:uppercase}.ck.ck-character-info .ck-character-info__name{max-width:280px;overflow:hidden;text-overflow:ellipsis}.ck.ck-character-info .ck-character-info__code{opacity:.6}@media screen and (max-width:600px){.ck.ck-character-info{max-width:190px}}",""]);const a=v},454:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-special-characters-navigation>.ck-label{max-width:160px;overflow:hidden;text-overflow:ellipsis}.ck.ck-special-characters-navigation>.ck-dropdown .ck-dropdown__panel{max-height:250px;overflow-x:hidden;overflow-y:auto}@media screen and (max-width:600px){.ck.ck-special-characters-navigation{max-width:190px}.ck.ck-special-characters-navigation>.ck-form__header__label{overflow:hidden;text-overflow:ellipsis}}",""]);const a=v},609:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},62:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},181:(m,E,y)=>{m.exports=y(79)("./src/typing.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{SpecialCharacters:()=>g,SpecialCharactersArrows:()=>r,SpecialCharactersCurrency:()=>T,SpecialCharactersEssentials:()=>z,SpecialCharactersLatin:()=>_,SpecialCharactersMathematical:()=>w,SpecialCharactersText:()=>u});var m=Y(704),E=Y(181),y=Y(273),f=Y(209);class v extends y.FormHeaderView{constructor(x,c){super(x);const D=x.t;this.set("class","ck-special-characters-navigation"),this.groupDropdownView=this._createGroupDropdown(c),this.groupDropdownView.panelPosition=x.uiLanguageDirection==="rtl"?"se":"sw",this.label=D("Special characters"),this.children.add(this.groupDropdownView)}get currentGroupName(){return this.groupDropdownView.value}focus(){this.groupDropdownView.focus()}_createGroupDropdown(x){const c=this.locale,D=c.t,W=(0,y.createDropdown)(c),q=this._getCharacterGroupListItemDefinitions(W,x);return W.set("value",q.first.model.name),W.buttonView.bind("label").to(W,"value",ae=>x.get(ae)),W.buttonView.set({isOn:!1,withText:!0,tooltip:D("Character categories"),class:["ck-dropdown__button_label-width_auto"]}),W.on("execute",ae=>{W.value=ae.source.name}),W.delegate("execute").to(this),(0,y.addListToDropdown)(W,q),W}_getCharacterGroupListItemDefinitions(x,c){const D=new f.Collection;for(const[W,q]of c){const ae={type:"button",model:new y.Model({name:W,label:q,withText:!0})};ae.model.bind("isOn").to(x,"value",Ie=>Ie===ae.model.name),D.add(ae)}return D}}var a=Y(62),d=Y.n(a),A=Y(395),H={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};d()(A.Z,H),A.Z.locals;class I extends y.View{constructor(x){super(x),this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new f.FocusTracker,this.keystrokes=new f.KeystrokeHandler,(0,y.addKeyboardHandlingForGrid)({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>f.global.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}createTile(x,c){const D=new y.ButtonView(this.locale);return D.set({label:x,withText:!0,class:"ck-character-grid__tile"}),D.extendTemplate({attributes:{title:c},on:{mouseover:D.bindTemplate.to("mouseover"),focus:D.bindTemplate.to("focus")}}),D.on("mouseover",()=>{this.fire("tileHover",{name:c,character:x})}),D.on("focus",()=>{this.fire("tileFocus",{name:c,character:x})}),D.on("execute",()=>{this.fire("execute",{name:c,character:x})}),D}render(){super.render();for(const x of this.tiles)this.focusTracker.add(x.element);this.tiles.on("change",(x,{added:c,removed:D})=>{if(c.length>0)for(const W of c)this.focusTracker.add(W.element);if(D.length>0)for(const W of D)this.focusTracker.remove(W.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.get(0).focus()}}var C=Y(198),me={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};d()(C.Z,me),C.Z.locals;class pe extends y.View{constructor(x){super(x);const c=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",ge),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:c.to("name",D=>D||"\u200B")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:c.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function ge(L){return L===null?"":"U+"+("0000"+L.codePointAt(0).toString(16)).slice(-4)}class X extends y.View{constructor(x,c,D,W){super(x),this.items=this.createCollection(),this.focusTracker=new f.FocusTracker,this.keystrokes=new f.KeystrokeHandler,this._focusCycler=new y.FocusCycler({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.navigationView=c,this.gridView=D,this.infoView=W,this.setTemplate({tag:"div",children:[this.navigationView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.navigationView.groupDropdownView.buttonView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.navigationView.groupDropdownView.buttonView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.navigationView.focus()}}var te=Y(454),Z={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};d()(te.Z,Z),te.Z.locals;const h="All";class g extends m.Plugin{static get requires(){return[E.Typing]}static get pluginName(){return"SpecialCharacters"}constructor(x){super(x);const c=x.t;this._characters=new Map,this._groups=new Map,this._allSpecialCharactersGroupLabel=c("All")}init(){const x=this.editor,c=x.t,D=x.commands.get("input");x.ui.componentFactory.add("specialCharacters",W=>{const q=(0,y.createDropdown)(W);let ae;return q.buttonView.set({label:c("Special characters"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>',tooltip:!0}),q.bind("isEnabled").to(D),q.on("execute",(Ie,Ve)=>{x.execute("insertText",{text:Ve.character}),x.editing.view.focus()}),q.on("change:isOpen",()=>{if(!ae){ae=this._createDropdownPanelContent(W,q);const Ie=new X(W,ae.navigationView,ae.gridView,ae.infoView);q.panelView.children.add(Ie)}ae.infoView.set({character:null,name:null})}),q})}addItems(x,c,D={label:x}){if(x===h)throw new f.CKEditorError("special-character-invalid-group-name",null);const W=this._getGroup(x,D.label);for(const q of c)W.items.add(q.title),this._characters.set(q.title,q.character)}getGroups(){const x=Array.from(this._groups.keys()),c=this.editor.config.get("specialCharacters.order")||[],D=c.find(W=>!x.includes(W));if(D)throw new f.CKEditorError("special-character-invalid-order-group-name",null,{invalidGroup:D});return new Set([...c,...x])}getCharactersForGroup(x){if(x===h)return new Set(this._characters.keys());const c=this._groups.get(x);return c?c.items:void 0}getCharacter(x){return this._characters.get(x)}_getGroup(x,c){return this._groups.has(x)||this._groups.set(x,{items:new Set,label:c}),this._groups.get(x)}_updateGrid(x,c){c.tiles.clear();const D=this.getCharactersForGroup(x);for(const W of D){const q=this.getCharacter(W);c.tiles.add(c.createTile(q,W))}}_createDropdownPanelContent(x,c){const D=new Map([[h,this._allSpecialCharactersGroupLabel],...Array.from(this.getGroups()).map(Ie=>[Ie,this._groups.get(Ie).label])]),W=new v(x,D),q=new I(x),ae=new pe(x);return q.delegate("execute").to(c),q.on("tileHover",(Ie,Ve)=>{ae.set(Ve)}),q.on("tileFocus",(Ie,Ve)=>{ae.set(Ve)}),W.on("execute",()=>{this._updateGrid(W.currentGroupName,q)}),this._updateGrid(W.currentGroupName,q),{navigationView:W,gridView:q,infoView:ae}}}class r extends m.Plugin{static get pluginName(){return"SpecialCharactersArrows"}init(){const x=this.editor,c=x.t;x.plugins.get("SpecialCharacters").addItems("Arrows",[{title:c("leftwards simple arrow"),character:"\u2190"},{title:c("rightwards simple arrow"),character:"\u2192"},{title:c("upwards simple arrow"),character:"\u2191"},{title:c("downwards simple arrow"),character:"\u2193"},{title:c("leftwards double arrow"),character:"\u21D0"},{title:c("rightwards double arrow"),character:"\u21D2"},{title:c("upwards double arrow"),character:"\u21D1"},{title:c("downwards double arrow"),character:"\u21D3"},{title:c("leftwards dashed arrow"),character:"\u21E0"},{title:c("rightwards dashed arrow"),character:"\u21E2"},{title:c("upwards dashed arrow"),character:"\u21E1"},{title:c("downwards dashed arrow"),character:"\u21E3"},{title:c("leftwards arrow to bar"),character:"\u21E4"},{title:c("rightwards arrow to bar"),character:"\u21E5"},{title:c("upwards arrow to bar"),character:"\u2912"},{title:c("downwards arrow to bar"),character:"\u2913"},{title:c("up down arrow with base"),character:"\u21A8"},{title:c("back with leftwards arrow above"),character:"\u{1F519}"},{title:c("end with leftwards arrow above"),character:"\u{1F51A}"},{title:c("on with exclamation mark with left right arrow above"),character:"\u{1F51B}"},{title:c("soon with rightwards arrow above"),character:"\u{1F51C}"},{title:c("top with upwards arrow above"),character:"\u{1F51D}"}],{label:c("Arrows")})}}class u extends m.Plugin{static get pluginName(){return"SpecialCharactersText"}init(){const x=this.editor,c=x.t;x.plugins.get("SpecialCharacters").addItems("Text",[{character:"\u2039",title:c("Single left-pointing angle quotation mark")},{character:"\u203A",title:c("Single right-pointing angle quotation mark")},{character:"\xAB",title:c("Left-pointing double angle quotation mark")},{character:"\xBB",title:c("Right-pointing double angle quotation mark")},{character:"\u2018",title:c("Left single quotation mark")},{character:"\u2019",title:c("Right single quotation mark")},{character:"\u201C",title:c("Left double quotation mark")},{character:"\u201D",title:c("Right double quotation mark")},{character:"\u201A",title:c("Single low-9 quotation mark")},{character:"\u201E",title:c("Double low-9 quotation mark")},{character:"\xA1",title:c("Inverted exclamation mark")},{character:"\xBF",title:c("Inverted question mark")},{character:"\u2025",title:c("Two dot leader")},{character:"\u2026",title:c("Horizontal ellipsis")},{character:"\u2021",title:c("Double dagger")},{character:"\u2030",title:c("Per mille sign")},{character:"\u2031",title:c("Per ten thousand sign")},{character:"\u203C",title:c("Double exclamation mark")},{character:"\u2048",title:c("Question exclamation mark")},{character:"\u2049",title:c("Exclamation question mark")},{character:"\u2047",title:c("Double question mark")},{character:"\xA9",title:c("Copyright sign")},{character:"\xAE",title:c("Registered sign")},{character:"\u2122",title:c("Trade mark sign")},{character:"\xA7",title:c("Section sign")},{character:"\xB6",title:c("Paragraph sign")},{character:"\u204B",title:c("Reversed paragraph sign")}],{label:c("Text")})}}class w extends m.Plugin{static get pluginName(){return"SpecialCharactersMathematical"}init(){const x=this.editor,c=x.t;x.plugins.get("SpecialCharacters").addItems("Mathematical",[{character:"<",title:c("Less-than sign")},{character:">",title:c("Greater-than sign")},{character:"\u2264",title:c("Less-than or equal to")},{character:"\u2265",title:c("Greater-than or equal to")},{character:"\u2013",title:c("En dash")},{character:"\u2014",title:c("Em dash")},{character:"\xAF",title:c("Macron")},{character:"\u203E",title:c("Overline")},{character:"\xB0",title:c("Degree sign")},{character:"\u2212",title:c("Minus sign")},{character:"\xB1",title:c("Plus-minus sign")},{character:"\xF7",title:c("Division sign")},{character:"\u2044",title:c("Fraction slash")},{character:"\xD7",title:c("Multiplication sign")},{character:"\u0192",title:c("Latin small letter f with hook")},{character:"\u222B",title:c("Integral")},{character:"\u2211",title:c("N-ary summation")},{character:"\u221E",title:c("Infinity")},{character:"\u221A",title:c("Square root")},{character:"\u223C",title:c("Tilde operator")},{character:"\u2245",title:c("Approximately equal to")},{character:"\u2248",title:c("Almost equal to")},{character:"\u2260",title:c("Not equal to")},{character:"\u2261",title:c("Identical to")},{character:"\u2208",title:c("Element of")},{character:"\u2209",title:c("Not an element of")},{character:"\u220B",title:c("Contains as member")},{character:"\u220F",title:c("N-ary product")},{character:"\u2227",title:c("Logical and")},{character:"\u2228",title:c("Logical or")},{character:"\xAC",title:c("Not sign")},{character:"\u2229",title:c("Intersection")},{character:"\u222A",title:c("Union")},{character:"\u2202",title:c("Partial differential")},{character:"\u2200",title:c("For all")},{character:"\u2203",title:c("There exists")},{character:"\u2205",title:c("Empty set")},{character:"\u2207",title:c("Nabla")},{character:"\u2217",title:c("Asterisk operator")},{character:"\u221D",title:c("Proportional to")},{character:"\u2220",title:c("Angle")},{character:"\xBC",title:c("Vulgar fraction one quarter")},{character:"\xBD",title:c("Vulgar fraction one half")},{character:"\xBE",title:c("Vulgar fraction three quarters")}],{label:c("Mathematical")})}}class _ extends m.Plugin{static get pluginName(){return"SpecialCharactersLatin"}init(){const x=this.editor,c=x.t;x.plugins.get("SpecialCharacters").addItems("Latin",[{character:"\u0100",title:c("Latin capital letter a with macron")},{character:"\u0101",title:c("Latin small letter a with macron")},{character:"\u0102",title:c("Latin capital letter a with breve")},{character:"\u0103",title:c("Latin small letter a with breve")},{character:"\u0104",title:c("Latin capital letter a with ogonek")},{character:"\u0105",title:c("Latin small letter a with ogonek")},{character:"\u0106",title:c("Latin capital letter c with acute")},{character:"\u0107",title:c("Latin small letter c with acute")},{character:"\u0108",title:c("Latin capital letter c with circumflex")},{character:"\u0109",title:c("Latin small letter c with circumflex")},{character:"\u010A",title:c("Latin capital letter c with dot above")},{character:"\u010B",title:c("Latin small letter c with dot above")},{character:"\u010C",title:c("Latin capital letter c with caron")},{character:"\u010D",title:c("Latin small letter c with caron")},{character:"\u010E",title:c("Latin capital letter d with caron")},{character:"\u010F",title:c("Latin small letter d with caron")},{character:"\u0110",title:c("Latin capital letter d with stroke")},{character:"\u0111",title:c("Latin small letter d with stroke")},{character:"\u0112",title:c("Latin capital letter e with macron")},{character:"\u0113",title:c("Latin small letter e with macron")},{character:"\u0114",title:c("Latin capital letter e with breve")},{character:"\u0115",title:c("Latin small letter e with breve")},{character:"\u0116",title:c("Latin capital letter e with dot above")},{character:"\u0117",title:c("Latin small letter e with dot above")},{character:"\u0118",title:c("Latin capital letter e with ogonek")},{character:"\u0119",title:c("Latin small letter e with ogonek")},{character:"\u011A",title:c("Latin capital letter e with caron")},{character:"\u011B",title:c("Latin small letter e with caron")},{character:"\u011C",title:c("Latin capital letter g with circumflex")},{character:"\u011D",title:c("Latin small letter g with circumflex")},{character:"\u011E",title:c("Latin capital letter g with breve")},{character:"\u011F",title:c("Latin small letter g with breve")},{character:"\u0120",title:c("Latin capital letter g with dot above")},{character:"\u0121",title:c("Latin small letter g with dot above")},{character:"\u0122",title:c("Latin capital letter g with cedilla")},{character:"\u0123",title:c("Latin small letter g with cedilla")},{character:"\u0124",title:c("Latin capital letter h with circumflex")},{character:"\u0125",title:c("Latin small letter h with circumflex")},{character:"\u0126",title:c("Latin capital letter h with stroke")},{character:"\u0127",title:c("Latin small letter h with stroke")},{character:"\u0128",title:c("Latin capital letter i with tilde")},{character:"\u0129",title:c("Latin small letter i with tilde")},{character:"\u012A",title:c("Latin capital letter i with macron")},{character:"\u012B",title:c("Latin small letter i with macron")},{character:"\u012C",title:c("Latin capital letter i with breve")},{character:"\u012D",title:c("Latin small letter i with breve")},{character:"\u012E",title:c("Latin capital letter i with ogonek")},{character:"\u012F",title:c("Latin small letter i with ogonek")},{character:"\u0130",title:c("Latin capital letter i with dot above")},{character:"\u0131",title:c("Latin small letter dotless i")},{character:"\u0132",title:c("Latin capital ligature ij")},{character:"\u0133",title:c("Latin small ligature ij")},{character:"\u0134",title:c("Latin capital letter j with circumflex")},{character:"\u0135",title:c("Latin small letter j with circumflex")},{character:"\u0136",title:c("Latin capital letter k with cedilla")},{character:"\u0137",title:c("Latin small letter k with cedilla")},{character:"\u0138",title:c("Latin small letter kra")},{character:"\u0139",title:c("Latin capital letter l with acute")},{character:"\u013A",title:c("Latin small letter l with acute")},{character:"\u013B",title:c("Latin capital letter l with cedilla")},{character:"\u013C",title:c("Latin small letter l with cedilla")},{character:"\u013D",title:c("Latin capital letter l with caron")},{character:"\u013E",title:c("Latin small letter l with caron")},{character:"\u013F",title:c("Latin capital letter l with middle dot")},{character:"\u0140",title:c("Latin small letter l with middle dot")},{character:"\u0141",title:c("Latin capital letter l with stroke")},{character:"\u0142",title:c("Latin small letter l with stroke")},{character:"\u0143",title:c("Latin capital letter n with acute")},{character:"\u0144",title:c("Latin small letter n with acute")},{character:"\u0145",title:c("Latin capital letter n with cedilla")},{character:"\u0146",title:c("Latin small letter n with cedilla")},{character:"\u0147",title:c("Latin capital letter n with caron")},{character:"\u0148",title:c("Latin small letter n with caron")},{character:"\u0149",title:c("Latin small letter n preceded by apostrophe")},{character:"\u014A",title:c("Latin capital letter eng")},{character:"\u014B",title:c("Latin small letter eng")},{character:"\u014C",title:c("Latin capital letter o with macron")},{character:"\u014D",title:c("Latin small letter o with macron")},{character:"\u014E",title:c("Latin capital letter o with breve")},{character:"\u014F",title:c("Latin small letter o with breve")},{character:"\u0150",title:c("Latin capital letter o with double acute")},{character:"\u0151",title:c("Latin small letter o with double acute")},{character:"\u0152",title:c("Latin capital ligature oe")},{character:"\u0153",title:c("Latin small ligature oe")},{character:"\u0154",title:c("Latin capital letter r with acute")},{character:"\u0155",title:c("Latin small letter r with acute")},{character:"\u0156",title:c("Latin capital letter r with cedilla")},{character:"\u0157",title:c("Latin small letter r with cedilla")},{character:"\u0158",title:c("Latin capital letter r with caron")},{character:"\u0159",title:c("Latin small letter r with caron")},{character:"\u015A",title:c("Latin capital letter s with acute")},{character:"\u015B",title:c("Latin small letter s with acute")},{character:"\u015C",title:c("Latin capital letter s with circumflex")},{character:"\u015D",title:c("Latin small letter s with circumflex")},{character:"\u015E",title:c("Latin capital letter s with cedilla")},{character:"\u015F",title:c("Latin small letter s with cedilla")},{character:"\u0160",title:c("Latin capital letter s with caron")},{character:"\u0161",title:c("Latin small letter s with caron")},{character:"\u0162",title:c("Latin capital letter t with cedilla")},{character:"\u0163",title:c("Latin small letter t with cedilla")},{character:"\u0164",title:c("Latin capital letter t with caron")},{character:"\u0165",title:c("Latin small letter t with caron")},{character:"\u0166",title:c("Latin capital letter t with stroke")},{character:"\u0167",title:c("Latin small letter t with stroke")},{character:"\u0168",title:c("Latin capital letter u with tilde")},{character:"\u0169",title:c("Latin small letter u with tilde")},{character:"\u016A",title:c("Latin capital letter u with macron")},{character:"\u016B",title:c("Latin small letter u with macron")},{character:"\u016C",title:c("Latin capital letter u with breve")},{character:"\u016D",title:c("Latin small letter u with breve")},{character:"\u016E",title:c("Latin capital letter u with ring above")},{character:"\u016F",title:c("Latin small letter u with ring above")},{character:"\u0170",title:c("Latin capital letter u with double acute")},{character:"\u0171",title:c("Latin small letter u with double acute")},{character:"\u0172",title:c("Latin capital letter u with ogonek")},{character:"\u0173",title:c("Latin small letter u with ogonek")},{character:"\u0174",title:c("Latin capital letter w with circumflex")},{character:"\u0175",title:c("Latin small letter w with circumflex")},{character:"\u0176",title:c("Latin capital letter y with circumflex")},{character:"\u0177",title:c("Latin small letter y with circumflex")},{character:"\u0178",title:c("Latin capital letter y with diaeresis")},{character:"\u0179",title:c("Latin capital letter z with acute")},{character:"\u017A",title:c("Latin small letter z with acute")},{character:"\u017B",title:c("Latin capital letter z with dot above")},{character:"\u017C",title:c("Latin small letter z with dot above")},{character:"\u017D",title:c("Latin capital letter z with caron")},{character:"\u017E",title:c("Latin small letter z with caron")},{character:"\u017F",title:c("Latin small letter long s")}],{label:c("Latin")})}}class T extends m.Plugin{static get pluginName(){return"SpecialCharactersCurrency"}init(){const x=this.editor,c=x.t;x.plugins.get("SpecialCharacters").addItems("Currency",[{character:"$",title:c("Dollar sign")},{character:"\u20AC",title:c("Euro sign")},{character:"\xA5",title:c("Yen sign")},{character:"\xA3",title:c("Pound sign")},{character:"\xA2",title:c("Cent sign")},{character:"\u20A0",title:c("Euro-currency sign")},{character:"\u20A1",title:c("Colon sign")},{character:"\u20A2",title:c("Cruzeiro sign")},{character:"\u20A3",title:c("French franc sign")},{character:"\u20A4",title:c("Lira sign")},{character:"\xA4",title:c("Currency sign")},{character:"\u20BF",title:c("Bitcoin sign")},{character:"\u20A5",title:c("Mill sign")},{character:"\u20A6",title:c("Naira sign")},{character:"\u20A7",title:c("Peseta sign")},{character:"\u20A8",title:c("Rupee sign")},{character:"\u20A9",title:c("Won sign")},{character:"\u20AA",title:c("New sheqel sign")},{character:"\u20AB",title:c("Dong sign")},{character:"\u20AD",title:c("Kip sign")},{character:"\u20AE",title:c("Tugrik sign")},{character:"\u20AF",title:c("Drachma sign")},{character:"\u20B0",title:c("German penny sign")},{character:"\u20B1",title:c("Peso sign")},{character:"\u20B2",title:c("Guarani sign")},{character:"\u20B3",title:c("Austral sign")},{character:"\u20B4",title:c("Hryvnia sign")},{character:"\u20B5",title:c("Cedi sign")},{character:"\u20B6",title:c("Livre tournois sign")},{character:"\u20B7",title:c("Spesmilo sign")},{character:"\u20B8",title:c("Tenge sign")},{character:"\u20B9",title:c("Indian rupee sign")},{character:"\u20BA",title:c("Turkish lira sign")},{character:"\u20BB",title:c("Nordic mark sign")},{character:"\u20BC",title:c("Manat sign")},{character:"\u20BD",title:c("Ruble sign")}],{label:c("Currency")})}}class z extends m.Plugin{static get requires(){return[T,u,w,r,_]}}})(),(window.CKEditor5=window.CKEditor5||{}).specialCharacters=Qt})()},6653:(ii,Gt,Y)=>{(function(Qt){const m=Qt.en=Qt.en||{};m.dictionary=Object.assign(m.dictionary||{},{"Characters: %0":"Characters: %0","Words: %0":"Words: %0"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var Qt={704:(f,v,a)=>{f.exports=a(79)("./src/core.js")},273:(f,v,a)=>{f.exports=a(79)("./src/ui.js")},209:(f,v,a)=>{f.exports=a(79)("./src/utils.js")},79:f=>{"use strict";f.exports=CKEditor5.dll}},m={};function E(f){var v=m[f];if(v!==void 0)return v.exports;var a=m[f]={exports:{}};return Qt[f](a,a.exports,E),a.exports}E.d=(f,v)=>{for(var a in v)E.o(v,a)&&!E.o(f,a)&&Object.defineProperty(f,a,{enumerable:!0,get:v[a]})},E.o=(f,v)=>Object.prototype.hasOwnProperty.call(f,v),E.r=f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})};var y={};(()=>{"use strict";E.r(y),E.d(y,{WordCount:()=>zt});var f=E(704),v=E(273),a=E(209);function d(ot){if(ot.is("$text")||ot.is("$textProxy"))return ot.data;const Dt=ot;let wt="",ni=null;for(const di of Dt.getChildren()){const xi=d(di);ni&&ni.is("element")&&(wt+=`
`),wt+=xi,ni=di}return wt}const A=function(ot){var Dt=typeof ot;return ot!=null&&(Dt=="object"||Dt=="function")},H=typeof Y.g=="object"&&Y.g&&Y.g.Object===Object&&Y.g;var I=typeof self=="object"&&self&&self.Object===Object&&self;const C=H||I||Function("return this")(),me=function(){return C.Date.now()};var pe=/\s/;const ge=function(ot){for(var Dt=ot.length;Dt--&&pe.test(ot.charAt(Dt)););return Dt};var X=/^\s+/;const te=function(ot){return ot&&ot.slice(0,ge(ot)+1).replace(X,"")},Z=C.Symbol;var h=Object.prototype,g=h.hasOwnProperty,r=h.toString,u=Z?Z.toStringTag:void 0;const w=function(ot){var Dt=g.call(ot,u),wt=ot[u];try{ot[u]=void 0;var ni=!0}catch{}var di=r.call(ot);return ni&&(Dt?ot[u]=wt:delete ot[u]),di};var _=Object.prototype.toString;const T=function(ot){return _.call(ot)};var z="[object Null]",L="[object Undefined]",x=Z?Z.toStringTag:void 0;const c=function(ot){return ot==null?ot===void 0?L:z:x&&x in Object(ot)?w(ot):T(ot)},D=function(ot){return ot!=null&&typeof ot=="object"};var W="[object Symbol]";const q=function(ot){return typeof ot=="symbol"||D(ot)&&c(ot)==W};var ae=NaN,Ie=/^[-+]0x[0-9a-f]+$/i,Ve=/^0b[01]+$/i,_e=/^0o[0-7]+$/i,Me=parseInt;const Qe=function(ot){if(typeof ot=="number")return ot;if(q(ot))return ae;if(A(ot)){var Dt=typeof ot.valueOf=="function"?ot.valueOf():ot;ot=A(Dt)?Dt+"":Dt}if(typeof ot!="string")return ot===0?ot:+ot;ot=te(ot);var wt=Ve.test(ot);return wt||_e.test(ot)?Me(ot.slice(2),wt?2:8):Ie.test(ot)?ae:+ot};var dt="Expected a function",nt=Math.max,qe=Math.min;const et=function(ot,Dt,wt){var ni,di,xi,bt,fe,je,Ze=0,pt=!1,Ct=!1,St=!0;if(typeof ot!="function")throw new TypeError(dt);function Xt(Ti){var Mt=ni,Ei=di;return ni=di=void 0,Ze=Ti,bt=ot.apply(Ei,Mt)}function Zt(Ti){var Mt=Ti-je;return je===void 0||Mt>=Dt||Mt<0||Ct&&Ti-Ze>=xi}function oi(){var Ti=me();if(Zt(Ti))return bi(Ti);fe=setTimeout(oi,function(Mt){var Ei=Dt-(Mt-je);return Ct?qe(Ei,xi-(Mt-Ze)):Ei}(Ti))}function bi(Ti){return fe=void 0,St&&ni?Xt(Ti):(ni=di=void 0,bt)}function gi(){var Ti=me(),Mt=Zt(Ti);if(ni=arguments,di=this,je=Ti,Mt){if(fe===void 0)return function(Ei){return Ze=Ei,fe=setTimeout(oi,Dt),pt?Xt(Ei):bt}(je);if(Ct)return clearTimeout(fe),fe=setTimeout(oi,Dt),Xt(je)}return fe===void 0&&(fe=setTimeout(oi,Dt)),bt}return Dt=Qe(Dt)||0,A(wt)&&(pt=!!wt.leading,xi=(Ct="maxWait"in wt)?nt(Qe(wt.maxWait)||0,Dt):xi,St="trailing"in wt?!!wt.trailing:St),gi.cancel=function(){fe!==void 0&&clearTimeout(fe),Ze=0,ni=je=di=fe=void 0},gi.flush=function(){return fe===void 0?bt:bi(me())},gi};var Nt="Expected a function";const jt=function(ot,Dt,wt){var ni=!0,di=!0;if(typeof ot!="function")throw new TypeError(Nt);return A(wt)&&(ni="leading"in wt?!!wt.leading:ni,di="trailing"in wt?!!wt.trailing:di),et(ot,Dt,{leading:ni,maxWait:Dt,trailing:di})},yt=function(ot,Dt){return function(wt){return ot(Dt(wt))}}(Object.getPrototypeOf,Object);var tt="[object Object]",Bt=Function.prototype,ye=Object.prototype,Ae=Bt.toString,Ke=ye.hasOwnProperty,kt=Ae.call(Object);const It=function(ot){if(!D(ot)||c(ot)!=tt)return!1;var Dt=yt(ot);if(Dt===null)return!0;var wt=Ke.call(Dt,"constructor")&&Dt.constructor;return typeof wt=="function"&&wt instanceof wt&&Ae.call(wt)==kt},Yt=function(ot){return D(ot)&&ot.nodeType===1&&!It(ot)};class zt extends f.Plugin{constructor(Dt){super(Dt),this.set("characters",0),this.set("words",0),Object.defineProperties(this,{characters:{get(){return this.characters=this._getCharacters()}},words:{get(){return this.words=this._getWords()}}}),this.set("_wordsLabel",void 0),this.set("_charactersLabel",void 0),this._config=Dt.config.get("wordCount")||{},this._outputView=void 0,this._wordsMatchRegExp=a.env.features.isRegExpUnicodePropertySupported?new RegExp("([\\p{L}\\p{N}]+\\S?)+","gu"):/([a-zA-Z0-9-]+\S?)+/gu}static get pluginName(){return"WordCount"}init(){this.editor.model.document.on("change:data",jt(this._refreshStats.bind(this),250)),typeof this._config.onUpdate=="function"&&this.on("update",(Dt,wt)=>{this._config.onUpdate(wt)}),Yt(this._config.container)&&this._config.container.appendChild(this.wordCountContainer)}destroy(){this._outputView&&(this._outputView.element.remove(),this._outputView.destroy()),super.destroy()}get wordCountContainer(){const Dt=this.editor,wt=Dt.t,ni=Dt.config.get("wordCount.displayWords"),di=Dt.config.get("wordCount.displayCharacters"),xi=v.Template.bind(this,this),bt=[];return this._outputView||(this._outputView=new v.View,(ni||ni===void 0)&&(this.bind("_wordsLabel").to(this,"words",fe=>wt("Words: %0",fe)),bt.push({tag:"div",children:[{text:[xi.to("_wordsLabel")]}],attributes:{class:"ck-word-count__words"}})),(di||di===void 0)&&(this.bind("_charactersLabel").to(this,"characters",fe=>wt("Characters: %0",fe)),bt.push({tag:"div",children:[{text:[xi.to("_charactersLabel")]}],attributes:{class:"ck-word-count__characters"}})),this._outputView.setTemplate({tag:"div",attributes:{class:["ck","ck-word-count"]},children:bt}),this._outputView.render()),this._outputView.element}_getCharacters(){return d(this.editor.model.document.getRoot()).replace(/\n/g,"").length}_getWords(){return(d(this.editor.model.document.getRoot()).match(this._wordsMatchRegExp)||[]).length}_refreshStats(){const Dt=this.words=this._getWords(),wt=this.characters=this._getCharacters();this.fire("update",{words:Dt,characters:wt})}}})(),(window.CKEditor5=window.CKEditor5||{}).wordCount=y})()},47655:()=>{(()=>{var ii={98:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(645),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-editor__editable .ck-maximum-length-excess{background-color:rgba(204,51,51,.3)}",""]);const a=v},645:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},379:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{MaximumLength:()=>a});var m=Y(704),E=Y(379),y=Y.n(E),f=Y(98),v={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};y()(f.Z,v),f.Z.locals;class a extends m.Plugin{static get pluginName(){return"MaximumLength"}static get requires(){return["WordCount"]}init(){const A=this.editor,H=A.plugins.get("WordCount"),I=A.config.get("maximumLength.characters");let C=!1;A.model.document.registerPostFixer(me=>{const pe=H.characters,ge=this._calculateExcessRange(I,pe);ge?C?me.updateMarker("maximumLengthExcess",{range:ge,usingOperation:!1}):(me.addMarker("maximumLengthExcess",{range:ge,usingOperation:!1}),C=!0):C&&(me.removeMarker("maximumLengthExcess"),C=!1)}),A.conversion.for("editingDowncast").markerToHighlight({model:"maximumLengthExcess",view:{classes:"ck-maximum-length-excess"}})}_calculateExcessRange(A,H){if(A>H)return null;const I=this.editor,C=I.model.createRangeIn(I.model.document.getRoot()).getWalker({singleCharacters:!0,direction:"backward"});let me,pe,ge=H;for(const X of C)if(X.type=="text"&&(me||(me=X.previousPosition),ge--,ge<A))return pe=X.previousPosition,I.model.createRange(pe,me)}}})(),(window.CKEditor5=window.CKEditor5||{}).maximumLength=Qt})()},77868:(ii,Gt,Y)=>{ii=Y.nmd(ii),function(Qt){const m=Qt.en=Qt.en||{};m.dictionary=Object.assign(m.dictionary||{},{"%0 of %1":"%0 of %1",Aquamarine:"Aquamarine",Black:"Black",Blue:"Blue",Cancel:"Cancel","Cannot upload file:":"Cannot upload file:","Dim grey":"Dim grey","Dropdown toolbar":"Dropdown toolbar","Edit block":"Edit block","Editor block content toolbar":"Editor block content toolbar","Editor contextual toolbar":"Editor contextual toolbar","Editor editing area: %0":"Editor editing area: %0","Editor toolbar":"Editor toolbar",Green:"Green",Grey:"Grey","Insert paragraph after block":"Insert paragraph after block","Insert paragraph before block":"Insert paragraph before block","Light blue":"Light blue","Light green":"Light green","Light grey":"Light grey",Next:"Next",Orange:"Orange","Press Enter to type after or press Shift + Enter to type before the widget":"Press Enter to type after or press Shift + Enter to type before the widget",Previous:"Previous",Purple:"Purple",Red:"Red",Redo:"Redo","Remove color":"Remove color","Restore default":"Restore default","Rich Text Editor":"Rich Text Editor","Rich Text Editor. Editing area: %0":"Rich Text Editor. Editing area: %0",Save:"Save","Select all":"Select all","Show more items":"Show more items",Turquoise:"Turquoise",Undo:"Undo","Upload in progress":"Upload in progress",White:"White","Widget toolbar":"Widget toolbar",Yellow:"Yellow"})}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var Qt={"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-clipboard/theme/clipboard.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,'.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;pointer-events:none;position:relative}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{background:var(--ck-clipboard-drop-target-color);border:1px solid var(--ck-clipboard-drop-target-color);bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-.5);margin-left:-1px;top:calc(var(--ck-clipboard-drop-target-dot-height)*-.5)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{border-color:var(--ck-clipboard-drop-target-color) transparent transparent transparent;border-style:solid;border-width:calc(var(--ck-clipboard-drop-target-dot-height)) calc(var(--ck-clipboard-drop-target-dot-width)*.5) 0 calc(var(--ck-clipboard-drop-target-dot-width)*.5);content:"";display:block;height:0;left:50%;position:absolute;top:calc(var(--ck-clipboard-drop-target-dot-height)*-.5);transform:translateX(-50%);width:0}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}',""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-engine/theme/placeholder.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck .ck-placeholder,.ck.ck-placeholder{position:relative}.ck .ck-placeholder:before,.ck.ck-placeholder:before{content:attr(data-placeholder);left:0;pointer-events:none;position:absolute;right:0}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-reset_all .ck-placeholder{position:relative}.ck .ck-placeholder:before,.ck.ck-placeholder:before{color:var(--ck-color-engine-placeholder-text);cursor:text}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-engine/theme/renderer.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-editor__editable span[data-ck-unsafe-element]{display:none}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/button/button.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-button,a.ck.ck-button{align-items:center;display:inline-flex;justify-content:left;position:relative;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{-webkit-appearance:none;border:1px solid transparent;cursor:default;font-size:inherit;line-height:1;min-height:var(--ck-ui-component-min-height);min-width:var(--ck-ui-component-min-height);padding:var(--ck-spacing-tiny);text-align:center;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;vertical-align:middle;white-space:nowrap}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{color:inherit;cursor:inherit;font-size:inherit;font-weight:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:var(--ck-spacing-small);margin-right:calc(var(--ck-spacing-small)*-1)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{color:var(--ck-color-button-on-color)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/button/switchbutton.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:calc(1.07692em + 1px);--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - 2px);--ck-switch-button-inner-hover-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton,.ck.ck-button.ck-switchbutton.ck-on:active,.ck.ck-button.ck-switchbutton.ck-on:focus,.ck.ck-button.ck-switchbutton.ck-on:hover,.ck.ck-button.ck-switchbutton:active,.ck.ck-button.ck-switchbutton:focus,.ck.ck-button.ck-switchbutton:hover{background:transparent;color:inherit}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{background:var(--ck-color-switch-button-off-background);border:1px solid transparent;transition:background .4s ease,box-shadow .2s ease-in-out,outline .2s ease-in-out;width:var(--ck-switch-button-toggle-width)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{background:var(--ck-color-switch-button-inner-background);height:var(--ck-switch-button-toggle-inner-size);transition:all .3s ease;width:var(--ck-switch-button-toggle-inner-size)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:var(--ck-switch-button-inner-hover-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton:focus{border-color:transparent;box-shadow:none;outline:none}.ck.ck-button.ck-switchbutton:focus .ck-button__toggle{box-shadow:0 0 0 1px var(--ck-color-base-background),0 0 0 5px var(--ck-color-focus-outer-shadow);outline:var(--ck-focus-ring);outline-offset:1px}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var( --ck-switch-button-translation ))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var( --ck-switch-button-translation )*-1))}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/colorgrid/colorgrid.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#166fd4}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{border:0;height:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;width:var(--ck-color-grid-tile-size)}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{color:var(--ck-color-color-grid-check-icon);display:none}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/dropdown/dropdown.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,":root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-dropdown__panel{display:none;max-width:var(--ck-dropdown-max-width);position:absolute;z-index:var(--ck-z-modal)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{bottom:auto;top:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{margin-left:var(--ck-spacing-standard);right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{overflow:hidden;text-overflow:ellipsis;width:7em}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;box-shadow:var(--ck-drop-shadow),0 0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/dropdown/listdropdown.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/dropdown/splitbutton.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,'.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-bottom-right-radius:unset;border-top-right-radius:unset}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-bottom-left-radius:unset;border-top-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-bottom-left-radius:unset;border-top-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-bottom-right-radius:unset;border-top-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton>.ck-splitbutton__arrow:not(:focus){border-bottom-width:0;border-top-width:0}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{background-color:var(--ck-color-split-button-hover-border);content:"";height:100%;position:absolute;width:1px}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:focus:after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:focus:after{--ck-color-split-button-hover-border:var(--ck-color-focus-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}',""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/dropdown/toolbardropdown.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{max-width:var(--ck-toolbar-dropdown-max-width);width:max-content}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/editorui/editorui.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable.ck-rounded-corners:not(.ck-editor__nested-editable){border-radius:var(--ck-border-radius)}.ck.ck-editor__editable.ck-focused:not(.ck-editor__nested-editable){border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}.ck.ck-editor__editable_inline{border:1px solid transparent;overflow:auto;padding:0 var(--ck-spacing-standard)}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/formheader/formheader.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-form__header{align-items:center;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}:root{--ck-form-header-height:38px}.ck.ck-form__header{border-bottom:1px solid var(--ck-color-base-border);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);padding:var(--ck-spacing-small) var(--ck-spacing-large)}.ck.ck-form__header .ck-form__header__label{font-weight:700}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/icon/icon.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{font-size:.8333350694em;height:var(--ck-icon-size);width:var(--ck-icon-size);will-change:transform}.ck.ck-icon,.ck.ck-icon *{cursor:inherit}.ck.ck-icon.ck-icon_inherit-color,.ck.ck-icon.ck-icon_inherit-color *{color:inherit}.ck.ck-icon.ck-icon_inherit-color :not([fill]){fill:currentColor}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/input/input.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,":root{--ck-input-width:18em;--ck-input-text-width:var(--ck-input-width)}.ck.ck-input{border-radius:0}.ck-rounded-corners .ck.ck-input,.ck.ck-input.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);min-height:var(--ck-ui-component-min-height);min-width:var(--ck-input-width);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-input[readonly]{background:var(--ck-color-input-disabled-background);border:1px solid var(--ck-color-input-disabled-border);color:var(--ck-color-input-disabled-text)}.ck.ck-input[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input.ck-error{animation:ck-input-shake .3s ease both;border-color:var(--ck-color-input-error-border)}.ck.ck-input.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/label/label.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/labeledfield/labeledfieldview.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-labeled-field-label-default-position-x:var(--ck-spacing-medium);--ck-labeled-field-label-default-position-y:calc(var(--ck-font-size-base)*0.6);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{background:var(--ck-color-labeled-field-label-background);font-weight:400;line-height:normal;max-width:100%;overflow:hidden;padding:0 calc(var(--ck-font-size-tiny)*.5);pointer-events:none;text-overflow:ellipsis;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);transform-origin:0 0;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-labeled-field-label-default-position-x),var(--ck-labeled-field-label-default-position-y)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-labeled-field-label-default-position-x)*-1),var(--ck-labeled-field-label-default-position-y)) scale(1)}.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{background:transparent;max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/list/list.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-list{display:flex;flex-direction:column;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{background:var(--ck-color-list-background);list-style-type:none}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{border-radius:0;min-height:unset;padding:calc(var(--ck-line-height-base)*.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*.4*var(--ck-font-size-base));text-align:left;width:100%}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-switchbutton):not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{background:var(--ck-color-base-border);height:1px;width:100%}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/panel/balloonpanel.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-border-width:1px;--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{background:var(--ck-color-panel-background);border:var(--ck-balloon-border-width) solid var(--ck-color-panel-border);box-shadow:var(--ck-drop-shadow),0 0;min-height:15px}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{border-style:solid;height:0;width:0}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-width:0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_n]:before{border-color:transparent transparent var(--ck-color-panel-border) transparent;margin-top:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_n]:after{border-color:transparent transparent var(--ck-color-panel-background) transparent;margin-top:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-width:var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-color:var(--ck-color-panel-border) transparent transparent;filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow));margin-bottom:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_s]:after{border-color:var(--ck-color-panel-background) transparent transparent transparent;margin-bottom:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_e]:after,.ck.ck-balloon-panel[class*=arrow_e]:before{border-width:var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_e]:before{border-color:transparent transparent transparent var(--ck-color-panel-border);margin-right:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_e]:after{border-color:transparent transparent transparent var(--ck-color-panel-background);margin-right:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_w]:after,.ck.ck-balloon-panel[class*=arrow_w]:before{border-width:var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0}.ck.ck-balloon-panel[class*=arrow_w]:before{border-color:transparent var(--ck-color-panel-border) transparent transparent;margin-left:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_w]:after{border-color:transparent var(--ck-color-panel-background) transparent transparent;margin-left:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);right:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);margin-right:calc(var(--ck-balloon-arrow-half-width)*2);right:25%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{margin-right:calc(var(--ck-balloon-arrow-half-width)*2);right:25%;top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:before{margin-top:calc(var(--ck-balloon-arrow-half-width)*-1);right:calc(var(--ck-balloon-arrow-height)*-1);top:50%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:before{left:calc(var(--ck-balloon-arrow-height)*-1);margin-top:calc(var(--ck-balloon-arrow-half-width)*-1);top:50%}',""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/panel/balloonrotator.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck .ck-balloon-rotator__navigation{align-items:center;display:flex;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-left:var(--ck-spacing-small);margin-right:var(--ck-spacing-standard)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/panel/fakepanel.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);box-shadow:var(--ck-drop-shadow),0 0;height:100%;min-height:15px;width:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/panel/stickypanel.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{position:fixed;top:0;z-index:var(--ck-z-modal)}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{position:absolute;top:auto}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{border-top-left-radius:0;border-top-right-radius:0;border-width:0 1px 1px;box-shadow:var(--ck-drop-shadow),0 0}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/toolbar/blocktoolbar.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/toolbar/toolbar.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-toolbar{align-items:center;display:flex;flex-flow:row nowrap;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-toolbar>.ck-toolbar__items{align-items:center;display:flex;flex-flow:row wrap;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);border:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;background:var(--ck-color-toolbar-border);margin-bottom:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);min-width:1px;width:1px}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-bottom:var(--ck-spacing-small);margin-top:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{border-radius:0;margin:0;width:100%}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-dropdown__panel{min-width:auto}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-button>.ck-button__label{max-width:7em;width:auto}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-bottom-right-radius:0;border-top-right-radius:0}.ck.ck-toolbar.ck-toolbar_grouping[dir=rtl]>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-bottom-right-radius:0;border-top-right-radius:0}.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-toolbar.ck-toolbar_grouping[dir=ltr]>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/tooltip/tooltip.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-balloon-panel.ck-tooltip{--ck-balloon-border-width:0px;--ck-balloon-arrow-offset:0px;--ck-balloon-arrow-half-width:4px;--ck-balloon-arrow-height:4px;--ck-color-panel-background:var(--ck-color-tooltip-background);padding:0 var(--ck-spacing-medium);pointer-events:none;z-index:calc(var(--ck-z-modal) + 100)}.ck.ck-balloon-panel.ck-tooltip .ck-tooltip__text{color:var(--ck-color-tooltip-text);font-size:.9em;line-height:1.5}.ck.ck-balloon-panel.ck-tooltip{box-shadow:none}.ck.ck-balloon-panel.ck-tooltip:before{display:none}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/globals/globals.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck-hidden{display:none!important}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset,.ck.ck-reset_all{box-sizing:border-box;height:auto;position:static;width:auto}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999)}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#ccced1;--ck-color-base-action:#53a336;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#2977ff;--ck-color-base-active-focus:#0d65ff;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:218,81.8%,56.9%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#cae1fc;--ck-color-focus-disabled-shadow:rgba(119,186,248,.3);--ck-color-focus-error-shadow:rgba(255,64,31,.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,.15);--ck-color-shadow-drop-active:rgba(0,0,0,.2);--ck-color-shadow-inner:rgba(0,0,0,.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#f0f0f0;--ck-color-button-default-active-background:#f0f0f0;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#f0f7ff;--ck-color-button-on-hover-background:#dbecff;--ck-color-button-on-active-background:#dbecff;--ck-color-button-on-disabled-background:#f0f2f4;--ck-color-button-on-color:#2977ff;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#4d9d30;--ck-color-button-action-active-background:#4d9d30;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#939393;--ck-color-switch-button-off-hover-background:#7d7d7d;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#4d9d30;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:var(--ck-color-base-border);--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:var(--ck-color-base-border);--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-button-on-color);--ck-color-list-button-on-background-focus:var(--ck-color-button-on-color);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-background);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,176,255,.1);--ck-color-link-fake-selection:rgba(31,176,255,.3);--ck-color-highlight-background:#ff0;--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset,.ck.ck-reset_all{word-wrap:break-word;background:transparent;border:0;margin:0;padding:0;text-decoration:none;transition:none;vertical-align:middle}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset_all{border-collapse:collapse;color:var(--ck-color-text);cursor:auto;float:none;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);text-align:left;white-space:nowrap}.ck-reset_all .ck-rtl :not(.ck-reset_all-excluded *){text-align:right}.ck-reset_all iframe:not(.ck-reset_all-excluded *){vertical-align:inherit}.ck-reset_all textarea:not(.ck-reset_all-excluded *){white-space:pre-wrap}.ck-reset_all input[type=password]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text]:not(.ck-reset_all-excluded *),.ck-reset_all textarea:not(.ck-reset_all-excluded *){cursor:text}.ck-reset_all input[type=password][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all textarea[disabled]:not(.ck-reset_all-excluded *){cursor:default}.ck-reset_all fieldset:not(.ck-reset_all-excluded *){border:2px groove #dfdee3;padding:10px}.ck-reset_all button:not(.ck-reset_all-excluded *)::-moz-focus-inner{border:0;padding:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-widget/theme/widget.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px;--ck-resizer-tooltip-height:calc(var(--ck-spacing-small)*2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);color:var(--ck-color-resizer-tooltip-text);display:block;font-size:var(--ck-font-size-tiny);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height);padding:0 var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-above-center,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{left:var(--ck-resizer-tooltip-offset);top:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{right:var(--ck-resizer-tooltip-offset);top:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{left:50%;top:calc(var(--ck-resizer-tooltip-height)*-1);transform:translate(-50%)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-color:transparent;outline-style:solid;outline-width:var(--ck-widget-outline-thickness);transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{background-color:var(--ck-color-widget-editable-focus-background);border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{background-color:transparent;border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;box-sizing:border-box;left:calc(0px - var(--ck-widget-outline-thickness));opacity:0;padding:4px;top:0;transform:translateY(-100%);transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{color:var(--ck-color-widget-drag-handler-icon-color);height:var(--ck-widget-handler-icon-size);width:var(--ck-widget-handler-icon-size)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{background-color:var(--ck-color-widget-hover-border);opacity:1}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{background-color:var(--ck-color-focus-border);opacity:1}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-widget/theme/widgetresize.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;left:0;pointer-events:none;position:absolute;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{pointer-events:all;position:absolute}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{cursor:nesw-resize}:root{--ck-resizer-size:10px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-border-width:1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius);height:var(--ck-resizer-size);width:var(--ck-resizer-size)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{left:var(--ck-resizer-offset);top:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{right:var(--ck-resizer-offset);top:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}",""]);const H=A},"./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-widget/theme/widgettypearound.css":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/css-loader/dist/runtime/api.js"),A=a.n(d)()(function(I){return I[1]});A.push([f.id,'.ck .ck-widget .ck-widget__type-around__button{display:block;overflow:hidden;position:absolute;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{left:50%;position:absolute;top:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{left:min(10%,30px);top:calc(var(--ck-widget-outline-thickness)*-.5);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;left:1px;position:absolute;top:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;left:0;position:absolute;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:block;top:calc(var(--ck-widget-outline-thickness)*-1 - 1px)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button);border-radius:100px;height:var(--ck-widget-type-around-button-size);opacity:0;pointer-events:none;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);width:var(--ck-widget-type-around-button-size)}.ck .ck-widget .ck-widget__type-around__button svg{height:8px;margin-top:1px;transform:translate(-50%,-50%);transition:transform .5s ease;width:10px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3));border-radius:100px;height:calc(var(--ck-widget-type-around-button-size) - 2px);width:calc(var(--ck-widget-type-around-button-size) - 2px)}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;background:var(--ck-color-base-text);height:1px;outline:1px solid hsla(0,0%,100%,.5);pointer-events:none}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}',""]);const H=A},"./node_modules/css-loader/dist/runtime/api.js":f=>{"use strict";f.exports=function(v){var a=[];return a.toString=function(){return this.map(function(d){var A=v(d);return d[2]?"@media ".concat(d[2]," {").concat(A,"}"):A}).join("")},a.i=function(d,A,H){typeof d=="string"&&(d=[[null,d,""]]);var I={};if(H)for(var C=0;C<this.length;C++){var me=this[C][0];me!=null&&(I[me]=!0)}for(var pe=0;pe<d.length;pe++){var ge=[].concat(d[pe]);H&&I[ge[0]]||(A&&(ge[2]?ge[2]="".concat(A," and ").concat(ge[2]):ge[2]=A),a.push(ge))}},a}},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":(f,v,a)=>{"use strict";var d,A=function(){return d===void 0&&(d=Boolean(window&&document&&document.all&&!window.atob)),d},H=function(){var u={};return function(w){if(u[w]===void 0){var _=document.querySelector(w);if(window.HTMLIFrameElement&&_ instanceof window.HTMLIFrameElement)try{_=_.contentDocument.head}catch{_=null}u[w]=_}return u[w]}}(),I=[];function C(u){for(var w=-1,_=0;_<I.length;_++)if(I[_].identifier===u){w=_;break}return w}function me(u,w){for(var _={},T=[],z=0;z<u.length;z++){var L=u[z],x=w.base?L[0]+w.base:L[0],c=_[x]||0,D="".concat(x," ").concat(c);_[x]=c+1;var W=C(D),q={css:L[1],media:L[2],sourceMap:L[3]};W!==-1?(I[W].references++,I[W].updater(q)):I.push({identifier:D,updater:r(q,w),references:1}),T.push(D)}return T}function pe(u){var w=document.createElement("style"),_=u.attributes||{};if(_.nonce===void 0){var T=a.nc;T&&(_.nonce=T)}if(Object.keys(_).forEach(function(L){w.setAttribute(L,_[L])}),typeof u.insert=="function")u.insert(w);else{var z=H(u.insert||"head");if(!z)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");z.appendChild(w)}return w}var ge,X=(ge=[],function(u,w){return ge[u]=w,ge.filter(Boolean).join(`
`)});function te(u,w,_,T){var z=_?"":T.media?"@media ".concat(T.media," {").concat(T.css,"}"):T.css;if(u.styleSheet)u.styleSheet.cssText=X(w,z);else{var L=document.createTextNode(z),x=u.childNodes;x[w]&&u.removeChild(x[w]),x.length?u.insertBefore(L,x[w]):u.appendChild(L)}}function Z(u,w,_){var T=_.css,z=_.media,L=_.sourceMap;if(z?u.setAttribute("media",z):u.removeAttribute("media"),L&&typeof btoa<"u"&&(T+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(L))))," */")),u.styleSheet)u.styleSheet.cssText=T;else{for(;u.firstChild;)u.removeChild(u.firstChild);u.appendChild(document.createTextNode(T))}}var h=null,g=0;function r(u,w){var _,T,z;if(w.singleton){var L=g++;_=h||(h=pe(w)),T=te.bind(null,_,L,!1),z=te.bind(null,_,L,!0)}else _=pe(w),T=Z.bind(null,_,w),z=function(){(function(x){if(x.parentNode===null)return!1;x.parentNode.removeChild(x)})(_)};return T(u),function(x){if(x){if(x.css===u.css&&x.media===u.media&&x.sourceMap===u.sourceMap)return;T(u=x)}else z()}}f.exports=function(u,w){(w=w||{}).singleton||typeof w.singleton=="boolean"||(w.singleton=A());var _=me(u=u||[],w);return function(T){if(T=T||[],Object.prototype.toString.call(T)==="[object Array]"){for(var z=0;z<_.length;z++){var L=C(_[z]);I[L].references--}for(var x=me(T,w),c=0;c<_.length;c++){var D=C(_[c]);I[D].references===0&&(I[D].updater(),I.splice(D,1))}_=x}}}},"./packages/ckeditor5-core/src/index.ts":(f,v,a)=>{"use strict";a.d(v,{mY:()=>I,_y:()=>ge,eO:()=>X,W9:()=>w,ML:()=>g,xK:()=>_,AJ:()=>me,lR:()=>z,Sy:()=>A,P$:()=>u,ci:()=>L,Nu:()=>T});var d=a("./packages/ckeditor5-utils/src/index.ts");class A extends(0,d.Re)(){constructor(c){super(),this.editor=c,this.set("isEnabled",!0),this._disableStack=new Set}forceDisabled(c){this._disableStack.add(c),this._disableStack.size==1&&(this.on("set:isEnabled",H,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(c){this._disableStack.delete(c),this._disableStack.size==0&&(this.off("set:isEnabled",H),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function H(x){x.return=!1,x.stop()}class I extends(0,d.Re)(){constructor(c){super(),this.editor=c,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.on("execute",D=>{this.isEnabled||D.stop()},{priority:"high"}),this.listenTo(c,"change:isReadOnly",(D,W,q)=>{q&&this.affectsData?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")})}get affectsData(){return this._affectsData}set affectsData(c){this._affectsData=c}refresh(){this.isEnabled=!0}forceDisabled(c){this._disableStack.add(c),this._disableStack.size==1&&(this.on("set:isEnabled",C,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(c){this._disableStack.delete(c),this._disableStack.size==0&&(this.off("set:isEnabled",C),this.refresh())}execute(...c){}destroy(){this.stopListening()}}function C(x){x.return=!1,x.stop()}class me extends I{constructor(c){super(c),this._childCommandsDefinitions=[]}refresh(){}execute(...c){const D=this._getFirstEnabledCommand();return!!D&&D.execute(c)}registerChildCommand(c,D={}){(0,d.VG)(this._childCommandsDefinitions,{command:c,priority:D.priority||"normal"}),c.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const c=this._childCommandsDefinitions.find(({command:D})=>D.isEnabled);return c&&c.command}}class pe extends(0,d.ln)(){constructor(c,D=[],W=[]){super(),this._context=c,this._plugins=new Map,this._availablePlugins=new Map;for(const q of D)q.pluginName&&this._availablePlugins.set(q.pluginName,q);this._contextPlugins=new Map;for(const[q,ae]of W)this._contextPlugins.set(q,ae),this._contextPlugins.set(ae,q),q.pluginName&&this._availablePlugins.set(q.pluginName,q)}*[Symbol.iterator](){for(const c of this._plugins)typeof c[0]=="function"&&(yield c)}get(c){const D=this._plugins.get(c);if(!D){let W=c;throw typeof c=="function"&&(W=c.pluginName||c.name),new d.Bb("plugincollection-plugin-not-loaded",this._context,{plugin:W})}return D}has(c){return this._plugins.has(c)}init(c,D=[],W=[]){const q=this,ae=this._context;(function et(Nt,jt=new Set){Nt.forEach(yt=>{_e(yt)&&(jt.has(yt)||(jt.add(yt),yt.pluginName&&!q._availablePlugins.has(yt.pluginName)&&q._availablePlugins.set(yt.pluginName,yt),yt.requires&&et(yt.requires,jt)))})})(c),nt(c);const Ie=[...function et(Nt,jt=new Set){return Nt.map(yt=>_e(yt)?yt:q._availablePlugins.get(yt)).reduce((yt,tt)=>jt.has(tt)?yt:(jt.add(tt),tt.requires&&(nt(tt.requires,tt),et(tt.requires,jt).forEach(Bt=>yt.add(Bt))),yt.add(tt)),new Set)}(c.filter(et=>!Qe(et,D)))];(function(et,Nt){for(const jt of Nt){if(typeof jt!="function")throw new d.Bb("plugincollection-replace-plugin-invalid-type",null,{pluginItem:jt});const yt=jt.pluginName;if(!yt)throw new d.Bb("plugincollection-replace-plugin-missing-name",null,{pluginItem:jt});if(jt.requires&&jt.requires.length)throw new d.Bb("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:yt});const tt=q._availablePlugins.get(yt);if(!tt)throw new d.Bb("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:yt});const Bt=et.indexOf(tt);if(Bt===-1){if(q._contextPlugins.has(tt))return;throw new d.Bb("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:yt})}if(tt.requires&&tt.requires.length)throw new d.Bb("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:yt});et.splice(Bt,1,jt),q._availablePlugins.set(yt,jt)}})(Ie,W);const Ve=function(et){return et.map(Nt=>{let jt=q._contextPlugins.get(Nt);return jt=jt||new Nt(ae),q._add(Nt,jt),jt})}(Ie);return qe(Ve,"init").then(()=>qe(Ve,"afterInit")).then(()=>Ve);function _e(et){return typeof et=="function"}function Me(et){return _e(et)&&et.isContextPlugin}function Qe(et,Nt){return Nt.some(jt=>jt===et||dt(et)===jt||dt(jt)===et)}function dt(et){return _e(et)?et.pluginName||et.name:et}function nt(et,Nt=null){et.map(jt=>_e(jt)?jt:q._availablePlugins.get(jt)||jt).forEach(jt=>{(function(yt,tt){if(!_e(yt))throw tt?new d.Bb("plugincollection-soft-required",ae,{missingPlugin:yt,requiredBy:dt(tt)}):new d.Bb("plugincollection-plugin-not-found",ae,{plugin:yt})})(jt,Nt),function(yt,tt){if(Me(tt)&&!Me(yt))throw new d.Bb("plugincollection-context-required",ae,{plugin:dt(yt),requiredBy:dt(tt)})}(jt,Nt),function(yt,tt){if(tt&&Qe(yt,D))throw new d.Bb("plugincollection-required",ae,{plugin:dt(yt),requiredBy:dt(tt)})}(jt,Nt)})}function qe(et,Nt){return et.reduce((jt,yt)=>yt[Nt]?q._contextPlugins.has(yt)?jt:jt.then(yt[Nt].bind(yt)):jt,Promise.resolve())}}destroy(){const c=[];for(const[,D]of this)typeof D.destroy!="function"||this._contextPlugins.has(D)||c.push(D.destroy());return Promise.all(c)}_add(c,D){this._plugins.set(c,D);const W=c.pluginName;if(W){if(this._plugins.has(W))throw new d.Bb("plugincollection-plugin-name-conflict",null,{pluginName:W,plugin1:this._plugins.get(W).constructor,plugin2:c});this._plugins.set(W,D)}}}class ge{constructor(c){this.config=new d.De(c,this.constructor.defaultConfig);const D=this.constructor.builtinPlugins;this.config.define("plugins",D),this.plugins=new pe(this,D);const W=this.config.get("language")||{};this.locale=new d.go({uiLanguage:typeof W=="string"?W:W.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new d.FE,this._contextOwner=null}initPlugins(){const c=this.config.get("plugins")||[],D=this.config.get("substitutePlugins")||[];for(const W of c.concat(D)){if(typeof W!="function")throw new d.Bb("context-initplugins-constructor-only",null,{Plugin:W});if(W.isContextPlugin!==!0)throw new d.Bb("context-initplugins-invalid-plugin",null,{Plugin:W})}return this.plugins.init(c,[],D)}destroy(){return Promise.all(Array.from(this.editors,c=>c.destroy())).then(()=>this.plugins.destroy())}_addEditor(c,D){if(this._contextOwner)throw new d.Bb("context-addeditor-private-context");this.editors.add(c),D&&(this._contextOwner=c)}_removeEditor(c){return this.editors.has(c)&&this.editors.remove(c),this._contextOwner===c?this.destroy():Promise.resolve()}_getEditorConfig(){const c={};for(const D of this.config.names())["plugins","removePlugins","extraPlugins"].includes(D)||(c[D]=this.config.get(D));return c}static create(c){return new Promise(D=>{const W=new this(c);D(W.initPlugins().then(()=>W))})}}class X extends(0,d.Re)(){constructor(c){super(),this.context=c}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}var te=a("./packages/ckeditor5-engine/src/index.ts");class Z{constructor(){this._commands=new Map}add(c,D){this._commands.set(c,D)}get(c){return this._commands.get(c)}execute(c,...D){const W=this.get(c);if(!W)throw new d.Bb("commandcollection-command-not-found",this,{commandName:c});return W.execute(...D)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const c of this.commands())c.destroy()}}class h extends d.VD{constructor(c){super(),this.editor=c}set(c,D,W={}){if(typeof D=="string"){const q=D;D=(ae,Ie)=>{this.editor.execute(q),Ie()}}super.set(c,D,W)}}class g extends(0,d.Re)(){constructor(c={}){super();const D=this.constructor,W=c.language||D.defaultConfig&&D.defaultConfig.language;this._context=c.context||new ge({language:W}),this._context._addEditor(this,!c.context);const q=Array.from(D.builtinPlugins||[]);this.config=new d.De(c,D.defaultConfig),this.config.define("plugins",q),this.config.define(this._context._getEditorConfig()),this.plugins=new pe(this,q,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new Z,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new te.Hn;const ae=new te.A_;this.data=new te.Yc(this.model,ae),this.editing=new te.jH(this.model,ae),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new te.uz([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new h(this),this.keystrokes.listenTo(this.editing.view.document)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(c){throw new d.Bb("editor-isreadonly-has-no-setter")}enableReadOnlyMode(c){if(typeof c!="string"&&typeof c!="symbol")throw new d.Bb("editor-read-only-lock-id-invalid",null,{lockId:c});this._readOnlyLocks.has(c)||(this._readOnlyLocks.add(c),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(c){if(typeof c!="string"&&typeof c!="symbol")throw new d.Bb("editor-read-only-lock-id-invalid",null,{lockId:c});this._readOnlyLocks.has(c)&&(this._readOnlyLocks.delete(c),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}initPlugins(){const c=this.config,D=c.get("plugins"),W=c.get("removePlugins")||[],q=c.get("extraPlugins")||[],ae=c.get("substitutePlugins")||[];return this.plugins.init(D.concat(q),W,ae)}destroy(){let c=Promise.resolve();return this.state=="initializing"&&(c=new Promise(D=>this.once("ready",D))),c.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(c,...D){try{return this.commands.execute(c,...D)}catch(W){d.Bb.rethrowUnexpectedError(W,this)}}focus(){this.editing.view.focus()}}var r=a("./node_modules/lodash-es/isFunction.js");function u(x){if(!(0,r.Z)(x.updateSourceElement))throw new d.Bb("attachtoform-missing-elementapi-interface",x);const c=x.sourceElement;if(function(D){return!!D&&D.tagName.toLowerCase()==="textarea"}(c)&&c.form){let D;const W=c.form,q=()=>x.updateSourceElement();(0,r.Z)(W.submit)&&(D=W.submit,W.submit=()=>{q(),D.apply(W)}),W.addEventListener("submit",q),x.on("destroy",()=>{W.removeEventListener("submit",q),D&&(W.submit=D)})}}function w(x){return class extends x{setData(c){this.data.set(c)}getData(c){return this.data.get(c)}}}{const x=w(Object);w.setData=x.prototype.setData,w.getData=x.prototype.getData}function _(x){return class extends x{updateSourceElement(c=this.data.get()){if(!this.sourceElement)throw new d.Bb("editor-missing-sourceelement",this);const D=this.config.get("updateSourceElementOnDestroy"),W=this.sourceElement instanceof HTMLTextAreaElement;D||W?(0,d.jS)(this.sourceElement,c):(0,d.jS)(this.sourceElement,"")}}}function T(x){const c=x.sourceElement;if(c){if(c.ckeditorInstance)throw new d.Bb("editor-source-element-already-used",x);c.ckeditorInstance=x,x.once("destroy",()=>{delete c.ckeditorInstance})}}_.updateSourceElement=_(Object).prototype.updateSourceElement;class z extends X{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new d.FE({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(c){if(typeof c!="string")throw new d.Bb("pendingactions-add-invalid-message",this);const D=new((0,d.Re)());return D.set("message",c),this._actions.add(D),this.hasAny=!0,D}remove(c){this._actions.remove(c),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}const L={bold:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',cancel:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',caption:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',check:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',cog:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',eraser:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',image:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',lowVision:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',importExport:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path clip-rule="evenodd" d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"/></clipPath></defs></svg>',paragraph:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',plus:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',text:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path clip-rule="evenodd" d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"/></clipPath></defs></svg>',alignBottom:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',alignMiddle:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',alignTop:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',alignLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',alignCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',alignRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',alignJustify:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',objectLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',objectRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectFullWidth:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',objectInline:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectSizeFull:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',objectSizeLarge:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>',objectSizeSmall:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>',objectSizeMedium:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>',pencil:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',pilcrow:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',quote:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',threeVerticalDots:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'}},"./packages/ckeditor5-engine/src/index.ts":(f,v,a)=>{"use strict";a.d(v,{kW:()=>R,r7:()=>Ii,KU:()=>Gs,uz:()=>Cs,Yc:()=>xs,tn:()=>$o,f4:()=>no,uj:()=>re,pG:()=>vt,dK:()=>Vi,qZ:()=>Wi,qD:()=>Te,jH:()=>vo,W_:()=>rn,Ay:()=>Ur,X5:()=>Pr,IZ:()=>xn,jP:()=>Mn,iE:()=>S,zj:()=>Ln,xO:()=>D,Hn:()=>Ks,dM:()=>Ys,Qj:()=>ri,Bz:()=>Nr,Ly:()=>si,e6:()=>Ht,Th:()=>j,A_:()=>Ki,aY:()=>Eo,xv:()=>on,Po:()=>Rn,yj:()=>Qs,G7:()=>Io,m1:()=>R,By:()=>N,Ux:()=>J,y_:()=>se,W2:()=>Ce,y9:()=>F,pc:()=>De,wx:()=>mt,Xj:()=>L,dq:()=>Pt,QR:()=>ha,sI:()=>ma,vt:()=>pa,J8:()=>fa,DA:()=>pe,ID:()=>me,KT:()=>ts,I8:()=>cs,mq:()=>er,oz:()=>Xo,YG:()=>de,m0:()=>Sr,uT:()=>wr,$_:()=>X,SB:()=>as,D5:()=>is,G9:()=>os,IT:()=>ns,zz:()=>aa,WK:()=>ss,Zb:()=>rs,PX:()=>ls,Q7:()=>te,NJ:()=>ge,Rf:()=>As});var d=a("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),A=a.n(d),H=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-engine/theme/placeholder.css"),I={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};A()(H.Z,I),H.Z.locals;const C=new WeakMap;function me(n){const{view:e,element:t,text:i,isDirectHost:o=!0,keepOnFocus:s=!1}=n,p=e.document;C.has(p)||(C.set(p,new Map),p.registerPostFixer(B=>Z(p,B)),p.on("change:isComposing",()=>{e.change(B=>Z(p,B))},{priority:"high"})),C.get(p).set(t,{text:i,isDirectHost:o,keepOnFocus:s,hostElement:o?t:null}),e.change(B=>Z(p,B))}function pe(n,e){const t=e.document;n.change(i=>{if(!C.has(t))return;const o=C.get(t),s=o.get(e);i.removeAttribute("data-placeholder",s.hostElement),X(i,s.hostElement),o.delete(e)})}function ge(n,e){return!e.hasClass("ck-placeholder")&&(n.addClass("ck-placeholder",e),!0)}function X(n,e){return!!e.hasClass("ck-placeholder")&&(n.removeClass("ck-placeholder",e),!0)}function te(n,e){if(!n.isAttached()||Array.from(n.getChildren()).some(s=>!s.is("uiElement")))return!1;const i=n.document,o=i.selection.anchor;return(!i.isComposing||!o||o.parent!==n)&&(!!e||!i.isFocused||!!o&&o.parent!==n)}function Z(n,e){const t=C.get(n),i=[];let o=!1;for(const[s,p]of t)p.isDirectHost&&(i.push(s),h(e,s,p)&&(o=!0));for(const[s,p]of t){if(p.isDirectHost)continue;const B=g(s);B&&(i.includes(B)||(p.hostElement=B,h(e,s,p)&&(o=!0)))}return o}function h(n,e,t){const{text:i,isDirectHost:o,hostElement:s}=t;let p=!1;return s.getAttribute("data-placeholder")!==i&&(n.setAttribute("data-placeholder",i,s),p=!0),(o||e.childCount==1)&&te(s,t.keepOnFocus)?ge(n,s)&&(p=!0):X(n,s)&&(p=!0),p}function g(n){if(n.childCount){const e=n.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}var r=a("./packages/ckeditor5-utils/src/index.ts");class u{is(){throw new Error("is() method is abstract")}}var w=a("./node_modules/lodash-es/_baseClone.js"),_=4;const T=function(n){return(0,w.Z)(n,_)};a("./packages/ckeditor5-utils/src/version.ts");class z extends(0,r.ln)(u){constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new r.Bb("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){const i=this.getAncestors(t),o=e.getAncestors(t);let s=0;for(;i[s]==o[s]&&i[s];)s++;return s===0?null:i[s-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),i=e.getPath(),o=(0,r.Rt)(t,i);switch(o){case"prefix":return!0;case"extension":return!1;default:return t[o]<i[o]}}isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=T(this);return delete e.parent,e}}z.prototype.is=function(n){return n==="node"||n==="view:node"};class L extends z{constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof L&&(this===e||this.data===e.data)}_clone(){return new L(this.document,this.data)}}L.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};class x extends u{constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.data.length)throw new r.Bb("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new r.Bb("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const t=[];let i=e.includeSelf?this.textNode:this.parent;for(;i!==null;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}}x.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};var c=a("./node_modules/lodash-es/isPlainObject.js");class D{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const i of this._patterns){const o=W(t,i);if(o)return{element:t,pattern:i,match:o}}return null}matchAll(...e){const t=[];for(const i of e)for(const o of this._patterns){const s=W(i,o);s&&t.push({element:i,pattern:o,match:s})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e=="function"||!t||t instanceof RegExp?null:t}}function W(n,e){if(typeof e=="function")return e(n);const t={};return e.name&&(t.name=function(i,o){return i instanceof RegExp?!!o.match(i):i===o}(e.name,n.name),!t.name)||e.attributes&&(t.attributes=function(i,o){const s=new Set(o.getAttributeKeys());return(0,c.Z)(i)?(i.style!==void 0&&(0,r.KE)("matcher-pattern-deprecated-attributes-style-key",i),i.class!==void 0&&(0,r.KE)("matcher-pattern-deprecated-attributes-class-key",i)):(s.delete("style"),s.delete("class")),q(i,s,p=>o.getAttribute(p))}(e.attributes,n),!t.attributes)||e.classes&&(t.classes=function(i,o){return q(i,o.getClassNames(),()=>{})}(e.classes,n),!t.classes)||e.styles&&(t.styles=function(i,o){return q(i,o.getStyleNames(!0),s=>o.getStyle(s))}(e.styles,n),!t.styles)?null:t}function q(n,e,t){const i=function(p){return Array.isArray(p)?p.map(B=>(0,c.Z)(B)?(B.key!==void 0&&B.value!==void 0||(0,r.KE)("matcher-pattern-missing-key-or-value",B),[B.key,B.value]):[B,!0]):(0,c.Z)(p)?Object.entries(p):[[p,!0]]}(n),o=Array.from(e),s=[];if(i.forEach(([p,B])=>{o.forEach(G=>{(function(le,be){return le===!0||le===be||le instanceof RegExp&&be.match(le)})(p,G)&&function(le,be,We){if(le===!0)return!0;const it=We(be);return le===it||le instanceof RegExp&&!!String(it).match(le)}(B,G,t)&&s.push(G)})}),i.length&&!(s.length<i.length))return s}var ae=a("./node_modules/lodash-es/isObject.js"),Ie=a("./node_modules/lodash-es/isArray.js"),Ve=a("./node_modules/lodash-es/isSymbol.js"),_e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Me=/^\w*$/;const Qe=function(n,e){if((0,Ie.Z)(n))return!1;var t=typeof n;return!(t!="number"&&t!="symbol"&&t!="boolean"&&n!=null&&!(0,Ve.Z)(n))||Me.test(n)||!_e.test(n)||e!=null&&n in Object(e)};var dt=a("./node_modules/lodash-es/_MapCache.js"),nt="Expected a function";function qe(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(nt);var t=function(){var i=arguments,o=e?e.apply(this,i):i[0],s=t.cache;if(s.has(o))return s.get(o);var p=n.apply(this,i);return t.cache=s.set(o,p)||s,p};return t.cache=new(qe.Cache||dt.Z),t}qe.Cache=dt.Z;const et=qe;var Nt=500,jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yt=/\\(\\)?/g;const tt=function(n){var e=et(n,function(i){return t.size===Nt&&t.clear(),i}),t=e.cache;return e}(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(jt,function(t,i,o,s){e.push(o?s.replace(yt,"$1"):i||t)}),e});var Bt=a("./node_modules/lodash-es/toString.js");const ye=function(n,e){return(0,Ie.Z)(n)?n:Qe(n,e)?[n]:tt((0,Bt.Z)(n))},Ae=function(n){var e=n==null?0:n.length;return e?n[e-1]:void 0};var Ke=1/0;const kt=function(n){if(typeof n=="string"||(0,Ve.Z)(n))return n;var e=n+"";return e=="0"&&1/n==-Ke?"-0":e},It=function(n,e){for(var t=0,i=(e=ye(e,n)).length;n!=null&&t<i;)n=n[kt(e[t++])];return t&&t==i?n:void 0},Yt=function(n,e,t){var i=-1,o=n.length;e<0&&(e=-e>o?0:o+e),(t=t>o?o:t)<0&&(t+=o),o=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(o);++i<o;)s[i]=n[i+e];return s},zt=function(n,e){return e.length<2?n:It(n,Yt(e,0,-1))},ot=function(n,e){return e=ye(e,n),(n=zt(n,e))==null||delete n[kt(Ae(e))]},Dt=function(n,e){return n==null||ot(n,e)},wt=function(n,e,t){var i=n==null?void 0:It(n,e);return i===void 0?t:i};var ni=a("./node_modules/lodash-es/_Stack.js"),di=a("./node_modules/lodash-es/_baseAssignValue.js"),xi=a("./node_modules/lodash-es/eq.js");const bt=function(n,e,t){(t!==void 0&&!(0,xi.Z)(n[e],t)||t===void 0&&!(e in n))&&(0,di.Z)(n,e,t)},fe=function(n){return function(e,t,i){for(var o=-1,s=Object(e),p=i(e),B=p.length;B--;){var G=p[n?B:++o];if(t(s[G],G,s)===!1)break}return e}}();var je=a("./node_modules/lodash-es/_cloneBuffer.js"),Ze=a("./node_modules/lodash-es/_cloneTypedArray.js"),pt=a("./node_modules/lodash-es/_copyArray.js"),Ct=a("./node_modules/lodash-es/_initCloneObject.js"),St=a("./node_modules/lodash-es/isArguments.js"),Xt=a("./node_modules/lodash-es/isArrayLike.js"),Zt=a("./node_modules/lodash-es/isObjectLike.js");const oi=function(n){return(0,Zt.Z)(n)&&(0,Xt.Z)(n)};var bi=a("./node_modules/lodash-es/isBuffer.js"),gi=a("./node_modules/lodash-es/isFunction.js"),Ti=a("./node_modules/lodash-es/isTypedArray.js");const Mt=function(n,e){if((e!=="constructor"||typeof n[e]!="function")&&e!="__proto__")return n[e]};var Ei=a("./node_modules/lodash-es/_copyObject.js"),Ri=a("./node_modules/lodash-es/keysIn.js");const Yi=function(n){return(0,Ei.Z)(n,(0,Ri.Z)(n))},ji=function(n,e,t,i,o,s,p){var B=Mt(n,t),G=Mt(e,t),le=p.get(G);if(le)bt(n,t,le);else{var be=s?s(B,G,t+"",n,e,p):void 0,We=be===void 0;if(We){var it=(0,Ie.Z)(G),Lt=!it&&(0,bi.Z)(G),Jt=!it&&!Lt&&(0,Ti.Z)(G);be=G,it||Lt||Jt?(0,Ie.Z)(B)?be=B:oi(B)?be=(0,pt.Z)(B):Lt?(We=!1,be=(0,je.Z)(G,!0)):Jt?(We=!1,be=(0,Ze.Z)(G,!0)):be=[]:(0,c.Z)(G)||(0,St.Z)(G)?(be=B,(0,St.Z)(B)?be=Yi(B):(0,ae.Z)(B)&&!(0,gi.Z)(B)||(be=(0,Ct.Z)(G))):We=!1}We&&(p.set(G,be),o(be,G,i,s,p),p.delete(G)),bt(n,t,be)}},Pi=function n(e,t,i,o,s){e!==t&&fe(t,function(p,B){if(s||(s=new ni.Z),(0,ae.Z)(p))ji(e,t,B,i,n,o,s);else{var G=o?o(Mt(e,B),p,B+"",e,t,s):void 0;G===void 0&&(G=p),bt(e,B,G)}},Ri.Z)},qi=(0,a("./node_modules/lodash-es/_createAssigner.js").Z)(function(n,e,t){Pi(n,e,t)});var nn=a("./node_modules/lodash-es/_assignValue.js"),Li=a("./node_modules/lodash-es/_isIndex.js");const dn=function(n,e,t,i){if(!(0,ae.Z)(n))return n;for(var o=-1,s=(e=ye(e,n)).length,p=s-1,B=n;B!=null&&++o<s;){var G=kt(e[o]),le=t;if(G==="__proto__"||G==="constructor"||G==="prototype")return n;if(o!=p){var be=B[G];(le=i?i(be,G,B):void 0)===void 0&&(le=(0,ae.Z)(be)?be:(0,Li.Z)(e[o+1])?[]:{})}(0,nn.Z)(B,G,le),B=B[G]}return n},pi=function(n,e,t){return n==null?n:dn(n,e,t)};class fi{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){const e=Object.entries(this._styles);return!Array.from(e).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=Array.from(function(i){let o=null,s=0,p=0,B=null;const G=new Map;if(i==="")return G;i.charAt(i.length-1)!=";"&&(i+=";");for(let le=0;le<i.length;le++){const be=i.charAt(le);if(o===null)switch(be){case":":B||(B=i.substr(s,le-s),p=le+1);break;case'"':case"'":o=be;break;case";":{const We=i.substr(p,le-p);B&&G.set(B.trim(),We.trim()),B=null,s=le+1;break}}else be===o&&(o=null)}return G}(e).entries());for(const[i,o]of t)this._styleProcessor.toNormalizedForm(i,o,this._styles)}has(e){if(this.isEmpty)return!1;const t=this._styleProcessor.getReducedForm(e,this._styles).find(([i])=>i===e);return Array.isArray(t)}set(e,t){if((0,ae.Z)(e))for(const[i,o]of Object.entries(e))this._styleProcessor.toNormalizedForm(i,o,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=ke(e);Dt(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this._getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!(0,ae.Z)(this._styles[e]))return this._styles[e];const t=this._styleProcessor.getReducedForm(e,this._styles).find(([i])=>i===e);return Array.isArray(t)?t[1]:void 0}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this._getStylesEntries().map(([t])=>t)}clear(){this._styles={}}_getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const i of t)e.push(...this._styleProcessor.getReducedForm(i,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const i=t.splice(0,t.length-1).join("."),o=wt(this._styles,i);o&&!Array.from(Object.keys(o)).length&&this.remove(i)}}class Ki{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){if((0,ae.Z)(t))V(i,ke(e),t);else if(this._normalizers.has(e)){const o=this._normalizers.get(e),{path:s,value:p}=o(t);V(i,s,p)}else V(i,e,t)}getNormalized(e,t){if(!e)return qi({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const i=this._extractors.get(e);if(typeof i=="string")return wt(t,i);const o=i(e,t);if(o)return o}return wt(t,ke(e))}getReducedForm(e,t){const i=this.getNormalized(e,t);return i===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(i):[[e,i]]}getStyleNames(e){const t=Array.from(this._consumables.keys()).filter(o=>{const s=this.getNormalized(o,e);return s&&typeof s=="object"?Object.keys(s).length:s}),i=new Set([...t,...Object.keys(e)]);return Array.from(i.values())}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function ke(n){return n.replace("-",".")}function V(n,e,t){let i=t;(0,ae.Z)(t)&&(i=qi({},wt(n,e),t)),pi(n,e,i)}class F extends z{constructor(e,t,i,o){if(super(e),this.name=t,this._attrs=function(s){const p=(0,r.qL)(s);for(const[B,G]of p)G===null?p.delete(B):typeof G!="string"&&p.set(B,String(G));return p}(i),this._children=[],o&&this._insertChild(0,o),this._classes=new Set,this._attrs.has("class")){const s=this._attrs.get("class");P(this._classes,s),this._attrs.delete("class")}this._styles=new fi(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style")),this._customProperties=new Map,this._unsafeAttributesToRender=[]}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof F))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[t,i]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==i)return!1;for(const t of this._classes)if(!e._classes.has(t))return!1;for(const t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new D(...e);let i=this.parent;for(;i&&!i.is("documentFragment");){if(t.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),i=Array.from(this._attrs).map(o=>`${o[0]}="${o[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const t=[];if(e)for(const o of this.getChildren())t.push(o._clone(e));const i=new this.constructor(this.document,this.name,this._attrs,t);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let i=0;const o=function(s,p){return typeof p=="string"?[new L(s,p)]:((0,r.TW)(p)||(p=[p]),Array.from(p).map(B=>typeof B=="string"?new L(s,B):B instanceof x?new L(s,B.data):B))}(this.document,t);for(const s of o)s.parent!==null&&s._remove(),s.parent=this,s.document=this.document,this._children.splice(e,0,s),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){const i=String(t);this._fireChange("attributes",this),e=="class"?P(this._classes,i):e=="style"?this._styles.setTo(i):this._attrs.set(e,i)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0&&(this._classes.clear(),!0):e=="style"?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of(0,r.qo)(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of(0,r.qo)(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),(0,c.Z)(e)?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of(0,r.qo)(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}}function P(n,e){const t=e.split(/\s+/);n.clear(),t.forEach(i=>n.add(i))}F.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};class N extends F{constructor(...e){super(...e),this.getFillerOffset=de}}function de(){const n=[...this.getChildren()],e=n[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of n)if(!t.is("uiElement"))return null;return this.childCount}N.prototype.is=function(n,e){return e?e===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class Ce extends(0,r.Re)(N){constructor(...e){super(...e);const t=e[0];this.set("isReadOnly",!1),this.set("isFocused",!1),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",i=>i&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}}Ce.prototype.is=function(n,e){return e?e===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};const $e=Symbol("rootName");class at extends Ce{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty($e)}set rootName(e){this._setCustomProperty($e,e)}set _name(e){this.name=e}}at.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class Tt{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new r.Bb("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new r.Bb("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this.position=Ge._createAt(e.startPosition):this.position=Ge._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(e){let t,i,o;do o=this.position,{done:t,value:i}=this.next();while(!t&&e(i));t||(this.position=o)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,i=e.parent;if(i.parent===null&&e.offset===i.childCount)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let o;if(i instanceof L){if(e.isAtEnd)return this.position=Ge._createAfter(i),this._next();o=i.data[e.offset]}else o=i.getChild(e.offset);if(o instanceof F)return this.shallow?e.offset++:e=new Ge(o,0),this.position=e,this._formatReturnValue("elementStart",o,t,e,1);if(o instanceof L){if(this.singleCharacters)return e=new Ge(o,0),this.position=e,this._next();{let s,p=o.data.length;return o==this._boundaryEndParent?(p=this.boundaries.end.offset,s=new x(o,0,p),e=Ge._createAfter(s)):(s=new x(o,0,o.data.length),e.offset++),this.position=e,this._formatReturnValue("text",s,t,e,p)}}if(typeof o=="string"){let s;this.singleCharacters?s=1:s=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-e.offset;const p=new x(i,e.offset,s);return e.offset+=s,this.position=e,this._formatReturnValue("text",p,t,e,s)}return e=Ge._createAfter(i),this.position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,t,e)}_previous(){let e=this.position.clone();const t=this.position,i=e.parent;if(i.parent===null&&e.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let o;if(i instanceof L){if(e.isAtStart)return this.position=Ge._createBefore(i),this._previous();o=i.data[e.offset-1]}else o=i.getChild(e.offset-1);if(o instanceof F)return this.shallow?(e.offset--,this.position=e,this._formatReturnValue("elementStart",o,t,e,1)):(e=new Ge(o,o.childCount),this.position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",o,t,e));if(o instanceof L){if(this.singleCharacters)return e=new Ge(o,o.data.length),this.position=e,this._previous();{let s,p=o.data.length;if(o==this._boundaryStartParent){const B=this.boundaries.start.offset;s=new x(o,B,o.data.length-B),p=s.data.length,e=Ge._createBefore(s)}else s=new x(o,0,o.data.length),e.offset--;return this.position=e,this._formatReturnValue("text",s,t,e,p)}}if(typeof o=="string"){let s;if(this.singleCharacters)s=1;else{const B=i===this._boundaryStartParent?this.boundaries.start.offset:0;s=e.offset-B}e.offset-=s;const p=new x(i,e.offset,s);return this.position=e,this._formatReturnValue("text",p,t,e,s)}return e=Ge._createBefore(i),this.position=e,this._formatReturnValue("elementStart",i,t,e,1)}_formatReturnValue(e,t,i,o,s){return t instanceof x&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction!="forward"||this.boundaries&&this.boundaries.end.isEqual(this.position)?i=Ge._createAfter(t.textNode):(o=Ge._createAfter(t.textNode),this.position=o)),t.offsetInText===0&&(this.direction!="backward"||this.boundaries&&this.boundaries.start.isEqual(this.position)?i=Ge._createBefore(t.textNode):(o=Ge._createBefore(t.textNode),this.position=o))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:o,length:s}}}}class Ge extends u{constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof Ce);){if(!e.parent)return null;e=e.parent}return e}getShiftedBy(e){const t=Ge._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new Tt(t);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let o=0;for(;t[o]==i[o]&&t[o];)o++;return o===0?null:t[o-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);const o=(0,r.Rt)(t,i);switch(o){case"prefix":return"before";case"extension":return"after";default:return t[o]<i[o]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new Tt(e)}clone(){return new Ge(this.parent,this.offset)}static _createAt(e,t){if(e instanceof Ge)return new this(e.parent,e.offset);{const i=e;if(t=="end")t=i.is("$text")?i.data.length:i.childCount;else{if(t=="before")return this._createBefore(i);if(t=="after")return this._createAfter(i);if(t!==0&&!t)throw new r.Bb("view-createpositionat-offset-required",i)}return new Ge(i,t)}}static _createAfter(e){if(e.is("$textProxy"))return new Ge(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new r.Bb("view-position-after-root",e,{root:e});return new Ge(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Ge(e.textNode,e.offsetInText);if(!e.parent)throw new r.Bb("view-position-before-root",e,{root:e});return new Ge(e.parent,e.index)}}Ge.prototype.is=function(n){return n==="position"||n==="view:position"};class Ut extends u{constructor(e,t=null){super(),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new Tt({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(ci,{direction:"backward"}),t=this.end.getLastMatchingPosition(ci);return e.parent.is("$text")&&e.isAtStart&&(e=Ge._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=Ge._createAfter(t.parent)),new Ut(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(ci);if(e.isAfter(this.end)||e.isEqual(this.end))return new Ut(e,e);let t=this.end.getLastMatchingPosition(ci,{direction:"backward"});const i=e.nodeAfter,o=t.nodeBefore;return i&&i.is("$text")&&(e=new Ge(i,0)),o&&o.is("$text")&&(t=new Ge(o,o.data.length)),new Ut(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),o=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&o}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Ut(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Ut(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new Ut(t,i)}return null}getWalker(e={}){return e.boundaries=this,new Tt(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new Ut(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new Tt(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new Tt(e);yield t.position;for(const i of t)yield i.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,i,o){return new this(new Ge(e,t),new Ge(i,o))}static _createFromPositionAndShift(e,t){const i=e,o=e.getShiftedBy(t);return t>0?new this(i,o):new this(o,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(Ge._createBefore(e),t)}}function ci(n){return!(!n.item.is("attributeElement")&&!n.item.is("uiElement"))}Ut.prototype.is=function(n){return n==="range"||n==="view:range"};class yi extends(0,r.ln)(u){constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)e&&!t.start.isBefore(e.start)||(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)e&&!t.end.isAfter(e.end)||(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const o of e._ranges)if(t.isEqual(o)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=(0,r.QX)(this.getRanges());if(t!=(0,r.QX)(e.getRanges()))return!1;if(t==0)return!0;for(let i of this.getRanges()){i=i.getTrimmed();let o=!1;for(let s of e.getRanges())if(s=s.getTrimmed(),i.start.isEqual(s.start)&&i.end.isEqual(s.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,i,o]=e;if(typeof i=="object"&&(o=i,i=void 0),t===null)this._setRanges([]),this._setFakeOptions(o);else if(t instanceof yi||t instanceof Ni)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof Ut)this._setRanges([t],o&&o.backward),this._setFakeOptions(o);else if(t instanceof Ge)this._setRanges([new Ut(t)]),this._setFakeOptions(o);else if(t instanceof z){const s=!!o&&!!o.backward;let p;if(i===void 0)throw new r.Bb("view-selection-setto-required-second-parameter",this);p=i=="in"?Ut._createIn(t):i=="on"?Ut._createOn(t):new Ut(Ge._createAt(t,i)),this._setRanges([p],s),this._setFakeOptions(o)}else{if(!(0,r.TW)(t))throw new r.Bb("view-selection-setto-not-selectable",this);this._setRanges(t,o&&o.backward),this._setFakeOptions(o)}this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new r.Bb("view-selection-setfocus-no-ranges",this);const i=Ge._createAt(e,t);if(i.compareWith(this.focus)=="same")return;const o=this.anchor;this._ranges.pop(),i.compareWith(o)=="before"?this._addRange(new Ut(i,o),!0):this._addRange(new Ut(o,i)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const i of e)this._addRange(i);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof Ut))throw new r.Bb("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new r.Bb("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new Ut(e.start,e.end))}}yi.prototype.is=function(n){return n==="selection"||n==="view:selection"};class Ni extends(0,r.ln)(u){constructor(...e){super(),this._selection=new yi,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}}Ni.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};class Ii extends r.M3{constructor(e,t,i){super(e,t),this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const zi=Symbol("bubbling contexts");function Oi(n){return class extends n{fire(e,...t){try{const i=e instanceof r.M3?e:new r.M3(this,e),o=He(this);if(!o.size)return;if(Ui(i,"capturing",this),Wt(o,"$capture",i,...t))return i.return;const s=i.startRange||this.selection.getFirstRange(),p=s?s.getContainedElement():null,B=!!p&&Boolean(we(o,p));let G=p||function(le){if(!le)return null;const be=le.start.parent,We=le.end.parent,it=be.getPath(),Lt=We.getPath();return it.length>Lt.length?be:We}(s);if(Ui(i,"atTarget",G),!B){if(Wt(o,"$text",i,...t))return i.return;Ui(i,"bubbling",G)}for(;G;){if(G.is("rootElement")){if(Wt(o,"$root",i,...t))return i.return}else if(G.is("element")&&Wt(o,G.name,i,...t))return i.return;if(Wt(o,G,i,...t))return i.return;G=G.parent,Ui(i,"bubbling",G)}return Ui(i,"bubbling",this),Wt(o,"$document",i,...t),i.return}catch(i){r.Bb.rethrowUnexpectedError(i,this)}}_addEventListener(e,t,i){const o=(0,r.qo)(i.context||"$document"),s=He(this);for(const p of o){let B=s.get(p);B||(B=new((0,r.ln)()),s.set(p,B)),this.listenTo(B,e,t,i)}}_removeEventListener(e,t){const i=He(this);for(const o of i.values())this.stopListening(o,e,t)}}}{const n=Oi(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{Oi[e]=n.prototype[e]})}function Ui(n,e,t){n instanceof Ii&&(n._eventPhase=e,n._currentTarget=t)}function Wt(n,e,t,...i){const o=typeof e=="string"?n.get(e):we(n,e);return!!o&&(o.fire(t,...i),t.stop.called)}function we(n,e){for(const[t,i]of n)if(typeof t=="function"&&t(e))return i;return null}function He(n){return n[zi]||(n[zi]=new Map),n[zi]}class J extends Oi((0,r.Re)()){constructor(e){super(),this.selection=new Ni,this.roots=new r.FE({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),this._postFixers=new Set}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.map(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(const i of this._postFixers)if(t=i(e),t)break;while(t)}}class R extends F{constructor(...e){super(...e),this.getFillerOffset=Q,this._priority=10,this._id=null,this._clonesGroup=null}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new r.Bb("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}function Q(){if(ve(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(ve(n)>1)return null;n=n.parent}return!n||ve(n)>1?null:this.childCount}function ve(n){return Array.from(n.getChildren()).filter(e=>!e.is("uiElement")).length}R.DEFAULT_PRIORITY=10,R.prototype.is=function(n,e){return e?e===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class De extends F{constructor(e,t,i,o){super(e,t,i,o),this.getFillerOffset=rt}_insertChild(e,t){if(t&&(t instanceof z||Array.from(t).length>0))throw new r.Bb("view-emptyelement-cannot-add",[this,t]);return 0}}function rt(){return null}De.prototype.is=function(n,e){return e?e===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class Pt extends F{constructor(...e){super(...e),this.getFillerOffset=wi}_insertChild(e,t){if(t&&(t instanceof z||Array.from(t).length>0))throw new r.Bb("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const i of this.getAttributeKeys())t.setAttribute(i,this.getAttribute(i));return t}}function ai(n){n.document.on("arrowKey",(e,t)=>function(i,o,s){if(o.keyCode==r.Do.arrowright){const p=o.domTarget.ownerDocument.defaultView.getSelection(),B=p.rangeCount==1&&p.getRangeAt(0).collapsed;if(B||o.shiftKey){const G=p.focusNode,le=p.focusOffset,be=s.domPositionToView(G,le);if(be===null)return;let We=!1;const it=be.getLastMatchingPosition(Lt=>(Lt.item.is("uiElement")&&(We=!0),!(!Lt.item.is("uiElement")&&!Lt.item.is("attributeElement"))));if(We){const Lt=s.viewPositionToDom(it);B?p.collapse(Lt.parent,Lt.offset):p.extend(Lt.parent,Lt.offset)}}}}(0,t,n.domConverter),{priority:"low"})}function wi(){return null}Pt.prototype.is=function(n,e){return e?e===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class mt extends F{constructor(...e){super(...e),this.getFillerOffset=U}_insertChild(e,t){if(t&&(t instanceof z||Array.from(t).length>0))throw new r.Bb("view-rawelement-cannot-add",[this,t]);return 0}render(){}}function U(){return null}mt.prototype.is=function(n,e){return e?e===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class se extends(0,r.ln)(u){constructor(e,t){super(),this.document=e,this._children=[],t&&this._insertChild(0,t),this._customProperties=new Map}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let i=0;const o=function(s,p){return typeof p=="string"?[new L(s,p)]:((0,r.TW)(p)||(p=[p]),Array.from(p).map(B=>typeof B=="string"?new L(s,B):B instanceof x?new L(s,B.data):B))}(this.document,t);for(const s of o)s.parent!==null&&s._remove(),s.parent=this,this._children.splice(e,0,s),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}}se.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};class Te{constructor(e){this.document=e,this._cloneGroups=new Map,this._slotFactory=null}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(...e){this.document.selection._setFocus(...e)}createDocumentFragment(e){return new se(this.document,e)}createText(e){return new L(this.document,e)}createAttributeElement(e,t,i={}){const o=new R(this.document,e,t);return typeof i.priority=="number"&&(o._priority=i.priority),i.id&&(o._id=i.id),i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}createContainerElement(e,t,i={},o={}){let s=null;(0,c.Z)(i)?o=i:s=i;const p=new N(this.document,e,t,s);return o.renderUnsafeAttributes&&p._unsafeAttributesToRender.push(...o.renderUnsafeAttributes),p}createEditableElement(e,t,i={}){const o=new Ce(this.document,e,t);return i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}createEmptyElement(e,t,i={}){const o=new De(this.document,e,t);return i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}createUIElement(e,t,i){const o=new Pt(this.document,e,t);return i&&(o.render=i),o}createRawElement(e,t,i,o={}){const s=new mt(this.document,e,t);return i&&(s.render=i),o.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...o.renderUnsafeAttributes),s}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){(0,c.Z)(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof Ge?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new r.Bb("view-writer-break-non-container-element",this.document);if(!t.parent)throw new r.Bb("view-writer-break-root",this.document);if(e.isAtStart)return Ge._createBefore(t);if(!e.isAtEnd){const i=t._clone(!1);this.insert(Ge._createAfter(t),i);const o=new Ut(e,Ge._createAt(t,"end")),s=new Ge(i,0);this.move(o,s)}return Ge._createAfter(t)}mergeAttributes(e){const t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&i.childCount===0){const p=i.parent,B=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new Ge(p,B))}const o=i.getChild(t-1),s=i.getChild(t);if(!o||!s)return e;if(o.is("$text")&&s.is("$text"))return _t(o,s);if(o.is("attributeElement")&&s.is("attributeElement")&&o.isSimilar(s)){const p=o.childCount;return o._appendChild(s.getChildren()),s._remove(),this._removeFromClonedElementsGroup(s),this.mergeAttributes(new Ge(o,p))}return e}mergeContainers(e){const t=e.nodeBefore,i=e.nodeAfter;if(!(t&&i&&t.is("containerElement")&&i.is("containerElement")))throw new r.Bb("view-writer-merge-containers-invalid-position",this.document);const o=t.getChild(t.childCount-1),s=o instanceof L?Ge._createAt(o,"end"):Ge._createAt(t,"end");return this.move(Ut._createIn(i),Ge._createAt(t,"end")),this.remove(Ut._createOn(i)),s}insert(e,t){Vt(t=(0,r.TW)(t)?[...t]:[t],this.document);const i=t.reduce((p,B)=>{const G=p[p.length-1],le=!B.is("uiElement");return G&&G.breakAttributes==le?G.nodes.push(B):p.push({breakAttributes:le,nodes:[B]}),p},[]);let o=null,s=e;for(const{nodes:p,breakAttributes:B}of i){const G=this._insertNodes(s,p,B);o||(o=G.start),s=G.end}return o?new Ut(o,s):new Ut(e)}remove(e){const t=e instanceof Ut?e:Ut._createOn(e);if(li(t,this.document),t.isCollapsed)return new se(this.document);const{start:i,end:o}=this._breakAttributesRange(t,!0),s=i.parent,p=o.offset-i.offset,B=s._removeChildren(i.offset,p);for(const le of B)this._removeFromClonedElementsGroup(le);const G=this.mergeAttributes(i);return t.start=G,t.end=G.clone(),new se(this.document,B)}clear(e,t){li(e,this.document);const i=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const o of i){const s=o.item;let p;if(s.is("element")&&t.isSimilar(s))p=Ut._createOn(s);else if(!o.nextPosition.isAfter(e.start)&&s.is("$textProxy")){const B=s.getAncestors().find(G=>G.is("element")&&t.isSimilar(G));B&&(p=Ut._createIn(B))}p&&(p.end.isAfter(e.end)&&(p.end=e.end),p.start.isBefore(e.start)&&(p.start=e.start),this.remove(p))}}move(e,t){let i;if(t.isAfter(e.end)){const o=(t=this._breakAttributes(t,!0)).parent,s=o.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=o.childCount-s}else i=this.remove(e);return this.insert(t,i)}wrap(e,t){if(!(t instanceof R))throw new r.Bb("view-writer-wrap-invalid-attribute",this.document);if(li(e,this.document),e.isCollapsed){let o=e.start;o.parent.is("element")&&(i=o.parent,!Array.from(i.getChildren()).some(p=>!p.is("uiElement")))&&(o=o.getLastMatchingPosition(p=>p.item.is("uiElement"))),o=this._wrapPosition(o,t);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(e.start)&&this.setSelection(o),new Ut(o)}return this._wrapRange(e,t);var i}unwrap(e,t){if(!(t instanceof R))throw new r.Bb("view-writer-unwrap-invalid-attribute",this.document);if(li(e,this.document),e.isCollapsed)return e;const{start:i,end:o}=this._breakAttributesRange(e,!0),s=i.parent,p=this._unwrapChildren(s,i.offset,o.offset,t),B=this.mergeAttributes(p.start);B.isEqual(p.start)||p.end.offset--;const G=this.mergeAttributes(p.end);return new Ut(B,G)}rename(e,t){const i=new N(this.document,e,t.getAttributes());return this.insert(Ge._createAfter(t),i),this.move(Ut._createIn(t),Ge._createAt(i,0)),this.remove(Ut._createOn(t)),i}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return Ge._createAt(e,t)}createPositionAfter(e){return Ge._createAfter(e)}createPositionBefore(e){return Ge._createBefore(e)}createRange(...e){return new Ut(...e)}createRangeOn(e){return Ut._createOn(e)}createRangeIn(e){return Ut._createIn(e)}createSelection(...e){return new yi(...e)}createSlot(e){if(!this._slotFactory)throw new r.Bb("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,i){let o,s;if(o=i?Le(e):e.parent.is("$text")?e.parent.parent:e.parent,!o)throw new r.Bb("view-writer-invalid-position-container",this.document);s=i?this._breakAttributes(e,!0):e.parent.is("$text")?At(e):e;const p=o._insertChild(s.offset,t);for(const be of t)this._addToClonedElementsGroup(be);const B=s.getShiftedBy(p),G=this.mergeAttributes(s);G.isEqual(s)||B.offset--;const le=this.mergeAttributes(B);return new Ut(G,le)}_wrapChildren(e,t,i,o){let s=t;const p=[];for(;s<i;){const G=e.getChild(s),le=G.is("$text"),be=G.is("attributeElement");if(be&&this._wrapAttributeElement(o,G))p.push(new Ge(e,s));else if(le||!be||Ye(o,G)){const We=o._clone();G._remove(),We._appendChild(G),e._insertChild(s,We),this._addToClonedElementsGroup(We),p.push(new Ge(e,s))}else this._wrapChildren(G,0,G.childCount,o);s++}let B=0;for(const G of p)G.offset-=B,G.offset!=t&&(this.mergeAttributes(G).isEqual(G)||(B++,i--));return Ut._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,o){let s=t;const p=[];for(;s<i;){const G=e.getChild(s);if(G.is("attributeElement"))if(G.isSimilar(o)){const le=G.getChildren(),be=G.childCount;G._remove(),e._insertChild(s,le),this._removeFromClonedElementsGroup(G),p.push(new Ge(e,s),new Ge(e,s+be)),s+=be,i+=be-1}else this._unwrapAttributeElement(o,G)?(p.push(new Ge(e,s),new Ge(e,s+1)),s++):(this._unwrapChildren(G,0,G.childCount,o),s++);else s++}let B=0;for(const G of p)G.offset-=B,!(G.offset==t||G.offset==i)&&(this.mergeAttributes(G).isEqual(G)||(B++,i--));return Ut._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){const{start:i,end:o}=this._breakAttributesRange(e,!0),s=i.parent,p=this._wrapChildren(s,i.offset,o.offset,t),B=this.mergeAttributes(p.start);B.isEqual(p.start)||p.end.offset--;const G=this.mergeAttributes(p.end);return new Ut(B,G)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return Je(e.clone());e.parent.is("$text")&&(e=At(e));const i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i);const o=new Ut(e,e.getShiftedBy(1));this.wrap(o,t);const s=new Ge(i.parent,i.index);i._remove();const p=s.nodeBefore,B=s.nodeAfter;return p instanceof L&&B instanceof L?_t(p,B):Je(s)}_wrapAttributeElement(e,t){if(!Ci(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if(i!=="class"&&i!=="style"&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1;for(const i of e.getStyleNames())if(t.hasStyle(i)&&t.getStyle(i)!==e.getStyle(i))return!1;for(const i of e.getAttributeKeys())i!=="class"&&i!=="style"&&(t.hasAttribute(i)||this.setAttribute(i,e.getAttribute(i),t));for(const i of e.getStyleNames())t.hasStyle(i)||this.setStyle(i,e.getStyle(i),t);for(const i of e.getClassNames())t.hasClass(i)||this.addClass(i,t);return!0}_unwrapAttributeElement(e,t){if(!Ci(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if(i!=="class"&&i!=="style"&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const i of e.getStyleNames())if(!t.hasStyle(i)||t.getStyle(i)!==e.getStyle(i))return!1;for(const i of e.getAttributeKeys())i!=="class"&&i!=="style"&&this.removeAttribute(i,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const i=e.start,o=e.end;if(li(e,this.document),e.isCollapsed){const G=this._breakAttributes(e.start,t);return new Ut(G,G)}const s=this._breakAttributes(o,t),p=s.parent.childCount,B=this._breakAttributes(i,t);return s.offset+=s.parent.childCount-p,new Ut(B,s)}_breakAttributes(e,t=!1){const i=e.offset,o=e.parent;if(e.parent.is("emptyElement"))throw new r.Bb("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new r.Bb("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new r.Bb("view-writer-cannot-break-raw-element",this.document);if(!t&&o.is("$text")&&$t(o.parent)||$t(o))return e.clone();if(o.is("$text"))return this._breakAttributes(At(e),t);if(i==o.childCount){const s=new Ge(o.parent,o.index+1);return this._breakAttributes(s,t)}if(i===0){const s=new Ge(o.parent,o.index);return this._breakAttributes(s,t)}{const s=o.index+1,p=o._clone();o.parent._insertChild(s,p),this._addToClonedElementsGroup(p);const B=o.childCount-i,G=o._removeChildren(i,B);p._appendChild(G);const le=new Ge(o.parent,s);return this._breakAttributes(le,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const o of e.getChildren())this._addToClonedElementsGroup(o);const t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i||(i=new Set,this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const o of e.getChildren())this._removeFromClonedElementsGroup(o);const t=e.id;if(!t)return;const i=this._cloneGroups.get(t);i&&i.delete(e)}}function Le(n){let e=n.parent;for(;!$t(e);){if(!e)return;e=e.parent}return e}function Ye(n,e){return n.priority<e.priority||!(n.priority>e.priority)&&n.getIdentity()<e.getIdentity()}function Je(n){const e=n.nodeBefore;if(e&&e.is("$text"))return new Ge(e,e.data.length);const t=n.nodeAfter;return t&&t.is("$text")?new Ge(t,0):n}function At(n){if(n.offset==n.parent.data.length)return new Ge(n.parent.parent,n.parent.index+1);if(n.offset===0)return new Ge(n.parent.parent,n.parent.index);const e=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new L(n.root.document,e)),new Ge(n.parent.parent,n.parent.index+1)}function _t(n,e){const t=n.data.length;return n._data+=e.data,e._remove(),new Ge(n,t)}const Rt=[L,R,N,De,mt,Pt];function Vt(n,e){for(const t of n){if(!Rt.some(i=>t instanceof i))throw new r.Bb("view-writer-insert-invalid-node-type",e);t.is("$text")||Vt(t.getChildren(),e)}}function $t(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function li(n,e){const t=Le(n.start),i=Le(n.end);if(!t||!i||t!==i)throw new r.Bb("view-writer-invalid-range-container",e)}function Ci(n,e){return n.id===null&&e.id===null}const hi=n=>n.createTextNode("\xA0"),Fi=n=>{const e=n.createElement("span");return e.dataset.ckeFiller="true",e.innerText="\xA0",e},un=n=>{const e=n.createElement("br");return e.dataset.ckeFiller="true",e},an=7,Cn="\u2060".repeat(an);function fn(n){return(0,r.Gs)(n)&&n.data.substr(0,an)===Cn}function Tn(n){return n.data.length==an&&fn(n)}function In(n){return fn(n)?n.data.slice(an):n.data}function Dn(n,e){if(e.keyCode==r.Do.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const i=t.getRangeAt(0).startContainer,o=t.getRangeAt(0).startOffset;fn(i)&&o<=an&&t.collapse(i,0)}}}var Fn=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-engine/theme/renderer.css"),Be={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};A()(Fn.Z,Be),Fn.Z.locals;class j extends(0,r.Re)(){constructor(e,t){super(),this.domDocuments=new Set,this.domConverter=e,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),r.OB.isBlink&&!r.OB.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()}),this.set("isComposing",!1),this.on("change:isComposing",()=>{this.isComposing||this.render()}),this._inlineFiller=null,this._fakeSelectionContainer=null}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else{if(e!=="children")throw new r.Bb("view-renderer-unknown-type",this);this.markedChildren.add(t)}}}render(){if(this.isComposing&&!r.OB.isAndroid)return;let e=null;const t=!(r.OB.isBlink&&!r.OB.isAndroid)||!this.isSelecting;for(const i of this.markedChildren)this._updateChildrenMappings(i);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=Ge._createBefore(e.parent)));for(const i of this.markedAttributes)this._updateAttrs(i);for(const i of this.markedChildren)this._updateChildren(i,{inlineFillerPosition:e});for(const i of this.markedTexts)!this.markedChildren.has(i.parent)&&this.domConverter.mapViewToDom(i.parent)&&this._updateText(i,{inlineFillerPosition:e});if(t)if(e){const i=this.domConverter.viewPositionToDom(e),o=i.parent.ownerDocument;fn(i.parent)?this._inlineFiller=i.parent:this._inlineFiller=ie(o,i.parent,i.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){if(!this.domConverter.mapViewToDom(e))return;const t=Array.from(this.domConverter.mapViewToDom(e).childNodes),i=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(t,i),s=this._findReplaceActions(o,t,i);if(s.indexOf("replace")!==-1){const p={equal:0,insert:0,delete:0};for(const B of s)if(B==="replace"){const G=p.equal+p.insert,le=p.equal+p.delete,be=e.getChild(G);!be||be.is("uiElement")||be.is("rawElement")||this._updateElementMappings(be,t[le]),(0,r.Od)(i[G]),p.equal++}else p[B]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?Ge._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&(0,r.Gs)(t.parent)&&fn(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!fn(e))throw new r.Bb("view-renderer-filler-was-lost",this);Tn(e)?e.remove():e.data=e.data.substr(an),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,i=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!function(p){if(p.getAttribute("contenteditable")=="false")return!1;const B=p.findAncestor(G=>G.hasAttribute("contenteditable"));return!B||B.getAttribute("contenteditable")=="true"}(t)||i===t.getFillerOffset())return!1;const o=e.nodeBefore,s=e.nodeAfter;return!(o instanceof L||s instanceof L)&&(!r.OB.isAndroid||!o&&!s)}_updateText(e,t){const i=this.domConverter.findCorrespondingDomText(e);let o=this.domConverter.viewToDom(e).data;const s=t.inlineFillerPosition;s&&s.parent==e.parent&&s.offset==e.index&&(o=Cn+o),ze(i,o)}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const i=Array.from(t.attributes).map(s=>s.name),o=e.getAttributeKeys();for(const s of o)this.domConverter.setDomElementAttribute(t,s,e.getAttribute(s),e);for(const s of i)e.hasAttribute(s)||this.domConverter.removeDomElementAttribute(t,s)}_updateChildren(e,t){const i=this.domConverter.mapViewToDom(e);if(!i)return;if(r.OB.isAndroid){let We=null;for(const it of Array.from(i.childNodes)){if(We&&(0,r.Gs)(We)&&(0,r.Gs)(it)){i.normalize();break}We=it}}const o=t.inlineFillerPosition,s=i.childNodes,p=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));o&&o.parent===e&&ie(i.ownerDocument,p,o.offset);const B=this._diffNodeLists(s,p),G=r.OB.isAndroid?this._findReplaceActions(B,s,p,{replaceText:!0}):B;let le=0;const be=new Set;for(const We of G)We==="delete"?(be.add(s[le]),(0,r.Od)(s[le])):We!=="equal"&&We!=="replace"||le++;le=0;for(const We of G)We==="insert"?((0,r.ZQ)(i,le,p[le]),le++):We==="replace"?(ze(s[le],p[le].data),le++):We==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(p[le])),le++);for(const We of be)We.parentNode||this.domConverter.unbindDomElement(We)}_diffNodeLists(e,t){return e=function(i,o){const s=Array.from(i);return s.length==0||!o||s[s.length-1]==o&&s.pop(),s}(e,this._fakeSelectionContainer),(0,r.Hg)(e,t,Re.bind(null,this.domConverter))}_findReplaceActions(e,t,i,o={}){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let s=[],p=[],B=[];const G={equal:0,insert:0,delete:0};for(const le of e)le==="insert"?B.push(i[G.equal+G.insert]):le==="delete"?p.push(t[G.equal+G.delete]):(s=s.concat((0,r.Hg)(p,B,o.replaceText?Ee:ue).map(be=>be==="equal"?"replace":be)),s.push("equal"),p=[],B=[]),G[le]++;return s.concat((0,r.Hg)(p,B,o.replaceText?Ee:ue).map(le=>le==="equal"?"replace":le))}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(r.OB.isBlink&&!r.OB.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0)return this._removeDomSelection(),void this._removeFakeSelection();const e=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&r.OB.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(p){const B=p.createElement("div");return B.className="ck-fake-selection-container",Object.assign(B.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),B.textContent="\xA0",B}(t));const i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),!this._fakeSelectionNeedsUpdate(e))return;i.parentElement&&i.parentElement==e||e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||"\xA0";const o=t.getSelection(),s=t.createRange();o.removeAllRanges(),s.selectNodeContents(i),o.addRange(s)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const i=this.domConverter.viewPositionToDom(this.selection.anchor),o=this.domConverter.viewPositionToDom(this.selection.focus);t.collapse(i.parent,i.offset),t.extend(o.parent,o.offset),r.OB.isGecko&&function(s,p){const B=s.parent;if(B.nodeType!=Node.ELEMENT_NODE||s.offset!=B.childNodes.length-1)return;const G=B.childNodes[s.offset];G&&G.tagName=="BR"&&p.addRange(p.getRangeAt(0))}(o,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return(!t||!this.selection.isEqual(t))&&!(!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)||t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const t=e.getSelection();if(t.rangeCount){const i=e.activeElement,o=this.domConverter.mapDomToView(i);i&&o&&t.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function ie(n,e,t){const i=e instanceof Array?e:e.childNodes,o=i[t];if((0,r.Gs)(o))return o.data=Cn+o.data,o;{const s=n.createTextNode(Cn);return Array.isArray(e)?i.splice(t,0,s):(0,r.ZQ)(e,t,s),s}}function ue(n,e){return(0,r.UG)(n)&&(0,r.UG)(e)&&!(0,r.Gs)(n)&&!(0,r.Gs)(e)&&!(0,r.C3)(n)&&!(0,r.C3)(e)&&n.tagName.toLowerCase()===e.tagName.toLowerCase()}function Ee(n,e){return(0,r.UG)(n)&&(0,r.UG)(e)&&(0,r.Gs)(n)&&(0,r.Gs)(e)}function Re(n,e,t){return e===t||((0,r.Gs)(e)&&(0,r.Gs)(t)?e.data===t.data:!(!n.isBlockFiller(e)||!n.isBlockFiller(t)))}function ze(n,e){const t=n.data;if(t==e)return;const i=(0,r.HZ)(t,e);for(const o of i)o.type==="insert"?n.insertData(o.index,o.values.join("")):n.deleteData(o.index,o.howMany)}const Ne=un(r.CO.document),Fe=hi(r.CO.document),lt=Fi(r.CO.document),gt="data-ck-unsafe-attribute-",ut="data-ck-unsafe-element";class vt{constructor(e,t={}){this.document=e,this.renderingMode=t.renderingMode||"editing",this.blockFillerMode=t.blockFillerMode||(this.renderingMode==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?r.CO.document:r.CO.document.implementation.createHTMLDocument(""),this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new D,this._encounteredRawContentDomNodes=new WeakSet}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new yi(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const i of Array.from(e.children))this.unbindDomElement(i)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,i){return this.renderingMode==="data"||!(e=e.toLowerCase()).startsWith("on")&&(e!=="srcdoc"||!t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i))&&(i==="img"&&(e==="src"||e==="srcset")||i==="source"&&e==="srcset"||!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data")return void(e.innerHTML=t);const i=new DOMParser().parseFromString(t,"text/html"),o=i.createDocumentFragment(),s=i.body.childNodes;for(;s.length>0;)o.appendChild(s[0]);const p=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT),B=[];let G;for(;G=p.nextNode();)B.push(G);for(const le of B){for(const We of le.getAttributeNames())this.setDomElementAttribute(le,We,le.getAttribute(We));const be=le.tagName.toLowerCase();this._shouldRenameElement(be)&&(xt(be),le.replaceWith(this._createReplacementDomElement(be,le)))}for(;e.firstChild;)e.firstChild.remove();e.append(o)}viewToDom(e,t={}){if(e.is("$text")){const i=this._processDataFromViewText(e);return this._domDocument.createTextNode(i)}{if(this.mapViewToDom(e))return this.mapViewToDom(e);let i;if(e.is("documentFragment"))i=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(i,e);else{if(e.is("uiElement"))return i=e.name==="$comment"?this._domDocument.createComment(e.getCustomProperty("$rawContent")):e.render(this._domDocument,this),t.bind&&this.bindElements(i,e),i;this._shouldRenameElement(e.name)?(xt(e.name),i=this._createReplacementDomElement(e.name)):i=e.hasAttribute("xmlns")?this._domDocument.createElementNS(e.getAttribute("xmlns"),e.name):this._domDocument.createElement(e.name),e.is("rawElement")&&e.render(i,this),t.bind&&this.bindElements(i,e);for(const o of e.getAttributeKeys())this.setDomElementAttribute(i,o,e.getAttribute(o),e)}if(t.withChildren!==!1)for(const o of this.viewChildrenToDom(e,t))i.appendChild(o);return i}}setDomElementAttribute(e,t,i,o){const s=this.shouldRenderAttribute(t,i,e.tagName.toLowerCase())||o&&o.shouldRenderUnsafeAttribute(t);s||(0,r.KE)("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:i}),e.hasAttribute(t)&&!s?e.removeAttribute(t):e.hasAttribute(gt+t)&&s&&e.removeAttribute(gt+t),e.setAttribute(s?t:gt+t,i)}removeDomElementAttribute(e,t){t!=ut&&(e.removeAttribute(t),e.removeAttribute(gt+t))}*viewChildrenToDom(e,t={}){const i=e.getFillerOffset&&e.getFillerOffset();let o=0;for(const s of e.getChildren()){i===o&&(yield this._getBlockFiller());const p=s.is("element")&&!!s.getCustomProperty("dataPipeline:transparentRendering")&&!(0,r.Ps)(s.getAttributes());p&&this.renderingMode=="data"?yield*this.viewChildrenToDom(s,t):(p&&(0,r.KE)("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:s}),yield this.viewToDom(s,t)),o++}i===o&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),o=this._domDocument.createRange();return o.setStart(t.parent,t.offset),o.setEnd(i.parent,i.offset),o}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const i=this.findCorrespondingDomText(t);if(!i)return null;let o=e.offset;return fn(i)&&(o+=an),{parent:i,offset:o}}{let i,o,s;if(e.offset===0){if(i=this.mapViewToDom(t),!i)return null;s=i.childNodes[0]}else{const p=e.nodeBefore;if(o=p.is("$text")?this.findCorrespondingDomText(p):this.mapViewToDom(p),!o)return null;i=o.parentNode,s=o.nextSibling}return(0,r.Gs)(s)&&fn(s)?{parent:s,offset:an}:{parent:i,offset:o?(0,r.cq)(o)+1:0}}}domToView(e,t={}){if(this.isBlockFiller(e))return null;const i=this.getHostViewElement(e);if(i)return i;if((0,r.C3)(e)&&t.skipComments)return null;if((0,r.Gs)(e)){if(Tn(e))return null;{const o=this._processDataFromDomText(e);return o===""?null:new L(this.document,o)}}{if(this.mapDomToView(e))return this.mapDomToView(e);let o;if(this.isDocumentFragment(e))o=new se(this.document),t.bind&&this.bindDocumentFragments(e,o);else{o=this._createViewElement(e,t),t.bind&&this.bindElements(e,o);const s=e.attributes;if(s)for(let p=s.length,B=0;B<p;B++)o._setAttribute(s[B].name,s[B].value);if(this._isViewElementWithRawContent(o,t)||(0,r.C3)(e)){const p=(0,r.C3)(e)?e.data:e.innerHTML;return o._setCustomProperty("$rawContent",p),this._encounteredRawContentDomNodes.add(e),o}}if(t.withChildren!==!1)for(const s of this.domChildrenToView(e,t))o._appendChild(s);return o}}*domChildrenToView(e,t){for(let i=0;i<e.childNodes.length;i++){const o=e.childNodes[i],s=this.domToView(o,t);s!==null&&(yield s)}}domSelectionToView(e){if(e.rangeCount===1){let o=e.getRangeAt(0).startContainer;(0,r.Gs)(o)&&(o=o.parentNode);const s=this.fakeSelectionToView(o);if(s)return s}const t=this.isDomSelectionBackward(e),i=[];for(let o=0;o<e.rangeCount;o++){const s=e.getRangeAt(o),p=this.domRangeToView(s);p&&i.push(p)}return new yi(i,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new Ut(t,i):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,(0,r.cq)(e));const i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return Ge._createBefore(i);if((0,r.Gs)(e)){if(Tn(e))return this.domPositionToView(e.parentNode,(0,r.cq)(e));const o=this.findCorrespondingViewText(e);let s=t;return o?(fn(e)&&(s-=an,s=s<0?0:s),new Ge(o,s)):null}if(t===0){const o=this.mapDomToView(e);if(o)return new Ge(o,0)}else{const o=e.childNodes[t-1];if((0,r.Gs)(o)&&Tn(o))return this.domPositionToView(o.parentNode,(0,r.cq)(o));const s=(0,r.Gs)(o)?this.findCorrespondingViewText(o):this.mapDomToView(o);if(s&&s.parent)return new Ge(s.parent,s.index+1)}return null}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(Tn(e))return null;const t=this.getHostViewElement(e);if(t)return t;const i=e.previousSibling;if(i){if(!this.isElement(i))return null;const o=this.mapDomToView(i);if(o){const s=o.nextSibling;return s instanceof L?s:null}}else{const o=this.mapDomToView(e.parentNode);if(o){const s=o.getChild(0);return s instanceof L?s:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:i,scrollY:o}=r.CO.window,s=[];Ot(t,p=>{const{scrollLeft:B,scrollTop:G}=p;s.push([B,G])}),t.focus(),Ot(t,p=>{const[B,G]=s.shift();p.scrollLeft=B,p.scrollTop=G}),r.CO.window.scrollTo(i,o)}}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(Ne):!(e.tagName!=="BR"||!ei(e,this.blockElements)||e.parentNode.childNodes.length!==1)||e.isEqualNode(lt)||function(t,i){return t.isEqualNode(Fe)&&ei(t,i)&&t.parentNode.childNodes.length===1}(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}const i=t.collapsed;return t.detach(),i}getHostViewElement(e){const t=(0,r.dk)(e);for(t.pop();t.length;){const i=t.pop(),o=this._domToViewMapping.get(i);if(o&&(o.is("uiElement")||o.is("rawElement")))return o}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return hi(this._domDocument);case"markedNbsp":return Fi(this._domDocument);case"br":return un(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if((0,r.Gs)(e)&&fn(e)&&t<an||this.isElement(e)&&fn(e.childNodes[t]))return!1;const i=this.mapDomToView(e);return!i||!i.is("uiElement")&&!i.is("rawElement")}_processDataFromViewText(e){let t=e.data;if(e.getAncestors().some(i=>this.preElements.includes(i.name)))return t;if(t.charAt(0)==" "){const i=this._getTouchingInlineViewNode(e,!1);!(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i))&&i||(t="\xA0"+t.substr(1))}if(t.charAt(t.length-1)==" "){const i=this._getTouchingInlineViewNode(e,!0),o=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";t.charAt(t.length-2)!=" "&&i&&!o||(t=t.substr(0,t.length-1)+"\xA0")}return t.replace(/ {2}/g," \xA0")}_nodeEndsWithSpace(e){if(e.getAncestors().some(i=>this.preElements.includes(i.name)))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_processDataFromDomText(e){let t=e.data;if(function(le,be){return(0,r.dk)(le).some(it=>it.tagName&&be.includes(it.tagName.toLowerCase()))}(e,this.preElements))return In(e);t=t.replace(/[ \n\t\r]{1,}/g," ");const i=this._getTouchingInlineDomNode(e,!1),o=this._getTouchingInlineDomNode(e,!0),s=this._checkShouldLeftTrimDomText(e,i),p=this._checkShouldRightTrimDomText(e,o);s&&(t=t.replace(/^ /,"")),p&&(t=t.replace(/ $/,"")),t=In(new Text(t)),t=t.replace(/ \u00A0/g,"  ");const B=o&&this.isElement(o)&&o.tagName!="BR",G=o&&(0,r.Gs)(o)&&o.data.charAt(0)==" ";return(/( |\u00A0)\u00A0$/.test(t)||!o||B||G)&&(t=t.replace(/\u00A0$/," ")),(s||i&&this.isElement(i)&&i.tagName!="BR")&&(t=t.replace(/^\u00A0/," ")),t}_checkShouldLeftTrimDomText(e,t){return!t||(this.isElement(t)?t.tagName==="BR":!this._encounteredRawContentDomNodes.has(e.previousSibling)&&/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1)))}_checkShouldRightTrimDomText(e,t){return!t&&!fn(e)}_getTouchingInlineViewNode(e,t){const i=new Tt({startPosition:t?Ge._createAfter(e):Ge._createBefore(e),direction:t?"forward":"backward"});for(const o of i){if(o.item.is("element")&&this.inlineObjectElements.includes(o.item.name))return o.item;if(o.item.is("containerElement")||o.item.is("element","br"))return null;if(o.item.is("$textProxy"))return o.item}return null}_getTouchingInlineDomNode(e,t){if(!e.parentNode)return null;const i=t?"firstChild":"lastChild",o=t?"nextSibling":"previousSibling";let s=!0,p=e;do if(!s&&p[i]?p=p[i]:p[o]?(p=p[o],s=!1):(p=p.parentNode,s=!0),!p||this._isBlockElement(p))return null;while(!(0,r.Gs)(p)&&p.tagName!="BR"&&!this._isInlineObjectElement(p));return p}_isBlockElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isInlineObjectElement(e){return this.isElement(e)&&this.inlineObjectElements.includes(e.tagName.toLowerCase())}_createViewElement(e,t){if((0,r.C3)(e))return new Pt(this.document,"$comment");const i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new F(this.document,i)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const i=this._domDocument.createElement("span");if(i.setAttribute(ut,e),t){for(;t.firstChild;)i.appendChild(t.firstChild);for(const o of t.getAttributeNames())i.setAttribute(o,t.getAttribute(o))}return i}}function Ot(n,e){let t=n;for(;t;)e(t),t=t.parentElement}function ei(n,e){const t=n.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function xt(n){n==="script"&&(0,r.KE)("domconverter-unsafe-script-element-detected"),n==="style"&&(0,r.KE)("domconverter-unsafe-style-element-detected")}class ri extends(0,r.Xu)(){constructor(e){super(),this.view=e,this.document=e.document,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!(!e||e.nodeType!==1)&&e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}var vi=a("./node_modules/lodash-es/assignIn.js");class Vi{constructor(e,t,i){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,(0,vi.Z)(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Wi extends ri{constructor(e){super(e),this.useCapture=!1}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(t=>{this.listenTo(e,t,(i,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture})})}fire(e,t,i){this.isEnabled&&this.document.fire(e,new Vi(this.view,t,i))}}class tn extends Wi{constructor(e){super(e),this.domEventType=["keydown","keyup"]}onDomEvent(e){const t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return(0,r.Cq)(this)}};this.fire(e.type,e,t)}}var bn=a("./node_modules/lodash-es/debounce.js");class Pe extends ri{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=(0,bn.Z)(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){const e=this.document;e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&i.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(i.keyCode)},{priority:"lowest"})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,i=new yi(t.getRanges(),{backward:t.isBackward,fake:!1});e!=r.Do.arrowleft&&e!=r.Do.arrowup||i.setTo(i.getFirstPosition()),e!=r.Do.arrowright&&e!=r.Do.arrowdown||i.setTo(i.getLastPosition());const o={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}var k="__lodash_hash_undefined__";const O=function(n){return this.__data__.set(n,k),this},he=function(n){return this.__data__.has(n)};function Se(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new dt.Z;++e<t;)this.add(n[e])}Se.prototype.add=Se.prototype.push=O,Se.prototype.has=he;const ht=Se,ct=function(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1},st=function(n,e){return n.has(e)};var qt=1,Mi=2;const Gi=function(n,e,t,i,o,s){var p=t&qt,B=n.length,G=e.length;if(B!=G&&!(p&&G>B))return!1;var le=s.get(n),be=s.get(e);if(le&&be)return le==e&&be==n;var We=-1,it=!0,Lt=t&Mi?new ht:void 0;for(s.set(n,e),s.set(e,n);++We<B;){var Jt=n[We],mi=e[We];if(i)var _i=p?i(mi,Jt,We,e,n,s):i(Jt,mi,We,n,e,s);if(_i!==void 0){if(_i)continue;it=!1;break}if(Lt){if(!ct(e,function(Ji,Bi){if(!st(Lt,Bi)&&(Jt===Ji||o(Jt,Ji,t,i,s)))return Lt.push(Bi)})){it=!1;break}}else if(Jt!==mi&&!o(Jt,mi,t,i,s)){it=!1;break}}return s.delete(n),s.delete(e),it};var mn=a("./node_modules/lodash-es/_Symbol.js"),eo=a("./node_modules/lodash-es/_Uint8Array.js");const to=function(n){var e=-1,t=Array(n.size);return n.forEach(function(i,o){t[++e]=[o,i]}),t},uo=function(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t};var Ro=1,Oo=2,jo="[object Boolean]",ir="[object Date]",nr="[object Error]",or="[object Map]",rr="[object Number]",No="[object RegExp]",Hn="[object Set]",ho="[object String]",sr="[object Symbol]",Nn="[object ArrayBuffer]",Vo="[object DataView]",mo=mn.Z?mn.Z.prototype:void 0,yo=mo?mo.valueOf:void 0;const ar=function(n,e,t,i,o,s,p){switch(t){case Vo:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Nn:return!(n.byteLength!=e.byteLength||!s(new eo.Z(n),new eo.Z(e)));case jo:case ir:case rr:return(0,xi.Z)(+n,+e);case nr:return n.name==e.name&&n.message==e.message;case No:case ho:return n==e+"";case or:var B=to;case Hn:var G=i&Ro;if(B||(B=uo),n.size!=e.size&&!G)return!1;var le=p.get(n);if(le)return le==e;i|=Oo,p.set(n,e);var be=Gi(B(n),B(e),i,o,s,p);return p.delete(n),be;case sr:if(yo)return yo.call(n)==yo.call(e)}return!1};var Bo=a("./node_modules/lodash-es/_getAllKeys.js"),zo=1,Do=Object.prototype.hasOwnProperty;const lr=function(n,e,t,i,o,s){var p=t&zo,B=(0,Bo.Z)(n),G=B.length;if(G!=(0,Bo.Z)(e).length&&!p)return!1;for(var le=G;le--;){var be=B[le];if(!(p?be in e:Do.call(e,be)))return!1}var We=s.get(n),it=s.get(e);if(We&&it)return We==e&&it==n;var Lt=!0;s.set(n,e),s.set(e,n);for(var Jt=p;++le<G;){var mi=n[be=B[le]],_i=e[be];if(i)var Ji=p?i(_i,mi,be,e,n,s):i(mi,_i,be,n,e,s);if(!(Ji===void 0?mi===_i||o(mi,_i,t,i,s):Ji)){Lt=!1;break}Jt||(Jt=be=="constructor")}if(Lt&&!Jt){var Bi=n.constructor,en=e.constructor;Bi==en||!("constructor"in n)||!("constructor"in e)||typeof Bi=="function"&&Bi instanceof Bi&&typeof en=="function"&&en instanceof en||(Lt=!1)}return s.delete(n),s.delete(e),Lt};var Fo=a("./node_modules/lodash-es/_getTag.js"),Ho=1,xo="[object Arguments]",Co="[object Array]",go="[object Object]",Uo=Object.prototype.hasOwnProperty;const cr=function(n,e,t,i,o,s){var p=(0,Ie.Z)(n),B=(0,Ie.Z)(e),G=p?Co:(0,Fo.Z)(n),le=B?Co:(0,Fo.Z)(e),be=(G=G==xo?go:G)==go,We=(le=le==xo?go:le)==go,it=G==le;if(it&&(0,bi.Z)(n)){if(!(0,bi.Z)(e))return!1;p=!0,be=!1}if(it&&!be)return s||(s=new ni.Z),p||(0,Ti.Z)(n)?Gi(n,e,t,i,o,s):ar(n,e,G,t,i,o,s);if(!(t&Ho)){var Lt=be&&Uo.call(n,"__wrapped__"),Jt=We&&Uo.call(e,"__wrapped__");if(Lt||Jt){var mi=Lt?n.value():n,_i=Jt?e.value():e;return s||(s=new ni.Z),o(mi,_i,t,i,s)}}return!!it&&(s||(s=new ni.Z),lr(n,e,t,i,o,s))},oo=function n(e,t,i,o,s){return e===t||(e==null||t==null||!(0,Zt.Z)(e)&&!(0,Zt.Z)(t)?e!=e&&t!=t:cr(e,t,i,o,n,s))},Wo=function(n,e,t){var i=(t=typeof t=="function"?t:void 0)?t(n,e):void 0;return i===void 0?oo(n,e,void 0,t):!!i};class To extends ri{constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.push(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const t=this.domConverter,i=new Set,o=new Set;for(const p of e){const B=t.mapDomToView(p.target);B&&(B.is("uiElement")||B.is("rawElement")||p.type!=="childList"||this._isBogusBrMutation(p)||o.add(B))}for(const p of e){const B=t.mapDomToView(p.target);if((!B||!B.is("uiElement")&&!B.is("rawElement"))&&p.type==="characterData"){const G=t.findCorrespondingViewText(p.target);G&&!o.has(G.parent)?i.add(G):!G&&fn(p.target)&&o.add(t.mapDomToView(p.target.parentNode))}}let s=!1;for(const p of i)s=!0,this.renderer.markToSync("text",p);for(const p of o){const B=t.mapViewToDom(p),G=Array.from(p.getChildren()),le=Array.from(t.domChildrenToView(B,{withChildren:!1}));Wo(G,le,dr)||(s=!0,this.renderer.markToSync("children",p))}s&&this.view.forceRender()}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}}function dr(n,e){if(!Array.isArray(n))return n===e||!(!n.is("$text")||!e.is("$text"))&&n.data===e.data}class Ao extends Wi{constructor(e){super(e),this._isFocusChanging=!1,this.domEventType=["focus","blur"],this.useCapture=!0;const t=this.document;t.on("focus",()=>{this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this.flush(),e.change(()=>{})},50)}),t.on("blur",(i,o)=>{const s=t.selection.editableElement;s!==null&&s!==o.target||(t.isFocused=!1,this._isFocusChanging=!1,e.change(()=>{}))})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}class Zo extends ri{constructor(e){super(e),this.mutationObserver=e.getObserver(To),this.focusObserver=e.getObserver(Ao),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=(0,bn.Z)(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=(0,bn.Z)(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const t=e.ownerDocument,i=()=>{this.document.isSelecting&&(this._handleSelectionChange(null,t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},{priority:"highest"}),this.listenTo(e,"keydown",i,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",i,{priority:"highest",useCapture:!0}),this._documents.has(t)||(this.listenTo(t,"mouseup",i,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",(o,s)=>{this.document.isComposing&&!r.OB.isAndroid||(this._handleSelectionChange(s,t),this._documentIsSelectingInactivityTimeoutDebounced())}),this._documents.add(t))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_handleSelectionChange(e,t){if(!this.isEnabled)return;const i=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(i.anchorNode))return;this.mutationObserver.flush();const o=this.domConverter.domSelectionToView(i);if(o.rangeCount!=0){if(this.view.hasDomSelection=!0,!(this.selection.isEqual(o)&&this.domConverter.isDomSelectionCorrect(i)||++this._loopbackCounter>60))if(this.focusObserver.flush(),this.selection.isSimilar(o))this.view.forceRender();else{const s={oldSelection:this.selection,newSelection:o,domSelection:i};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}else this.view.hasDomSelection=!1}_clearInfiniteLoop(){this._loopbackCounter=0}}class So extends Wi{constructor(e){super(e),this.domEventType=["compositionstart","compositionupdate","compositionend"];const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}class $o{constructor(e,t={}){this._files=t.cacheFiles?ro(e):null,this._native=e}get files(){return this._files||(this._files=ro(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function ro(n){const e=Array.from(n.files||[]),t=Array.from(n.items||[]);return e.length?e:t.filter(i=>i.kind==="file").map(i=>i.getAsFile())}class ur extends Wi{constructor(e){super(e),this.domEventType=["beforeinput"]}onDomEvent(e){const t=e.getTargetRanges(),i=this.view,o=i.document;let s=null,p=null,B=[];if(e.dataTransfer&&(s=new $o(e.dataTransfer)),e.data!==null?p=e.data:s&&(p=s.getData("text/plain")),o.selection.isFake)B=Array.from(o.selection.getRanges());else if(t.length)B=t.map(G=>i.domConverter.domRangeToView(G));else if(r.OB.isAndroid){const G=e.target.ownerDocument.defaultView.getSelection();B=Array.from(i.domConverter.domSelectionToView(G).getRanges())}if(r.OB.isAndroid&&e.inputType=="insertCompositionText"&&p&&p.endsWith(`
`))this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[i.createRange(B[0].end)]});else if(e.inputType=="insertText"&&p&&p.includes(`
`)){const G=p.split(/\n{1,2}/g);let le=B;for(let be=0;be<G.length;be++){const We=G[be];We!=""&&(this.fire(e.type,e,{data:We,dataTransfer:s,targetRanges:le,inputType:e.inputType,isComposing:e.isComposing}),le=[o.selection.getFirstRange()]),be+1<G.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:le}),le=[o.selection.getFirstRange()])}}else this.fire(e.type,e,{data:p,dataTransfer:s,targetRanges:B,inputType:e.inputType,isComposing:e.isComposing})}}class qo extends ri{constructor(e){super(e),this.document.on("keydown",(t,i)=>{if(this.isEnabled&&(0,r.dj)(i.keyCode)){const o=new Ii(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(o,i),o.stop.called&&t.stop()}})}observe(){}}class Eo extends ri{constructor(e){super(e);const t=this.document;t.on("keydown",(i,o)=>{if(!this.isEnabled||o.keyCode!=r.Do.tab||o.ctrlKey)return;const s=new Ii(t,"tab",t.selection.getFirstRange());t.fire(s,o),s.stop.called&&i.stop()})}observe(){}}class Io extends(0,r.Re)(){constructor(e){super(),this.document=new J(e),this.domConverter=new vt(this.document),this.domRoots=new Map,this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new j(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new Te(this.document),this.addObserver(To),this.addObserver(Ao),this.addObserver(Zo),this.addObserver(tn),this.addObserver(Pe),this.addObserver(So),this.addObserver(qo),this.addObserver(ur),this.addObserver(Eo),this.document.on("arrowKey",Dn,{priority:"low"}),ai(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0})}attachDomRoot(e,t="main"){const i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();const o={};for(const{name:p,value:B}of Array.from(e.attributes))o[p]=B,p==="class"?this._writer.addClass(B.split(" "),i):this._writer.setAttribute(p,B,i);this._initialDomRootAttributes.set(e,o);const s=()=>{this._writer.setAttribute("contenteditable",(!i.isReadOnly).toString(),i),i.isReadOnly?this._writer.addClass("ck-read-only",i):this._writer.removeClass("ck-read-only",i)};s(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",(p,B)=>this._renderer.markToSync("children",B)),i.on("change:attributes",(p,B)=>this._renderer.markToSync("attributes",B)),i.on("change:text",(p,B)=>this._renderer.markToSync("text",B)),i.on("change:isReadOnly",()=>this.change(s)),i.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const p of this._observers.values())p.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:o})=>t.removeAttribute(o));const i=this._initialDomRootAttributes.get(t);for(const o in i)t.setAttribute(o,i[o]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[i,o]of this.domRoots)t.observe(o,i);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection(){const e=this.document.selection.getFirstRange();e&&(0,r.mR)({target:this.domConverter.viewRangeToDom(e),viewportOffset:20})}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new r.Bb("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){r.Bb.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(Ao).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return Ge._createAt(e,t)}createPositionAfter(e){return Ge._createAfter(e)}createPositionBefore(e){return Ge._createBefore(e)}createRange(...e){return new Ut(...e)}createRangeOn(e){return Ut._createOn(e)}createRangeIn(e){return Ut._createIn(e)}createSelection(...e){return new yi(...e)}_disableRendering(e){this._renderingDisabled=e,e==0&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}class Un{is(){throw new Error("is() method is abstract")}}class Gn extends Un{constructor(e){super(),this.parent=null,this._attrs=(0,r.qL)(e)}get document(){return null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))===null)throw new r.Bb("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if((e=this.parent.getChildStartOffset(this))===null)throw new r.Bb("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){const i=this.getAncestors(t),o=e.getAncestors(t);let s=0;for(;i[s]==o[s]&&i[s];)s++;return s===0?null:i[s-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),i=e.getPath(),o=(0,r.Rt)(t,i);switch(o){case"prefix":return!0;case"extension":return!1;default:return t[o]<i[o]}}isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,i)=>(t[i[0]]=i[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=(0,r.qL)(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}}Gn.prototype.is=function(n){return n==="node"||n==="model:node"};class so{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const t=this._nodes.indexOf(e);return t==-1?null:t}getNodeStartOffset(e){const t=this.getNodeIndex(e);return t===null?null:this._nodes.slice(0,t).reduce((i,o)=>i+o.offsetSize,0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new r.Bb("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(const i of this._nodes){if(e>=t&&e<t+i.offsetSize)return this.getNodeIndex(i);t+=i.offsetSize}if(t!=e)throw new r.Bb("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const i of t)if(!(i instanceof Gn))throw new r.Bb("model-nodelist-insertnodes-not-node",this);this._nodes=(0,r.x)(this._nodes,Array.from(t),e,0)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map(e=>e.toJSON())}}class on extends Gn{constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new on(this.data,this.getAttributes())}static fromJSON(e){return new on(e.data,e.attributes)}}on.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};class Pn extends Un{constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new r.Bb("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new r.Bb("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Pn.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};class rn extends Gn{constructor(e,t,i){super(t),this._children=new so,this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const i of e)t=t.getChild(t.offsetToIndex(i));return t}findAncestor(e,t={}){let i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?Array.from(this._children).map(i=>i._clone(!0)):void 0;return new rn(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=function(o){return typeof o=="string"?[new on(o)]:((0,r.TW)(o)||(o=[o]),Array.from(o).map(s=>typeof s=="string"?new on(s):s instanceof Pn?new on(s.data,s.getAttributes()):s))}(t);for(const o of i)o.parent!==null&&o._remove(),o.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const o of i)o.parent=null;return i}static fromJSON(e){let t;if(e.children){t=[];for(const i of e.children)i.name?t.push(rn.fromJSON(i)):t.push(on.fromJSON(i))}return new rn(e.name,e.attributes,t)}}rn.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};class Rn{constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new r.Bb("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new r.Bb("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this.position=e.startPosition.clone():this.position=si._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(e){let t,i,o,s;do o=this.position,s=this._visitedParent,{done:t,value:i}=this.next();while(!t&&e(i));t||(this.position=o,this._visitedParent=s)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const o=ao(t,i),s=o||po(t,i,o);if(s instanceof rn)return this.shallow?t.offset++:(t.path.push(0),this._visitedParent=s),this.position=t,Vn("elementStart",s,e,t,1);if(s instanceof on){let p;if(this.singleCharacters)p=1;else{let le=s.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<le&&(le=this.boundaries.end.offset),p=le-t.offset}const B=t.offset-s.startOffset,G=new Pn(s,B,p);return t.offset+=p,this.position=t,Vn("text",G,e,t,p)}return t.path.pop(),t.offset++,this.position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():Vn("elementEnd",i,e,t)}_previous(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const o=t.parent,s=ao(t,o),p=s||Po(t,o,s);if(p instanceof rn)return t.offset--,this.shallow?(this.position=t,Vn("elementStart",p,e,t,1)):(t.path.push(p.maxOffset),this.position=t,this._visitedParent=p,this.ignoreElementEnd?this._previous():Vn("elementEnd",p,e,t));if(p instanceof on){let B;if(this.singleCharacters)B=1;else{let be=p.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>be&&(be=this.boundaries.start.offset),B=t.offset-be}const G=t.offset-p.startOffset,le=new Pn(p,G-B,B);return t.offset-=B,this.position=t,Vn("text",le,e,t,B)}return t.path.pop(),this.position=t,this._visitedParent=i.parent,Vn("elementStart",i,e,t,1)}}function Vn(n,e,t,i,o){return{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:i,length:o}}}class si extends Un{constructor(e,t,i="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new r.Bb("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new r.Bb("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChild(e.offsetToIndex(this.path[t])),!e)throw new r.Bb("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new r.Bb("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return ao(this,this.parent)}get nodeAfter(){const e=this.parent;return po(this,e,ao(this,e))}get nodeBefore(){const e=this.parent;return Po(this,e,ao(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=(0,r.Rt)(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new Rn(t);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=(0,r.Rt)(this.path,e.path),i=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i)}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let o=0;for(;t[o]==i[o]&&t[o];)o++;return o===0?null:t[o-1]}getShiftedBy(e){const t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const t=Math.min(this.path.length,e.path.length);for(let i=0;i<t;i++){const o=this.path[i]-e.path[i];if(o<-1||o>1)return!1;if(o===1)return fo(e,this,i);if(o===-1)return fo(this,e,i)}return this.path.length===e.path.length||(this.path.length>e.path.length?An(this.path,t):An(e.path,t))}hasSameParentAs(e){if(this.root!==e.root)return!1;const t=this.getParentPath(),i=e.getParentPath();return(0,r.Rt)(t,i)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=si._createAt(this)}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange;let i;return t.containsPosition(this)||t.start.isEqual(this)?(i=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(i=i._getTransformedByDeletion(e.deletionPosition,1))):i=this.isEqual(e.deletionPosition)?si._createAt(e.deletionPosition):this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),i}_getTransformedByDeletion(e,t){const i=si._createAt(this);if(this.root!=e.root)return i;if((0,r.Rt)(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t}}else if((0,r.Rt)(e.getParentPath(),this.getParentPath())=="prefix"){const o=e.path.length-1;if(e.offset<=this.path[o]){if(e.offset+t>this.path[o])return null;i.path[o]-=t}}return i}_getTransformedByInsertion(e,t){const i=si._createAt(this);if(this.root!=e.root)return i;if((0,r.Rt)(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=t);else if((0,r.Rt)(e.getParentPath(),this.getParentPath())=="prefix"){const o=e.path.length-1;e.offset<=this.path[o]&&(i.path[o]+=t)}return i}_getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return si._createAt(this);const o=this._getTransformedByDeletion(e,i);return o===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):o._getTransformedByInsertion(t,i)}_getCombined(e,t){const i=e.path.length-1,o=si._createAt(t);return o.stickiness=this.stickiness,o.offset=o.offset+this.path[i]-e.offset,o.path=[...o.path,...this.path.slice(i+1)],o}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,i="toNone"){if(e instanceof si)return new si(e.root,e.path,e.stickiness);{const o=e;if(t=="end")t=o.maxOffset;else{if(t=="before")return this._createBefore(o,i);if(t=="after")return this._createAfter(o,i);if(t!==0&&!t)throw new r.Bb("model-createpositionat-offset-required",[this,e])}if(!o.is("element")&&!o.is("documentFragment"))throw new r.Bb("model-position-parent-incorrect",[this,e]);const s=o.getPath();return s.push(t),new this(o.root,s,i)}}static _createAfter(e,t){if(!e.parent)throw new r.Bb("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new r.Bb("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){const i=new si(t.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!t.getRoot(e.root))throw new r.Bb("model-position-fromjson-no-root",t,{rootName:e.root});return new si(t.getRoot(e.root),e.path,e.stickiness)}}function ao(n,e){const t=e.getChild(e.offsetToIndex(n.offset));return t&&t.is("$text")&&t.startOffset<n.offset?t:null}function po(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset))}function Po(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset)-1)}function fo(n,e,t){return t+1!==n.path.length&&!!An(e.path,t+1)&&!!function(i,o){let s=i.parent,p=i.path.length-1,B=0;for(;p>=o;){if(i.path[p]+B!==s.maxOffset)return!1;B=1,p--,s=s.parent}return!0}(n,t+1)}function An(n,e){for(;e<n.length;){if(n[e]!==0)return!1;e++}return!0}si.prototype.is=function(n){return n==="position"||n==="model:position"};class Ht extends Un{constructor(e,t){super(),this.start=si._createAt(e),this.end=t?si._createAt(t):si._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Rn({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),t=this.end.getParentPath();return(0,r.Rt)(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),o=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&o}containsItem(e){const t=si._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Ht(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Ht(e.end,this.end))):t.push(new Ht(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new Ht(t,i)}return null}getJoined(e,t=!1){let i=this.isIntersecting(e);if(i||(i=this.start.isBefore(e.start)?t?this.end.isTouching(e.start):this.end.isEqual(e.start):t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let o=this.start,s=this.end;return e.start.isBefore(o)&&(o=e.start),e.end.isAfter(s)&&(s=e.end),new Ht(o,s)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,i=si._createAt(this.start);let o=i.parent;for(;i.path.length>t+1;){const s=o.maxOffset-i.offset;s!==0&&e.push(new Ht(i,i.getShiftedBy(s))),i.path=i.path.slice(0,-1),i.offset++,o=o.parent}for(;i.path.length<=this.end.path.length;){const s=this.end.path[i.path.length-1],p=s-i.offset;p!==0&&e.push(new Ht(i,i.getShiftedBy(p))),i.offset=s,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Rn(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new Rn(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new Rn(e);yield t.position;for(const i of t)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new Ht(this.start,this.end)]}getTransformedByOperations(e){const t=[new Ht(this.start,this.end)];for(const i of e)for(let o=0;o<t.length;o++){const s=t[o].getTransformedByOperation(i);t.splice(o,1,...s),o+=s.length-1}for(let i=0;i<t.length;i++){const o=t[i];for(let s=i+1;s<t.length;s++){const p=t[s];(o.containsRange(p)||p.containsRange(o)||o.isEqual(p))&&t.splice(s,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const i=e.sourcePosition,o=e.howMany,s=e.targetPosition;return this._getTransformedByMove(i,s,o,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new Ht(t,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new Ht(this.start);let t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(t=si._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition),new Ht(t,i)):new Ht(t,i)}_getTransformedByInsertion(e,t,i=!1){if(i&&this.containsPosition(e))return[new Ht(this.start,e),new Ht(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const o=new Ht(this.start,this.end);return o.start=o.start._getTransformedByInsertion(e,t),o.end=o.end._getTransformedByInsertion(e,t),[o]}}_getTransformedByMove(e,t,i,o=!1){if(this.isCollapsed){const We=this.start._getTransformedByMove(e,t,i);return[new Ht(We)]}const s=Ht._createFromPositionAndShift(e,i),p=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!o&&(s.containsPosition(this.start)||s.containsPosition(this.end))){const We=this.start._getTransformedByMove(e,t,i),it=this.end._getTransformedByMove(e,t,i);return[new Ht(We,it)]}let B;const G=this.getDifference(s);let le=null;const be=this.getIntersection(s);if(G.length==1?le=new Ht(G[0].start._getTransformedByDeletion(e,i),G[0].end._getTransformedByDeletion(e,i)):G.length==2&&(le=new Ht(this.start,this.end._getTransformedByDeletion(e,i))),B=le?le._getTransformedByInsertion(p,i,be!==null||o):[],be){const We=new Ht(be.start._getCombined(s.start,p),be.end._getCombined(s.start,p));B.length==2?B.splice(1,0,We):B.push(We)}return B}_getTransformedByDeletion(e,t){let i=this.start._getTransformedByDeletion(e,t),o=this.end._getTransformedByDeletion(e,t);return i==null&&o==null?null:(i==null&&(i=e),o==null&&(o=e),new Ht(i,o))}static _createFromPositionAndShift(e,t){const i=e,o=e.getShiftedBy(t);return t>0?new this(i,o):new this(o,i)}static _createIn(e){return new this(si._createAt(e,0),si._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(si._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new r.Bb("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const t=e[0];e.sort((s,p)=>s.start.isAfter(p.start)?1:-1);const i=e.indexOf(t),o=new this(t.start,t.end);if(i>0)for(let s=i-1;e[s].end.isEqual(o.start);s++)o.start=si._createAt(e[s].start);for(let s=i+1;s<e.length&&e[s].start.isEqual(o.end);s++)o.end=si._createAt(e[s].end);return o}static fromJSON(e,t){return new this(si.fromJSON(e.start,t),si.fromJSON(e.end,t))}}Ht.prototype.is=function(n){return n==="range"||n==="model:range"};class bo extends(0,r.ln)(){constructor(){super(),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._deferredBindingRemovals=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;const i=this._modelToViewMapping.get(t.modelPosition.parent);if(!i)throw new r.Bb("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(i,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;const i=this.findMappedViewAncestor(t.viewPosition),o=this._viewToModelMapping.get(i),s=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=si._createAt(o,s)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){const i=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const o of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(o);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(i)==e&&this._modelToViewMapping.delete(i))}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const i=this._markerNameToElements.get(t)||new Set;i.add(e);const o=this._elementToMarkerNames.get(e)||new Set;o.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,o)}unbindElementFromMarkerName(e,t){const i=this._markerNameToElements.get(t);i&&(i.delete(e),i.size==0&&this._markerNameToElements.delete(t));const o=this._elementToMarkerNames.get(e);o&&(o.delete(t),o.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new Ht(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new Ut(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){const i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const i=new Set;for(const o of t)if(o.is("attributeElement"))for(const s of o.getElementsWithSameId())i.add(s);else i.add(o);return i}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,i){if(i!=e)return this._toModelOffset(e.parent,e.index,i)+this._toModelOffset(e,t,e);if(e.is("$text"))return t;let o=0;for(let s=0;s<t;s++)o+=this.getModelLength(e.getChild(s));return o}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(const i of e.getChildren())t+=this.getModelLength(i);return t}}findPositionIn(e,t){let i,o=0,s=0,p=0;if(e.is("$text"))return new Ge(e,t);for(;s<t;)i=e.getChild(p),o=this.getModelLength(i),s+=o,p++;return s==t?this._moveViewPositionToTextNode(new Ge(e,p)):this.findPositionIn(i,t-(s-o))}_moveViewPositionToTextNode(e){const t=e.nodeBefore,i=e.nodeAfter;return t instanceof L?new Ge(t,t.data.length):i instanceof L?new Ge(i,0):e}}class Ko{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=wo(t),e instanceof Pn&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=wo(t),e instanceof Pn&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0)}test(e,t){t=wo(t),e instanceof Pn&&(e=this._getSymbolForTextProxy(e));const i=this._consumable.get(e);if(i===void 0)return null;const o=i.get(t);return o===void 0?null:o}revert(e,t){t=wo(t),e instanceof Pn&&(e=this._getSymbolForTextProxy(e));const i=this.test(e,t);return i===!1?(this._consumable.get(e).set(t,!0),!0):i!==!0&&null}verifyAllConsumed(e){const t=[];for(const[i,o]of this._consumable)for(const[s,p]of o){const B=s.split(":")[0];p&&e==B&&t.push({event:s,item:i.name||i.description})}if(t.length)throw new r.Bb("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const i=this._textProxyRegistry.get(e.startOffset);if(i){const o=i.get(e.endOffset);o&&(t=o.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,i=e.endOffset,o=e.parent,s=Symbol("$textProxy:"+e.data);let p,B;return p=this._textProxyRegistry.get(t),p||(p=new Map,this._textProxyRegistry.set(t,p)),B=p.get(i),B||(B=new Map,p.set(i,B)),B.set(o,s),s}}function wo(n){const e=n.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?n:e.length>1?e[0]+":"+e[1]:e[0]}class ko extends(0,r.ln)(){constructor(e){super(),this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,t,i){const o=this._createConversionApi(i,e.getRefreshedItems());for(const p of e.getMarkersToRemove())this._convertMarkerRemove(p.name,p.range,o);const s=this._reduceChanges(e.getChanges());for(const p of s)p.type==="insert"?this._convertInsert(Ht._createFromPositionAndShift(p.position,p.length),o):p.type==="reinsert"?this._convertReinsert(Ht._createFromPositionAndShift(p.position,p.length),o):p.type==="remove"?this._convertRemove(p.position,p.length,p.name,o):this._convertAttribute(p.range,p.attributeKey,p.attributeOldValue,p.attributeNewValue,o);for(const p of o.mapper.flushUnboundMarkerNames()){const B=t.get(p).getRange();this._convertMarkerRemove(p,B,o),this._convertMarkerAdd(p,B,o)}for(const p of e.getMarkersToAdd())this._convertMarkerAdd(p.name,p.range,o);o.mapper.flushDeferredBindings(),o.consumable.verifyAllConsumed("insert")}convert(e,t,i,o={}){const s=this._createConversionApi(i,void 0,o);this._convertInsert(e,s);for(const[p,B]of t)this._convertMarkerAdd(p,B,s);s.consumable.verifyAllConsumed("insert")}convertSelection(e,t,i){const o=Array.from(t.getMarkersAtPosition(e.getFirstPosition())),s=this._createConversionApi(i);if(this._addConsumablesForSelection(s.consumable,e,o),this.fire("selection",{selection:e},s),e.isCollapsed){for(const p of o){const B=p.getRange();if(!cn(e.getFirstPosition(),p,s.mapper))continue;const G={item:e,markerName:p.name,markerRange:B};s.consumable.test(e,"addMarker:"+p.name)&&this.fire(`addMarker:${p.name}`,G,s)}for(const p of e.getAttributeKeys()){const B={item:e,range:e.getFirstRange(),attributeKey:p,attributeOldValue:null,attributeNewValue:e.getAttribute(p)};s.consumable.test(e,"attribute:"+B.attributeKey)&&this.fire(`attribute:${B.attributeKey}:$text`,B,s)}}}_convertInsert(e,t,i={}){i.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,Array.from(e));for(const o of Array.from(e.getWalker({shallow:!0})).map(Go))this._testAndFire("insert",o,t)}_convertRemove(e,t,i,o){this.fire(`remove:${i}`,{position:e,length:t},o)}_convertAttribute(e,t,i,o,s){this._addConsumablesForRange(s.consumable,e,`attribute:${t}`);for(const p of e){const B={item:p.item,range:Ht._createFromPositionAndShift(p.previousPosition,p.length),attributeKey:t,attributeOldValue:i,attributeNewValue:o};this._testAndFire(`attribute:${t}`,B,s)}}_convertReinsert(e,t){const i=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,i);for(const o of i.map(Go))this._testAndFire("insert",{...o,reconversion:!0},t)}_convertMarkerAdd(e,t,i){if(t.root.rootName=="$graveyard")return;const o=`addMarker:${e}`;if(i.consumable.add(t,o),this.fire(o,{markerName:e,markerRange:t},i),i.consumable.consume(t,o)){this._addConsumablesForRange(i.consumable,t,o);for(const s of t.getItems()){if(!i.consumable.test(s,o))continue;const p={item:s,range:Ht._createOn(s),markerName:e,markerRange:t};this.fire(o,p,i)}}}_convertMarkerRemove(e,t,i){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},i)}_reduceChanges(e){const t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(const i of t){const o=i.item;if(e.test(o,"insert")===null){e.add(o,"insert");for(const s of o.getAttributeKeys())e.add(o,"attribute:"+s)}}return e}_addConsumablesForRange(e,t,i){for(const o of t.getItems())e.add(o,i);return e}_addConsumablesForSelection(e,t,i){e.add(t,"selection");for(const o of i)e.add(t,"addMarker:"+o.name);for(const o of t.getAttributeKeys())e.add(t,"attribute:"+o);return e}_testAndFire(e,t,i){const o=function(G,le){const be=le.item.is("element")?le.item.name:"$text";return`${G}:${be}`}(e,t),s=t.item.is("$textProxy")?i.consumable._getSymbolForTextProxy(t.item):t.item,p=this._firedEventsMap.get(i),B=p.get(s);if(B){if(B.has(o))return;B.add(o)}else p.set(s,new Set([o]));this.fire(o,t,i)}_testAndFireAddAttributes(e,t){const i={item:e,range:Ht._createOn(e)};for(const o of i.item.getAttributeKeys())i.attributeKey=o,i.attributeOldValue=null,i.attributeNewValue=i.item.getAttribute(o),this._testAndFire(`attribute:${o}`,i,t)}_createConversionApi(e,t=new Set,i={}){const o={...this._conversionApi,consumable:new Ko,writer:e,options:i,convertItem:s=>this._convertInsert(Ht._createOn(s),o),convertChildren:s=>this._convertInsert(Ht._createIn(s),o,{doNotAddConsumables:!0}),convertAttributes:s=>this._testAndFireAddAttributes(s,o),canReuseView:s=>!t.has(o.mapper.toModelElement(s))};return this._firedEventsMap.set(o,new Map),o}}function cn(n,e,t){const i=e.getRange(),o=Array.from(n.getAncestors());return o.shift(),o.reverse(),!o.some(s=>{if(i.containsItem(s))return!!t.toViewElement(s).getCustomProperty("addHighlight")})}function Go(n){return{item:n.item,range:Ht._createFromPositionAndShift(n.previousPosition,n.length)}}class On extends(0,r.ln)(Un){constructor(...e){super(),this._lastRangeBackward=!1,this._attrs=new Map,this._ranges=[],e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const o of e._ranges)if(t.isEqual(o)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new Ht(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)e&&!t.start.isBefore(e.start)||(e=t);return e?new Ht(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)e&&!t.end.isAfter(e.end)||(e=t);return e?new Ht(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,i,o]=e;if(typeof i=="object"&&(o=i,i=void 0),t===null)this._setRanges([]);else if(t instanceof On)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof Ht)this._setRanges([t],!!o&&!!o.backward);else if(t instanceof si)this._setRanges([new Ht(t)]);else if(t instanceof Gn){const s=!!o&&!!o.backward;let p;if(i=="in")p=Ht._createIn(t);else if(i=="on")p=Ht._createOn(t);else{if(i===void 0)throw new r.Bb("model-selection-setto-required-second-parameter",[this,t]);p=new Ht(si._createAt(t,i))}this._setRanges([p],s)}else{if(!(0,r.TW)(t))throw new r.Bb("model-selection-setto-not-selectable",[this,t]);this._setRanges(t,o&&!!o.backward)}}_setRanges(e,t=!1){const i=Array.from(e),o=i.some(s=>{if(!(s instanceof Ht))throw new r.Bb("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(p=>!p.isEqual(s))});(i.length!==this._ranges.length||o)&&(this._replaceAllRanges(i),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new r.Bb("model-selection-setfocus-no-ranges",[this,e]);const i=si._createAt(e,t);if(i.compareWith(this.focus)=="same")return;const o=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(o)=="before"?(this._pushRange(new Ht(i,o)),this._lastRangeBackward=!0):(this._pushRange(new Ht(o,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const i=b(t.start,e);i&&M(i,t)&&(yield i);for(const s of t.getWalker()){const p=s.item;s.type=="elementEnd"&&l(p,e,t)&&(yield p)}const o=b(t.end,e);o&&!t.end.isTouching(si._createAt(o,0))&&M(o,t)&&(yield o)}}containsEntireContent(e=this.anchor.root){const t=si._createAt(e,0),i=si._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new Ht(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new r.Bb("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(const t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function ee(n,e){return!e.has(n)&&(e.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function l(n,e,t){return ee(n,e)&&M(n,t)}function b(n,e){const t=n.parent.root.document.model.schema,i=n.parent.getAncestors({parentFirst:!0,includeSelf:!0});let o=!1;const s=i.find(p=>!o&&(o=t.isLimit(p),!o&&ee(p,e)));return i.forEach(p=>e.add(p)),s}function M(n,e){const t=function(i){const o=i.root.document.model.schema;let s=i.parent;for(;s;){if(o.isBlock(s))return s;s=s.parent}}(n);return t?!e.containsRange(Ht._createOn(t),!0):!0}On.prototype.is=function(n){return n==="selection"||n==="model:selection"};class S extends(0,r.ln)(Ht){constructor(e,t){super(e,t),$.call(this)}detach(){this.stopListening()}toRange(){return new Ht(this.start,this.end)}static fromRange(e){return new S(e.start,e.end)}}function $(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&K.call(this,t)},{priority:"low"})}function K(n){const e=this.getTransformedByOperation(n),t=Ht._createFromRanges(e),i=!t.isEqual(this),o=function(p,B){switch(B.type){case"insert":return p.containsPosition(B.position);case"move":case"remove":case"reinsert":case"merge":return p.containsPosition(B.sourcePosition)||p.start.isEqual(B.sourcePosition)||p.containsPosition(B.targetPosition);case"split":return p.containsPosition(B.splitPosition)||p.containsPosition(B.insertionPosition)}return!1}(this,n);let s=null;if(i){t.root.rootName=="$graveyard"&&(s=n.type=="remove"?n.sourcePosition:n.deletionPosition);const p=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",p,{deletionPosition:s})}else o&&this.fire("change:content",this.toRange(),{deletionPosition:s})}S.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};const ne="selection:";class re extends(0,r.ln)(Un){constructor(e){super(),this._selection=new xe(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return ne+e}static _isStoreAttributeKey(e){return e.startsWith(ne)}}re.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};class xe extends On{constructor(e){super(),this.markers=new r.FE({idProperty:"name"}),this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,i)=>{const o=i[0];o.isDocumentOperation&&o.type!="marker"&&o.type!="rename"&&o.type!="noop"&&(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,i,o,s)=>{this._updateMarker(i,s)}),this.listenTo(this._document,"change",(t,i)=>{(function(o,s){const p=o.document.differ;for(const B of p.getChanges()){if(B.type!="insert")continue;const G=B.position.parent;B.length===G.maxOffset&&o.enqueueChange(s,le=>{const be=Array.from(G.getAttributeKeys()).filter(We=>We.startsWith(ne));for(const We of be)le.removeAttribute(We,G)})}})(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=(0,r.hQ)();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new r.Bb("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(const t of e)if(!this._document._validateSelectionRange(t))throw new r.Bb("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=S.fromRange(e);return t.on("change:range",(i,o,s)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=s.deletionPosition;const p=this._ranges.indexOf(t);this._ranges.splice(p,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const o of this._model.markers){const s=o.name.split(":",1)[0];if(!this._observedMarkers.has(s))continue;const p=o.getRange();for(const B of this.getRanges())p.containsRange(B,!B.isCollapsed)&&e.push(o)}const i=Array.from(this.markers);for(const o of e)this.markers.has(o)||(this.markers.add(o),t=!0);for(const o of Array.from(this.markers))e.includes(o)||(this.markers.remove(o),t=!0);t&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,t){const i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let o=!1;const s=Array.from(this.markers),p=this.markers.has(e);if(t){let B=!1;for(const G of this.getRanges())if(t.containsRange(G,!G.isCollapsed)){B=!0;break}B&&!p?(this.markers.add(e),o=!0):!B&&p&&(this.markers.remove(e),o=!0)}else p&&(this.markers.remove(e),o=!0);o&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateAttributes(e){const t=(0,r.qL)(this._getSurroundingAttributes()),i=(0,r.qL)(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[s,p]of this._attributePriority)p=="low"&&(this._attrs.delete(s),this._attributePriority.delete(s));this._setAttributesTo(t);const o=[];for(const[s,p]of this.getAttributes())i.has(s)&&i.get(s)===p||o.push(s);for(const[s]of i)this.hasAttribute(s)||o.push(s);o.length>0&&this.fire("change:attribute",{attributeKeys:o,directChange:!1})}_setAttribute(e,t,i=!0){const o=i?"normal":"low";return o=="low"&&this._attributePriority.get(e)=="normal"?!1:super.getAttribute(e)!==t&&(this._attrs.set(e,t),this._attributePriority.set(e,o),!0)}_removeAttribute(e,t=!0){const i=t?"normal":"low";return(i!="low"||this._attributePriority.get(e)!="normal")&&(this._attributePriority.set(e,i),!!super.hasAttribute(e)&&(this._attrs.delete(e),!0))}_setAttributesTo(e){const t=new Set;for(const[i,o]of this.getAttributes())e.get(i)!==o&&this._removeAttribute(i,!1);for(const[i,o]of e)this._setAttribute(i,o,!1)&&t.add(i);return t}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith(ne)&&(yield[t.substr(ne.length),e.getAttribute(t)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;let i=null;if(this.isCollapsed){const o=e.textNode?e.textNode:e.nodeBefore,s=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=Oe(o)),i||(i=Oe(s)),!this.isGravityOverridden&&!i){let p=o;for(;p&&!t.isInline(p)&&!i;)p=p.previousSibling,i=Oe(p)}if(!i){let p=s;for(;p&&!t.isInline(p)&&!i;)p=p.nextSibling,i=Oe(p)}i||(i=this.getStoredAttributes())}else{const o=this.getFirstRange();for(const s of o){if(s.item.is("element")&&t.isObject(s.item))break;if(s.type=="text"){i=s.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function Oe(n){return n instanceof Pn||n instanceof on?n.getAttributes():null}class Xe{constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}var ft=1,Ft=4;const ti=function(n){return(0,w.Z)(n,ft|Ft)};class Kt extends Xe{elementToElement(e){return this.add(function(t){const i=Ai(t.model),o=Hi(t.view,"container");return i.attributes.length&&(i.children=!0),s=>{s.on(`insert:${i.name}`,function(p,B=Ue){return(G,le,be)=>{if(!B(le.item,be.consumable,{preflight:!0}))return;const We=p(le.item,be,le);if(!We)return;B(le.item,be.consumable);const it=be.mapper.toViewPosition(le.range.start);be.mapper.bindElements(le.item,We),be.writer.insert(it,We),be.convertAttributes(le.item),oe(We,le.item.getChildren(),be,{reconversion:le.reconversion})}}(o,Yn(i)),{priority:t.converterPriority||"normal"}),(i.children||i.attributes.length)&&s.on("reduceChanges",Xi(i),{priority:"low"})}}(e))}elementToStructure(e){return this.add(function(t){const i=Ai(t.model),o=Hi(t.view,"container");return i.children=!0,s=>{if(s._conversionApi.schema.checkChild(i.name,"$text"))throw new r.Bb("conversion-element-to-structure-disallowed-text",s,{elementName:i.name});var p,B;s.on(`insert:${i.name}`,(p=o,B=Yn(i),(G,le,be)=>{if(!B(le.item,be.consumable,{preflight:!0}))return;const We=new Map;be.writer._registerSlotFactory(function(Jt,mi,_i){return(Ji,Bi="children")=>{const en=Ji.createContainerElement("$slot");let En=null;if(Bi==="children")En=Array.from(Jt.getChildren());else{if(typeof Bi!="function")throw new r.Bb("conversion-slot-mode-unknown",_i.dispatcher,{modeOrFilter:Bi});En=Array.from(Jt.getChildren()).filter(_o=>Bi(_o))}return mi.set(en,En),en}}(le.item,We,be));const it=p(le.item,be,le);if(be.writer._clearSlotFactory(),!it)return;(function(Jt,mi,_i){const Ji=Array.from(mi.values()).flat(),Bi=new Set(Ji);if(Bi.size!=Ji.length)throw new r.Bb("conversion-slot-filter-overlap",_i.dispatcher,{element:Jt});if(Bi.size!=Jt.childCount)throw new r.Bb("conversion-slot-filter-incomplete",_i.dispatcher,{element:Jt})})(le.item,We,be),B(le.item,be.consumable);const Lt=be.mapper.toViewPosition(le.range.start);be.mapper.bindElements(le.item,it),be.writer.insert(Lt,it),be.convertAttributes(le.item),function(Jt,mi,_i,Ji){_i.mapper.on("modelToViewPosition",En,{priority:"highest"});let Bi=null,en=null;for([Bi,en]of mi)oe(Jt,en,_i,Ji),_i.writer.move(_i.writer.createRangeIn(Bi),_i.writer.createPositionBefore(Bi)),_i.writer.remove(Bi);function En(_o,Kn){const ba=Kn.modelPosition.nodeAfter,us=en.indexOf(ba);us<0||(Kn.viewPosition=Kn.mapper.findPositionIn(Bi,us))}_i.mapper.off("modelToViewPosition",En)}(it,We,be,{reconversion:le.reconversion})}),{priority:t.converterPriority||"normal"}),s.on("reduceChanges",Xi(i),{priority:"low"})}}(e))}attributeToElement(e){return this.add(function(t){t=ti(t);let i=t.model;typeof i=="string"&&(i={key:i});let o=`attribute:${i.key}`;if(i.name&&(o+=":"+i.name),i.values)for(const p of i.values)t.view[p]=Hi(t.view[p],"attribute");else t.view=Hi(t.view,"attribute");const s=Qi(t);return p=>{p.on(o,function(B){return(G,le,be)=>{if(!be.consumable.test(le.item,G.name))return;const We=B(le.attributeOldValue,be,le),it=B(le.attributeNewValue,be,le);if(!We&&!it)return;be.consumable.consume(le.item,G.name);const Lt=be.writer,Jt=Lt.document.selection;if(le.item instanceof On||le.item instanceof re)Lt.wrap(Jt.getFirstRange(),it);else{let mi=be.mapper.toViewRange(le.range);le.attributeOldValue!==null&&We&&(mi=Lt.unwrap(mi,We)),le.attributeNewValue!==null&&it&&Lt.wrap(mi,it)}}}(s),{priority:t.converterPriority||"normal"})}}(e))}attributeToAttribute(e){return this.add(function(t){t=ti(t);let i=t.model;typeof i=="string"&&(i={key:i});let o=`attribute:${i.key}`;if(i.name&&(o+=":"+i.name),i.values)for(const p of i.values)t.view[p]=hn(t.view[p]);else t.view=hn(t.view);const s=Qi(t);return p=>{var B;p.on(o,(B=s,(G,le,be)=>{if(!be.consumable.test(le.item,G.name))return;const We=B(le.attributeOldValue,be,le),it=B(le.attributeNewValue,be,le);if(!We&&!it)return;be.consumable.consume(le.item,G.name);const Lt=be.mapper.toViewElement(le.item),Jt=be.writer;if(!Lt)throw new r.Bb("conversion-attribute-to-attribute-on-text",be.dispatcher,le);if(le.attributeOldValue!==null&&We)if(We.key=="class"){const mi=(0,r.qo)(We.value);for(const _i of mi)Jt.removeClass(_i,Lt)}else if(We.key=="style"){const mi=Object.keys(We.value);for(const _i of mi)Jt.removeStyle(_i,Lt)}else Jt.removeAttribute(We.key,Lt);if(le.attributeNewValue!==null&&it)if(it.key=="class"){const mi=(0,r.qo)(it.value);for(const _i of mi)Jt.addClass(_i,Lt)}else if(it.key=="style"){const mi=Object.keys(it.value);for(const _i of mi)Jt.setStyle(_i,it.value[_i],Lt)}else Jt.setAttribute(it.key,it.value,Lt)}),{priority:t.converterPriority||"normal"})}}(e))}markerToElement(e){return this.add(function(t){const i=Hi(t.view,"ui");return o=>{var s;o.on(`addMarker:${t.model}`,(s=i,(p,B,G)=>{B.isOpening=!0;const le=s(B,G);B.isOpening=!1;const be=s(B,G);if(!le||!be)return;const We=B.markerRange;if(We.isCollapsed&&!G.consumable.consume(We,p.name))return;for(const Jt of We)if(!G.consumable.consume(Jt.item,p.name))return;const it=G.mapper,Lt=G.writer;Lt.insert(it.toViewPosition(We.start),le),G.mapper.bindElementToMarker(le,B.markerName),We.isCollapsed||(Lt.insert(it.toViewPosition(We.end),be),G.mapper.bindElementToMarker(be,B.markerName)),p.stop()}),{priority:t.converterPriority||"normal"}),o.on(`removeMarker:${t.model}`,(p,B,G)=>{const le=G.mapper.markerNameToElements(B.markerName);if(le){for(const be of le)G.mapper.unbindElementFromMarkerName(be,B.markerName),G.writer.clear(G.writer.createRangeOn(be),be);G.writer.clearClonedElementsGroup(B.markerName),p.stop()}},{priority:t.converterPriority||"normal"})}}(e))}markerToHighlight(e){return this.add(function(t){return i=>{var o;i.on(`addMarker:${t.model}`,(o=t.view,(s,p,B)=>{if(!p.item||!(p.item instanceof On||p.item instanceof re||p.item.is("$textProxy")))return;const G=kn(o,p,B);if(!G||!B.consumable.consume(p.item,s.name))return;const le=B.writer,be=ui(le,G),We=le.document.selection;if(p.item instanceof On||p.item instanceof re)le.wrap(We.getFirstRange(),be);else{const it=B.mapper.toViewRange(p.range),Lt=le.wrap(it,be);for(const Jt of Lt.getItems())if(Jt.is("attributeElement")&&Jt.isSimilar(be)){B.mapper.bindElementToMarker(Jt,p.markerName);break}}}),{priority:t.converterPriority||"normal"}),i.on(`addMarker:${t.model}`,function(s){return(p,B,G)=>{if(!B.item||!(B.item instanceof rn))return;const le=kn(s,B,G);if(!le||!G.consumable.test(B.item,p.name))return;const be=G.mapper.toViewElement(B.item);if(be&&be.getCustomProperty("addHighlight")){G.consumable.consume(B.item,p.name);for(const We of Ht._createIn(B.item))G.consumable.consume(We.item,p.name);be.getCustomProperty("addHighlight")(be,le,G.writer),G.mapper.bindElementToMarker(be,B.markerName)}}}(t.view),{priority:t.converterPriority||"normal"}),i.on(`removeMarker:${t.model}`,function(s){return(p,B,G)=>{if(B.markerRange.isCollapsed)return;const le=kn(s,B,G);if(!le)return;const be=ui(G.writer,le),We=G.mapper.markerNameToElements(B.markerName);if(We){for(const it of We)G.mapper.unbindElementFromMarkerName(it,B.markerName),it.is("attributeElement")?G.writer.unwrap(G.writer.createRangeOn(it),be):it.getCustomProperty("removeHighlight")(it,le.id,G.writer);G.writer.clearClonedElementsGroup(B.markerName),p.stop()}}}(t.view),{priority:t.converterPriority||"normal"})}}(e))}markerToData(e){return this.add(function(t){t=ti(t);const i=t.model;let o=t.view;return o||(o=s=>({group:i,name:s.substr(t.model.length+1)})),s=>{var p;s.on(`addMarker:${i}`,(p=o,(B,G,le)=>{const be=p(G.markerName,le);if(!be)return;const We=G.markerRange;le.consumable.consume(We,B.name)&&(ki(We,!1,le,G,be),ki(We,!0,le,G,be),B.stop())}),{priority:t.converterPriority||"normal"}),s.on(`removeMarker:${i}`,function(B){return(G,le,be)=>{const We=B(le.markerName,be);if(!We)return;const it=be.mapper.markerNameToElements(le.markerName);if(it){for(const Jt of it)be.mapper.unbindElementFromMarkerName(Jt,le.markerName),Jt.is("containerElement")?(Lt(`data-${We.group}-start-before`,Jt),Lt(`data-${We.group}-start-after`,Jt),Lt(`data-${We.group}-end-before`,Jt),Lt(`data-${We.group}-end-after`,Jt)):be.writer.clear(be.writer.createRangeOn(Jt),Jt);be.writer.clearClonedElementsGroup(le.markerName),G.stop()}function Lt(Jt,mi){if(mi.hasAttribute(Jt)){const _i=new Set(mi.getAttribute(Jt).split(","));_i.delete(We.name),_i.size==0?be.writer.removeAttribute(Jt,mi):be.writer.setAttribute(Jt,Array.from(_i).join(","),mi)}}}}(o),{priority:t.converterPriority||"normal"})}}(e))}}function ui(n,e){const t=n.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function ki(n,e,t,i,o){const s=e?n.start:n.end,p=s.nodeAfter&&s.nodeAfter.is("element")?s.nodeAfter:null,B=s.nodeBefore&&s.nodeBefore.is("element")?s.nodeBefore:null;if(p||B){let G,le;e&&p||!e&&!B?(G=p,le=!0):(G=B,le=!1);const be=t.mapper.toViewElement(G);if(be)return void function(We,it,Lt,Jt,mi,_i){const Ji=`data-${_i.group}-${it?"start":"end"}-${Lt?"before":"after"}`,Bi=We.hasAttribute(Ji)?We.getAttribute(Ji).split(","):[];Bi.unshift(_i.name),Jt.writer.setAttribute(Ji,Bi.join(","),We),Jt.mapper.bindElementToMarker(We,mi.markerName)}(be,e,le,t,i,o)}(function(G,le,be,We,it){const Lt=`${it.group}-${le?"start":"end"}`,Jt=it.name?{name:it.name}:null,mi=be.writer.createUIElement(Lt,Jt);be.writer.insert(G,mi),be.mapper.bindElementToMarker(mi,We.markerName)})(t.mapper.toViewPosition(s),e,t,i,o)}function Ai(n){return typeof n=="string"&&(n={name:n}),n.attributes?Array.isArray(n.attributes)||(n.attributes=[n.attributes]):n.attributes=[],n.children=!!n.children,n}function Hi(n,e){return typeof n=="function"?n:(t,i)=>function(o,s,p){typeof o=="string"&&(o={name:o});let B;const G=s.writer,le=Object.assign({},o.attributes);if(p=="container")B=G.createContainerElement(o.name,le);else if(p=="attribute"){const be={priority:o.priority||R.DEFAULT_PRIORITY};B=G.createAttributeElement(o.name,le,be)}else B=G.createUIElement(o.name,le);if(o.styles){const be=Object.keys(o.styles);for(const We of be)G.setStyle(We,o.styles[We],B)}if(o.classes){const be=o.classes;if(typeof be=="string")G.addClass(be,B);else for(const We of be)G.addClass(We,B)}return B}(n,i,e)}function Qi(n){return n.model.values?(e,t,i)=>{const o=n.view[e];return o?o(e,t,i):null}:n.view}function hn(n){return typeof n=="string"?e=>({key:n,value:e}):typeof n=="object"?n.value?()=>n:e=>({key:n.key,value:e}):n}function kn(n,e,t){const i=typeof n=="function"?n(e,t):n;return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null}function Xi(n){const e=function(t){return(i,o)=>{if(!i.is("element",t.name))return!1;if(o.type=="attribute"){if(t.attributes.includes(o.attributeKey))return!0}else if(t.children)return!0;return!1}}(n);return(t,i)=>{const o=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(const s of i.changes){const p=s.type=="attribute"?s.range.start.nodeAfter:s.position.parent;if(p&&e(p,s)){if(!i.reconvertedElements.has(p)){i.reconvertedElements.add(p);const B=si._createBefore(p);o.push({type:"remove",name:p.name,position:B,length:1},{type:"reinsert",name:p.name,position:B,length:1})}}else o.push(s)}i.changes=o}}function Yn(n){return(e,t,i={})=>{const o=["insert"];for(const s of n.attributes)e.hasAttribute(s)&&o.push(`attribute:${s}`);return!!o.every(s=>t.test(e,s))&&(i.preflight||o.forEach(s=>t.consume(e,s)),!0)}}function oe(n,e,t,i){for(const o of e)ce(n.root,o,t,i)||t.convertItem(o)}function ce(n,e,t,i){const{writer:o,mapper:s}=t;if(!i.reconversion)return!1;const p=s.toViewElement(e);return!(!p||p.root==n)&&!!t.canReuseView(p)&&(o.move(o.createRangeOn(p),s.toViewPosition(si._createBefore(e))),!0)}function Ue(n,e,{preflight:t}={}){return t?e.test(n,"insert"):e.consume(n,"insert")}function Et(n){const{schema:e,document:t}=n.model;for(const i of t.getRootNames()){const o=t.getRoot(i);if(o.isEmpty&&!e.checkChild(o,"$text")&&e.checkChild(o,"paragraph"))return n.insertElement("paragraph",o),!0}return!1}function Si(n,e,t){const i=t.createContext(n);return!!t.checkChild(i,"paragraph")&&!!t.checkChild(i.push("paragraph"),e)}function Di(n,e){const t=e.createElement("paragraph");return e.insert(t,n),e.createPositionAt(t,0)}class Zi extends Xe{elementToElement(e){return this.add($i(e))}elementToAttribute(e){return this.add(function(t){t=ti(t),Lo(t);const i=io(t,!1),o=gn(t.view),s=o?`element:${o}`:"element";return p=>{p.on(s,i,{priority:t.converterPriority||"low"})}}(e))}attributeToAttribute(e){return this.add(function(t){t=ti(t);let i=null;(typeof t.view=="string"||t.view.key)&&(i=function(s){typeof s.view=="string"&&(s.view={key:s.view});const p=s.view.key;let B;return p=="class"||p=="style"?B={[p=="class"?"classes":"styles"]:s.view.value}:B={attributes:{[p]:s.view.value===void 0?/[\s\S]*/:s.view.value}},s.view.name&&(B.name=s.view.name),s.view=B,p}(t)),Lo(t,i);const o=io(t,!0);return s=>{s.on("element",o,{priority:t.converterPriority||"low"})}}(e))}elementToMarker(e){return this.add(function(t){const i=function(o){return(s,p)=>{const B=typeof o=="string"?o:o(s,p);return p.writer.createElement("$marker",{"data-name":B})}}(t.model);return $i({...t,model:i})}(e))}dataToMarker(e){return this.add(function(t){t=ti(t),t.model||(t.model=p=>p?t.view+":"+p:t.view);const i={view:t.view,model:t.model},o=wn(Bn(i,"start")),s=wn(Bn(i,"end"));return p=>{p.on(`element:${t.view}-start`,o,{priority:t.converterPriority||"normal"}),p.on(`element:${t.view}-end`,s,{priority:t.converterPriority||"normal"});const B=r.tA.get("low"),G=r.tA.get("highest"),le=r.tA.get(t.converterPriority)/G;p.on("element",function(be){return(We,it,Lt)=>{const Jt=`data-${be.view}`;function mi(_i,Ji){for(const Bi of Ji){const en=be.model(Bi,Lt),En=Lt.writer.createElement("$marker",{"data-name":en});Lt.writer.insert(En,_i),it.modelCursor.isEqual(_i)?it.modelCursor=it.modelCursor.getShiftedBy(1):it.modelCursor=it.modelCursor._getTransformedByInsertion(_i,1),it.modelRange=it.modelRange._getTransformedByInsertion(_i,1)[0]}}(Lt.consumable.test(it.viewItem,{attributes:Jt+"-end-after"})||Lt.consumable.test(it.viewItem,{attributes:Jt+"-start-after"})||Lt.consumable.test(it.viewItem,{attributes:Jt+"-end-before"})||Lt.consumable.test(it.viewItem,{attributes:Jt+"-start-before"}))&&(it.modelRange||Object.assign(it,Lt.convertChildren(it.viewItem,it.modelCursor)),Lt.consumable.consume(it.viewItem,{attributes:Jt+"-end-after"})&&mi(it.modelRange.end,it.viewItem.getAttribute(Jt+"-end-after").split(",")),Lt.consumable.consume(it.viewItem,{attributes:Jt+"-start-after"})&&mi(it.modelRange.end,it.viewItem.getAttribute(Jt+"-start-after").split(",")),Lt.consumable.consume(it.viewItem,{attributes:Jt+"-end-before"})&&mi(it.modelRange.start,it.viewItem.getAttribute(Jt+"-end-before").split(",")),Lt.consumable.consume(it.viewItem,{attributes:Jt+"-start-before"})&&mi(it.modelRange.start,it.viewItem.getAttribute(Jt+"-start-before").split(",")))}}(i),{priority:B+le})}}(e))}}function $i(n){const e=wn(n=ti(n)),t=gn(n.view),i=t?`element:${t}`:"element";return o=>{o.on(i,e,{priority:n.converterPriority||"normal"})}}function gn(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function wn(n){const e=new D(n.view);return(t,i,o)=>{const s=e.match(i.viewItem);if(!s)return;const p=s.match;if(p.name=!0,!o.consumable.test(i.viewItem,p))return;const B=function(G,le,be){return G instanceof Function?G(le,be):be.writer.createElement(G)}(n.model,i.viewItem,o);B&&o.safeInsert(B,i.modelCursor)&&(o.consumable.consume(i.viewItem,p),o.convertChildren(i.viewItem,B),o.updateConversionResult(B,i))}}function Lo(n,e=null){const t=e===null||(s=>s.getAttribute(e)),i=typeof n.model!="object"?n.model:n.model.key,o=typeof n.model!="object"||n.model.value===void 0?t:n.model.value;n.model={key:i,value:o}}function io(n,e){const t=new D(n.view);return(i,o,s)=>{if(!o.modelRange&&e)return;const p=t.match(o.viewItem);if(!p||(function(be,We){const it=typeof be=="function"?be(We):be;return typeof it=="object"&&!gn(it)?!1:!it.classes&&!it.attributes&&!it.styles}(n.view,o.viewItem)?p.match.name=!0:delete p.match.name,!s.consumable.test(o.viewItem,p.match)))return;const B=n.model.key,G=typeof n.model.value=="function"?n.model.value(o.viewItem,s):n.model.value;if(G===null)return;o.modelRange||Object.assign(o,s.convertChildren(o.viewItem,o.modelCursor)),function(be,We,it,Lt){let Jt=!1;for(const mi of Array.from(be.getItems({shallow:it})))Lt.schema.checkAttribute(mi,We.key)&&(Jt=!0,mi.hasAttribute(We.key)||Lt.writer.setAttribute(We.key,We.value,mi));return Jt}(o.modelRange,{key:B,value:G},e,s)&&(s.consumable.test(o.viewItem,{name:!0})&&(p.match.name=!0),s.consumable.consume(o.viewItem,p.match))}}function Bn(n,e){return{view:`${n.view}-${e}`,model:(t,i)=>{const o=t.getAttribute("name"),s=n.model(o,i);return i.writer.createElement("$marker",{"data-name":s})}}}class vo extends(0,r.Re)(){constructor(e,t){super(),this.model=e,this.view=new Io(t),this.mapper=new bo,this.downcastDispatcher=new ko({mapper:this.mapper,schema:e.schema});const i=this.model.document,o=i.selection,s=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(i,"change",()=>{this.view.change(p=>{this.downcastDispatcher.convertChanges(i.differ,s,p),this.downcastDispatcher.convertSelection(o,s,p)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(p,B){return(G,le)=>{const be=le.newSelection,We=[];for(const Lt of be.getRanges())We.push(B.toModelRange(Lt));const it=p.createSelection(We,{backward:be.isBackward});it.isEqual(p.document.selection)||p.change(Lt=>{Lt.setSelection(it)})}}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",(p,B,G)=>{if(!G.consumable.consume(B.item,p.name))return;const le=G.writer,be=G.mapper.toViewPosition(B.range.start),We=le.createText(B.item.data);le.insert(be,We)},{priority:"lowest"}),this.downcastDispatcher.on("insert",(p,B,G)=>{G.convertAttributes(B.item),B.reconversion||!B.item.is("element")||B.item.isEmpty||G.convertChildren(B.item)},{priority:"lowest"}),this.downcastDispatcher.on("remove",(p,B,G)=>{const le=G.mapper.toViewPosition(B.position),be=B.position.getShiftedBy(B.length),We=G.mapper.toViewPosition(be,{isPhantom:!0}),it=G.writer.createRange(le,We),Lt=G.writer.remove(it.getTrimmed());for(const Jt of G.writer.createRangeIn(Lt).getItems())G.mapper.unbindViewElement(Jt,{defer:!0})},{priority:"low"}),this.downcastDispatcher.on("selection",(p,B,G)=>{const le=G.writer,be=le.document.selection;for(const We of be.getRanges())We.isCollapsed&&We.end.parent.isAttached()&&G.writer.mergeAttributes(We.start);le.setSelection(null)},{priority:"high"}),this.downcastDispatcher.on("selection",(p,B,G)=>{const le=B.selection;if(le.isCollapsed||!G.consumable.consume(le,"selection"))return;const be=[];for(const We of le.getRanges())be.push(G.mapper.toViewRange(We));G.writer.setSelection(be,{backward:le.isBackward})},{priority:"low"}),this.downcastDispatcher.on("selection",(p,B,G)=>{const le=B.selection;if(!le.isCollapsed||!G.consumable.consume(le,"selection"))return;const be=G.writer,We=le.getFirstPosition(),it=G.mapper.toViewPosition(We),Lt=be.breakAttributes(it);be.setSelection(Lt)},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(p=>{if(p.rootName=="$graveyard")return null;const B=new at(this.view.document,p.name);return B.rootName=p.rootName,this.mapper.bindElements(p,B),B})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const t=typeof e=="string"?e:e.name,i=this.model.markers.get(t);if(!i)throw new r.Bb("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(i)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}class Qn{constructor(){this._consumables=new Map}add(e,t){let i;e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?i=this._consumables.get(e):(i=new zn(e),this._consumables.set(e,i)),i.add(t))}test(e,t){const i=this._consumables.get(e);return i===void 0?null:e.is("$text")||e.is("documentFragment")?i:i.test(t)}consume(e,t){return!!this.test(e,t)&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0)}revert(e,t){const i=this._consumables.get(e);i!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},i=e.getAttributeKeys();for(const p of i)p!="style"&&p!="class"&&t.attributes.push(p);const o=e.getClassNames();for(const p of o)t.classes.push(p);const s=e.getStyleNames();for(const p of s)t.styles.push(p);return t}static createFrom(e,t){if(t||(t=new Qn),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,Qn.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const i of e.getChildren())t=Qn.createFrom(i,t);return t}}const Wn=["attributes","classes","styles"];class zn{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t of Wn)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t of Wn)if(t in e){const i=this._test(t,e[t]);if(i!==!0)return i}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t of Wn)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t of Wn)t in e&&this._revert(t,e[t])}_add(e,t){const i=(0,Ie.Z)(t)?t:[t],o=this._consumables[e];for(const s of i){if(e==="attributes"&&(s==="class"||s==="style"))throw new r.Bb("viewconsumable-invalid-attribute",this);if(o.set(s,!0),e==="styles")for(const p of this.element.document.stylesProcessor.getRelatedStyles(s))o.set(p,!0)}}_test(e,t){const i=(0,Ie.Z)(t)?t:[t],o=this._consumables[e];for(const s of i)if(e!=="attributes"||s!=="class"&&s!=="style"){const p=o.get(s);if(p===void 0)return null;if(!p)return!1}else{const p=s=="class"?"classes":"styles",B=this._test(p,[...this._consumables[p].keys()]);if(B!==!0)return B}return!0}_consume(e,t){const i=(0,Ie.Z)(t)?t:[t],o=this._consumables[e];for(const s of i)if(e!=="attributes"||s!=="class"&&s!=="style"){if(o.set(s,!1),e=="styles")for(const p of this.element.document.stylesProcessor.getRelatedStyles(s))o.set(p,!1)}else{const p=s=="class"?"classes":"styles";this._consume(p,[...this._consumables[p].keys()])}}_revert(e,t){const i=(0,Ie.Z)(t)?t:[t],o=this._consumables[e];for(const s of i)if(e!=="attributes"||s!=="class"&&s!=="style")o.get(s)===!1&&o.set(s,!0);else{const p=s=="class"?"classes":"styles";this._revert(p,[...this._consumables[p].keys()])}}}class Zn extends(0,r.Re)(){constructor(){super(),this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new _n(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new _n(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new r.Bb("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new r.Bb("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return t=typeof e=="string"?e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?"$text":e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!(!t||!t.isBlock)}isLimit(e){const t=this.getDefinition(e);return!!t&&!(!t.isLimit&&!t.isObject)}isObject(e){const t=this.getDefinition(e);return!!t&&!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent)}isInline(e){const t=this.getDefinition(e);return!(!t||!t.isInline)}isSelectable(e){const t=this.getDefinition(e);return!!t&&!(!t.isSelectable&&!t.isObject)}isContent(e){const t=this.getDefinition(e);return!!t&&!(!t.isContent&&!t.isObject)}checkChild(e,t){return!!t&&this._checkContextMatch(t,e)}checkAttribute(e,t){const i=this.getDefinition(e.last);return!!i&&i.allowAttributes.includes(t)}checkMerge(e,t){if(e instanceof si){const i=e.nodeBefore,o=e.nodeAfter;if(!(i instanceof rn))throw new r.Bb("schema-check-merge-no-element-before",this);if(!(o instanceof rn))throw new r.Bb("schema-check-merge-no-element-after",this);return this.checkMerge(i,o)}for(const i of t.getChildren())if(!this.checkChild(e,i))return!1;return!0}addChildCheck(e){this.on("checkChild",(t,[i,o])=>{if(!o)return;const s=e(i,o);typeof s=="boolean"&&(t.stop(),t.return=s)},{priority:"high"})}addAttributeCheck(e){this.on("checkAttribute",(t,[i,o])=>{const s=e(i,o);typeof s=="boolean"&&(t.stop(),t.return=s)},{priority:"high"})}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let t;for(e instanceof si?t=e.parent:t=(e instanceof Ht?[e]:Array.from(e.getRanges())).reduce((i,o)=>{const s=o.getCommonAncestor();return i?i.getCommonAncestor(s,{includeSelf:!0}):s},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const i=[...e.getFirstPosition().getAncestors(),new on("",e.getAttributes())];return this.checkAttribute(i,t)}{const i=e.getRanges();for(const o of i)for(const s of o)if(this.checkAttribute(s.item,t))return!0}return!1}*getValidRanges(e,t){e=function*(i){for(const o of i)yield*o.getMinimalFlatRanges()}(e);for(const i of e)yield*this._getValidRangesForRange(i,t)}getNearestSelectionRange(e,t="both"){if(this.checkChild(e,"$text"))return new Ht(e);let i,o;const s=e.getAncestors().reverse().find(p=>this.isLimit(p))||e.root;t!="both"&&t!="backward"||(i=new Rn({boundaries:Ht._createIn(s),startPosition:e,direction:"backward"})),t!="both"&&t!="forward"||(o=new Rn({boundaries:Ht._createIn(s),startPosition:e}));for(const p of function*(B,G){let le=!1;for(;!le;){if(le=!0,B){const be=B.next();be.done||(le=!1,yield{walker:B,value:be.value})}if(G){const be=G.next();be.done||(le=!1,yield{walker:G,value:be.value})}}}(i,o)){const B=p.walker==i?"elementEnd":"elementStart",G=p.value;if(G.type==B&&this.isObject(G.item))return Ht._createOn(G.item);if(this.checkChild(G.nextPosition,"$text"))return new Ht(G.nextPosition)}return null}findAllowedParent(e,t){let i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent}return null}setAllowedAttributes(e,t,i){const o=i.model;for(const[s,p]of Object.entries(t))o.schema.checkAttribute(e,s)&&i.setAttribute(s,p,e)}removeDisallowedAttributes(e,t){for(const i of e)if(i.is("$text"))Ir(this,i,t);else{const o=Ht._createIn(i).getPositions();for(const s of o)Ir(this,s.nodeBefore||s.parent,t)}}getAttributesWithProperty(e,t,i){const o={};for(const[s,p]of e.getAttributes()){const B=this.getAttributeProperties(s);B[t]!==void 0&&(i!==void 0&&i!==B[t]||(o[s]=p))}return o}createContext(e){return new _n(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,i=Object.keys(t);for(const o of i)e[o]=Jn(t[o],o);for(const o of i)lo(e,o);for(const o of i)hs(e,o);for(const o of i)ms(e,o);for(const o of i)gs(e,o),ps(e,o);for(const o of i)fs(e,o),bs(e,o),ws(e,o);this._compiledDefinitions=e}_checkContextMatch(e,t,i=t.length-1){const o=t.getItem(i);if(e.allowIn.includes(o.name)){if(i==0)return!0;{const s=this.getDefinition(o);return this._checkContextMatch(s,t,i-1)}}return!1}*_getValidRangesForRange(e,t){let i=e.start,o=e.start;for(const s of e.getItems({shallow:!0}))s.is("element")&&(yield*this._getValidRangesForRange(Ht._createIn(s),t)),this.checkAttribute(s,t)||(i.isEqual(o)||(yield new Ht(i,o)),i=si._createAfter(s)),o=si._createAfter(s);i.isEqual(o)||(yield new Ht(i,o))}}class _n{constructor(e){if(e instanceof _n)return e;let t;t=typeof e=="string"?[e]:Array.isArray(e)?e:e.getAncestors({includeSelf:!0}),this._items=t.map(vs)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new _n([e]);return t._items=[...this._items,...t._items],t}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function Jn(n,e){const t={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return function(i,o){for(const s of i){const p=Object.keys(s).filter(B=>B.startsWith("is"));for(const B of p)o[B]=!!s[B]}}(n,t),Mo(n,t,"allowIn"),Mo(n,t,"allowContentOf"),Mo(n,t,"allowWhere"),Mo(n,t,"allowAttributes"),Mo(n,t,"allowAttributesOf"),Mo(n,t,"allowChildren"),Mo(n,t,"inheritTypesFrom"),function(i,o){for(const s of i){const p=s.inheritAllFrom;p&&(o.allowContentOf.push(p),o.allowWhere.push(p),o.allowAttributesOf.push(p),o.inheritTypesFrom.push(p))}}(n,t),t}function lo(n,e){const t=n[e];for(const i of t.allowChildren){const o=n[i];o&&o.allowIn.push(e)}t.allowChildren.length=0}function hs(n,e){for(const t of n[e].allowContentOf)n[t]&&ks(n,t).forEach(i=>{i.allowIn.push(e)});delete n[e].allowContentOf}function ms(n,e){for(const t of n[e].allowWhere){const i=n[t];if(i){const o=i.allowIn;n[e].allowIn.push(...o)}}delete n[e].allowWhere}function gs(n,e){for(const t of n[e].allowAttributesOf){const i=n[t];if(i){const o=i.allowAttributes;n[e].allowAttributes.push(...o)}}delete n[e].allowAttributesOf}function ps(n,e){const t=n[e];for(const i of t.inheritTypesFrom){const o=n[i];if(o){const s=Object.keys(o).filter(p=>p.startsWith("is"));for(const p of s)p in t||(t[p]=o[p])}}delete t.inheritTypesFrom}function fs(n,e){const t=n[e],i=t.allowIn.filter(o=>n[o]);t.allowIn=Array.from(new Set(i))}function bs(n,e){const t=n[e];for(const i of t.allowIn)n[i].allowChildren.push(e)}function ws(n,e){const t=n[e];t.allowAttributes=Array.from(new Set(t.allowAttributes))}function Mo(n,e,t){for(const i of n){const o=i[t];typeof o=="string"?e[t].push(o):Array.isArray(o)&&e[t].push(...o)}}function ks(n,e){const t=n[e];return(i=n,Object.keys(i).map(o=>i[o])).filter(o=>o.allowIn.includes(t.name));var i}function vs(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*n.getAttributeKeys()},getAttribute:e=>n.getAttribute(e)}}function Ir(n,e,t){for(const i of e.getAttributeKeys())n.checkAttribute(e,i)||t.removeAttribute(i,e)}class _s extends(0,r.ln)(){constructor(e){super(),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this._emptyElementsToKeep=new Set,this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(t,i)=>this._convertItem(t,i),convertChildren:(t,i)=>this._convertChildren(t,i),safeInsert:(t,i)=>this._safeInsert(t,i),updateConversionResult:(t,i)=>this._updateConversionResult(t,i),splitToAllowedParent:(t,i)=>this._splitToAllowedParent(t,i),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)}}convert(e,t,i=["$root"]){this.fire("viewCleanup",e),this._modelCursor=function(p,B){let G;for(const le of new _n(p)){const be={};for(const it of le.getAttributeKeys())be[it]=le.getAttribute(it);const We=B.createElement(le.name,be);G&&B.insert(We,G),G=si._createAt(We,0)}return G}(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=Qn.createFrom(e),this.conversionApi.store={};const{modelRange:o}=this._convertItem(e,this._modelCursor),s=t.createDocumentFragment();if(o){this._removeEmptyElements();for(const p of Array.from(this._modelCursor.parent.getChildren()))t.append(p,s);s.markers=function(p,B){const G=new Set,le=new Map,be=Ht._createIn(p).getItems();for(const We of be)We.is("element","$marker")&&G.add(We);for(const We of G){const it=We.getAttribute("data-name"),Lt=B.createPositionBefore(We);le.has(it)?le.get(it).end=Lt.clone():le.set(it,new Ht(Lt.clone())),B.remove(We)}return le}(s,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,s}_convertItem(e,t){const i={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,i,this.conversionApi):e.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof Ht))throw new r.Bb("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor}}_convertChildren(e,t){let i=t.is("position")?t:si._createAt(t,0);const o=new Ht(i);for(const s of Array.from(e.getChildren())){const p=this._convertItem(s,i);p.modelRange instanceof Ht&&(o.end=p.modelRange.end,i=p.modelCursor)}return{modelRange:o,modelCursor:i}}_safeInsert(e,t){const i=this._splitToAllowedParent(e,t);return!!i&&(this.conversionApi.writer.insert(e,i.position),!0)}_updateConversionResult(e,t){const i=this._getSplitParts(e),o=this.conversionApi.writer;t.modelRange||(t.modelRange=o.createRange(o.createPositionBefore(e),o.createPositionAfter(i[i.length-1])));const s=this._cursorParents.get(e);t.modelCursor=s?o.createPositionAt(s,0):t.modelRange.end}_splitToAllowedParent(e,t){const{schema:i,writer:o}=this.conversionApi;let s=i.findAllowedParent(t,e);if(s){if(s===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(s)&&(s=null)}if(!s)return Si(t,e,i)?{position:Di(t,o)}:null;const p=this.conversionApi.writer.split(t,s),B=[];for(const le of p.range.getWalker())if(le.type=="elementEnd")B.push(le.item);else{const be=B.pop(),We=le.item;this._registerSplitPair(be,We)}const G=p.range.end.parent;return this._cursorParents.set(e,G),{position:p.position,cursorParent:G}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t)}_getSplitParts(e){let t;return t=this._splitParts.has(e)?this._splitParts.get(e):[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}class ys{getHtml(e){const t=document.implementation.createHTMLDocument("").createElement("div");return t.appendChild(e),t.innerHTML}}class Pr{constructor(e){this.skipComments=!0,this.domParser=new DOMParser,this.domConverter=new vt(e,{renderingMode:"data"}),this.htmlWriter=new ys}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){e.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(e=`<body>${e}</body>`);const t=this.domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment(),o=t.body.childNodes;for(;o.length>0;)i.appendChild(o[0]);return i}}class xs extends(0,r.ln)(){constructor(e,t){super(),this.model=e,this.mapper=new bo,this.downcastDispatcher=new ko({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",(i,o,s)=>{if(!s.consumable.consume(o.item,i.name))return;const p=s.writer,B=s.mapper.toViewPosition(o.range.start),G=p.createText(o.item.data);p.insert(B,G)},{priority:"lowest"}),this.downcastDispatcher.on("insert",(i,o,s)=>{s.convertAttributes(o.item),o.reconversion||!o.item.is("element")||o.item.isEmpty||s.convertChildren(o.item)},{priority:"lowest"}),this.upcastDispatcher=new _s({schema:e.schema}),this.viewDocument=new J(t),this.stylesProcessor=t,this.htmlProcessor=new Pr(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Te(this.viewDocument),this.upcastDispatcher.on("text",(i,o,{schema:s,consumable:p,writer:B})=>{let G=o.modelCursor;if(!p.test(o.viewItem))return;if(!s.checkChild(G,"$text")){if(!Si(G,"$text",s)||o.viewItem.data.trim().length==0)return;const be=G.nodeBefore;G=Di(G,B),be&&be.is("element","$marker")&&(B.move(B.createRangeOn(be),G),G=B.createPositionAfter(be))}p.consume(o.viewItem);const le=B.createText(o.viewItem.data);B.insert(le,G),o.modelRange=B.createRange(G,G.getShiftedBy(le.offsetSize)),o.modelCursor=o.modelRange.end},{priority:"lowest"}),this.upcastDispatcher.on("element",(i,o,s)=>{if(!o.modelRange&&s.consumable.consume(o.viewItem,{name:!0})){const{modelRange:p,modelCursor:B}=s.convertChildren(o.viewItem,o.modelCursor);o.modelRange=p,o.modelCursor=B}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",(i,o,s)=>{if(!o.modelRange&&s.consumable.consume(o.viewItem,{name:!0})){const{modelRange:p,modelCursor:B}=s.convertChildren(o.viewItem,o.modelCursor);o.modelRange=p,o.modelCursor=B}},{priority:"lowest"}),(0,r.Re)().prototype.decorate.call(this,"init"),(0,r.Re)().prototype.decorate.call(this,"set"),(0,r.Re)().prototype.decorate.call(this,"get"),(0,r.Re)().prototype.decorate.call(this,"toView"),(0,r.Re)().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},Et)},{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:i="empty"}=e;if(!this._checkIfRootsExists([t]))throw new r.Bb("datacontroller-get-non-existent-root",this);const o=this.model.document.getRoot(t);return i!=="empty"||this.model.hasContent(o,{ignoreWhitespaces:!0})?this.stringify(o,e):""}stringify(e,t={}){const i=this.toView(e,t);return this.processor.toData(i)}toView(e,t={}){const i=this.viewDocument,o=this._viewWriter;this.mapper.clearBindings();const s=Ht._createIn(e),p=new se(i);this.mapper.bindElements(e,p);const B=e.is("documentFragment")?e.markers:function(G){const le=[],be=G.root.document;if(!be)return new Map;const We=Ht._createIn(G);for(const it of be.model.markers){const Lt=it.getRange(),Jt=Lt.isCollapsed,mi=Lt.start.isEqual(We.start)||Lt.end.isEqual(We.end);if(Jt&&mi)le.push([it.name,Lt]);else{const _i=We.getIntersection(Lt);_i&&le.push([it.name,_i])}}return le.sort(([it,Lt],[Jt,mi])=>{if(Lt.end.compareWith(mi.start)!=="after")return 1;if(Lt.start.compareWith(mi.end)!=="before")return-1;switch(Lt.start.compareWith(mi.start)){case"before":return 1;case"after":return-1;default:switch(Lt.end.compareWith(mi.end)){case"before":return 1;case"after":return-1;default:return Jt.localeCompare(it)}}}),new Map(le)}(e);return this.downcastDispatcher.convert(s,B,o,t),p}init(e){if(this.model.document.version)throw new r.Bb("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new r.Bb("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},i=>{for(const o of Object.keys(t)){const s=this.model.document.getRoot(o);i.insert(this.parse(t[o],s),s,0)}}),Promise.resolve()}set(e,t={}){let i={};if(typeof e=="string"?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new r.Bb("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},o=>{o.setSelection(null),o.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const s of Object.keys(i)){const p=this.model.document.getRoot(s);o.remove(o.createRangeIn(p)),o.insert(this.parse(i[s],p),p,0)}})}parse(e,t="$root"){const i=this.processor.toView(e);return this.toModel(i,t)}toModel(e,t="$root"){return this.model.change(i=>this.upcastDispatcher.convert(e,i,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRootNames().includes(t))return!1;return!0}}class Cs{constructor(e,t){this._helpers=new Map,this._downcast=(0,r.qo)(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=(0,r.qo)(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new r.Bb("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(!this._helpers.has(e))throw new r.Bb("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:i}of yr(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:i}of yr(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:i}of yr(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new r.Bb("conversion-group-exists",this);const o=i?new Kt(t):new Zi(t);this._helpers.set(e,o)}}function*yr(n){if(n.model.values)for(const e of n.model.values){const t={key:n.model.key,value:e},i=n.view[e],o=n.upcastAlso?n.upcastAlso[e]:void 0;yield*Lr(t,i,o)}else yield*Lr(n.model,n.view,n.upcastAlso)}function*Lr(n,e,t){if(yield{model:n,view:e},t)for(const i of(0,r.qo)(t))yield{model:n,view:i}}class $n{constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}function xr(n,e){const t=Rr(e),i=t.reduce((p,B)=>p+B.offsetSize,0),o=n.parent;gr(n);const s=n.index;return o._insertChild(s,t),mr(o,s+t.length),mr(o,s),new Ht(n,n.getShiftedBy(i))}function Mr(n){if(!n.isFlat)throw new r.Bb("operation-utils-remove-range-not-flat",this);const e=n.start.parent;gr(n.start),gr(n.end);const t=e._removeChildren(n.start.index,n.end.index-n.start.index);return mr(e,n.start.index),t}function hr(n,e){if(!n.isFlat)throw new r.Bb("operation-utils-move-range-not-flat",this);const t=Mr(n);return xr(e=e._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),t)}function Rr(n){const e=[];(function t(i){if(typeof i=="string")e.push(new on(i));else if(i instanceof Pn)e.push(new on(i.data,i.getAttributes()));else if(i instanceof Gn)e.push(i);else if((0,r.TW)(i))for(const o of i)t(o)})(n);for(let t=1;t<e.length;t++){const i=e[t],o=e[t-1];i instanceof on&&o instanceof on&&Or(i,o)&&(e.splice(t-1,2,new on(o.data+i.data,o.getAttributes())),t--)}return e}function mr(n,e){const t=n.getChild(e-1),i=n.getChild(e);if(t&&i&&t.is("$text")&&i.is("$text")&&Or(t,i)){const o=new on(t.data+i.data,t.getAttributes());n._removeChildren(e-1,2),n._insertChild(e-1,o)}}function gr(n){const e=n.textNode,t=n.parent;if(e){const i=n.offset-e.startOffset,o=e.index;t._removeChildren(o,1);const s=new on(e.data.substr(0,i),e.getAttributes()),p=new on(e.data.substr(i),e.getAttributes());t._insertChild(o,[s,p])}}function Or(n,e){const t=n.getAttributes(),i=e.getAttributes();for(const o of t){if(o[1]!==e.getAttribute(o[0]))return!1;i.next()}return i.next().done}class ln extends $n{constructor(e,t,i,o){super(o),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}clone(){return new ln(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new ln(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,o=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new r.Bb("move-operation-nodes-do-not-exist",this);if(e===t&&i<o&&o<i+this.howMany)throw new r.Bb("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&(0,r.Rt)(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const s=this.sourcePosition.path.length-1;if(this.targetPosition.path[s]>=i&&this.targetPosition.path[s]<i+this.howMany)throw new r.Bb("move-operation-node-into-itself",this)}}_execute(){hr(Ht._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const i=si.fromJSON(e.sourcePosition,t),o=si.fromJSON(e.targetPosition,t);return new this(i,e.howMany,o,e.baseVersion)}}class xn extends $n{constructor(e,t,i){super(i),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new so(Rr(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}clone(){const e=new so([...this.nodes].map(i=>i._clone(!0))),t=new xn(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new si(e,[0]);return new ln(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new r.Bb("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new so([...e].map(t=>t._clone(!0))),xr(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const i=[];for(const s of e.nodes)s.name?i.push(rn.fromJSON(s)):i.push(on.fromJSON(s));const o=new xn(si.fromJSON(e.position,t),i,e.baseVersion);return o.shouldReceiveAttributes=e.shouldReceiveAttributes,o}}class Ln extends $n{constructor(e,t,i,o,s,p){super(p),this.name=e,this.oldRange=t?t.clone():null,this.newRange=i?i.clone():null,this.affectsData=s,this._markers=o}get type(){return"marker"}clone(){return new Ln(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Ln(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new Ln(e.name,e.oldRange?Ht.fromJSON(e.oldRange,t):null,e.newRange?Ht.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}const jr=function(n,e){return oo(n,e)};class yn extends $n{constructor(e,t,i,o,s){super(s),this.range=e.clone(),this.key=t,this.oldValue=i===void 0?null:i,this.newValue=o===void 0?null:o}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}clone(){return new yn(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new yn(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new r.Bb("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!jr(e.getAttribute(this.key),this.oldValue))throw new r.Bb("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new r.Bb("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){jr(this.oldValue,this.newValue)||function(e,t,i){gr(e.start),gr(e.end);for(const o of e.getItems({shallow:!0})){const s=o.is("$textProxy")?o.textNode:o;i!==null?s._setAttribute(t,i):s._removeAttribute(t),mr(s.parent,s.index)}mr(e.end.parent,e.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new yn(Ht.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}class Sn extends $n{get type(){return"noop"}clone(){return new Sn(this.baseVersion)}getReversed(){return new Sn(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class jn extends $n{constructor(e,t,i,o){super(o),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=i}get type(){return"rename"}clone(){return new jn(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new jn(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(!(e instanceof rn))throw new r.Bb("rename-operation-wrong-position",this);if(e.name!==this.oldName)throw new r.Bb("rename-operation-wrong-name",this)}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new jn(si.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}class co extends $n{constructor(e,t,i,o,s){super(s),this.root=e,this.key=t,this.oldValue=i,this.newValue=o}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}clone(){return new co(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new co(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new r.Bb("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new r.Bb("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new r.Bb("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new r.Bb("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new co(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class vn extends $n{constructor(e,t,i,o,s){super(s),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=o.clone()}get type(){return"merge"}get deletionPosition(){return new si(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Ht(this.sourcePosition,e)}clone(){return new vn(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),i=new si(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new pn(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(!e.parent)throw new r.Bb("merge-operation-source-position-invalid",this);if(!t.parent)throw new r.Bb("merge-operation-target-position-invalid",this);if(this.howMany!=e.maxOffset)throw new r.Bb("merge-operation-how-many-invalid",this)}_execute(){const e=this.sourcePosition.parent;hr(Ht._createIn(e),this.targetPosition),hr(Ht._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const i=si.fromJSON(e.sourcePosition,t),o=si.fromJSON(e.targetPosition,t),s=si.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,o,s,e.baseVersion)}}class pn extends $n{constructor(e,t,i,o,s){super(s),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=i,this.graveyardPosition=o?o.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new si(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Ht(this.splitPosition,e)}clone(){return new pn(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new si(e,[0]);return new vn(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new r.Bb("split-operation-position-invalid",this);if(!e.parent)throw new r.Bb("split-operation-split-in-root",this);if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new r.Bb("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new r.Bb("split-operation-graveyard-position-invalid",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)hr(Ht._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const t=e._clone();xr(this.insertionPosition,t)}hr(new Ht(si._createAt(e,this.splitPosition.offset),si._createAt(e,e.maxOffset)),this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new si(e.root,t,"toPrevious")}static fromJSON(e,t){const i=si.fromJSON(e.splitPosition,t),o=si.fromJSON(e.insertionPosition,t),s=e.graveyardPosition?si.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,o,s,e.baseVersion)}}const Xn={};Xn[yn.className]=yn,Xn[xn.className]=xn,Xn[Ln.className]=Ln,Xn[ln.className]=ln,Xn[Sn.className]=Sn,Xn[$n.className]=$n,Xn[jn.className]=jn,Xn[co.className]=co,Xn[pn.className]=pn,Xn[vn.className]=vn;class Nr{static fromJSON(e,t){return Xn[e.__className].fromJSON(e,t)}}const Cr=new Map;function sn(n,e,t){let i=Cr.get(n);i||(i=new Map,Cr.set(n,i)),i.set(e,t)}function Ts(n){return[n]}function Vr(n,e,t={}){const i=function(o,s){const p=Cr.get(o);return p&&p.has(s)?p.get(s):Ts}(n.constructor,e.constructor);try{return i(n=n.clone(),e,t)}catch(o){throw o}}function As(n,e,t){n=n.slice(),e=e.slice();const i=new Ss(t.document,t.useRelations,t.forceWeakRemove);i.setOriginalOperations(n),i.setOriginalOperations(e);const o=i.originalOperations;if(n.length==0||e.length==0)return{operationsA:n,operationsB:e,originalOperations:o};const s=new WeakMap;for(const G of n)s.set(G,0);const p={nextBaseVersionA:n[n.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:n.length,originalOperationsBCount:e.length};let B=0;for(;B<n.length;){const G=n[B],le=s.get(G);if(le==e.length){B++;continue}const be=e[le],We=Vr(G,be,i.getContext(G,be,!0)),it=Vr(be,G,i.getContext(be,G,!1));i.updateRelation(G,be),i.setOriginalOperations(We,G),i.setOriginalOperations(it,be);for(const Lt of We)s.set(Lt,le+it.length);n.splice(B,1,...We),e.splice(le,1,...it)}if(t.padWithNoOps){const G=n.length-p.originalOperationsACount,le=e.length-p.originalOperationsBCount;zr(n,le-G),zr(e,G-le)}return Br(n,p.nextBaseVersionB),Br(e,p.nextBaseVersionA),{operationsA:n,operationsB:e,originalOperations:o}}class Ss{constructor(e,t,i=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){const i=t?this.originalOperations.get(t):null;for(const o of e)this.originalOperations.set(o,i||o)}updateRelation(e,t){if(e instanceof ln)t instanceof vn?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof ln&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof pn){if(t instanceof vn)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof ln)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const i=Ht._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.splitPosition)){const o=i.end.offset-e.splitPosition.offset,s=e.splitPosition.offset-i.start.offset;this._setRelation(e,t,{howMany:o,offset:s})}}}else if(e instanceof vn)t instanceof vn?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof pn&&e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource");else if(e instanceof Ln){const i=e.newRange;if(!i)return;if(t instanceof ln){const o=Ht._createFromPositionAndShift(t.sourcePosition,t.howMany),s=o.containsPosition(i.start)||o.start.isEqual(i.start),p=o.containsPosition(i.end)||o.end.isEqual(i.end);!s&&!p||o.containsRange(i)||this._setRelation(e,t,{side:s?"left":"right",path:s?i.start.path.slice():i.end.path.slice()})}else if(t instanceof vn){const o=i.start.isEqual(t.targetPosition),s=i.start.isEqual(t.deletionPosition),p=i.end.isEqual(t.deletionPosition),B=i.end.isEqual(t.sourcePosition);(o||s||p||B)&&this._setRelation(e,t,{wasInLeftElement:o,wasStartBeforeMergedElement:s,wasEndBeforeMergedElement:p,wasInRightElement:B})}}}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const i=this.originalOperations.get(t),o=this._history.getUndoneOperation(i);if(!o)return null;const s=this.originalOperations.get(e),p=this._relations.get(s);return p&&p.get(o)||null}_setRelation(e,t,i){const o=this.originalOperations.get(e),s=this.originalOperations.get(t);let p=this._relations.get(o);p||(p=new Map,this._relations.set(o,p)),p.set(s,i)}}function Br(n,e){for(const t of n)t.baseVersion=e++}function zr(n,e){for(let t=0;t<e;t++)n.push(new Sn(0))}function Dr(n,e,t){const i=n.nodes.getNode(0).getAttribute(e);if(i==t)return null;const o=new Ht(n.position,n.position.getShiftedBy(n.howMany));return new yn(o,e,i,t,0)}function Fr(n,e){return n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function Yo(n,e){const t=[];for(let i=0;i<n.length;i++){const o=n[i],s=new ln(o.start,o.end.offset-o.start.offset,e,0);t.push(s);for(let p=i+1;p<n.length;p++)n[p]=n[p]._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany)[0];e=e._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany)}return t}sn(yn,yn,(n,e,t)=>{if(n.key===e.key&&n.range.start.hasSameParentAs(e.range.start)){const i=n.range.getDifference(e.range).map(s=>new yn(s,n.key,n.oldValue,n.newValue,0)),o=n.range.getIntersection(e.range);return o&&t.aIsStrong&&i.push(new yn(o,e.key,e.newValue,n.newValue,0)),i.length==0?[new Sn(0)]:i}return[n]}),sn(yn,xn,(n,e)=>{if(n.range.start.hasSameParentAs(e.position)&&n.range.containsPosition(e.position)){const t=n.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(i=>new yn(i,n.key,n.oldValue,n.newValue,n.baseVersion));if(e.shouldReceiveAttributes){const i=Dr(e,n.key,n.oldValue);i&&t.unshift(i)}return t}return n.range=n.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[n]}),sn(yn,vn,(n,e)=>{const t=[];n.range.start.hasSameParentAs(e.deletionPosition)&&(n.range.containsPosition(e.deletionPosition)||n.range.start.isEqual(e.deletionPosition))&&t.push(Ht._createFromPositionAndShift(e.graveyardPosition,1));const i=n.range._getTransformedByMergeOperation(e);return i.isCollapsed||t.push(i),t.map(o=>new yn(o,n.key,n.oldValue,n.newValue,n.baseVersion))}),sn(yn,ln,(n,e)=>function(t,i){const o=Ht._createFromPositionAndShift(i.sourcePosition,i.howMany);let s=null,p=[];o.containsRange(t,!0)?s=t:t.start.hasSameParentAs(o.start)?(p=t.getDifference(o),s=t.getIntersection(o)):p=[t];const B=[];for(let G of p){G=G._getTransformedByDeletion(i.sourcePosition,i.howMany);const le=i.getMovedRangeStart(),be=G.start.hasSameParentAs(le),We=G._getTransformedByInsertion(le,i.howMany,be);B.push(...We)}return s&&B.push(s._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany,!1)[0]),B}(n.range,e).map(t=>new yn(t,n.key,n.oldValue,n.newValue,n.baseVersion))),sn(yn,pn,(n,e)=>{if(n.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(e.splitPosition)&&n.range.containsPosition(e.splitPosition)){const t=n.clone();return t.range=new Ht(e.moveTargetPosition.clone(),n.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),n.range.end=e.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,t]}return n.range=n.range._getTransformedBySplitOperation(e),[n]}),sn(xn,yn,(n,e)=>{const t=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(n.position)){const i=Dr(n,e.key,e.newValue);i&&t.push(i)}return t}),sn(xn,xn,(n,e,t)=>(n.position.isEqual(e.position)&&t.aIsStrong||(n.position=n.position._getTransformedByInsertOperation(e)),[n])),sn(xn,ln,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n])),sn(xn,pn,(n,e)=>(n.position=n.position._getTransformedBySplitOperation(e),[n])),sn(xn,vn,(n,e)=>(n.position=n.position._getTransformedByMergeOperation(e),[n])),sn(Ln,xn,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(e)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(e)[0]),[n])),sn(Ln,Ln,(n,e,t)=>{if(n.name==e.name){if(!t.aIsStrong)return[new Sn(0)];n.oldRange=e.newRange?e.newRange.clone():null}return[n]}),sn(Ln,vn,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(e)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(e)),[n])),sn(Ln,ln,(n,e,t)=>{if(n.oldRange&&(n.oldRange=Ht._createFromRanges(n.oldRange._getTransformedByMoveOperation(e))),n.newRange){if(t.abRelation){const i=Ht._createFromRanges(n.newRange._getTransformedByMoveOperation(e));if(t.abRelation.side=="left"&&e.targetPosition.isEqual(n.newRange.start))return n.newRange.end=i.end,n.newRange.start.path=t.abRelation.path,[n];if(t.abRelation.side=="right"&&e.targetPosition.isEqual(n.newRange.end))return n.newRange.start=i.start,n.newRange.end.path=t.abRelation.path,[n]}n.newRange=Ht._createFromRanges(n.newRange._getTransformedByMoveOperation(e))}return[n]}),sn(Ln,pn,(n,e,t)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(e)),n.newRange){if(t.abRelation){const i=n.newRange._getTransformedBySplitOperation(e);return n.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?n.newRange.start=si._createAt(e.insertionPosition):n.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement&&(n.newRange.start=si._createAt(e.moveTargetPosition)),n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?n.newRange.end=si._createAt(e.moveTargetPosition):n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?n.newRange.end=si._createAt(e.insertionPosition):n.newRange.end=i.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(e)}return[n]}),sn(vn,xn,(n,e)=>(n.sourcePosition.hasSameParentAs(e.position)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(e),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e),[n])),sn(vn,vn,(n,e,t)=>{if(n.sourcePosition.isEqual(e.sourcePosition)&&n.targetPosition.isEqual(e.targetPosition)){if(t.bWasUndone){const i=e.graveyardPosition.path.slice();return i.push(0),n.sourcePosition=new si(e.graveyardPosition.root,i),n.howMany=0,[n]}return[new Sn(0)]}if(n.sourcePosition.isEqual(e.sourcePosition)&&!n.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const i=n.targetPosition.root.rootName=="$graveyard",o=e.targetPosition.root.rootName=="$graveyard";if(o&&!i||!(i&&!o)&&t.aIsStrong){const s=e.targetPosition._getTransformedByMergeOperation(e),p=n.targetPosition._getTransformedByMergeOperation(e);return[new ln(s,n.howMany,p,0)]}return[new Sn(0)]}return n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(e),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),n.graveyardPosition.isEqual(e.graveyardPosition)&&t.aIsStrong||(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]}),sn(vn,ln,(n,e,t)=>{const i=Ht._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&n.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.sourcePosition)?[new Sn(0)]:(n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition.hasSameParentAs(e.sourcePosition)&&(n.howMany-=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(e),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(e),n.graveyardPosition.isEqual(e.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)),[n])}),sn(vn,pn,(n,e,t)=>{if(e.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),n.deletionPosition.isEqual(e.graveyardPosition)&&(n.howMany=e.howMany)),n.targetPosition.isEqual(e.splitPosition)){const i=e.howMany!=0,o=e.graveyardPosition&&n.deletionPosition.isEqual(e.graveyardPosition);if(i||o||t.abRelation=="mergeTargetNotMoved")return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),[n]}if(n.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n];if(t.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=e.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}return n.sourcePosition.hasSameParentAs(e.splitPosition)&&(n.howMany=e.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}),sn(ln,xn,(n,e)=>{const t=Ht._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(e,!1)[0];return n.sourcePosition=t.start,n.howMany=t.end.offset-t.start.offset,n.targetPosition.isEqual(e.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e)),[n]}),sn(ln,ln,(n,e,t)=>{const i=Ht._createFromPositionAndShift(n.sourcePosition,n.howMany),o=Ht._createFromPositionAndShift(e.sourcePosition,e.howMany);let s,p=t.aIsStrong,B=!t.aIsStrong;if(t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?B=!0:t.abRelation!="insertAfter"&&t.baRelation!="insertBefore"||(B=!1),s=n.targetPosition.isEqual(e.targetPosition)&&B?n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):n.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Fr(n,e)&&Fr(e,n))return[e.getReversed()];if(i.containsPosition(e.targetPosition)&&i.containsRange(o,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Yo([i],s);if(o.containsPosition(n.targetPosition)&&o.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),Yo([i],s);const G=(0,r.Rt)(n.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(G=="prefix"||G=="extension")return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Yo([i],s);n.type!="remove"||e.type=="remove"||t.aWasUndone||t.forceWeakRemove?n.type=="remove"||e.type!="remove"||t.bWasUndone||t.forceWeakRemove||(p=!1):p=!0;const le=[],be=i.getDifference(o);for(const it of be){it.start=it.start._getTransformedByDeletion(e.sourcePosition,e.howMany),it.end=it.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const Lt=(0,r.Rt)(it.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",Jt=it._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,Lt);le.push(...Jt)}const We=i.getIntersection(o);return We!==null&&p&&(We.start=We.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),We.end=We.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),le.length===0?le.push(We):le.length==1?o.start.isBefore(i.start)||o.start.isEqual(i.start)?le.unshift(We):le.push(We):le.splice(1,0,We)),le.length===0?[new Sn(n.baseVersion)]:Yo(le,s)}),sn(ln,pn,(n,e,t)=>{let i=n.targetPosition.clone();n.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&t.abRelation!="moveTargetAfter"||(i=n.targetPosition._getTransformedBySplitOperation(e));const o=Ht._createFromPositionAndShift(n.sourcePosition,n.howMany);if(o.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.howMany++,n.targetPosition=i,[n];if(o.start.hasSameParentAs(e.splitPosition)&&o.containsPosition(e.splitPosition)){let p=new Ht(e.splitPosition,o.end);return p=p._getTransformedBySplitOperation(e),Yo([new Ht(o.start,e.splitPosition),p],i)}n.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(i=e.moveTargetPosition),n.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(i=n.targetPosition);const s=[o._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const p=o.start.isEqual(e.graveyardPosition)||o.containsPosition(e.graveyardPosition);n.howMany>1&&p&&!t.aWasUndone&&s.push(Ht._createFromPositionAndShift(e.insertionPosition,1))}return Yo(s,i)}),sn(ln,vn,(n,e,t)=>{const i=Ht._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.deletionPosition.hasSameParentAs(n.sourcePosition)&&i.containsPosition(e.sourcePosition)){if(n.type!="remove"||t.forceWeakRemove){if(n.howMany==1)return t.bWasUndone?(n.sourcePosition=e.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]):[new Sn(0)]}else if(!t.aWasUndone){const s=[];let p=e.graveyardPosition.clone(),B=e.targetPosition._getTransformedByMergeOperation(e);n.howMany>1&&(s.push(new ln(n.sourcePosition,n.howMany-1,n.targetPosition,0)),p=p._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany-1),B=B._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany-1));const G=e.deletionPosition._getCombined(n.sourcePosition,n.targetPosition),le=new ln(p,1,G,0),be=le.getMovedRangeStart().path.slice();be.push(0);const We=new si(le.targetPosition.root,be);B=B._getTransformedByMove(p,G,1);const it=new ln(B,e.howMany,We,0);return s.push(le),s.push(it),s}}const o=Ht._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(e);return n.sourcePosition=o.start,n.howMany=o.end.offset-o.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]}),sn(jn,xn,(n,e)=>(n.position=n.position._getTransformedByInsertOperation(e),[n])),sn(jn,vn,(n,e)=>n.position.isEqual(e.deletionPosition)?(n.position=e.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(e),[n])),sn(jn,ln,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n])),sn(jn,jn,(n,e,t)=>{if(n.position.isEqual(e.position)){if(!t.aIsStrong)return[new Sn(0)];n.oldName=e.newName}return[n]}),sn(jn,pn,(n,e)=>{const t=n.position.path,i=e.splitPosition.getParentPath();if((0,r.Rt)(t,i)=="same"&&!e.graveyardPosition){const o=new jn(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,o]}return n.position=n.position._getTransformedBySplitOperation(e),[n]}),sn(co,co,(n,e,t)=>{if(n.root===e.root&&n.key===e.key){if(!t.aIsStrong||n.newValue===e.newValue)return[new Sn(0)];n.oldValue=e.newValue}return[n]}),sn(pn,xn,(n,e)=>(n.splitPosition.hasSameParentAs(e.position)&&n.splitPosition.offset<e.position.offset&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(e),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(e),[n])),sn(pn,vn,(n,e,t)=>{if(!n.graveyardPosition&&!t.bWasUndone&&n.splitPosition.hasSameParentAs(e.sourcePosition)){const i=e.graveyardPosition.path.slice();i.push(0);const o=new si(e.graveyardPosition.root,i),s=pn.getInsertionPosition(new si(e.graveyardPosition.root,i)),p=new pn(o,0,s,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=pn.getInsertionPosition(n.splitPosition),n.graveyardPosition=p.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[p,n]}return n.splitPosition.hasSameParentAs(e.deletionPosition)&&!n.splitPosition.isAfter(e.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=pn.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]}),sn(pn,ln,(n,e,t)=>{const i=Ht._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.graveyardPosition){const s=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);if(!t.bWasUndone&&s){const p=n.splitPosition._getTransformedByMoveOperation(e),B=n.graveyardPosition._getTransformedByMoveOperation(e),G=B.path.slice();G.push(0);const le=new si(B.root,G);return[new ln(p,n.howMany,le,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)}const o=n.splitPosition.isEqual(e.targetPosition);if(o&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return n.howMany+=e.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),n.insertionPosition=pn.getInsertionPosition(n.splitPosition),[n];if(o&&t.abRelation&&t.abRelation.howMany){const{howMany:s,offset:p}=t.abRelation;return n.howMany+=s,n.splitPosition=n.splitPosition.getShiftedBy(p),[n]}if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.splitPosition)){const s=e.howMany-(n.splitPosition.offset-e.sourcePosition.offset);return n.howMany-=s,n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany),n.splitPosition=e.sourcePosition.clone(),n.insertionPosition=pn.getInsertionPosition(n.splitPosition),[n]}return e.sourcePosition.isEqual(e.targetPosition)||(n.splitPosition.hasSameParentAs(e.sourcePosition)&&n.splitPosition.offset<=e.sourcePosition.offset&&(n.howMany-=e.howMany),n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(e),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(e):n.insertionPosition=pn.getInsertionPosition(n.splitPosition),[n]}),sn(pn,pn,(n,e,t)=>{if(n.splitPosition.isEqual(e.splitPosition)){if(!n.graveyardPosition&&!e.graveyardPosition)return[new Sn(0)];if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition))return[new Sn(0)];if(t.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e),[n]}if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition)){const i=n.splitPosition.root.rootName=="$graveyard",o=e.splitPosition.root.rootName=="$graveyard";if(o&&!i||!(i&&!o)&&t.aIsStrong){const s=[];return e.howMany&&s.push(new ln(e.moveTargetPosition,e.howMany,e.splitPosition,0)),n.howMany&&s.push(new ln(n.splitPosition,n.howMany,n.moveTargetPosition,0)),s}return[new Sn(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e)),n.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return n.howMany++,[n];if(e.splitPosition.isEqual(n.insertionPosition)&&t.baRelation=="splitBefore"){const i=e.insertionPosition.path.slice();i.push(0);const o=new si(e.insertionPosition.root,i);return[n,new ln(n.insertionPosition,1,o,0)]}return n.splitPosition.hasSameParentAs(e.splitPosition)&&n.splitPosition.offset<e.splitPosition.offset&&(n.howMany-=e.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(e),n.insertionPosition=pn.getInsertionPosition(n.splitPosition),[n]});class Mn extends(0,r.ln)(si){constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new r.Bb("model-liveposition-root-not-rootelement",e);Es.call(this)}detach(){this.stopListening()}toPosition(){return new si(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}function Es(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&Is.call(this,t)},{priority:"low"})}function Is(n){const e=this.getTransformedByOperation(n);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}Mn.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};class Qo{constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},(0,r.KE)("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:i=!0,isUndo:o=!1,isTyping:s=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=i,this.isUndo=o,this.isTyping=s}get type(){return(0,r.KE)("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}class Ps{constructor(e){this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null,this._refreshedItems=new Set,this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const i of t.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break;case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const i=this._isInInsertedElement(t.sourcePosition.parent),o=this._isInInsertedElement(t.targetPosition.parent);i||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),o||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const i=Ht._createFromPositionAndShift(t.position,1);for(const o of this._markerCollection.getMarkersIntersectingRange(i)){const s=o.getData();this.bufferMarkerChange(o.name,s,s)}break}case"split":{const i=t.splitPosition.parent;this._isInInsertedElement(i)||this._markRemove(i,t.splitPosition.offset,t.howMany),this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1);break}case"merge":{const i=t.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);const o=t.graveyardPosition.parent;this._markInsert(o,t.graveyardPosition.offset,1);const s=t.targetPosition.parent;this._isInInsertedElement(s)||this._markInsert(s,t.targetPosition.offset,i.maxOffset);break}}this._cachedChanges=null}bufferMarkerChange(e,t,i){const o=this._changedMarkers.get(e);o?(o.newMarkerData=i,o.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{newMarkerData:i,oldMarkerData:t})}getMarkersToRemove(){const e=[];for(const[t,i]of this._changedMarkers)i.oldMarkerData.range!=null&&e.push({name:t,range:i.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,i]of this._changedMarkers)i.newMarkerData.range!=null&&e.push({name:t,range:i.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this._changesInElement.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const i=e.range&&!t.range,o=!e.range&&t.range,s=e.range&&t.range&&!e.range.isEqual(t.range);if(i||o||s)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const i of this._changesInElement.keys()){const o=this._changesInElement.get(i).sort((be,We)=>be.offset===We.offset?be.type!=We.type?be.type=="remove"?-1:1:0:be.offset<We.offset?-1:1),s=this._elementSnapshots.get(i),p=Hr(i.getChildren()),B=Ls(s.length,o);let G=0,le=0;for(const be of B)if(be==="i")t.push(this._getInsertDiff(i,G,p[G])),G++;else if(be==="r")t.push(this._getRemoveDiff(i,G,s[le])),le++;else if(be==="a"){const We=p[G].attributes,it=s[le].attributes;let Lt;if(p[G].name=="$text")Lt=new Ht(si._createAt(i,G),si._createAt(i,G+1));else{const Jt=i.offsetToIndex(G);Lt=new Ht(si._createAt(i,G),si._createAt(i.getChild(Jt),0))}t.push(...this._getAttributesDiff(Lt,it,We)),G++,le++}else G++,le++}t.sort((i,o)=>i.position.root!=o.position.root?i.position.root.rootName<o.position.root.rootName?-1:1:i.position.isEqual(o.position)?i.changeCount-o.changeCount:i.position.isBefore(o.position)?-1:1);for(let i=1,o=0;i<t.length;i++){const s=t[o],p=t[i],B=s.type=="remove"&&p.type=="remove"&&s.name=="$text"&&p.name=="$text"&&s.position.isEqual(p.position),G=s.type=="insert"&&p.type=="insert"&&s.name=="$text"&&p.name=="$text"&&s.position.parent==p.position.parent&&s.position.offset+s.length==p.position.offset,le=s.type=="attribute"&&p.type=="attribute"&&s.position.parent==p.position.parent&&s.range.isFlat&&p.range.isFlat&&s.position.offset+s.length==p.position.offset&&s.attributeKey==p.attributeKey&&s.attributeOldValue==p.attributeOldValue&&s.attributeNewValue==p.attributeNewValue;B||G||le?(s.length++,le&&(s.range.end=s.range.end.getShiftedBy(1)),t[i]=null):o=i}t=t.filter(i=>i);for(const i of t)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(Ms),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._refreshedItems=new Set,this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e);const t=Ht._createOn(e);for(const i of this._markerCollection.getMarkersIntersectingRange(t)){const o=i.getData();this.bufferMarkerChange(i.name,o,o)}this._cachedChanges=null}_markInsert(e,t,i){const o={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,o)}_markRemove(e,t,i){const o={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,o),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshot(e);const i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let o=0;o<i.length;o++)i[o].howMany<1&&(i.splice(o,1),o--)}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,Hr(e.getChildren()))}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const i of t){const o=e.offset+e.howMany,s=i.offset+i.howMany;if(e.type=="insert"&&(i.type=="insert"&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<s&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),i.type=="remove"&&e.offset<i.offset&&(i.offset+=e.howMany),i.type=="attribute")){if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<s){const p=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:o,howMany:p-i.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(i.type=="insert"){if(o<=i.offset)i.offset-=e.howMany;else if(o<=s)if(e.offset<i.offset){const p=o-i.offset;i.offset=e.offset,i.howMany-=p,e.nodesToHandle-=p}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<s){const p=s-e.offset;i.howMany-=p,e.nodesToHandle-=p}}if(i.type=="remove"&&(o<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(o<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){const p=o-i.offset;i.offset=e.offset,i.howMany-=p}else if(e.offset<s)if(o<=s){const p=i.howMany;i.howMany=e.offset-i.offset;const B=p-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:B,count:this._changeCount++})}else i.howMany-=s-e.offset}}if(e.type=="attribute"){if(i.type=="insert")if(e.offset<i.offset&&o>i.offset){if(o>s){const p={type:"attribute",offset:s,howMany:o-s,count:this._changeCount++};this._handleChange(p,t),t.push(p)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<s&&(o>s?(e.nodesToHandle=o-s,e.offset=s):e.nodesToHandle=0);if(i.type=="remove"&&e.offset<i.offset&&o>i.offset){const p={type:"attribute",offset:i.offset,howMany:o-i.offset,count:this._changeCount++};this._handleChange(p,t),t.push(p),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}i.type=="attribute"&&(e.offset>=i.offset&&o<=s?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&o>=s&&(i.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i){return{type:"insert",position:si._createAt(e,t),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++}}_getRemoveDiff(e,t,i){return{type:"remove",position:si._createAt(e,t),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,i){const o=[];i=new Map(i);for(const[s,p]of t){const B=i.has(s)?i.get(s):null;B!==p&&o.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:s,attributeOldValue:p,attributeNewValue:B,changeCount:this._changeCount++}),i.delete(s)}for(const[s,p]of i)o.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:s,attributeOldValue:null,attributeNewValue:p,changeCount:this._changeCount++});return o}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const i=this._changesInElement.get(t),o=e.startOffset;if(i){for(const s of i)if(s.type=="insert"&&o>=s.offset&&o<s.offset+s.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){const o=new Ht(si._createAt(e,t),si._createAt(e,t+i));for(const s of o.getItems({shallow:!0}))s.is("element")&&(this._elementSnapshots.delete(s),this._changesInElement.delete(s),this._removeAllNestedChanges(s,0,s.maxOffset))}}function Hr(n){const e=[];for(const t of n)if(t.is("$text"))for(let i=0;i<t.data.length;i++)e.push({name:"$text",attributes:new Map(t.getAttributes())});else e.push({name:t.name,attributes:new Map(t.getAttributes())});return e}function Ls(n,e){const t=[];let i=0,o=0;for(const s of e){if(s.offset>i){for(let p=0;p<s.offset-i;p++)t.push("e");o+=s.offset-i}if(s.type=="insert"){for(let p=0;p<s.howMany;p++)t.push("i");i=s.offset+s.howMany}else if(s.type=="remove"){for(let p=0;p<s.howMany;p++)t.push("r");i=s.offset,o+=s.howMany}else t.push(..."a".repeat(s.howMany).split("")),i=s.offset+s.howMany,o+=s.howMany}if(o<n)for(let s=0;s<n-o-i;s++)t.push("e");return t}function Ms(n){const e="position"in n&&n.position.root.rootName=="$graveyard",t="range"in n&&n.range.root.rootName=="$graveyard";return!e&&!t}class Ur{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set,this._baseVersionToOperationIndex=new Map,this._version=0,this._gaps=new Map}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new r.Bb("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const i=this._operations[0];e===void 0&&(e=i.baseVersion);let o=t-1;for(const[B,G]of this._gaps)e>B&&e<G&&(e=G),o>B&&o<G&&(o=B-1);if(o<i.baseVersion||e>this.lastOperation.baseVersion)return[];let s=this._baseVersionToOperationIndex.get(e);s===void 0&&(s=0);let p=this._baseVersionToOperationIndex.get(o);return p===void 0&&(p=this._operations.length-1),this._operations.slice(s,p+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class br extends rn{constructor(e,t,i="main"){super(t),this._document=e,this.rootName=i}get document(){return this._document}toJSON(){return this.rootName}}br.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};const Tr="$graveyard";class Rs extends(0,r.ln)(){constructor(e){super(),this.model=e,this.history=new Ur,this.selection=new re(this),this.roots=new r.FE({idProperty:"rootName"}),this.differ=new Ps(e.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",Tr),this.listenTo(e,"applyOperation",(t,i)=>{const o=i[0];o.isDocumentOperation&&this.differ.bufferOperation(o)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,i)=>{const o=i[0];o.isDocumentOperation&&this.history.addOperation(o)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,i,o,s,p)=>{const B={...i.getData(),range:s};this.differ.bufferMarkerChange(i.name,p,B),o===null&&i.on("change",(G,le)=>{const be=i.getData();this.differ.bufferMarkerChange(i.name,{...be,range:le},be)})})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(Tr)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new r.Bb("model-document-createroot-name-exists",this,{name:t});const i=new br(this,e,t);return this.roots.add(i),i}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(){return Array.from(this.roots,e=>e.rootName).filter(e=>e!=Tr)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=T(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){for(const e of this.roots)if(e!==this.graveyard)return e;return this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,i=t.schema,o=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(o)||t.createRange(o)}_validateSelectionRange(e){return Wr(e.start)&&Wr(e.end)}_callPostFixers(e){let t=!1;do for(const i of this._postFixers)if(this.selection.refresh(),t=i(e),t)break;while(t)}}function Wr(n){const e=n.textNode;if(e){const t=e.data,i=n.offset-e.startOffset;return!(0,r.to)(t,i)&&!(0,r.pp)(t,i)}return!0}class Os extends(0,r.ln)(){constructor(){super(...arguments),this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){const t=e instanceof Jo?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,i=!1,o=!1){const s=e instanceof Jo?e.name:e;if(s.includes(","))throw new r.Bb("markercollection-incorrect-marker-name",this);const p=this._markers.get(s);if(p){const le=p.getData(),be=p.getRange();let We=!1;return be.isEqual(t)||(p._attachLiveRange(S.fromRange(t)),We=!0),i!=p.managedUsingOperations&&(p._managedUsingOperations=i,We=!0),typeof o=="boolean"&&o!=p.affectsData&&(p._affectsData=o,We=!0),We&&this.fire(`update:${s}`,p,be,t,le),p}const B=S.fromRange(t),G=new Jo(s,B,i,o);return this._markers.set(s,G),this.fire(`update:${s}`,G,null,t,{...G.getData(),range:null}),G}_remove(e){const t=e instanceof Jo?e.name:e,i=this._markers.get(t);return!!i&&(this._markers.delete(t),this.fire(`update:${t}`,i,i.getRange(),null,i.getData()),this._destroyMarker(i),!0)}_refresh(e){const t=e instanceof Jo?e.name:e,i=this._markers.get(t);if(!i)throw new r.Bb("markercollection-refresh-marker-not-exists",this);const o=i.getRange();this.fire(`update:${t}`,i,o,o,i.getData())}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class Jo extends(0,r.ln)(Un){constructor(e,t,i,o){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=o}get managedUsingOperations(){if(!this._liveRange)throw new r.Bb("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new r.Bb("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new r.Bb("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new r.Bb("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new r.Bb("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Jo.prototype.is=function(n){return n==="marker"||n==="model:marker"};class js extends $n{constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new r.Bb("detach-operation-on-document-node",this)}_execute(){Mr(Ht._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class no extends Un{constructor(e){super(),this.markers=new Map,this._children=new so,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const i of e)t=t.getChild(t.offsetToIndex(i));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const i of e)i.name?t.push(rn.fromJSON(i)):t.push(on.fromJSON(i));return new no(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=function(o){return typeof o=="string"?[new on(o)]:((0,r.TW)(o)||(o=[o]),Array.from(o).map(s=>typeof s=="string"?new on(s):s instanceof Pn?new on(s.data,s.getAttributes()):s))}(t);for(const o of i)o.parent!==null&&o._remove(),o.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const o of i)o.parent=null;return i}}no.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};class Ns{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new on(e,t)}createElement(e,t){return new rn(e,t)}createDocumentFragment(){return new no}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),e instanceof on&&e.data=="")return;const o=si._createAt(t,i);if(e.parent){if(qr(e.root,o.root))return void this.move(Ht._createOn(e),o);if(e.root.document)throw new r.Bb("model-writer-insert-forbidden-move",this);this.remove(e)}const s=o.root.document?o.root.document.version:null,p=new xn(o,e,s);if(e instanceof on&&(p.shouldReceiveAttributes=!0),this.batch.addOperation(p),this.model.applyOperation(p),e instanceof no)for(const[B,G]of e.markers){const le=si._createAt(G.root,0),be={range:new Ht(G.start._getCombined(le,o),G.end._getCombined(le,o)),usingOperation:!0,affectsData:!0};this.model.markers.has(B)?this.updateMarker(B,be):this.addMarker(B,be)}}insertText(e,t,i,o){t instanceof no||t instanceof rn||t instanceof si?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,o)}insertElement(e,t,i,o){t instanceof no||t instanceof rn||t instanceof si?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,o)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof no||t instanceof rn?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof no||t instanceof rn?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof Ht){const o=i.getMinimalFlatRanges();for(const s of o)Zr(this,e,t,s)}else $r(this,e,t,i)}setAttributes(e,t){for(const[i,o]of(0,r.qL)(e))this.setAttribute(i,o,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof Ht){const i=t.getMinimalFlatRanges();for(const o of i)Zr(this,e,null,o)}else $r(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=i=>{for(const o of i.getAttributeKeys())this.removeAttribute(o,i)};if(e instanceof Ht)for(const i of e.getItems())t(i);else t(e)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof Ht))throw new r.Bb("writer-move-invalid-range",this);if(!e.isFlat)throw new r.Bb("writer-move-range-not-flat",this);const o=si._createAt(t,i);if(o.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!qr(e.root,o.root))throw new r.Bb("writer-move-different-document",this);const s=e.root.document?e.root.document.version:null,p=new ln(e.start,e.end.offset-e.start.offset,o,s);this.batch.addOperation(p),this.model.applyOperation(p)}remove(e){this._assertWriterUsedCorrectly();const t=(e instanceof Ht?e:Ht._createOn(e)).getMinimalFlatRanges().reverse();for(const i of t)this._addOperationForAffectedMarkers("move",i),Vs(i.start,i.end.offset-i.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof rn))throw new r.Bb("writer-merge-no-element-before",this);if(!(i instanceof rn))throw new r.Bb("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,i=e.nodeAfter;this.move(Ht._createIn(i),si._createAt(t,"end")),this.remove(i)}_merge(e){const t=si._createAt(e.nodeBefore,"end"),i=si._createAt(e.nodeAfter,0),o=e.root.document.graveyard,s=new si(o,[0]),p=e.root.document.version,B=new vn(i,e.nodeAfter.maxOffset,t,s,p);this.batch.addOperation(B),this.model.applyOperation(B)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof rn))throw new r.Bb("writer-rename-not-element-instance",this);const i=e.root.document?e.root.document.version:null,o=new jn(si._createBefore(e),e.name,t,i);this.batch.addOperation(o),this.model.applyOperation(o)}split(e,t){this._assertWriterUsedCorrectly();let i,o,s=e.parent;if(!s.parent)throw new r.Bb("writer-split-element-no-parent",this);if(t||(t=s.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new r.Bb("writer-split-invalid-limit-element",this);do{const p=s.root.document?s.root.document.version:null,B=s.maxOffset-e.offset,G=pn.getInsertionPosition(e),le=new pn(e,B,G,null,p);this.batch.addOperation(le),this.model.applyOperation(le),i||o||(i=s,o=e.parent.nextSibling),s=(e=this.createPositionAfter(e.parent)).parent}while(s!==t);return{position:e,range:new Ht(si._createAt(i,"end"),si._createAt(o,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new r.Bb("writer-wrap-range-not-flat",this);const i=t instanceof rn?t:new rn(t);if(i.childCount>0)throw new r.Bb("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new r.Bb("writer-wrap-element-attached",this);this.insert(i,e.start);const o=new Ht(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(o,si._createAt(i,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new r.Bb("writer-unwrap-element-no-parent",this);this.move(Ht._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new r.Bb("writer-addmarker-no-usingoperation",this);const i=t.usingOperation,o=t.range,s=t.affectsData!==void 0&&t.affectsData;if(this.model.markers.has(e))throw new r.Bb("writer-addmarker-marker-exists",this);if(!o)throw new r.Bb("writer-addmarker-no-range",this);return i?(pr(this,e,null,o,s),this.model.markers.get(e)):this.model.markers._set(e,o,i,s)}updateMarker(e,t){this._assertWriterUsedCorrectly();const i=typeof e=="string"?e:e.name,o=this.model.markers.get(i);if(!o)throw new r.Bb("writer-updatemarker-marker-not-exists",this);if(!t)return(0,r.KE)("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),void this.model.markers._refresh(o);const s=typeof t.usingOperation=="boolean",p=typeof t.affectsData=="boolean",B=p?t.affectsData:o.affectsData;if(!s&&!t.range&&!p)throw new r.Bb("writer-updatemarker-wrong-options",this);const G=o.getRange(),le=t.range?t.range:G;s&&t.usingOperation!==o.managedUsingOperations?t.usingOperation?pr(this,i,null,le,B):(pr(this,i,G,null,B),this.model.markers._set(i,le,void 0,B)):o.managedUsingOperations?pr(this,i,G,le,B):this.model.markers._set(i,le,void 0,B)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new r.Bb("writer-removemarker-no-marker",this);const i=this.model.markers.get(t);if(!i.managedUsingOperations)return void this.model.markers._remove(t);pr(this,t,i.getRange(),null,i.affectsData)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[i,o]of(0,r.qL)(e))this._setSelectionAttribute(i,o)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){const o=re._getStoreAttributeKey(e);this.setAttribute(o,t,i.anchor.parent)}i._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const i=re._getStoreAttributeKey(e);this.removeAttribute(i,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new r.Bb("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const i of this.model.markers){if(!i.managedUsingOperations)continue;const o=i.getRange();let s=!1;if(e==="move"){const p=t;s=p.containsPosition(o.start)||p.start.isEqual(o.start)||p.containsPosition(o.end)||p.end.isEqual(o.end)}else{const p=t,B=p.nodeBefore,G=p.nodeAfter,le=o.start.parent==B&&o.start.isAtEnd,be=o.end.parent==G&&o.end.offset==0,We=o.end.nodeAfter==G,it=o.start.nodeAfter==G;s=le||be||We||it}s&&this.updateMarker(i.name,{range:o})}}}function Zr(n,e,t,i){const o=n.model,s=o.document;let p,B,G,le=i.start;for(const We of i.getWalker({shallow:!0}))G=We.item.getAttribute(e),p&&B!=G&&(B!=t&&be(),le=p),p=We.nextPosition,B=G;function be(){const We=new Ht(le,p),it=We.root.document?s.version:null,Lt=new yn(We,e,B,t,it);n.batch.addOperation(Lt),o.applyOperation(Lt)}p instanceof si&&p!=le&&B!=t&&be()}function $r(n,e,t,i){const o=n.model,s=o.document,p=i.getAttribute(e);let B,G;if(p!=t){if(i.root===i){const le=i.document?s.version:null;G=new co(i,e,p,t,le)}else{B=new Ht(si._createBefore(i),n.createPositionAfter(i));const le=B.root.document?s.version:null;G=new yn(B,e,p,t,le)}n.batch.addOperation(G),o.applyOperation(G)}}function pr(n,e,t,i,o){const s=n.model,p=s.document,B=new Ln(e,t,i,s.markers,!!o,p.version);n.batch.addOperation(B),s.applyOperation(B)}function Vs(n,e,t,i){let o;if(n.root.document){const s=i.document,p=new si(s.graveyard,[0]);o=new ln(n,e,p,s.version)}else o=new js(n,e);t.addOperation(o),i.applyOperation(o)}function qr(n,e){return n===e||n instanceof br&&e instanceof br}function Bs(n){n.document.registerPostFixer(e=>function(t,i){const o=i.document.selection,s=i.schema,p=[];let B=!1;for(const G of o.getRanges()){const le=zs(G,s);le&&!le.isEqual(G)?(p.push(le),B=!0):p.push(G)}return B&&t.setSelection(function(G){const le=[...G],be=new Set;let We=1;for(;We<le.length;){const it=le[We],Lt=le.slice(0,We);for(const[Jt,mi]of Lt.entries())if(!be.has(Jt)){if(it.isEqual(mi))be.add(Jt);else if(it.isIntersecting(mi)){be.add(Jt),be.add(We);const _i=it.getJoined(mi);le.push(_i)}}We++}return le.filter((it,Lt)=>!be.has(Lt))}(p),{backward:o.isBackward}),!1}(e,n))}function zs(n,e){return n.isCollapsed?function(t,i){const o=t.start,s=i.getNearestSelectionRange(o);if(!s){const B=o.getAncestors().reverse().find(G=>i.isObject(G));return B?Ht._createOn(B):null}if(!s.isCollapsed)return s;const p=s.start;return o.isEqual(p)?null:new Ht(p)}(n,e):function(t,i){const{start:o,end:s}=t,p=i.checkChild(o,"$text"),B=i.checkChild(s,"$text"),G=i.getLimitElement(o),le=i.getLimitElement(s);if(G===le){if(p&&B)return null;if(function(it,Lt,Jt){const mi=it.nodeAfter&&!Jt.isLimit(it.nodeAfter)||Jt.checkChild(it,"$text"),_i=Lt.nodeBefore&&!Jt.isLimit(Lt.nodeBefore)||Jt.checkChild(Lt,"$text");return mi||_i}(o,s,i)){const it=o.nodeAfter&&i.isSelectable(o.nodeAfter)?null:i.getNearestSelectionRange(o,"forward"),Lt=s.nodeBefore&&i.isSelectable(s.nodeBefore)?null:i.getNearestSelectionRange(s,"backward"),Jt=it?it.start:o,mi=Lt?Lt.end:s;return new Ht(Jt,mi)}}const be=G&&!G.is("rootElement"),We=le&&!le.is("rootElement");if(be||We){const it=o.nodeAfter&&s.nodeBefore&&o.nodeAfter.parent===s.nodeBefore.parent,Lt=be&&(!it||!Gr(o.nodeAfter,i)),Jt=We&&(!it||!Gr(s.nodeBefore,i));let mi=o,_i=s;return Lt&&(mi=si._createBefore(Kr(G,i))),Jt&&(_i=si._createAfter(Kr(le,i))),new Ht(mi,_i)}return null}(n,e)}function Kr(n,e){let t=n,i=t;for(;e.isLimit(i)&&i.parent;)t=i,i=i.parent;return t}function Gr(n,e){return n&&e.isSelectable(n)}function Ds(n,e,t={}){if(e.isCollapsed)return;const i=e.getFirstRange();if(i.root.rootName=="$graveyard")return;const o=n.schema;n.change(s=>{if(!t.doNotResetEntireContent&&function(le,be){const We=le.getLimitElement(be);if(!be.containsEntireContent(We))return!1;const it=be.getFirstRange();return it.start.parent==it.end.parent?!1:le.checkChild(We,"paragraph")}(o,e))return void function(le,be){const We=le.model.schema.getLimitElement(be);le.remove(le.createRangeIn(We)),Jr(le,le.createPositionAt(We,0),be)}(s,e);const p={};if(!t.doNotAutoparagraph){const le=e.getSelectedElement();le&&Object.assign(p,o.getAttributesWithProperty(le,"copyOnReplace",!0))}const[B,G]=function(le){const be=le.root.document.model,We=le.start;let it=le.end;if(be.hasContent(le,{ignoreMarkers:!0})){const Lt=function(Jt){const mi=Jt.parent,_i=mi.root.document.model.schema,Ji=mi.getAncestors({parentFirst:!0,includeSelf:!0});for(const Bi of Ji){if(_i.isLimit(Bi))return null;if(_i.isBlock(Bi))return Bi}}(it);if(Lt&&it.isTouching(be.createPositionAt(Lt,0))){const Jt=be.createSelection(le);be.modifySelection(Jt,{direction:"backward"});const mi=Jt.getLastPosition(),_i=be.createRange(mi,it);be.hasContent(_i,{ignoreMarkers:!0})||(it=mi)}}return[Mn.fromPosition(We,"toPrevious"),Mn.fromPosition(it,"toNext")]}(i);B.isTouching(G)||s.remove(s.createRange(B,G)),t.leaveUnmerged||(function(le,be,We){const it=le.model;if(!Ar(le.model.schema,be,We))return;const[Lt,Jt]=function(mi,_i){const Ji=mi.getAncestors(),Bi=_i.getAncestors();let en=0;for(;Ji[en]&&Ji[en]==Bi[en];)en++;return[Ji[en],Bi[en]]}(be,We);!Lt||!Jt||(!it.hasContent(Lt,{ignoreMarkers:!0})&&it.hasContent(Jt,{ignoreMarkers:!0})?Qr(le,be,We,Lt.parent):Yr(le,be,We,Lt.parent))}(s,B,G),o.removeDisallowedAttributes(B.parent.getChildren(),s)),Xr(s,e,B),!t.doNotAutoparagraph&&function(le,be){const We=le.checkChild(be,"$text"),it=le.checkChild(be,"paragraph");return!We&&it}(o,B)&&Jr(s,B,e,p),B.detach(),G.detach()})}function Yr(n,e,t,i){const o=e.parent,s=t.parent;if(o!=i&&s!=i){for(e=n.createPositionAfter(o),(t=n.createPositionBefore(s)).isEqual(e)||n.insert(s,e),n.merge(e);t.parent.isEmpty;){const p=t.parent;t=n.createPositionBefore(p),n.remove(p)}Ar(n.model.schema,e,t)&&Yr(n,e,t,i)}}function Qr(n,e,t,i){const o=e.parent,s=t.parent;if(o!=i&&s!=i){for(e=n.createPositionAfter(o),(t=n.createPositionBefore(s)).isEqual(e)||n.insert(o,t);e.parent.isEmpty;){const p=e.parent;e=n.createPositionBefore(p),n.remove(p)}t=n.createPositionBefore(s),function(p,B){const G=B.nodeBefore,le=B.nodeAfter;G.name!=le.name&&p.rename(G,le.name),p.clearAttributes(G),p.setAttributes(Object.fromEntries(le.getAttributes()),G),p.merge(B)}(n,t),Ar(n.model.schema,e,t)&&Qr(n,e,t,i)}}function Ar(n,e,t){const i=e.parent,o=t.parent;return i!=o&&!n.isLimit(i)&&!n.isLimit(o)&&function(s,p,B){const G=new Ht(s,p);for(const le of G.getWalker())if(B.isLimit(le.item))return!1;return!0}(e,t,n)}function Jr(n,e,t,i={}){const o=n.createElement("paragraph");n.model.schema.setAllowedAttributes(o,i,n),n.insert(o,e),Xr(n,t,n.createPositionAt(o,0))}function Xr(n,e,t){e instanceof re?n.setSelection(t):e.setTo(t)}function es(n,e){const t=[];Array.from(n.getItems({direction:"backward"})).map(i=>e.createRangeOn(i)).filter(i=>(i.start.isAfter(n.start)||i.start.isEqual(n.start))&&(i.end.isBefore(n.end)||i.end.isEqual(n.end))).forEach(i=>{t.push(i.start.parent),e.remove(i)}),t.forEach(i=>{let o=i;for(;o.parent&&o.isEmpty;){const s=e.createRangeOn(o);o=o.parent,e.remove(s)}})}class Fs{constructor(e,t,i){this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null,this._nodeToSelect=null,this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new r.Bb("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?Ht._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Ht(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(this.schema.isObject(e))return void this._handleObject(e);let t=this._checkAndAutoParagraphToAllowedPosition(e);t||(t=this._checkAndSplitToAllowedPosition(e),t)?(this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e):this._handleDisallowedNode(e)}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=Mn.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new r.Bb("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Mn.fromPosition(e,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(e)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Mn.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof rn)||!this._canMergeLeft(e))return;const t=Mn._createBefore(e);t.stickiness="toNext";const i=Mn.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Mn._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Mn._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof rn)||!this._canMergeRight(e))return;const t=Mn._createAfter(e);if(t.stickiness="toNext",!this.position.isEqual(t))throw new r.Bb("insertcontent-invalid-insertion-position",this);this.position=si._createAt(t.nodeBefore,"end");const i=Mn.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Mn._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Mn._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof rn&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof rn&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_tryAutoparagraphing(e){const t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}_checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();const t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===t&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}function ts(n,e,t="auto"){const i=n.getSelectedElement();if(i&&e.schema.isObject(i)&&!e.schema.isInline(i))return t=="before"||t=="after"?e.createRange(e.createPositionAt(i,t)):e.createRangeOn(i);const o=(0,r.Ps)(n.getSelectedBlocks());if(!o)return e.createRange(n.focus);if(o.isEmpty)return e.createRange(e.createPositionAt(o,0));const s=e.createPositionAfter(o);return n.focus.isTouching(s)?e.createRange(s):e.createRange(e.createPositionBefore(o))}function Hs(n,e,t,i,o={}){if(!n.schema.isObject(e))throw new r.Bb("insertobject-element-not-an-object",n,{object:e});let s;s=t?t instanceof On||t instanceof re?t:n.createSelection(t,i):n.document.selection;let p=s;o.findOptimalPosition&&n.schema.isBlock(e)&&(p=n.createSelection(ts(s,n,o.findOptimalPosition)));const B=(0,r.Ps)(s.getSelectedBlocks()),G={};return B&&Object.assign(G,n.schema.getAttributesWithProperty(B,"copyOnReplace",!0)),n.change(le=>{p.isCollapsed||n.deleteContent(p,{doNotAutoparagraph:!0});let be=e;const We=p.anchor.parent;!n.schema.checkChild(We,e)&&n.schema.checkChild(We,"paragraph")&&n.schema.checkChild("paragraph",e)&&(be=le.createElement("paragraph"),le.insert(e,be)),n.schema.setAllowedAttributes(be,G,le);const it=n.insertContent(be,p);return it.isCollapsed||o.setSelection&&function(Lt,Jt,mi,_i){const Ji=Lt.model;if(mi=="on")return void Lt.setSelection(Jt,"on");if(mi!="after")throw new r.Bb("insertobject-invalid-place-parameter-value",Ji);let Bi=Jt.nextSibling;if(Ji.schema.isInline(Jt))return void Lt.setSelection(Jt,"after");!(Bi&&Ji.schema.checkChild(Bi,"$text"))&&Ji.schema.checkChild(Jt.parent,"paragraph")&&(Bi=Lt.createElement("paragraph"),Ji.schema.setAllowedAttributes(Bi,_i,Lt),Ji.insertContent(Bi,Lt.createPositionAfter(Jt))),Bi&&Lt.setSelection(Bi,0)}(le,e,o.setSelection,G),it})}const Us=' ,.?!:;"-()';function Ws(n,e){const{isForward:t,walker:i,unit:o,schema:s,treatEmojiAsSingleUnit:p}=n,{type:B,item:G,nextPosition:le}=e;if(B=="text")return n.unit==="word"?function(be,We){let it=be.position.textNode;for(it||(it=We?be.position.nodeAfter:be.position.nodeBefore);it&&it.is("$text");){const Lt=be.position.offset-it.startOffset;if(qs(it,Lt,We))it=We?be.position.nodeAfter:be.position.nodeBefore;else{if($s(it.data,Lt,We))break;be.next()}}return be.position}(i,t):function(be,We,it){const Lt=be.position.textNode;if(Lt){const Jt=Lt.data;let mi=be.position.offset-Lt.startOffset;for(;(0,r.to)(Jt,mi)||We=="character"&&(0,r.pp)(Jt,mi)||it&&(0,r.YK)(Jt,mi);)be.next(),mi=be.position.offset-Lt.startOffset}return be.position}(i,o,p);if(B==(t?"elementStart":"elementEnd")){if(s.isSelectable(G))return si._createAt(G,t?"after":"before");if(s.checkChild(le,"$text"))return le}else{if(s.isLimit(G))return void i.skip(()=>!0);if(s.checkChild(le,"$text"))return le}}function Zs(n,e){const t=n.root,i=si._createAt(t,e?"end":0);return e?new Ht(n,i):new Ht(i,n)}function $s(n,e,t){const i=e+(t?0:-1);return Us.includes(n.charAt(i))}function qs(n,e,t){return e===(t?n.offsetSize:0)}class Ks extends(0,r.Re)(){constructor(){super(),this.markers=new Os,this.document=new Rs(this),this.schema=new Zn,this._pendingChanges=[],this._currentWriter=null,["insertContent","insertObject","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck((e,t)=>{if(t.name==="$marker")return!0}),Bs(this),this.document.registerPostFixer(Et)}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Qo,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){r.Bb.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new Qo):e instanceof Qo||(e=new Qo(e)):e=new Qo,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(i){r.Bb.rethrowUnexpectedError(i,this)}}applyOperation(e){e._execute()}insertContent(e,t,i){return function(o,s,p,B){return o.change(G=>{let le;le=p?p instanceof On||p instanceof re?p:G.createSelection(p,B):o.document.selection,le.isCollapsed||o.deleteContent(le,{doNotAutoparagraph:!0});const be=new Fs(o,G,le.anchor),We=[];let it;if(s.is("documentFragment")){if(s.markers.size){const mi=[];for(const[_i,Ji]of s.markers){const{start:Bi,end:en}=Ji,En=Bi.isEqual(en);mi.push({position:Bi,name:_i,isCollapsed:En},{position:en,name:_i,isCollapsed:En})}mi.sort(({position:_i},{position:Ji})=>_i.isBefore(Ji)?1:-1);for(const{position:_i,name:Ji,isCollapsed:Bi}of mi){let en=null,En=null;const _o=_i.parent===s&&_i.isAtStart,Kn=_i.parent===s&&_i.isAtEnd;_o||Kn?Bi&&(En=_o?"start":"end"):(en=G.createElement("$marker"),G.insert(en,_i)),We.push({name:Ji,element:en,collapsed:En})}}it=s.getChildren()}else it=[s];be.handleNodes(it);let Lt=be.getSelectionRange();if(s.is("documentFragment")&&We.length){const mi=Lt?S.fromRange(Lt):null,_i={};for(let Ji=We.length-1;Ji>=0;Ji--){const{name:Bi,element:en,collapsed:En}=We[Ji],_o=!_i[Bi];if(_o&&(_i[Bi]=[]),en){const Kn=G.createPositionAt(en,"before");_i[Bi].push(Kn),G.remove(en)}else{const Kn=be.getAffectedRange();if(!Kn){En&&_i[Bi].push(be.position);continue}En?_i[Bi].push(Kn[En]):_i[Bi].push(_o?Kn.start:Kn.end)}}for(const[Ji,[Bi,en]]of Object.entries(_i))Bi&&en&&Bi.root===en.root&&G.addMarker(Ji,{usingOperation:!0,affectsData:!0,range:new Ht(Bi,en)});mi&&(Lt=mi.toRange(),mi.detach())}Lt&&(le instanceof re?G.setSelection(Lt):le.setTo(Lt));const Jt=be.getAffectedRange()||o.createRange(le.anchor);return be.destroy(),Jt})}(this,e,t,i)}insertObject(e,t,i,o){return Hs(this,e,t,i,o)}deleteContent(e,t){Ds(this,e,t)}modifySelection(e,t){(function(i,o,s={}){const p=i.schema,B=s.direction!="backward",G=s.unit?s.unit:"character",le=!!s.treatEmojiAsSingleUnit,be=o.focus,We=new Rn({boundaries:Zs(be,B),singleCharacters:!0,direction:B?"forward":"backward"}),it={walker:We,schema:p,isForward:B,unit:G,treatEmojiAsSingleUnit:le};let Lt;for(;Lt=We.next();){if(Lt.done)return;const Jt=Ws(it,Lt.value);if(Jt)return void(o instanceof re?i.change(mi=>{mi.setSelectionFocus(Jt)}):o.setFocus(Jt))}})(this,e,t)}getSelectedContent(e){return function(t,i){return t.change(o=>{const s=o.createDocumentFragment(),p=i.getFirstRange();if(!p||p.isCollapsed)return s;const B=p.start.root,G=p.start.getCommonPath(p.end),le=B.getNodeByPath(G);let be;be=p.start.parent==p.end.parent?p:o.createRange(o.createPositionAt(le,p.start.path[G.length]),o.createPositionAt(le,p.end.path[G.length]+1));const We=be.end.offset-be.start.offset;for(const it of be.getItems({shallow:!0}))it.is("$textProxy")?o.appendText(it.data,it.getAttributes(),s):o.append(o.cloneElement(it,!0),s);if(be!=p){const it=p._getTransformedByMove(be.start,o.createPositionAt(s,0),We)[0],Lt=o.createRange(o.createPositionAt(s,0),it.start);es(o.createRange(it.end,o.createPositionAt(s,"end")),o),es(Lt,o)}return s})}(this,e)}hasContent(e,t={}){const i=e instanceof Ht?e:Ht._createIn(e);if(i.isCollapsed)return!1;const{ignoreWhitespaces:o=!1,ignoreMarkers:s=!1}=t;if(!s){for(const p of this.markers.getMarkersIntersectingRange(i))if(p.affectsData)return!0}for(const p of i.getItems())if(this.schema.isContent(p)&&(!p.is("$textProxy")||!o||p.data.search(/\S/)!==-1))return!0;return!1}createPositionFromPath(e,t,i){return new si(e,t,i)}createPositionAt(e,t){return si._createAt(e,t)}createPositionAfter(e){return si._createAfter(e)}createPositionBefore(e){return si._createBefore(e)}createRange(e,t){return new Ht(e,t)}createRangeIn(e){return Ht._createIn(e)}createRangeOn(e){return Ht._createOn(e)}createSelection(...e){return new On(...e)}createBatch(e){return new Qo(e)}createOperationFromJSON(e){return Nr.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new Ns(this,t);const i=this._pendingChanges[0].callback(this._currentWriter);e.push(i),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}}class Gs extends Wi{constructor(e){super(e),this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}class Ys extends Wi{constructor(e){super(e),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(e){this.fire(e.type,e)}}class Qs{constructor(e){this.document=e}createDocumentFragment(e){return new se(this.document,e)}createElement(e,t,i){return new F(this.document,e,t,i)}createText(e){return new L(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,i){return i._insertChild(e,t)}removeChildren(e,t,i){return i._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const i=e.parent;if(i){const o=i.getChildIndex(e);return this.removeChildren(o,1,i),this.insertChild(o,t,i),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const i=t.getChildIndex(e);this.remove(e),this.insertChild(i,e.getChildren(),t)}}rename(e,t){const i=new F(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){(0,c.Z)(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return Ge._createAt(e,t)}createPositionAfter(e){return Ge._createAfter(e)}createPositionBefore(e){return Ge._createBefore(e)}createRange(e,t){return new Ut(e,t)}createRangeOn(e){return Ut._createOn(e)}createRangeIn(e){return Ut._createIn(e)}createSelection(...e){return new yi(...e)}}const Js=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,Xs=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,ea=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,ta=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,ia=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,na=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function is(n){return n.startsWith("#")?Js.test(n):n.startsWith("rgb")?Xs.test(n)||ea.test(n):n.startsWith("hsl")?ta.test(n)||ia.test(n):na.has(n.toLowerCase())}const oa=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function ns(n){return oa.includes(n)}const ra=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function os(n){return ra.test(n)}const sa=/^[+-]?[0-9]*([.][0-9]+)?%$/;function aa(n){return sa.test(n)}const la=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function rs(n){return la.includes(n)}const ca=["center","top","bottom","left","right"];function ss(n){return ca.includes(n)}const da=["fixed","scroll","local"];function as(n){return da.includes(n)}const ua=/^url\(/;function ls(n){return ua.test(n)}function Xo(n=""){if(n==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const e=wr(n),t=e[0],i=e[2]||t,o=e[1]||t;return{top:t,bottom:i,right:o,left:e[3]||o}}function er(n){return e=>{const{top:t,right:i,bottom:o,left:s}=e,p=[];return[t,i,s,o].every(B=>!!B)?p.push([n,cs(e)]):(t&&p.push([n+"-top",t]),i&&p.push([n+"-right",i]),o&&p.push([n+"-bottom",o]),s&&p.push([n+"-left",s])),p}}function cs({top:n,right:e,bottom:t,left:i}){const o=[];return i!==e?o.push(n,e,t,i):t!==n?o.push(n,e,t):e!==n?o.push(n,e):o.push(n),o.join(" ")}function Sr(n){return e=>({path:n,value:Xo(e)})}function wr(n){return n.replace(/, /g,",").split(" ").map(e=>e.replace(/,/g,", "))}function ha(n){n.setNormalizer("background",e=>{const t={},i=wr(e);for(const o of i)rs(o)?(t.repeat=t.repeat||[],t.repeat.push(o)):ss(o)?(t.position=t.position||[],t.position.push(o)):as(o)?t.attachment=o:is(o)?t.color=o:ls(o)&&(t.image=o);return{path:"background",value:t}}),n.setNormalizer("background-color",e=>({path:"background.color",value:e})),n.setReducer("background",e=>{const t=[];return t.push(["background-color",e.color]),t}),n.setStyleRelation("background",["background-color"])}function ma(n){n.setNormalizer("border",e=>{const{color:t,style:i,width:o}=ds(e);return{path:"border",value:{color:Xo(t),style:Xo(i),width:Xo(o)}}}),n.setNormalizer("border-top",kr("top")),n.setNormalizer("border-right",kr("right")),n.setNormalizer("border-bottom",kr("bottom")),n.setNormalizer("border-left",kr("left")),n.setNormalizer("border-color",Er("color")),n.setNormalizer("border-width",Er("width")),n.setNormalizer("border-style",Er("style")),n.setNormalizer("border-top-color",qn("color","top")),n.setNormalizer("border-top-style",qn("style","top")),n.setNormalizer("border-top-width",qn("width","top")),n.setNormalizer("border-right-color",qn("color","right")),n.setNormalizer("border-right-style",qn("style","right")),n.setNormalizer("border-right-width",qn("width","right")),n.setNormalizer("border-bottom-color",qn("color","bottom")),n.setNormalizer("border-bottom-style",qn("style","bottom")),n.setNormalizer("border-bottom-width",qn("width","bottom")),n.setNormalizer("border-left-color",qn("color","left")),n.setNormalizer("border-left-style",qn("style","left")),n.setNormalizer("border-left-width",qn("width","left")),n.setExtractor("border-top",vr("top")),n.setExtractor("border-right",vr("right")),n.setExtractor("border-bottom",vr("bottom")),n.setExtractor("border-left",vr("left")),n.setExtractor("border-top-color","border.color.top"),n.setExtractor("border-right-color","border.color.right"),n.setExtractor("border-bottom-color","border.color.bottom"),n.setExtractor("border-left-color","border.color.left"),n.setExtractor("border-top-width","border.width.top"),n.setExtractor("border-right-width","border.width.right"),n.setExtractor("border-bottom-width","border.width.bottom"),n.setExtractor("border-left-width","border.width.left"),n.setExtractor("border-top-style","border.style.top"),n.setExtractor("border-right-style","border.style.right"),n.setExtractor("border-bottom-style","border.style.bottom"),n.setExtractor("border-left-style","border.style.left"),n.setReducer("border-color",er("border-color")),n.setReducer("border-style",er("border-style")),n.setReducer("border-width",er("border-width")),n.setReducer("border-top",_r("top")),n.setReducer("border-right",_r("right")),n.setReducer("border-bottom",_r("bottom")),n.setReducer("border-left",_r("left")),n.setReducer("border",function(){return t=>{const i=fr(t,"top"),o=fr(t,"right"),s=fr(t,"bottom"),p=fr(t,"left"),B=[i,o,s,p],G={width:e(B,"width"),style:e(B,"style"),color:e(B,"color")},le=tr(G,"all");return le.length?le:[...Object.entries(G).reduce((We,[it,Lt])=>(Lt&&(We.push([`border-${it}`,Lt]),B.forEach(Jt=>delete Jt[it])),We),[]),...tr(i,"top"),...tr(o,"right"),...tr(s,"bottom"),...tr(p,"left")]};function e(t,i){return t.map(o=>o[i]).reduce((o,s)=>o==s?o:null)}}()),n.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),n.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),n.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),n.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),n.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),n.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),n.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),n.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function kr(n){return e=>{const{color:t,style:i,width:o}=ds(e),s={};return t!==void 0&&(s.color={[n]:t}),i!==void 0&&(s.style={[n]:i}),o!==void 0&&(s.width={[n]:o}),{path:"border",value:s}}}function Er(n){return e=>({path:"border",value:ga(e,n)})}function ga(n,e){return{[e]:Xo(n)}}function qn(n,e){return t=>({path:"border",value:{[n]:{[e]:t}}})}function vr(n){return(e,t)=>{if(t.border)return fr(t.border,n)}}function fr(n,e){const t={};return n.width&&n.width[e]&&(t.width=n.width[e]),n.style&&n.style[e]&&(t.style=n.style[e]),n.color&&n.color[e]&&(t.color=n.color[e]),t}function ds(n){const e={},t=wr(n);for(const i of t)os(i)||/thin|medium|thick/.test(i)?e.width=i:ns(i)?e.style=i:e.color=i;return e}function _r(n){return e=>tr(e,n)}function tr(n,e){const t=[];if(n&&n.width&&t.push("width"),n&&n.style&&t.push("style"),n&&n.color&&t.push("color"),t.length==3){const i=t.map(o=>n[o]).join(" ");return[e=="all"?["border",i]:[`border-${e}`,i]]}return e=="all"?[]:t.map(i=>[`border-${e}-${i}`,n[i]])}function pa(n){n.setNormalizer("margin",Sr("margin")),n.setNormalizer("margin-top",e=>({path:"margin.top",value:e})),n.setNormalizer("margin-right",e=>({path:"margin.right",value:e})),n.setNormalizer("margin-bottom",e=>({path:"margin.bottom",value:e})),n.setNormalizer("margin-left",e=>({path:"margin.left",value:e})),n.setReducer("margin",er("margin")),n.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function fa(n){n.setNormalizer("padding",Sr("padding")),n.setNormalizer("padding-top",e=>({path:"padding.top",value:e})),n.setNormalizer("padding-right",e=>({path:"padding.right",value:e})),n.setNormalizer("padding-bottom",e=>({path:"padding.bottom",value:e})),n.setNormalizer("padding-left",e=>({path:"padding.left",value:e})),n.setReducer("padding",er("padding")),n.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}},"./packages/ckeditor5-enter/src/index.ts":(f,v,a)=>{"use strict";a.d(v,{C:()=>ge,G:()=>h});var d=a("./packages/ckeditor5-core/src/index.ts");function*A(g,r){for(const u of r)u&&g.getAttributeProperties(u[0]).copyOnEnter&&(yield u)}class H extends d.mY{execute(){this.editor.model.change(r=>{this.enterBlock(r),this.fire("afterExecute",{writer:r})})}enterBlock(r){const u=this.editor.model,w=u.document.selection,_=u.schema,T=w.isCollapsed,z=w.getFirstRange(),L=z.start.parent,x=z.end.parent;if(_.isLimit(L)||_.isLimit(x))return T||L!=x||u.deleteContent(w),!1;if(T){const c=A(r.model.schema,w.getAttributes());return I(r,z.start),r.setSelectionAttribute(c),!0}{const c=!(z.start.isAtStart&&z.end.isAtEnd),D=L==x;if(u.deleteContent(w,{leaveUnmerged:c}),c){if(D)return I(r,w.focus),!0;r.setSelection(x,0)}}return!1}}function I(g,r){g.split(r),g.setSelection(r.parent.nextSibling,0)}var C=a("./packages/ckeditor5-engine/src/index.ts");const me={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class pe extends C.Qj{constructor(r){super(r);const u=this.document;u.on("beforeinput",(w,_)=>{if(!this.isEnabled)return;const T=_.domEvent,z=me[_.inputType];if(!z)return;const L=new C.r7(u,"enter",_.targetRanges[0]);u.fire(L,new C.dK(r,T,{isSoft:z.isSoft})),L.stop.called&&w.stop()})}observe(){}}class ge extends d.Sy{static get pluginName(){return"Enter"}init(){const r=this.editor,u=r.editing.view,w=u.document;u.addObserver(pe),r.commands.add("enter",new H(r)),this.listenTo(w,"enter",(_,T)=>{w.isComposing||T.preventDefault(),T.isSoft||(r.execute("enter"),u.scrollToTheSelection())},{priority:"low"})}}class X extends d.mY{execute(){const r=this.editor.model,u=r.document;r.change(w=>{(function(_,T,z){const L=z.isCollapsed,x=z.getFirstRange(),c=x.start.parent,D=x.end.parent,W=c==D;if(L){const q=A(_.schema,z.getAttributes());te(_,T,x.end),T.removeSelectionAttribute(z.getAttributeKeys()),T.setSelectionAttribute(q)}else{const q=!(x.start.isAtStart&&x.end.isAtEnd);_.deleteContent(z,{leaveUnmerged:q}),W?te(_,T,z.focus):q&&T.setSelection(D,0)}})(r,w,u.selection),this.fire("afterExecute",{writer:w})})}refresh(){const r=this.editor.model,u=r.document;this.isEnabled=function(w,_){if(_.rangeCount>1)return!1;const T=_.anchor;if(!T||!w.checkChild(T,"softBreak"))return!1;const z=_.getFirstRange(),L=z.start.parent,x=z.end.parent;return!((Z(L,w)||Z(x,w))&&L!==x)}(r.schema,u.selection)}}function te(g,r,u){const w=r.createElement("softBreak");g.insertContent(w,u),r.setSelection(w,"after")}function Z(g,r){return!g.is("rootElement")&&(r.isLimit(g)||Z(g.parent,r))}class h extends d.Sy{static get pluginName(){return"ShiftEnter"}init(){const r=this.editor,u=r.model.schema,w=r.conversion,_=r.editing.view,T=_.document;u.register("softBreak",{allowWhere:"$text",isInline:!0}),w.for("upcast").elementToElement({model:"softBreak",view:"br"}),w.for("downcast").elementToElement({model:"softBreak",view:(z,{writer:L})=>L.createEmptyElement("br")}),_.addObserver(pe),r.commands.add("shiftEnter",new X(r)),this.listenTo(T,"enter",(z,L)=>{T.isComposing||L.preventDefault(),L.isSoft&&(r.execute("shiftEnter"),_.scrollToTheSelection())},{priority:"low"})}}},"./packages/ckeditor5-typing/src/index.ts":(f,v,a)=>{"use strict";a.d(v,{HG:()=>_,II:()=>ge,cL:()=>nt,uL:()=>L,mh:()=>x,Mq:()=>T,VD:()=>yt,Up:()=>z,Im:()=>Bt});var d=a("./packages/ckeditor5-core/src/index.ts"),A=a("./packages/ckeditor5-utils/src/index.ts");class H{constructor(Ae,Ke=20){this._batch=null,this.model=Ae,this._size=0,this.limit=Ke,this._isLocked=!1,this._changeCallback=(kt,It)=>{It.isLocal&&It.isUndoable&&It!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(Ae){this._size+=Ae,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(Ae=!1){this.isLocked&&!Ae||(this._batch=null,this._size=0)}}class I extends d.mY{constructor(Ae,Ke){super(Ae),this._buffer=new H(Ae.model,Ke)}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(Ae={}){const Ke=this.editor.model,kt=Ke.document,It=Ae.text||"",Yt=It.length;let zt=kt.selection;Ae.selection?zt=Ae.selection:Ae.range&&(zt=Ke.createSelection(Ae.range));const ot=Ae.resultRange;Ke.enqueueChange(this._buffer.batch,Dt=>{this._buffer.lock(),Ke.deleteContent(zt),It&&Ke.insertContent(Dt.createText(It,kt.selection.getAttributes()),zt),ot?Dt.setSelection(ot):zt.is("documentSelection")||Dt.setSelection(zt),this._buffer.unlock(),this._buffer.input(Yt)})}}var C=a("./packages/ckeditor5-engine/src/index.ts");const me=["insertText","insertReplacementText"];class pe extends C.Qj{constructor(Ae){super(Ae),A.OB.isAndroid&&me.push("insertCompositionText");const Ke=Ae.document;Ke.on("beforeinput",(kt,It)=>{if(!this.isEnabled)return;const{data:Yt,targetRanges:zt,inputType:ot,domEvent:Dt}=It;if(!me.includes(ot))return;const wt=new A.M3(Ke,"insertText");Ke.fire(wt,new C.dK(Ae,Dt,{text:Yt,selection:Ae.createSelection(zt)})),wt.stop.called&&kt.stop()}),Ke.on("compositionend",(kt,{data:It,domEvent:Yt})=>{this.isEnabled&&!A.OB.isAndroid&&It&&Ke.fire("insertText",new C.dK(Ae,Yt,{text:It,selection:Ke.selection}))},{priority:"lowest"})}observe(){}}class ge extends d.Sy{static get pluginName(){return"Input"}init(){const Ae=this.editor,Ke=Ae.model,kt=Ae.editing.view,It=Ke.document.selection;kt.addObserver(pe);const Yt=new I(Ae,Ae.config.get("typing.undoStep")||20);Ae.commands.add("insertText",Yt),Ae.commands.add("input",Yt),this.listenTo(kt.document,"insertText",(zt,ot)=>{kt.document.isComposing||ot.preventDefault();const{text:Dt,selection:wt,resultRange:ni}=ot,di=Array.from(wt.getRanges()).map(fe=>Ae.editing.mapper.toModelRange(fe));let xi=Dt;if(A.OB.isAndroid){const fe=Array.from(di[0].getItems()).reduce((je,Ze)=>je+(Ze.is("$textProxy")?Ze.data:""),"");fe&&(fe.length<=xi.length?xi.startsWith(fe)&&(xi=xi.substring(fe.length),di[0].start=di[0].start.getShiftedBy(fe.length)):fe.startsWith(xi)&&(di[0].start=di[0].start.getShiftedBy(xi.length),xi=""))}const bt={text:xi,selection:Ke.createSelection(di)};ni&&(bt.resultRange=Ae.editing.mapper.toModelRange(ni)),Ae.execute("insertText",bt)}),A.OB.isAndroid?this.listenTo(kt.document,"keydown",(zt,ot)=>{!It.isCollapsed&&ot.keyCode==229&&kt.document.isComposing&&X(Ke,Yt)}):this.listenTo(kt.document,"compositionstart",()=>{It.isCollapsed||X(Ke,Yt)})}}function X(ye,Ae){if(!Ae.isEnabled)return;const Ke=Ae.buffer;Ke.lock(),ye.enqueueChange(Ke.batch,()=>{ye.deleteContent(ye.document.selection)}),Ke.unlock()}class te extends d.mY{constructor(Ae,Ke){super(Ae),this.direction=Ke,this._buffer=new H(Ae.model,Ae.config.get("typing.undoStep"))}get buffer(){return this._buffer}execute(Ae={}){const Ke=this.editor.model,kt=Ke.document;Ke.enqueueChange(this._buffer.batch,It=>{this._buffer.lock();const Yt=It.createSelection(Ae.selection||kt.selection),zt=Ae.sequence||1,ot=Yt.isCollapsed;if(Yt.isCollapsed&&Ke.modifySelection(Yt,{direction:this.direction,unit:Ae.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(zt))return void this._replaceEntireContentWithParagraph(It);if(this._shouldReplaceFirstBlockWithParagraph(Yt,zt))return void this.editor.execute("paragraph",{selection:Yt});if(Yt.isCollapsed)return;let Dt=0;Yt.getFirstRange().getMinimalFlatRanges().forEach(wt=>{Dt+=(0,A.QX)(wt.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),Ke.deleteContent(Yt,{doNotResetEntireContent:ot,direction:this.direction}),this._buffer.input(Dt),It.setSelection(Yt),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(Ae){if(Ae>1)return!1;const Ke=this.editor.model,kt=Ke.document.selection,It=Ke.schema.getLimitElement(kt);if(!(kt.isCollapsed&&kt.containsEntireContent(It))||!Ke.schema.checkChild(It,"paragraph"))return!1;const Yt=It.getChild(0);return!Yt||!Yt.is("element","paragraph")}_replaceEntireContentWithParagraph(Ae){const Ke=this.editor.model,kt=Ke.document.selection,It=Ke.schema.getLimitElement(kt),Yt=Ae.createElement("paragraph");Ae.remove(Ae.createRangeIn(It)),Ae.insert(Yt,It),Ae.setSelection(Yt,0)}_shouldReplaceFirstBlockWithParagraph(Ae,Ke){const kt=this.editor.model;if(Ke>1||this.direction!="backward"||!Ae.isCollapsed)return!1;const It=Ae.getFirstPosition(),Yt=kt.schema.getLimitElement(It),zt=Yt.getChild(0);return It.parent==zt&&!!Ae.containsEntireContent(zt)&&!!kt.schema.checkChild(Yt,"paragraph")&&zt.name!="paragraph"}}const Z="word",h="selection",g="backward",r="forward",u={deleteContent:{unit:h,direction:g},deleteContentBackward:{unit:"codePoint",direction:g},deleteWordBackward:{unit:Z,direction:g},deleteHardLineBackward:{unit:h,direction:g},deleteSoftLineBackward:{unit:h,direction:g},deleteContentForward:{unit:"character",direction:r},deleteWordForward:{unit:Z,direction:r},deleteHardLineForward:{unit:h,direction:r},deleteSoftLineForward:{unit:h,direction:r}};class w extends C.Qj{constructor(Ae){super(Ae);const Ke=Ae.document;let kt=0;Ke.on("keydown",()=>{kt++}),Ke.on("keyup",()=>{kt=0}),Ke.on("beforeinput",(It,Yt)=>{if(!this.isEnabled)return;const{targetRanges:zt,domEvent:ot,inputType:Dt}=Yt,wt=u[Dt];if(!wt)return;const ni={direction:wt.direction,unit:wt.unit,sequence:kt};ni.unit==h&&(ni.selectionToRemove=Ae.createSelection(zt[0])),A.OB.isAndroid&&Dt==="deleteContentBackward"&&(ni.sequence=1,zt.length!=1||zt[0].start.parent==zt[0].end.parent&&zt[0].start.offset+1==zt[0].end.offset||(ni.unit=h,ni.selectionToRemove=Ae.createSelection(zt)));const di=new C.r7(Ke,"delete",zt[0]);Ke.fire(di,new C.dK(Ae,ot,ni)),di.stop.called&&It.stop()}),A.OB.isBlink&&function(It){const Yt=It.view,zt=Yt.document;let ot=null,Dt=!1;function wt(di){return di==A.Do.backspace||di==A.Do.delete}function ni(di){return di==A.Do.backspace?g:r}zt.on("keydown",(di,{keyCode:xi})=>{ot=xi,Dt=!1}),zt.on("keyup",(di,{keyCode:xi,domEvent:bt})=>{const fe=zt.selection,je=It.isEnabled&&xi==ot&&wt(xi)&&!fe.isCollapsed&&!Dt;if(ot=null,je){const Ze=fe.getFirstRange(),pt=new C.r7(zt,"delete",Ze),Ct={unit:h,direction:ni(xi),selectionToRemove:fe};zt.fire(pt,new C.dK(Yt,bt,Ct))}}),zt.on("beforeinput",(di,{inputType:xi})=>{const bt=u[xi];wt(ot)&&bt&&bt.direction==ni(ot)&&(Dt=!0)},{priority:"high"}),zt.on("beforeinput",(di,{inputType:xi,data:bt})=>{ot==A.Do.delete&&xi=="insertText"&&bt=="\x7F"&&di.stop()},{priority:"high"})}(this)}observe(){}}class _ extends d.Sy{static get pluginName(){return"Delete"}init(){const Ae=this.editor,Ke=Ae.editing.view,kt=Ke.document,It=Ae.model.document;Ke.addObserver(w),this._undoOnBackspace=!1;const Yt=new te(Ae,"forward");Ae.commands.add("deleteForward",Yt),Ae.commands.add("forwardDelete",Yt),Ae.commands.add("delete",new te(Ae,"backward")),this.listenTo(kt,"delete",(zt,ot)=>{kt.isComposing||ot.preventDefault();const{direction:Dt,sequence:wt,selectionToRemove:ni,unit:di}=ot,xi=Dt==="forward"?"deleteForward":"delete",bt={sequence:wt};if(di=="selection"){const fe=Array.from(ni.getRanges()).map(je=>Ae.editing.mapper.toModelRange(je));bt.selection=Ae.model.createSelection(fe)}else bt.unit=di;Ae.execute(xi,bt),Ke.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(kt,"delete",(zt,ot)=>{this._undoOnBackspace&&ot.direction=="backward"&&ot.sequence==1&&ot.unit=="codePoint"&&(this._undoOnBackspace=!1,Ae.execute("undo"),ot.preventDefault(),zt.stop())},{context:"$capture"}),this.listenTo(It,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class T extends d.Sy{static get requires(){return[ge,_]}static get pluginName(){return"Typing"}}function z(ye,Ae){let Ke=ye.start;return{text:Array.from(ye.getItems()).reduce((kt,It)=>It.is("$text")||It.is("$textProxy")?kt+It.data:(Ke=Ae.createPositionAfter(It),""),""),range:Ae.createRange(Ke,ye.end)}}class L extends(0,A.Re)(){constructor(Ae,Ke){super(),this.model=Ae,this.testCallback=Ke,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(Ae.document.selection),this.stopListening(Ae.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const Ae=this.model.document;this.listenTo(Ae.selection,"change:range",(Ke,{directChange:kt})=>{kt&&(Ae.selection.isCollapsed?this._evaluateTextBeforeSelection("selection"):this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1))}),this.listenTo(Ae,"change:data",(Ke,kt)=>{!kt.isUndo&&kt.isLocal&&this._evaluateTextBeforeSelection("data",{batch:kt})})}_evaluateTextBeforeSelection(Ae,Ke={}){const kt=this.model,It=kt.document.selection,Yt=kt.createRange(kt.createPositionAt(It.focus.parent,0),It.focus),{text:zt,range:ot}=z(Yt,kt),Dt=this.testCallback(zt);if(!Dt&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!Dt,Dt){const wt=Object.assign(Ke,{text:zt,range:ot});typeof Dt=="object"&&Object.assign(wt,Dt),this.fire(`matched:${Ae}`,wt)}}}class x extends d.Sy{static get pluginName(){return"TwoStepCaretMovement"}constructor(Ae){super(Ae),this.attributes=new Set,this._overrideUid=null}init(){const Ae=this.editor,Ke=Ae.model,kt=Ae.editing.view,It=Ae.locale,Yt=Ke.document.selection;this.listenTo(kt.document,"arrowKey",(zt,ot)=>{if(!Yt.isCollapsed||ot.shiftKey||ot.altKey||ot.ctrlKey)return;const Dt=ot.keyCode==A.Do.arrowright,wt=ot.keyCode==A.Do.arrowleft;if(!Dt&&!wt)return;const ni=It.contentLanguageDirection;let di=!1;di=ni==="ltr"&&Dt||ni==="rtl"&&wt?this._handleForwardMovement(ot):this._handleBackwardMovement(ot),di===!0&&zt.stop()},{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(Yt,"change:range",(zt,ot)=>{this._isNextGravityRestorationSkipped?this._isNextGravityRestorationSkipped=!1:this._isGravityOverridden&&(!ot.directChange&&q(Yt.getFirstPosition(),this.attributes)||this._restoreGravity())})}registerAttribute(Ae){this.attributes.add(Ae)}_handleForwardMovement(Ae){const Ke=this.attributes,kt=this.editor.model.document.selection,It=kt.getFirstPosition();return!this._isGravityOverridden&&(!It.isAtStart||!c(kt,Ke))&&!!q(It,Ke)&&(W(Ae),this._overrideGravity(),!0)}_handleBackwardMovement(Ae){const Ke=this.attributes,kt=this.editor.model,It=kt.document.selection,Yt=It.getFirstPosition();return this._isGravityOverridden?(W(Ae),this._restoreGravity(),D(kt,Ke,Yt),!0):Yt.isAtStart?!!c(It,Ke)&&(W(Ae),D(kt,Ke,Yt),!0):!!function(zt,ot){const Dt=zt.getShiftedBy(-1);return q(Dt,ot)}(Yt,Ke)&&(Yt.isAtEnd&&!c(It,Ke)&&q(Yt,Ke)?(W(Ae),D(kt,Ke,Yt),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1))}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(Ae=>Ae.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(Ae=>{Ae.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function c(ye,Ae){for(const Ke of Ae)if(ye.hasAttribute(Ke))return!0;return!1}function D(ye,Ae,Ke){const kt=Ke.nodeBefore;ye.change(It=>{kt?It.setSelectionAttribute(kt.getAttributes()):It.removeSelectionAttribute(Ae)})}function W(ye){ye.preventDefault()}function q(ye,Ae){const{nodeBefore:Ke,nodeAfter:kt}=ye;for(const It of Ae){const Yt=Ke?Ke.getAttribute(It):void 0;if((kt?kt.getAttribute(It):void 0)!==Yt)return!0}return!1}var ae=a("./node_modules/lodash-es/toString.js"),Ie=/[\\^$.*+?()[\]{}|]/g,Ve=RegExp(Ie.source);const _e=function(ye){return(ye=(0,ae.Z)(ye))&&Ve.test(ye)?ye.replace(Ie,"\\$&"):ye},Me={copyright:{from:"(c)",to:"\xA9"},registeredTrademark:{from:"(r)",to:"\xAE"},trademark:{from:"(tm)",to:"\u2122"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"\xBD",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"\u2153",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"\u2154",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"\xBC",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"\xBE",null]},lessThanOrEqual:{from:"<=",to:"\u2264"},greaterThanOrEqual:{from:">=",to:"\u2265"},notEqual:{from:"!=",to:"\u2260"},arrowLeft:{from:"<-",to:"\u2190"},arrowRight:{from:"->",to:"\u2192"},horizontalEllipsis:{from:"...",to:"\u2026"},enDash:{from:/(^| )(--)( )$/,to:[null,"\u2013",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"\u2014",null]},quotesPrimary:{from:jt('"'),to:[null,"\u201C",null,"\u201D"]},quotesSecondary:{from:jt("'"),to:[null,"\u2018",null,"\u2019"]},quotesPrimaryEnGb:{from:jt("'"),to:[null,"\u2018",null,"\u2019"]},quotesSecondaryEnGb:{from:jt('"'),to:[null,"\u201C",null,"\u201D"]},quotesPrimaryPl:{from:jt('"'),to:[null,"\u201E",null,"\u201D"]},quotesSecondaryPl:{from:jt("'"),to:[null,"\u201A",null,"\u2019"]}},Qe={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},dt=["symbols","mathematical","typography","quotes"];class nt extends d.Sy{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}constructor(Ae){super(Ae),Ae.config.define("typing",{transformations:{include:dt}})}init(){const Ae=this.editor.model.document.selection;Ae.on("change:range",()=>{this.isEnabled=!Ae.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const Ae=this.editor,Ke=Ae.model,kt=Ae.plugins.get("Delete"),It=function(zt){const ot=zt.extra||[],Dt=zt.remove||[],wt=ni=>!Dt.includes(ni);return function(ni){const di=new Set;for(const xi of ni)if(typeof xi=="string"&&Qe[xi])for(const bt of Qe[xi])di.add(bt);else di.add(xi);return Array.from(di)}(zt.include.concat(ot).filter(wt)).filter(wt).map(ni=>typeof ni=="string"&&Me[ni]?Me[ni]:ni).filter(ni=>typeof ni=="object").map(ni=>({from:qe(ni.from),to:et(ni.to)}))}(Ae.config.get("typing.transformations")),Yt=new L(Ae.model,zt=>{for(const ot of It)if(ot.from.test(zt))return{normalizedTransformation:ot}});Yt.on("matched:data",(zt,ot)=>{if(!ot.batch.isTyping)return;const{from:Dt,to:wt}=ot.normalizedTransformation,ni=Dt.exec(ot.text),di=wt(ni.slice(1)),xi=ot.range;let bt=ni.index;Ke.enqueueChange(fe=>{for(let je=1;je<ni.length;je++){const Ze=ni[je],pt=di[je-1];if(pt==null){bt+=Ze.length;continue}const Ct=xi.start.getShiftedBy(bt),St=Ke.createRange(Ct,Ct.getShiftedBy(Ze.length)),Xt=Nt(Ct);Ke.insertContent(fe.createText(pt,Xt),St),bt+=pt.length}Ke.enqueueChange(()=>{kt.requestUndoOnBackspace()})})}),Yt.bind("isEnabled").to(this)}}function qe(ye){return typeof ye=="string"?new RegExp(`(${_e(ye)})$`):ye}function et(ye){return typeof ye=="string"?()=>[ye]:ye instanceof Array?()=>ye:ye}function Nt(ye){return(ye.textNode?ye.textNode:ye.nodeAfter).getAttributes()}function jt(ye){return new RegExp(`(^|\\s)(${ye})([^${ye}]*)(${ye})$`)}function yt(ye,Ae,Ke,kt){return kt.createRange(tt(ye,Ae,Ke,!0,kt),tt(ye,Ae,Ke,!1,kt))}function tt(ye,Ae,Ke,kt,It){let Yt=ye.textNode||(kt?ye.nodeBefore:ye.nodeAfter),zt=null;for(;Yt&&Yt.getAttribute(Ae)==Ke;)zt=Yt,Yt=kt?Yt.previousSibling:Yt.nextSibling;return zt?It.createPositionAt(zt,kt?"before":"after"):ye}function Bt(ye,Ae,Ke,kt){const It=ye.editing.view,Yt=new Set;It.document.registerPostFixer(zt=>{const ot=ye.model.document.selection;let Dt=!1;if(ot.hasAttribute(Ae)){const wt=yt(ot.getFirstPosition(),Ae,ot.getAttribute(Ae),ye.model),ni=ye.editing.mapper.toViewRange(wt);for(const di of ni.getItems())di.is("element",Ke)&&!di.hasClass(kt)&&(zt.addClass(kt,di),Yt.add(di),Dt=!0)}return Dt}),ye.conversion.for("editingDowncast").add(zt=>{function ot(){It.change(Dt=>{for(const wt of Yt.values())Dt.removeClass(kt,wt),Yt.delete(wt)})}zt.on("insert",ot,{priority:"highest"}),zt.on("remove",ot,{priority:"highest"}),zt.on("attribute",ot,{priority:"highest"}),zt.on("selection",ot,{priority:"highest"})})}},"./packages/ckeditor5-ui/src/index.ts":(f,v,a)=>{"use strict";function d({emitter:Pe,activator:k,callback:O,contextElements:he}){Pe.listenTo(document,"mousedown",(Se,ht)=>{if(!k())return;const ct=typeof ht.composedPath=="function"?ht.composedPath():[],st=typeof he=="function"?he():he;for(const qt of st)if(qt.contains(ht.target)||ct.includes(qt))return;O()})}function A(Pe){const k=Pe;k.set("_isCssTransitionsDisabled",!1),k.disableCssTransitions=()=>{k._isCssTransitionsDisabled=!0},k.enableCssTransitions=()=>{k._isCssTransitionsDisabled=!1},k.extendTemplate({attributes:{class:[k.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}function H({view:Pe}){Pe.listenTo(Pe.element,"submit",(k,O)=>{O.preventDefault(),Pe.fire("submit")},{useCapture:!0})}function I({keystrokeHandler:Pe,focusTracker:k,gridItems:O,numberOfColumns:he,uiLanguageDirection:Se}){const ht=typeof he=="number"?()=>he:he;function ct(Mi){return Gi=>{const mn=O.find(uo=>uo.element===k.focusedElement),eo=O.getIndex(mn),to=Mi(eo,O);O.get(to).focus(),Gi.stopPropagation(),Gi.preventDefault()}}function st(Mi,Gi){return Mi===Gi-1?0:Mi+1}function qt(Mi,Gi){return Mi===0?Gi-1:Mi-1}Pe.set("arrowright",ct((Mi,Gi)=>Se==="rtl"?qt(Mi,Gi.length):st(Mi,Gi.length))),Pe.set("arrowleft",ct((Mi,Gi)=>Se==="rtl"?st(Mi,Gi.length):qt(Mi,Gi.length))),Pe.set("arrowup",ct((Mi,Gi)=>{let mn=Mi-ht();return mn<0&&(mn=Mi+ht()*Math.floor(Gi.length/ht()),mn>Gi.length-1&&(mn-=ht())),mn})),Pe.set("arrowdown",ct((Mi,Gi)=>{let mn=Mi+ht();return mn>Gi.length-1&&(mn=Mi%ht()),mn}))}a.d(v,{no:()=>Ui,Jf:()=>ei,ee:()=>bn,BK:()=>et,py:()=>Le,r5:()=>ye,J6:()=>di,_9:()=>ot,_Y:()=>xi,WB:()=>ze,J0:()=>Ct,_n:()=>Ze,S8:()=>rt,fF:()=>mt,I0:()=>bi,Gp:()=>Rt,mO:()=>yt,VY:()=>Fi,r1:()=>Je,Xs:()=>hi,pq:()=>Ci,Em:()=>li,Dn:()=>Te,KP:()=>Cn,dn:()=>V,Bv:()=>ke,Hn:()=>Be,P_:()=>Dn,Rm:()=>Zt,lp:()=>vt,BM:()=>kt,YS:()=>r,$y:()=>Ti,jB:()=>nn,gE:()=>ve,G7:()=>Z,vX:()=>me,IJ:()=>I,Pm:()=>Ge,up:()=>at,eC:()=>d,t9:()=>$e,FH:()=>In,sh:()=>Tn,R:()=>fn,Mh:()=>ci,k6:()=>It,fe:()=>A,S1:()=>Yt,jY:()=>zt,iw:()=>Ei,GI:()=>H});var C=a("./packages/ckeditor5-utils/src/index.ts");class me extends C.FE{constructor(k=[]){super(k,{idProperty:"viewUid"}),this.on("add",(O,he,Se)=>{this._renderViewIntoCollectionParent(he,Se)}),this.on("remove",(O,he)=>{he.element&&this._parentElement&&he.element.remove()}),this._parentElement=null}destroy(){this.map(k=>k.destroy())}setParent(k){this._parentElement=k;for(const O of this)this._renderViewIntoCollectionParent(O)}delegate(...k){if(!k.length||!k.every(O=>typeof O=="string"))throw new C.Bb("ui-viewcollection-delegate-wrong-events",this);return{to:O=>{for(const he of this)for(const Se of k)he.delegate(Se).to(O);this.on("add",(he,Se)=>{for(const ht of k)Se.delegate(ht).to(O)}),this.on("remove",(he,Se)=>{for(const ht of k)Se.stopDelegating(ht,O)})}}}_renderViewIntoCollectionParent(k,O){k.isRendered||k.render(),k.element&&this._parentElement&&this._parentElement.insertBefore(k.element,this._parentElement.children[O])}}var pe=a("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),ge=a.n(pe),X=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/globals/globals.css"),te={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(X.Z,te),X.Z.locals;class Z extends(0,C.Xu)((0,C.Re)()){constructor(k){super(),this.element=null,this.isRendered=!1,this.locale=k,this.t=k&&k.t,this._viewCollections=new C.FE,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(O,he)=>{he.locale=k,he.t=k&&k.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=r.bind(this,this)}createCollection(k){const O=new me(k);return this._viewCollections.add(O),O}registerChild(k){(0,C.TW)(k)||(k=[k]);for(const O of k)this._unboundChildren.add(O)}deregisterChild(k){(0,C.TW)(k)||(k=[k]);for(const O of k)this._unboundChildren.remove(O)}setTemplate(k){this.template=new r(k)}extendTemplate(k){r.extend(this.template,k)}render(){if(this.isRendered)throw new C.Bb("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(k=>k.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}var h=a("./node_modules/lodash-es/cloneDeepWith.js"),g=a("./node_modules/lodash-es/isObject.js");class r extends(0,C.ln)(){constructor(k){super(),Object.assign(this,W(D(k))),this._isRendered=!1,this._revertData=null}render(){const k=this._renderNode({intoFragment:!0});return this._isRendered=!0,k}apply(k){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:k,intoFragment:!1,isApplying:!0,revertData:this._revertData}),k}revert(k){if(!this._revertData)throw new C.Bb("ui-template-revert-not-applied",[this,k]);this._revertTemplateFromNode(k,this._revertData)}*getViews(){yield*function*k(O){if(O.children)for(const he of O.children)Me(he)?yield he:Qe(he)&&(yield*k(he))}(this)}static bind(k,O){return{to:(he,Se)=>new w({eventNameOrFunction:he,attribute:he,observable:k,emitter:O,callback:Se}),if:(he,Se,ht)=>new _({observable:k,emitter:O,attribute:he,valueIfTrue:Se,callback:ht})}}static extend(k,O){if(k._isRendered)throw new C.Bb("template-extend-render",[this,k]);Ve(k,W(D(O)))}_renderNode(k){let O;if(O=k.node?this.tag&&this.text:this.tag?this.text:!this.text,O)throw new C.Bb("ui-template-wrong-syntax",this);return this.text?this._renderText(k):this._renderElement(k)}_renderElement(k){let O=k.node;return O||(O=k.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(k),this._renderElementChildren(k),this._setUpListeners(k),O}_renderText(k){let O=k.node;return O?k.revertData.text=O.textContent:O=k.node=document.createTextNode(""),T(this.text)?this._bindToObservable({schema:this.text,updater:L(O),data:k}):O.textContent=this.text.join(""),O}_renderAttributes(k){if(!this.attributes)return;const O=k.node,he=k.revertData;for(const Se in this.attributes){const ht=O.getAttribute(Se),ct=this.attributes[Se];he&&(he.attributes[Se]=ht);const st=nt(ct)?ct[0].ns:null;if(T(ct)){const qt=nt(ct)?ct[0].value:ct;he&&qe(Se)&&qt.unshift(ht),this._bindToObservable({schema:qt,updater:x(O,Se,st),data:k})}else if(Se=="style"&&typeof ct[0]!="string")this._renderStyleAttribute(ct[0],k);else{he&&ht&&qe(Se)&&ct.unshift(ht);const qt=ct.map(Mi=>Mi&&Mi.value||Mi).reduce((Mi,Gi)=>Mi.concat(Gi),[]).reduce(ae,"");_e(qt)||O.setAttributeNS(st,Se,qt)}}}_renderStyleAttribute(k,O){const he=O.node;for(const Se in k){const ht=k[Se];T(ht)?this._bindToObservable({schema:[ht],updater:c(he,Se),data:O}):he.style[Se]=ht}}_renderElementChildren(k){const O=k.node,he=k.intoFragment?document.createDocumentFragment():O,Se=k.isApplying;let ht=0;for(const ct of this.children)if(dt(ct)){if(!Se){ct.setParent(O);for(const st of ct)he.appendChild(st.element)}}else if(Me(ct))Se||(ct.isRendered||ct.render(),he.appendChild(ct.element));else if((0,C.UG)(ct))he.appendChild(ct);else if(Se){const st={children:[],bindings:[],attributes:{}};k.revertData.children.push(st),ct._renderNode({intoFragment:!1,node:he.childNodes[ht++],isApplying:!0,revertData:st})}else he.appendChild(ct.render());k.intoFragment&&O.appendChild(he)}_setUpListeners(k){if(this.eventListeners)for(const O in this.eventListeners){const he=this.eventListeners[O].map(Se=>{const[ht,ct]=O.split("@");return Se.activateDomEventListener(ht,ct,k)});k.revertData&&k.revertData.bindings.push(he)}}_bindToObservable({schema:k,updater:O,data:he}){const Se=he.revertData;z(k,O,he);const ht=k.filter(ct=>!_e(ct)).filter(ct=>ct.observable).map(ct=>ct.activateAttributeListener(k,O,he));Se&&Se.bindings.push(ht)}_revertTemplateFromNode(k,O){for(const Se of O.bindings)for(const ht of Se)ht();if(O.text)return void(k.textContent=O.text);const he=k;for(const Se in O.attributes){const ht=O.attributes[Se];ht===null?he.removeAttribute(Se):he.setAttribute(Se,ht)}for(let Se=0;Se<O.children.length;++Se)this._revertTemplateFromNode(he.childNodes[Se],O.children[Se])}}class u{constructor(k){this.attribute=k.attribute,this.observable=k.observable,this.emitter=k.emitter,this.callback=k.callback}getValue(k){const O=this.observable[this.attribute];return this.callback?this.callback(O,k):O}activateAttributeListener(k,O,he){const Se=()=>z(k,O,he);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,Se),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,Se)}}}class w extends u{constructor(k){super(k),this.eventNameOrFunction=k.eventNameOrFunction}activateDomEventListener(k,O,he){const Se=(ht,ct)=>{O&&!ct.target.matches(O)||(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(ct):this.observable.fire(this.eventNameOrFunction,ct))};return this.emitter.listenTo(he.node,k,Se),()=>{this.emitter.stopListening(he.node,k,Se)}}}class _ extends u{constructor(k){super(k),this.valueIfTrue=k.valueIfTrue}getValue(k){return!_e(super.getValue(k))&&(this.valueIfTrue||!0)}}function T(Pe){return!!Pe&&(Pe.value&&(Pe=Pe.value),Array.isArray(Pe)?Pe.some(T):Pe instanceof u)}function z(Pe,k,{node:O}){const he=function(ht,ct){return ht.map(st=>st instanceof u?st.getValue(ct):st)}(Pe,O);let Se;Se=Pe.length==1&&Pe[0]instanceof _?he[0]:he.reduce(ae,""),_e(Se)?k.remove():k.set(Se)}function L(Pe){return{set(k){Pe.textContent=k},remove(){Pe.textContent=""}}}function x(Pe,k,O){return{set(he){Pe.setAttributeNS(O,k,he)},remove(){Pe.removeAttributeNS(O,k)}}}function c(Pe,k){return{set(O){Pe.style[k]=O},remove(){Pe.style[k]=null}}}function D(Pe){return(0,h.Z)(Pe,k=>{if(k&&(k instanceof u||Qe(k)||Me(k)||dt(k)))return k})}function W(Pe){if(typeof Pe=="string"?Pe=function(k){return{text:[k]}}(Pe):Pe.text&&function(k){k.text=(0,C.qo)(k.text)}(Pe),Pe.on&&(Pe.eventListeners=function(k){for(const O in k)q(k,O);return k}(Pe.on),delete Pe.on),!Pe.text){Pe.attributes&&function(O){for(const he in O)O[he].value&&(O[he].value=(0,C.qo)(O[he].value)),q(O,he)}(Pe.attributes);const k=[];if(Pe.children)if(dt(Pe.children))k.push(Pe.children);else for(const O of Pe.children)Qe(O)||Me(O)||(0,C.UG)(O)?k.push(O):k.push(new r(O));Pe.children=k}return Pe}function q(Pe,k){Pe[k]=(0,C.qo)(Pe[k])}function ae(Pe,k){return _e(k)?Pe:_e(Pe)?k:`${Pe} ${k}`}function Ie(Pe,k){for(const O in k)Pe[O]?Pe[O].push(...k[O]):Pe[O]=k[O]}function Ve(Pe,k){if(k.attributes&&(Pe.attributes||(Pe.attributes={}),Ie(Pe.attributes,k.attributes)),k.eventListeners&&(Pe.eventListeners||(Pe.eventListeners={}),Ie(Pe.eventListeners,k.eventListeners)),k.text&&Pe.text.push(...k.text),k.children&&k.children.length){if(Pe.children.length!=k.children.length)throw new C.Bb("ui-template-extend-children-mismatch",Pe);let O=0;for(const he of k.children)Ve(Pe.children[O++],he)}}function _e(Pe){return!Pe&&Pe!==0}function Me(Pe){return Pe instanceof Z}function Qe(Pe){return Pe instanceof r}function dt(Pe){return Pe instanceof me}function nt(Pe){return(0,g.Z)(Pe[0])&&Pe[0].ns}function qe(Pe){return Pe=="class"||Pe=="style"}class et extends me{constructor(k,O=[]){super(O),this.locale=k}attachToDom(){this._bodyCollectionContainer=new r({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let k=document.querySelector(".ck-body-wrapper");k||(k=(0,C.az)(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(k)),k.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const k=document.querySelector(".ck-body-wrapper");k&&k.childElementCount==0&&k.remove()}}var Nt=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/icon/icon.css"),jt={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(Nt.Z,jt),Nt.Z.locals;class yt extends Z{constructor(){super();const k=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon","ck-reset_all-excluded",k.if("isColorInherited","ck-icon_inherit-color")],viewBox:k.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const k=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),O=k.getAttribute("viewBox");O&&(this.viewBox=O);for(const{name:he,value:Se}of Array.from(k.attributes))yt.presentationalAttributeNames.includes(he)&&this.element.setAttribute(he,Se);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;k.childNodes.length>0;)this.element.appendChild(k.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(k=>{k.style.fill=this.fillColor})}}yt.presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];var tt=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/button/button.css"),Bt={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(tt.Z,Bt),tt.Z.locals;class ye extends Z{constructor(k){super(k);const O=this.bindTemplate,he=(0,C.hQ)();this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._createLabelView(he),this.iconView=new yt,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const Se={tag:"button",attributes:{class:["ck","ck-button",O.to("class"),O.if("isEnabled","ck-disabled",ht=>!ht),O.if("isVisible","ck-hidden",ht=>!ht),O.to("isOn",ht=>ht?"ck-on":"ck-off"),O.if("withText","ck-button_with-text"),O.if("withKeystroke","ck-button_with-keystroke")],type:O.to("type",ht=>ht||"button"),tabindex:O.to("tabindex"),"aria-labelledby":`ck-editor__aria-label_${he}`,"aria-disabled":O.if("isEnabled",!0,ht=>!ht),"aria-pressed":O.to("isOn",ht=>!!this.isToggleable&&String(!!ht)),"data-cke-tooltip-text":O.to("_tooltipString"),"data-cke-tooltip-position":O.to("tooltipPosition")},children:this.children,on:{click:O.to(ht=>{this.isEnabled?this.fire("execute"):ht.preventDefault()})}};C.OB.isSafari&&(Se.on.mousedown=O.to(ht=>{this.focus(),ht.preventDefault()})),this.setTemplate(Se)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}_createLabelView(k){const O=new Z,he=this.bindTemplate;return O.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:he.to("labelStyle"),id:`ck-editor__aria-label_${k}`},children:[{text:this.bindTemplate.to("label")}]}),O}_createKeystrokeView(){const k=new Z;return k.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",O=>(0,C.XU)(O))}]}),k}_getTooltipString(k,O,he){return k?typeof k=="string"?k:(he&&(he=(0,C.XU)(he)),k instanceof Function?k(O,he):`${O}${he?` (${he})`:""}`):""}}var Ae=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/button/switchbutton.css"),Ke={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(Ae.Z,Ke),Ae.Z.locals;class kt extends ye{constructor(k){super(k),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const k=new Z;return k.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),k}}function It(Pe,k){const O=Pe.t,he={Black:O("Black"),"Dim grey":O("Dim grey"),Grey:O("Grey"),"Light grey":O("Light grey"),White:O("White"),Red:O("Red"),Orange:O("Orange"),Yellow:O("Yellow"),"Light green":O("Light green"),Green:O("Green"),Aquamarine:O("Aquamarine"),Turquoise:O("Turquoise"),"Light blue":O("Light blue"),Blue:O("Blue"),Purple:O("Purple")};return k.map(Se=>{const ht=he[Se.label];return ht&&ht!=Se.label&&(Se.label=ht),Se})}function Yt(Pe){return Pe.map(zt).filter(k=>!!k)}function zt(Pe){return typeof Pe=="string"?{model:Pe,label:Pe,hasBorder:!1,view:{name:"span",styles:{color:Pe}}}:{model:Pe.color,label:Pe.label||Pe.color,hasBorder:Pe.hasBorder!==void 0&&Pe.hasBorder,view:{name:"span",styles:{color:`${Pe.color}`}}}}class ot extends ye{constructor(k){super(k);const O=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',this.extendTemplate({attributes:{style:{backgroundColor:O.to("color")},class:["ck","ck-color-grid__tile",O.if("hasBorder","ck-color-table__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}var Dt=a("./packages/ckeditor5-utils/src/keystrokehandler.ts"),wt=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/colorgrid/colorgrid.css"),ni={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(wt.Z,ni),wt.Z.locals;class di extends Z{constructor(k,O){super(k);const he=O&&O.colorDefinitions||[];this.columns=O&&O.columns?O.columns:5;const Se={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new C.Rh,this.keystrokes=new Dt.Z,this.items.on("add",(ht,ct)=>{ct.isOn=ct.color===this.selectedColor}),he.forEach(ht=>{const ct=new ot;ct.set({color:ht.color,label:ht.label,tooltip:!0,hasBorder:ht.options.hasBorder}),ct.on("execute",()=>{this.fire("execute",{value:ht.color,hasBorder:ht.options.hasBorder,label:ht.label})}),this.items.add(ct)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:Se}}),this.on("change:selectedColor",(ht,ct,st)=>{for(const qt of this.items)qt.isOn=qt.color===st})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const k of this.items)this.focusTracker.add(k.element);this.items.on("add",(k,O)=>{this.focusTracker.add(O.element)}),this.items.on("remove",(k,O)=>{this.focusTracker.remove(O.element)}),this.keystrokes.listenTo(this.element),I({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}class xi{constructor(k){this.editor=k,this._components=new Map}*names(){for(const k of this._components.values())yield k.originalName}add(k,O){this._components.set(bt(k),{callback:O,originalName:k})}create(k){if(!this.has(k))throw new C.Bb("componentfactory-item-missing",this,{name:k});return this._components.get(bt(k)).callback(this.editor.locale)}has(k){return this._components.has(bt(k))}}function bt(Pe){return String(Pe).toLowerCase()}var fe=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/dropdown/dropdown.css"),je={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(fe.Z,je),fe.Z.locals;class Ze extends Z{constructor(k,O,he){super(k);const Se=this.bindTemplate;this.buttonView=O,this.panelView=he,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.keystrokes=new C.VD,this.focusTracker=new C.Rh,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",Se.to("class"),Se.if("isEnabled","ck-disabled",ht=>!ht)],id:Se.to("id"),"aria-describedby":Se.to("ariaDescribedById")},children:[O,he]}),O.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":Se.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",(O,he,Se)=>{Se&&(this.panelPosition==="auto"?this.panelView.position=Ze._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelView.position=this.panelPosition)}),this.keystrokes.listenTo(this.element);const k=(O,he)=>{this.isOpen&&(this.isOpen=!1,he())};this.keystrokes.set("arrowdown",(O,he)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,he())}),this.keystrokes.set("arrowright",(O,he)=>{this.isOpen&&he()}),this.keystrokes.set("arrowleft",k),this.keystrokes.set("esc",k)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:k,north:O,southEast:he,southWest:Se,northEast:ht,northWest:ct,southMiddleEast:st,southMiddleWest:qt,northMiddleEast:Mi,northMiddleWest:Gi}=Ze.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[he,Se,st,qt,k,ht,ct,Mi,Gi,O]:[Se,he,qt,st,k,ct,ht,Gi,Mi,O]}}Ze.defaultPanelPositions={south:(Pe,k)=>({top:Pe.bottom,left:Pe.left-(k.width-Pe.width)/2,name:"s"}),southEast:Pe=>({top:Pe.bottom,left:Pe.left,name:"se"}),southWest:(Pe,k)=>({top:Pe.bottom,left:Pe.left-k.width+Pe.width,name:"sw"}),southMiddleEast:(Pe,k)=>({top:Pe.bottom,left:Pe.left-(k.width-Pe.width)/4,name:"sme"}),southMiddleWest:(Pe,k)=>({top:Pe.bottom,left:Pe.left-3*(k.width-Pe.width)/4,name:"smw"}),north:(Pe,k)=>({top:Pe.top-k.height,left:Pe.left-(k.width-Pe.width)/2,name:"n"}),northEast:(Pe,k)=>({top:Pe.top-k.height,left:Pe.left,name:"ne"}),northWest:(Pe,k)=>({top:Pe.top-k.height,left:Pe.left-k.width+Pe.width,name:"nw"}),northMiddleEast:(Pe,k)=>({top:Pe.top-k.height,left:Pe.left-(k.width-Pe.width)/4,name:"nme"}),northMiddleWest:(Pe,k)=>({top:Pe.top-k.height,left:Pe.left-3*(k.width-Pe.width)/4,name:"nmw"})},Ze._getOptimalPosition=C.xZ;const pt='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class Ct extends ye{constructor(k){super(k),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",O=>String(O))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const k=new yt;return k.content=pt,k.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),k}}var St=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/dropdown/splitbutton.css"),Xt={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(St.Z,Xt),St.Z.locals;class Zt extends Z{constructor(k){super(k);const O=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(),this.arrowView=this._createArrowView(),this.keystrokes=new C.VD,this.focusTracker=new C.Rh,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",O.to("class"),O.if("isVisible","ck-hidden",he=>!he),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(k,O)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),O())}),this.keystrokes.set("arrowleft",(k,O)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),O())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(){const k=new ye;return k.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),k.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),k.delegate("execute").to(this),k}_createArrowView(){const k=new ye,O=k.bindTemplate;return k.icon=pt,k.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":O.to("isOn"),"aria-haspopup":!0,"aria-expanded":O.to("isOn",he=>String(he))}}),k.bind("isEnabled").to(this),k.bind("label").to(this),k.bind("tooltip").to(this),k.delegate("execute").to(this,"open"),k}}class oi extends Z{constructor(k){super(k);const O=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",O.to("position",he=>`ck-dropdown__panel_${he}`),O.if("isVisible","ck-dropdown__panel-visible")]},children:this.children,on:{selectstart:O.to(he=>he.preventDefault())}})}focus(){if(this.children.length){const k=this.children.first;typeof k.focus=="function"?k.focus():(0,C.KE)("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const k=this.children.last;typeof k.focusLast=="function"?k.focusLast():k.focus()}}}class bi{constructor(k){if(this.focusables=k.focusables,this.focusTracker=k.focusTracker,this.keystrokeHandler=k.keystrokeHandler,this.actions=k.actions,k.actions&&k.keystrokeHandler)for(const O in k.actions){let he=k.actions[O];typeof he=="string"&&(he=[he]);for(const Se of he)k.keystrokeHandler.set(Se,(ht,ct)=>{this[O](),ct()})}}get first(){return this.focusables.find(gi)||null}get last(){return this.focusables.filter(gi).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let k=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((O,he)=>{const Se=O.element===this.focusTracker.focusedElement;return Se&&(k=he),Se}),k)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(k){k&&k.focus()}_getFocusableItem(k){const O=this.current,he=this.focusables.length;if(!he)return null;if(O===null)return this[k===1?"first":"last"];let Se=(O+he+k)%he;do{const ht=this.focusables.get(Se);if(gi(ht))return ht;Se=(Se+he+k)%he}while(Se!==O);return null}}function gi(Pe){return!(!Pe.focus||!(0,C.pn)(Pe.element))}class Ti extends Z{constructor(k){super(k),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class Mt extends Z{constructor(k){super(k),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}function Ei(Pe){return Array.isArray(Pe)?{items:Pe,removeItems:[]}:Pe?Object.assign({items:[],removeItems:[]},Pe):{items:[],removeItems:[]}}var Ri=a("./packages/ckeditor5-core/src/index.ts"),Yi=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/toolbar/toolbar.css"),ji={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(Yi.Z,ji),Yi.Z.locals;const{threeVerticalDots:Pi}=Ri.ci,qi={alignLeft:Ri.ci.alignLeft,bold:Ri.ci.bold,importExport:Ri.ci.importExport,paragraph:Ri.ci.paragraph,plus:Ri.ci.plus,text:Ri.ci.text,threeVerticalDots:Ri.ci.threeVerticalDots};class nn extends Z{constructor(k,O){super(k);const he=this.bindTemplate,Se=this.t;this.options=O||{},this.set("ariaLabel",Se("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new C.Rh,this.keystrokes=new C.VD,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new Li(k),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const ht=k.uiLanguageDirection==="rtl";this._focusCycler=new bi({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[ht?"arrowright":"arrowleft","arrowup"],focusNext:[ht?"arrowleft":"arrowright","arrowdown"]}});const ct=["ck","ck-toolbar",he.to("class"),he.if("isCompact","ck-toolbar_compact")];var st;this.options.shouldGroupWhenFull&&this.options.isFloating&&ct.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:ct,role:"toolbar","aria-label":he.to("ariaLabel"),style:{maxWidth:he.to("maxWidth")}},children:this.children,on:{mousedown:(st=this,st.bindTemplate.to(qt=>{qt.target===st.element&&qt.preventDefault()}))}}),this._behavior=this.options.shouldGroupWhenFull?new pi(this):new dn(this)}render(){super.render();for(const k of this.items)this.focusTracker.add(k.element);this.items.on("add",(k,O)=>{this.focusTracker.add(O.element)}),this.items.on("remove",(k,O)=>{this.focusTracker.remove(O.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(k,O,he){this.items.addMany(this._buildItemsFromConfig(k,O,he))}_buildItemsFromConfig(k,O,he){const Se=Ei(k),ht=he||Se.removeItems;return this._cleanItemsConfiguration(Se.items,O,ht).map(ct=>(0,g.Z)(ct)?this._createNestedToolbarDropdown(ct,O,ht):ct==="|"?new Ti:ct==="-"?new Mt:O.create(ct)).filter(ct=>!!ct)}_cleanItemsConfiguration(k,O,he){const Se=k.filter((ht,ct,st)=>ht==="|"||he.indexOf(ht)===-1&&(ht==="-"?!this.options.shouldGroupWhenFull||((0,C.KE)("toolbarview-line-break-ignored-when-grouping-items",st),!1):!(!(0,g.Z)(ht)&&!O.has(ht))||((0,C.KE)("toolbarview-item-unavailable",{item:ht}),!1)));return this._cleanSeparatorsAndLineBreaks(Se)}_cleanSeparatorsAndLineBreaks(k){const O=ct=>ct!=="-"&&ct!=="|",he=k.length,Se=k.findIndex(O);if(Se===-1)return[];const ht=he-k.slice().reverse().findIndex(O);return k.slice(Se,ht).filter((ct,st,qt)=>O(ct)?!0:!(st>0&&qt[st-1]===ct))}_createNestedToolbarDropdown(k,O,he){let{label:Se,icon:ht,items:ct,tooltip:st=!0,withText:qt=!1}=k;if(ct=this._cleanItemsConfiguration(ct,O,he),!ct.length)return null;const Mi=$e(this.locale);return Se||(0,C.KE)("toolbarview-nested-toolbar-dropdown-missing-label",k),Mi.class="ck-toolbar__nested-toolbar-dropdown",Mi.buttonView.set({label:Se,tooltip:st,withText:!!qt}),ht!==!1?Mi.buttonView.icon=qi[ht]||ht||Pi:Mi.buttonView.withText=!0,at(Mi,()=>Mi.toolbarView._buildItemsFromConfig(ct,O,he)),Mi}}class Li extends Z{constructor(k){super(k),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class dn{constructor(k){const O=k.bindTemplate;k.set("isVertical",!1),k.itemsView.children.bindTo(k.items).using(he=>he),k.focusables.bindTo(k.items).using(he=>he),k.extendTemplate({attributes:{class:[O.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class pi{constructor(k){this.view=k,this.viewChildren=k.children,this.viewFocusables=k.focusables,this.viewItemsView=k.itemsView,this.viewFocusTracker=k.focusTracker,this.viewLocale=k.locale,this.ungroupedItems=k.createCollection(),this.groupedItems=k.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,k.itemsView.children.bindTo(this.ungroupedItems).using(O=>O),this.ungroupedItems.on("change",this._updateFocusCycleableItems.bind(this)),k.children.on("change",this._updateFocusCycleableItems.bind(this)),k.items.on("change",(O,he)=>{const Se=he.index,ht=Array.from(he.added);for(const ct of he.removed)Se>=this.ungroupedItems.length?this.groupedItems.remove(ct):this.ungroupedItems.remove(ct);for(let ct=Se;ct<Se+ht.length;ct++){const st=ht[ct-Se];ct>this.ungroupedItems.length?this.groupedItems.add(st,ct-this.ungroupedItems.length):this.ungroupedItems.add(st,ct)}this._updateGrouping()}),k.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(k){this.viewElement=k.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(k)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!(0,C.pn)(this.viewElement))return void(this.shouldUpdateGroupingOnNextResize=!0);const k=this.groupedItems.length;let O;for(;this._areItemsOverflowing;)this._groupLastItem(),O=!0;if(!O&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==k&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const k=this.viewElement,O=this.viewLocale.uiLanguageDirection,he=new C.UL(k.lastChild),Se=new C.UL(k);if(!this.cachedPadding){const ht=C.CO.window.getComputedStyle(k),ct=O==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(ht[ct])}return O==="ltr"?he.right>Se.right-this.cachedPadding:he.left<Se.left+this.cachedPadding}_enableGroupingOnResize(){let k;this.resizeObserver=new C.do(this.viewElement,O=>{k&&k===O.contentRect.width&&!this.shouldUpdateGroupingOnNextResize||(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),k=O.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(k){k.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Ti),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const k=this.viewLocale,O=k.t,he=$e(k);return he.class="ck-toolbar__grouped-dropdown",he.panelPosition=k.uiLanguageDirection==="ltr"?"sw":"se",at(he,this.groupedItems),he.buttonView.set({label:O("Show more items"),tooltip:!0,tooltipPosition:k.uiLanguageDirection==="rtl"?"se":"sw",icon:Pi}),he}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(k=>{this.viewFocusables.add(k)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}var fi=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/list/list.css"),Ki={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(fi.Z,Ki),fi.Z.locals;class ke extends Z{constructor(k){super(k);const O=this.bindTemplate;this.items=this.createCollection(),this.focusTracker=new C.Rh,this.keystrokes=new C.VD,this._focusCycler=new bi({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],"aria-label":O.to("ariaLabel")},children:this.items})}render(){super.render();for(const k of this.items)this.focusTracker.add(k.element);this.items.on("add",(k,O)=>{this.focusTracker.add(O.element)}),this.items.on("remove",(k,O)=>{this.focusTracker.remove(O.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class V extends Z{constructor(k){super(k);const O=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",O.if("isVisible","ck-hidden",he=>!he)]},children:this.children})}focus(){this.children.first.focus()}}class F extends Z{constructor(k){super(k),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}var P=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/dropdown/toolbardropdown.css"),N={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(P.Z,N),P.Z.locals;var de=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/dropdown/listdropdown.css"),Ce={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(de.Z,Ce),de.Z.locals;function $e(Pe,k=Ct){const O=new k(Pe),he=new oi(Pe),Se=new Ze(Pe,O,he);return O.bind("isEnabled").to(Se),O instanceof Zt?O.arrowView.bind("isOn").to(Se,"isOpen"):O.bind("isOn").to(Se,"isOpen"),function(ht){(function(ct){ct.on("render",()=>{d({emitter:ct,activator:()=>ct.isOpen,callback:()=>{ct.isOpen=!1},contextElements:[ct.element]})})})(ht),function(ct){ct.on("execute",st=>{st.source instanceof kt||(ct.isOpen=!1)})}(ht),function(ct){ct.focusTracker.on("change:isFocused",(st,qt,Mi)=>{ct.isOpen&&!Mi&&(ct.isOpen=!1)})}(ht),function(ct){ct.keystrokes.set("arrowdown",(st,qt)=>{ct.isOpen&&(ct.panelView.focus(),qt())}),ct.keystrokes.set("arrowup",(st,qt)=>{ct.isOpen&&(ct.panelView.focusLast(),qt())})}(ht),function(ct){ct.on("change:isOpen",(st,qt,Mi)=>{if(Mi)return;const Gi=ct.panelView.element;Gi&&Gi.contains(C.CO.document.activeElement)&&ct.buttonView.focus()})}(ht),function(ct){ct.on("change:isOpen",(st,qt,Mi)=>{Mi&&ct.panelView.focus()},{priority:"low"})}(ht)}(Se),Se}function at(Pe,k,O={}){Pe.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),Pe.isOpen?Tt(Pe,k,O):Pe.once("change:isOpen",()=>Tt(Pe,k,O),{priority:"highest"}),O.enableActiveItemFocusOnDropdownOpen&&ci(Pe,()=>Pe.toolbarView.items.find(he=>he.isOn))}function Tt(Pe,k,O){const he=Pe.locale,Se=he.t,ht=Pe.toolbarView=new nn(he),ct=typeof k=="function"?k():k;ht.ariaLabel=O.ariaLabel||Se("Dropdown toolbar"),O.maxWidth&&(ht.maxWidth=O.maxWidth),O.class&&(ht.class=O.class),O.isCompact&&(ht.isCompact=O.isCompact),O.isVertical&&(ht.isVertical=!0),ct instanceof me?ht.items.bindTo(ct).using(st=>st):ht.items.addMany(ct),Pe.panelView.children.add(ht),ht.items.delegate("execute").to(Pe)}function Ge(Pe,k,O={}){Pe.isOpen?Ut(Pe,k,O):Pe.once("change:isOpen",()=>Ut(Pe,k,O),{priority:"highest"}),ci(Pe,()=>Pe.listView.items.find(he=>he instanceof V&&he.children.first.isOn))}function Ut(Pe,k,O){const he=Pe.locale,Se=Pe.listView=new ke(he),ht=typeof k=="function"?k():k;Se.ariaLabel=O.ariaLabel,Se.items.bindTo(ht).using(ct=>{if(ct.type==="separator")return new F(he);if(ct.type==="button"||ct.type==="switchbutton"){const st=new V(he);let qt;return qt=ct.type==="button"?new ye(he):new kt(he),qt.bind(...Object.keys(ct.model)).to(ct.model),qt.delegate("execute").to(st),st.children.add(qt),st}return null}),Pe.panelView.children.add(Se),Se.items.delegate("execute").to(Pe)}function ci(Pe,k){Pe.on("change:isOpen",()=>{if(!Pe.isOpen)return;const O=k();O&&(typeof O.focus=="function"?O.focus():(0,C.KE)("ui-dropdown-focus-child-on-open-child-missing-focus",{view:O}))},{priority:C.tA.low-10})}var yi=a("./node_modules/lodash-es/isElement.js"),Ni=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/panel/balloonpanel.css"),Ii={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(Ni.Z,Ii),Ni.Z.locals;const zi=(0,C.nn)("px"),Oi=C.CO.document.body;class Ui extends Z{constructor(k){super(k);const O=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",O.to("position",he=>`ck-balloon-panel_${he}`),O.if("isVisible","ck-balloon-panel_visible"),O.if("withArrow","ck-balloon-panel_with-arrow"),O.to("class")],style:{top:O.to("top",zi),left:O.to("left",zi)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(k){this.show();const O=Ui.defaultPositions,he=Object.assign({},{element:this.element,positions:[O.southArrowNorth,O.southArrowNorthMiddleWest,O.southArrowNorthMiddleEast,O.southArrowNorthWest,O.southArrowNorthEast,O.northArrowSouth,O.northArrowSouthMiddleWest,O.northArrowSouthMiddleEast,O.northArrowSouthWest,O.northArrowSouthEast,O.viewportStickyNorth],limiter:Oi,fitInViewport:!0},k),Se=Ui._getOptimalPosition(he),ht=parseInt(Se.left),ct=parseInt(Se.top),st=Se.name,qt=Se.config||{},{withArrow:Mi=!0}=qt;this.top=ct,this.left=ht,this.position=st,this.withArrow=Mi}pin(k){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(k):this._stopPinning()},this._startPinning(k),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(k){this.attachTo(k);const O=Wt(k.target),he=k.limiter?Wt(k.limiter):Oi;this.listenTo(C.CO.document,"scroll",(Se,ht)=>{const ct=ht.target,st=O&&ct.contains(O),qt=he&&ct.contains(he);!st&&!qt&&O&&he||this.attachTo(k)},{useCapture:!0}),this.listenTo(C.CO.window,"resize",()=>{this.attachTo(k)})}_stopPinning(){this.stopListening(C.CO.document,"scroll"),this.stopListening(C.CO.window,"resize")}}function Wt(Pe){return(0,yi.Z)(Pe)?Pe:(0,C.bR)(Pe)?Pe.commonAncestorContainer:typeof Pe=="function"?Wt(Pe()):null}function we(Pe={}){const{sideOffset:k=Ui.arrowSideOffset,heightOffset:O=Ui.arrowHeightOffset,stickyVerticalOffset:he=Ui.stickyVerticalOffset,config:Se}=Pe;return{northWestArrowSouthWest:(st,qt)=>({top:ht(st,qt),left:st.left-k,name:"arrow_sw",...Se&&{config:Se}}),northWestArrowSouthMiddleWest:(st,qt)=>({top:ht(st,qt),left:st.left-.25*qt.width-k,name:"arrow_smw",...Se&&{config:Se}}),northWestArrowSouth:(st,qt)=>({top:ht(st,qt),left:st.left-qt.width/2,name:"arrow_s",...Se&&{config:Se}}),northWestArrowSouthMiddleEast:(st,qt)=>({top:ht(st,qt),left:st.left-.75*qt.width+k,name:"arrow_sme",...Se&&{config:Se}}),northWestArrowSouthEast:(st,qt)=>({top:ht(st,qt),left:st.left-qt.width+k,name:"arrow_se",...Se&&{config:Se}}),northArrowSouthWest:(st,qt)=>({top:ht(st,qt),left:st.left+st.width/2-k,name:"arrow_sw",...Se&&{config:Se}}),northArrowSouthMiddleWest:(st,qt)=>({top:ht(st,qt),left:st.left+st.width/2-.25*qt.width-k,name:"arrow_smw",...Se&&{config:Se}}),northArrowSouth:(st,qt)=>({top:ht(st,qt),left:st.left+st.width/2-qt.width/2,name:"arrow_s",...Se&&{config:Se}}),northArrowSouthMiddleEast:(st,qt)=>({top:ht(st,qt),left:st.left+st.width/2-.75*qt.width+k,name:"arrow_sme",...Se&&{config:Se}}),northArrowSouthEast:(st,qt)=>({top:ht(st,qt),left:st.left+st.width/2-qt.width+k,name:"arrow_se",...Se&&{config:Se}}),northEastArrowSouthWest:(st,qt)=>({top:ht(st,qt),left:st.right-k,name:"arrow_sw",...Se&&{config:Se}}),northEastArrowSouthMiddleWest:(st,qt)=>({top:ht(st,qt),left:st.right-.25*qt.width-k,name:"arrow_smw",...Se&&{config:Se}}),northEastArrowSouth:(st,qt)=>({top:ht(st,qt),left:st.right-qt.width/2,name:"arrow_s",...Se&&{config:Se}}),northEastArrowSouthMiddleEast:(st,qt)=>({top:ht(st,qt),left:st.right-.75*qt.width+k,name:"arrow_sme",...Se&&{config:Se}}),northEastArrowSouthEast:(st,qt)=>({top:ht(st,qt),left:st.right-qt.width+k,name:"arrow_se",...Se&&{config:Se}}),southWestArrowNorthWest:st=>({top:ct(st),left:st.left-k,name:"arrow_nw",...Se&&{config:Se}}),southWestArrowNorthMiddleWest:(st,qt)=>({top:ct(st),left:st.left-.25*qt.width-k,name:"arrow_nmw",...Se&&{config:Se}}),southWestArrowNorth:(st,qt)=>({top:ct(st),left:st.left-qt.width/2,name:"arrow_n",...Se&&{config:Se}}),southWestArrowNorthMiddleEast:(st,qt)=>({top:ct(st),left:st.left-.75*qt.width+k,name:"arrow_nme",...Se&&{config:Se}}),southWestArrowNorthEast:(st,qt)=>({top:ct(st),left:st.left-qt.width+k,name:"arrow_ne",...Se&&{config:Se}}),southArrowNorthWest:st=>({top:ct(st),left:st.left+st.width/2-k,name:"arrow_nw",...Se&&{config:Se}}),southArrowNorthMiddleWest:(st,qt)=>({top:ct(st),left:st.left+st.width/2-.25*qt.width-k,name:"arrow_nmw",...Se&&{config:Se}}),southArrowNorth:(st,qt)=>({top:ct(st),left:st.left+st.width/2-qt.width/2,name:"arrow_n",...Se&&{config:Se}}),southArrowNorthMiddleEast:(st,qt)=>({top:ct(st),left:st.left+st.width/2-.75*qt.width+k,name:"arrow_nme",...Se&&{config:Se}}),southArrowNorthEast:(st,qt)=>({top:ct(st),left:st.left+st.width/2-qt.width+k,name:"arrow_ne",...Se&&{config:Se}}),southEastArrowNorthWest:st=>({top:ct(st),left:st.right-k,name:"arrow_nw",...Se&&{config:Se}}),southEastArrowNorthMiddleWest:(st,qt)=>({top:ct(st),left:st.right-.25*qt.width-k,name:"arrow_nmw",...Se&&{config:Se}}),southEastArrowNorth:(st,qt)=>({top:ct(st),left:st.right-qt.width/2,name:"arrow_n",...Se&&{config:Se}}),southEastArrowNorthMiddleEast:(st,qt)=>({top:ct(st),left:st.right-.75*qt.width+k,name:"arrow_nme",...Se&&{config:Se}}),southEastArrowNorthEast:(st,qt)=>({top:ct(st),left:st.right-qt.width+k,name:"arrow_ne",...Se&&{config:Se}}),westArrowEast:(st,qt)=>({top:st.top+st.height/2-qt.height/2,left:st.left-qt.width-O,name:"arrow_e",...Se&&{config:Se}}),eastArrowWest:(st,qt)=>({top:st.top+st.height/2-qt.height/2,left:st.right+O,name:"arrow_w",...Se&&{config:Se}}),viewportStickyNorth:(st,qt,Mi)=>st.getIntersection(Mi)?{top:Mi.top+he,left:st.left+st.width/2-qt.width/2,name:"arrowless",config:{withArrow:!1,...Se}}:null};function ht(st,qt){return st.top-qt.height-O}function ct(st){return st.bottom+O}}Ui.arrowSideOffset=25,Ui.arrowHeightOffset=10,Ui.stickyVerticalOffset=20,Ui._getOptimalPosition=C.xZ,Ui.defaultPositions=we();var He=a("./node_modules/lodash-es/debounce.js"),J=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/tooltip/tooltip.css"),R={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(J.Z,R),J.Z.locals;const Q="ck-tooltip";class ve extends(0,C.Xu)(){constructor(k){if(super(),ve._editors.add(k),ve._instance)return ve._instance;ve._instance=this,this.tooltipTextView=new Z(k.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new Ui(k.locale),this.balloonPanelView.class=Q,this.balloonPanelView.content.add(this.tooltipTextView),this._resizeObserver=null,this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._pinTooltipDebounced=(0,He.Z)(this._pinTooltip,600),this.listenTo(C.CO.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(C.CO.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(C.CO.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(C.CO.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(C.CO.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(k){const O=k.ui.view&&k.ui.view.body;ve._editors.delete(k),this.stopListening(k.ui),O&&O.has(this.balloonPanelView)&&O.remove(this.balloonPanelView),ve._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),ve._instance=null)}static getPositioningFunctions(k){const O=ve.defaultBalloonPositions;return{s:[O.southArrowNorth,O.southArrowNorthEast,O.southArrowNorthWest],n:[O.northArrowSouth],e:[O.eastArrowWest],w:[O.westArrowEast],sw:[O.southArrowNorthEast],se:[O.southArrowNorthWest]}[k]}_onEnterOrFocus(k,{target:O}){const he=De(O);var Se;he&&he!==this._currentElementWithTooltip&&(this._unpinTooltip(),this._pinTooltipDebounced(he,{text:(Se=he).dataset.ckeTooltipText,position:Se.dataset.ckeTooltipPosition||"s",cssClass:Se.dataset.ckeTooltipClass||""}))}_onLeaveOrBlur(k,{target:O,relatedTarget:he}){if(k.name==="mouseleave"){if(!(0,yi.Z)(O)||this._currentElementWithTooltip&&O!==this._currentElementWithTooltip)return;const Se=De(O),ht=De(he);Se&&Se!==ht&&this._unpinTooltip()}else{if(this._currentElementWithTooltip&&O!==this._currentElementWithTooltip)return;this._unpinTooltip()}}_onScroll(k,{target:O}){this._currentElementWithTooltip&&(O.contains(this.balloonPanelView.element)&&O.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(k,{text:O,position:he,cssClass:Se}){const ht=(0,C.Ps)(ve._editors.values()).ui.view.body;ht.has(this.balloonPanelView)||ht.add(this.balloonPanelView),this.tooltipTextView.text=O,this.balloonPanelView.pin({target:k,positions:ve.getPositioningFunctions(he)}),this._resizeObserver=new C.do(k,()=>{(0,C.pn)(k)||this._unpinTooltip()}),this.balloonPanelView.class=[Q,Se].filter(ct=>ct).join(" ");for(const ct of ve._editors)this.listenTo(ct.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=k,this._currentTooltipPosition=he}_unpinTooltip(){this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const k of ve._editors)this.stopListening(k.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver&&this._resizeObserver.destroy()}_updateTooltipPosition(){(0,C.pn)(this._currentElementWithTooltip)?this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:ve.getPositioningFunctions(this._currentTooltipPosition)}):this._unpinTooltip()}}function De(Pe){return(0,yi.Z)(Pe)?Pe.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}ve.defaultBalloonPositions=we({heightOffset:5,sideOffset:13}),ve._editors=new Set,ve._instance=null;class rt extends(0,C.Re)(){constructor(k){super(),this.editor=k,this.componentFactory=new xi(k),this.focusTracker=new C.Rh,this.tooltipManager=new ve(k),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.isReady=!1,this.once("ready",()=>{this.isReady=!0}),this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[],this.listenTo(k.editing.view.document,"layoutChanged",()=>this.update()),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor);for(const k of this._editableElementsMap.values())k.ckeditorInstance=null;this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(k,O){this._editableElementsMap.set(k,O),O.ckeditorInstance||(O.ckeditorInstance=this.editor),this.focusTracker.add(O);const he=()=>{this.editor.editing.view.getDomRoot(k)||this.editor.keystrokes.listenTo(O)};this.isReady?he():this.once("ready",he)}getEditableElement(k="main"){return this._editableElementsMap.get(k)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(k,O={}){k.isRendered?(this.focusTracker.add(k.element),this.editor.keystrokes.listenTo(k.element)):k.once("render",()=>{this.focusTracker.add(k.element),this.editor.keystrokes.listenTo(k.element)}),this._focusableToolbarDefinitions.push({toolbarView:k,options:O})}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_readViewportOffsetFromConfig(){const k=this.editor,O=k.config.get("ui.viewportOffset");if(O)return O;const he=k.config.get("toolbar.viewportTopOffset");return he?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:he}):{top:0}}_initFocusTracking(){const k=this.editor,O=k.editing.view;let he,Se;k.keystrokes.set("Alt+F10",(ht,ct)=>{const st=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(st)&&!Array.from(O.domRoots.values()).includes(st)&&(he=st);const qt=this._getCurrentFocusedToolbarDefinition();qt&&Se||(Se=this._getFocusableCandidateToolbarDefinitions());for(let Mi=0;Mi<Se.length;Mi++){const Gi=Se.shift();if(Se.push(Gi),Gi!==qt&&this._focusFocusableCandidateToolbar(Gi)){qt&&qt.options.afterBlur&&qt.options.afterBlur();break}}ct()}),k.keystrokes.set("Esc",(ht,ct)=>{const st=this._getCurrentFocusedToolbarDefinition();st&&(he?(he.focus(),he=null):k.editing.view.focus(),st.options.afterBlur&&st.options.afterBlur(),ct())})}_getFocusableCandidateToolbarDefinitions(){const k=[];for(const O of this._focusableToolbarDefinitions){const{toolbarView:he,options:Se}=O;((0,C.pn)(he.element)||Se.beforeFocus)&&k.push(O)}return k.sort((O,he)=>Pt(O)-Pt(he)),k}_getCurrentFocusedToolbarDefinition(){for(const k of this._focusableToolbarDefinitions)if(k.toolbarView.element&&k.toolbarView.element.contains(this.focusTracker.focusedElement))return k;return null}_focusFocusableCandidateToolbar(k){const{toolbarView:O,options:{beforeFocus:he}}=k;return he&&he(),!!(0,C.pn)(O.element)&&(O.focus(),!0)}}function Pt(Pe){const{toolbarView:k,options:O}=Pe;let he=10;return(0,C.pn)(k.element)&&he--,O.isContextual&&he--,he}var ai=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/editorui/editorui.css"),wi={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(ai.Z,wi),ai.Z.locals;class mt extends Z{constructor(k){super(k),this.body=new et(k)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}var U=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/label/label.css"),se={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(U.Z,se),U.Z.locals;class Te extends Z{constructor(k){super(k),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${(0,C.hQ)()}`;const O=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:O.to("for")},children:[{text:O.to("text")}]})}}class Le extends mt{constructor(k){super(k),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:k.uiLanguageDirection,lang:k.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const k=this.t,O=new Te;return O.text=k("Rich Text Editor"),O.extendTemplate({attributes:{class:"ck-voice-label"}}),O}}class Ye extends Z{constructor(k,O,he){super(k),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:k.contentLanguage,dir:k.contentLanguageDirection}}),this.name=null,this.set("isFocused",!1),this._editableElement=he,this._hasExternalElement=!!this._editableElement,this._editingView=O}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}_updateIsFocusedClasses(){const k=this._editingView;function O(he){k.change(Se=>{const ht=k.document.getRoot(he.name);Se.addClass(he.isFocused?"ck-focused":"ck-blurred",ht),Se.removeClass(he.isFocused?"ck-blurred":"ck-focused",ht)})}k.isRenderingInProgress?function he(Se){k.once("change:isRenderingInProgress",(ht,ct,st)=>{st?he(Se):O(Se)})}(this):O(this)}}class Je extends Ye{constructor(k,O,he,Se={}){super(k,O,he);const ht=k.t;this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),this._generateLabel=Se.label||(()=>ht("Editor editing area: %0",this.name))}render(){super.render();const k=this._editingView;k.change(O=>{const he=k.document.getRoot(this.name);O.setAttribute("aria-label",this._generateLabel(this),he)})}}var At=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/formheader/formheader.css"),_t={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(At.Z,_t),At.Z.locals;class Rt extends Z{constructor(k,O={}){super(k);const he=this.bindTemplate;this.set("label",O.label||""),this.set("class",O.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",he.to("class")]},children:this.children});const Se=new Z(k);Se.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"]},children:[{text:he.to("label")}]}),this.children.add(Se)}}var Vt=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/input/input.css"),$t={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(Vt.Z,$t),Vt.Z.locals;class li extends Z{constructor(k){super(k),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.focusTracker=new C.Rh,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0),this.set("inputMode","text");const O=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",O.if("isFocused","ck-input_focused"),O.if("isEmpty","ck-input-text_empty"),O.if("hasError","ck-error")],id:O.to("id"),placeholder:O.to("placeholder"),readonly:O.to("isReadOnly"),inputmode:O.to("inputMode"),"aria-invalid":O.if("hasError",!0),"aria-describedby":O.to("ariaDescribedById")},on:{input:O.to((...he)=>{this.fire("input",...he),this._updateIsEmpty()}),change:O.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(k,O,he)=>{this._setDomElementValue(he),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}_updateIsEmpty(){this.isEmpty=!this.element.value}_setDomElementValue(k){this.element.value=k||k===0?k:""}}class Ci extends li{constructor(k){super(k),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class hi extends li{constructor(k,{min:O,max:he,step:Se}={}){super(k);const ht=this.bindTemplate;this.set("min",O),this.set("max",he),this.set("step",Se),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:ht.to("min"),max:ht.to("max"),step:ht.to("step")}})}}class Fi extends Z{constructor(k){super(k);const O=this.bindTemplate;this.setTemplate({tag:"iframe",attributes:{class:["ck","ck-reset_all"],sandbox:"allow-same-origin allow-scripts"},on:{load:O.to("loaded")}})}render(){return new Promise(k=>(this.on("loaded",k),super.render()))}}var un=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/labeledfield/labeledfieldview.css"),an={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(un.Z,an),un.Z.locals;class Cn extends Z{constructor(k,O){super(k);const he=`ck-labeled-field-view-${(0,C.hQ)()}`,Se=`ck-labeled-field-view-status-${(0,C.hQ)()}`;this.fieldView=O(this,he,Se),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(he),this.statusView=this._createStatusView(Se),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(ct,st)=>ct||st);const ht=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",ht.to("class"),ht.if("isEnabled","ck-disabled",ct=>!ct),ht.if("isEmpty","ck-labeled-field-view_empty"),ht.if("isFocused","ck-labeled-field-view_focused"),ht.if("placeholder","ck-labeled-field-view_placeholder"),ht.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(k){const O=new Te(this.locale);return O.for=k,O.bind("text").to(this,"label"),O}_createStatusView(k){const O=new Z(this.locale),he=this.bindTemplate;return O.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",he.if("errorText","ck-labeled-field-view__status_error"),he.if("_statusText","ck-hidden",Se=>!Se)],id:k,role:he.if("errorText","alert")},children:[{text:he.to("_statusText")}]}),O}focus(){this.fieldView.focus()}}function fn(Pe,k,O){const he=new Ci(Pe.locale);return he.set({id:k,ariaDescribedById:O}),he.bind("isReadOnly").to(Pe,"isEnabled",Se=>!Se),he.bind("hasError").to(Pe,"errorText",Se=>!!Se),he.on("input",()=>{Pe.errorText=null}),Pe.bind("isEmpty","isFocused","placeholder").to(he),he}function Tn(Pe,k,O){const he=new hi(Pe.locale);return he.set({id:k,ariaDescribedById:O,inputMode:"numeric"}),he.bind("isReadOnly").to(Pe,"isEnabled",Se=>!Se),he.bind("hasError").to(Pe,"errorText",Se=>!!Se),he.on("input",()=>{Pe.errorText=null}),Pe.bind("isEmpty","isFocused","placeholder").to(he),he}function In(Pe,k,O){const he=$e(Pe.locale);return he.set({id:k,ariaDescribedById:O}),he.bind("isEnabled").to(Pe),he}class Dn extends Ri.eO{static get pluginName(){return"Notification"}init(){this.on("show:warning",(k,O)=>{window.alert(O.message)},{priority:"lowest"})}showSuccess(k,O={}){this._showNotification({message:k,type:"success",namespace:O.namespace,title:O.title})}showInfo(k,O={}){this._showNotification({message:k,type:"info",namespace:O.namespace,title:O.title})}showWarning(k,O={}){this._showNotification({message:k,type:"warning",namespace:O.namespace,title:O.title})}_showNotification(k){const O=k.namespace?`show:${k.type}:${k.namespace}`:`show:${k.type}`;this.fire(O,{message:k.message,type:k.type,title:k.title||""})}}var Fn=a("./node_modules/lodash-es/assignIn.js");class Be extends(0,C.Re)(){constructor(k,O){super(),O&&(0,Fn.Z)(this,O),k&&this.set(k)}}var j=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/panel/balloonrotator.css"),ie={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(j.Z,ie),j.Z.locals;var ue=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/panel/fakepanel.css"),Ee={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(ue.Z,Ee),ue.Z.locals;const Re=(0,C.nn)("px");class ze extends Ri.Sy{static get pluginName(){return"ContextualBalloon"}constructor(k){super(k),this._view=null,this._rotatorView=null,this._fakePanelsView=null,this.positionLimiter=()=>{const O=this.editor.editing.view,he=O.document.selection.editableElement;return he?O.domConverter.mapViewToDom(he.root):null},this.set("visibleView",null),this._viewToStack=new Map,this._idToStack=new Map,this.set("_numberOfStacks",0),this.set("_singleViewMode",!1),this._rotatorView=null,this._fakePanelsView=null}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(k){return Array.from(this._viewToStack.keys()).includes(k)}add(k){if(this._view||this._createPanelView(),this.hasView(k.view))throw new C.Bb("contextualballoon-add-view-exist",[this,k]);const O=k.stackId||"main";if(!this._idToStack.has(O))return this._idToStack.set(O,new Map([[k.view,k]])),this._viewToStack.set(k.view,this._idToStack.get(O)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!k.singleViewMode||this.showStack(O));const he=this._idToStack.get(O);k.singleViewMode&&this.showStack(O),he.set(k.view,k),this._viewToStack.set(k.view,he),he===this._visibleStack&&this._showView(k)}remove(k){if(!this.hasView(k))throw new C.Bb("contextualballoon-remove-view-not-exist",[this,k]);const O=this._viewToStack.get(k);this._singleViewMode&&this.visibleView===k&&(this._singleViewMode=!1),this.visibleView===k&&(O.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(O.values())[O.size-2])),O.size===1?(this._idToStack.delete(this._getStackId(O)),this._numberOfStacks=this._idToStack.size):O.delete(k),this._viewToStack.delete(k)}updatePosition(k){k&&(this._visibleStack.get(this.visibleView).position=k),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(k){this.visibleStack=k;const O=this._idToStack.get(k);if(!O)throw new C.Bb("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==O&&this._showView(Array.from(O.values()).pop())}_createPanelView(){this._view=new Ui(this.editor.locale),this.editor.ui.view.body.add(this._view),this.editor.ui.focusTracker.add(this._view.element),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(k){return Array.from(this._idToStack.entries()).find(O=>O[1]===k)[0]}_showNextStack(){const k=Array.from(this._idToStack.values());let O=k.indexOf(this._visibleStack)+1;k[O]||(O=0),this.showStack(this._getStackId(k[O]))}_showPrevStack(){const k=Array.from(this._idToStack.values());let O=k.indexOf(this._visibleStack)-1;k[O]||(O=k.length-1),this.showStack(this._getStackId(k[O]))}_createRotatorView(){const k=new Ne(this.editor.locale),O=this.editor.locale.t;return this.view.content.add(k),k.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(he,Se)=>!Se&&he>1),k.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),k.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(he,Se)=>{if(Se<2)return"";const ht=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return O("%0 of %1",[ht,Se])}),k.buttonNextView.on("execute",()=>{k.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),k.buttonPrevView.on("execute",()=>{k.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),k}_createFakePanelsView(){const k=new Fe(this.editor.locale,this.view);return k.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(O,he)=>!he&&O>=2?Math.min(O-1,2):0),k.listenTo(this.view,"change:top",()=>k.updatePosition()),k.listenTo(this.view,"change:left",()=>k.updatePosition()),this.editor.ui.view.body.add(k),k}_showView({view:k,balloonClassName:O="",withArrow:he=!0,singleViewMode:Se=!1}){this.view.class=O,this.view.withArrow=he,this._rotatorView.showView(k),this.visibleView=k,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),Se&&(this._singleViewMode=!0)}_getBalloonPosition(){let k=Array.from(this._visibleStack.values()).pop().position;return k&&(k.limiter||(k=Object.assign({},k,{limiter:this.positionLimiter})),k=Object.assign({},k,{viewportOffsetConfig:this.editor.ui.viewportOffset})),k}}class Ne extends Z{constructor(k){super(k);const O=k.t,he=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new C.Rh,this.buttonPrevView=this._createButtonView(O("Previous"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'),this.buttonNextView=this._createButtonView(O("Next"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",he.to("isNavigationVisible",Se=>Se?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:he.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(k){this.hideView(),this.content.add(k)}hideView(){this.content.clear()}_createButtonView(k,O){const he=new ye(this.locale);return he.set({label:k,icon:O,tooltip:!0}),he}}class Fe extends Z{constructor(k,O){super(k);const he=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=O,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",he.to("numberOfPanels",Se=>Se?"":"ck-hidden")],style:{top:he.to("top",Re),left:he.to("left",Re),width:he.to("width",Re),height:he.to("height",Re)}},children:this.content}),this.on("change:numberOfPanels",(Se,ht,ct,st)=>{ct>st?this._addPanels(ct-st):this._removePanels(st-ct),this.updatePosition()})}_addPanels(k){for(;k--;){const O=new Z;O.setTemplate({tag:"div"}),this.content.add(O),this.registerChild(O)}}_removePanels(k){for(;k--;){const O=this.content.last;this.content.remove(O),this.deregisterChild(O),O.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:k,left:O}=this._balloonPanelView,{width:he,height:Se}=new C.UL(this._balloonPanelView.element);Object.assign(this,{top:k,left:O,width:he,height:Se})}}}var lt=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/panel/stickypanel.css"),gt={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(lt.Z,gt),lt.Z.locals;const ut=(0,C.nn)("px");class vt extends Z{constructor(k){super(k);const O=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheLimiter",!1),this.set("_hasViewportTopOffset",!1),this.content=this.createCollection(),this._contentPanelPlaceholder=new r({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:O.to("isSticky",he=>he?"block":"none"),height:O.to("isSticky",he=>he?ut(this._panelRect.height):null)}}}).render(),this._contentPanel=new r({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",O.if("isSticky","ck-sticky-panel__content_sticky"),O.if("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:O.to("isSticky",he=>he?ut(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:O.to("_hasViewportTopOffset",he=>he?ut(this.viewportTopOffset):null),bottom:O.to("_isStickyToTheLimiter",he=>he?ut(this.limiterBottomOffset):null),marginLeft:O.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this._contentPanel]})}render(){super.render(),this._checkIfShouldBeSticky(),this.listenTo(C.CO.window,"scroll",()=>{this._checkIfShouldBeSticky()}),this.listenTo(this,"change:isActive",()=>{this._checkIfShouldBeSticky()})}_checkIfShouldBeSticky(){const k=this._panelRect=this._contentPanel.getBoundingClientRect();let O;this.limiterElement?(O=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&O.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<O.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=O.bottom<k.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:ut(-C.CO.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null)}}const Ot=(0,C.nn)("px");class ei extends Ri.Sy{static get pluginName(){return"BalloonToolbar"}static get requires(){return[ze]}constructor(k){super(k),this._balloonConfig=Ei(k.config.get("balloonToolbar")),this.toolbarView=this._createToolbarView(),this.focusTracker=new C.Rh,k.ui.once("ready",()=>{this.focusTracker.add(k.ui.getEditableElement()),this.focusTracker.add(this.toolbarView.element)}),k.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this.show(!0),afterBlur:()=>this.hide(),isContextual:!0}),this._resizeObserver=null,this._balloon=k.plugins.get(ze),this._fireSelectionChangeDebounced=(0,He.Z)(()=>this.fire("_selectionChangeDebounced"),200),this.decorate("show")}init(){const k=this.editor,O=k.model.document.selection;this.listenTo(this.focusTracker,"change:isFocused",(he,Se,ht)=>{const ct=this._balloon.visibleView===this.toolbarView;!ht&&ct?this.hide():ht&&this.show()}),this.listenTo(O,"change:range",(he,Se)=>{(Se.directChange||O.isCollapsed)&&this.hide(),this._fireSelectionChangeDebounced()}),this.listenTo(this,"_selectionChangeDebounced",()=>{this.editor.editing.view.document.isFocused&&this.show()}),this._balloonConfig.shouldNotGroupWhenFull||this.listenTo(k,"ready",()=>{const he=k.ui.view.editable.element;this._resizeObserver=new C.do(he,Se=>{this.toolbarView.maxWidth=Ot(.9*Se.contentRect.width)})}),this.listenTo(this.toolbarView,"groupedItemsUpdate",()=>{this._updatePosition()})}afterInit(){const k=this.editor.ui.componentFactory;this.toolbarView.fillFromConfig(this._balloonConfig,k)}_createToolbarView(){const k=this.editor.locale.t,O=!this._balloonConfig.shouldNotGroupWhenFull,he=new nn(this.editor.locale,{shouldGroupWhenFull:O,isFloating:!0});return he.ariaLabel=k("Editor contextual toolbar"),he.render(),he}show(k=!1){const O=this.editor,he=O.model.document.selection,Se=O.model.schema;this._balloon.hasView(this.toolbarView)||he.isCollapsed&&!k||function(ht,ct){return ht.rangeCount===1?!1:[...ht.getRanges()].every(st=>{const qt=st.getContainedElement();return qt&&ct.isSelectable(qt)})}(he,Se)||Array.from(this.toolbarView.items).every(ht=>ht.isEnabled!==void 0&&!ht.isEnabled)||(this.listenTo(this.editor.ui,"update",()=>{this._updatePosition()}),this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"}))}hide(){this._balloon.hasView(this.toolbarView)&&(this.stopListening(this.editor.ui,"update"),this._balloon.remove(this.toolbarView))}_getBalloonPositionData(){const k=this.editor.editing.view,O=k.document,he=O.selection,Se=O.selection.isBackward;return{target:()=>{const ht=Se?he.getFirstRange():he.getLastRange(),ct=C.UL.getDomRangeRects(k.domConverter.viewRangeToDom(ht));return Se?ct[0]:(ct.length>1&&ct[ct.length-1].width===0&&ct.pop(),ct[ct.length-1])},positions:this._getBalloonPositions(Se)}}_updatePosition(){this._balloon.updatePosition(this._getBalloonPositionData())}destroy(){super.destroy(),this.stopListening(),this._fireSelectionChangeDebounced.cancel(),this.toolbarView.destroy(),this.focusTracker.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_getBalloonPositions(k){const O=C.OB.isSafari&&C.OB.isiOS?we({heightOffset:Math.max(Ui.arrowHeightOffset,Math.round(20/C.CO.window.visualViewport.scale))}):Ui.defaultPositions;return k?[O.northWestArrowSouth,O.northWestArrowSouthWest,O.northWestArrowSouthEast,O.northWestArrowSouthMiddleEast,O.northWestArrowSouthMiddleWest,O.southWestArrowNorth,O.southWestArrowNorthWest,O.southWestArrowNorthEast,O.southWestArrowNorthMiddleWest,O.southWestArrowNorthMiddleEast]:[O.southEastArrowNorth,O.southEastArrowNorthEast,O.southEastArrowNorthWest,O.southEastArrowNorthMiddleEast,O.southEastArrowNorthMiddleWest,O.northEastArrowSouth,O.northEastArrowSouthEast,O.northEastArrowSouthWest,O.northEastArrowSouthMiddleEast,O.northEastArrowSouthMiddleWest]}}var xt=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-ui/theme/components/toolbar/blocktoolbar.css"),ri={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(xt.Z,ri),xt.Z.locals;const vi=(0,C.nn)("px");class Vi extends ye{constructor(k){super(k);const O=this.bindTemplate;this.isVisible=!1,this.isToggleable=!0,this.set("top",0),this.set("left",0),this.extendTemplate({attributes:{class:"ck-block-toolbar-button",style:{top:O.to("top",he=>vi(he)),left:O.to("left",he=>vi(he))}}})}}const Wi=(0,C.nn)("px"),{pilcrow:tn}=Ri.ci;class bn extends Ri.Sy{static get pluginName(){return"BlockToolbar"}constructor(k){super(k),this._blockToolbarConfig=Ei(this.editor.config.get("blockToolbar")),this.toolbarView=this._createToolbarView(),this.panelView=this._createPanelView(),this.buttonView=this._createButtonView(),this._resizeObserver=null,d({emitter:this.panelView,contextElements:[this.panelView.element,this.buttonView.element],activator:()=>this.panelView.isVisible,callback:()=>this._hidePanel()})}init(){const k=this.editor;this.listenTo(k.model.document.selection,"change:range",(O,he)=>{he.directChange&&this._hidePanel()}),this.listenTo(k.ui,"update",()=>this._updateButton()),this.listenTo(k,"change:isReadOnly",()=>this._updateButton(),{priority:"low"}),this.listenTo(k.ui.focusTracker,"change:isFocused",()=>this._updateButton()),this.listenTo(this.buttonView,"change:isVisible",(O,he,Se)=>{Se?this.buttonView.listenTo(window,"resize",()=>this._updateButton()):(this.buttonView.stopListening(window,"resize"),this._hidePanel())}),k.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this._showPanel(),afterBlur:()=>this._hidePanel()})}afterInit(){const k=this.editor.ui.componentFactory,O=this._blockToolbarConfig;this.toolbarView.fillFromConfig(O,k);for(const he of this.toolbarView.items)he.on("execute",()=>this._hidePanel(!0),{priority:"high"});O.shouldNotGroupWhenFull||this.listenTo(this.editor,"ready",()=>{const he=this.editor.ui.view.editable.element;this._resizeObserver=new C.do(he,()=>{this.toolbarView.maxWidth=this._getToolbarMaxWidth()})})}destroy(){super.destroy(),this.panelView.destroy(),this.buttonView.destroy(),this.toolbarView.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_createToolbarView(){const k=this.editor.locale.t,O=!this._blockToolbarConfig.shouldNotGroupWhenFull,he=new nn(this.editor.locale,{shouldGroupWhenFull:O,isFloating:!0});return he.ariaLabel=k("Editor block content toolbar"),he.focusTracker.on("change:isFocused",(Se,ht,ct)=>{ct||this._hidePanel()}),he}_createPanelView(){const k=this.editor,O=new Ui(k.locale);return O.content.add(this.toolbarView),O.class="ck-toolbar-container",k.ui.view.body.add(O),k.ui.focusTracker.add(O.element),this.toolbarView.keystrokes.set("Esc",(he,Se)=>{this._hidePanel(!0),Se()}),O}_createButtonView(){const k=this.editor,O=k.t,he=new Vi(k.locale),Se=he.bindTemplate;return he.set({label:O("Edit block"),icon:tn,withText:!1}),he.extendTemplate({on:{mousedown:Se.to(ht=>{C.OB.isSafari&&this.panelView.isVisible&&this.toolbarView.focus(),ht.preventDefault()})}}),he.bind("isOn").to(this.panelView,"isVisible"),he.bind("tooltip").to(this.panelView,"isVisible",ht=>!ht),this.listenTo(he,"execute",()=>{this.panelView.isVisible?this._hidePanel(!0):this._showPanel()}),k.ui.view.body.add(he),k.ui.focusTracker.add(he.element),he}_updateButton(){const k=this.editor,O=k.model,he=k.editing.view;if(!k.ui.focusTracker.isFocused)return void this._hideButton();if(k.isReadOnly)return void this._hideButton();const Se=Array.from(O.document.selection.getSelectedBlocks())[0];if(!Se||Array.from(this.toolbarView.items).every(ct=>!ct.isEnabled))return void this._hideButton();const ht=he.domConverter.mapViewToDom(k.editing.mapper.toViewElement(Se));this.buttonView.isVisible=!0,this._attachButtonToElement(ht),this.panelView.isVisible&&this._showPanel()}_hideButton(){this.buttonView.isVisible=!1}_showPanel(){if(!this.buttonView.isVisible)return;const k=this.panelView.isVisible;this.panelView.show(),this.toolbarView.maxWidth=this._getToolbarMaxWidth(),this.panelView.pin({target:this.buttonView.element,limiter:this.editor.ui.getEditableElement()}),k||this.toolbarView.items.get(0).focus()}_hidePanel(k){this.panelView.isVisible=!1,k&&this.editor.editing.view.focus()}_attachButtonToElement(k){const O=window.getComputedStyle(k),he=new C.UL(this.editor.ui.getEditableElement()),Se=parseInt(O.paddingTop,10),ht=parseInt(O.lineHeight,10)||1.2*parseInt(O.fontSize,10),ct=(0,C.xZ)({element:this.buttonView.element,target:k,positions:[(st,qt)=>{let Mi;return Mi=this.editor.locale.uiLanguageDirection==="ltr"?he.left-qt.width:he.right,{top:st.top+Se+(ht-qt.height)/2,left:Mi}}]});this.buttonView.top=ct.top,this.buttonView.left=ct.left}_getToolbarMaxWidth(){const k=this.editor.ui.view.editable.element,O=new C.UL(k),he=new C.UL(this.buttonView.element),Se=this.editor.locale.uiLanguageDirection==="rtl"?he.left-O.right+he.width:O.left-he.left;return Wi(O.width+Se)}}},"./packages/ckeditor5-utils/src/ckeditorerror.ts":(f,v,a)=>{"use strict";a.d(v,{H:()=>I,KE:()=>H,ZP:()=>A});const d="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class A extends Error{constructor(ge,X,te){super(function(Z,h){const g=new WeakSet,r=(_,T)=>{if(typeof T=="object"&&T!==null){if(g.has(T))return`[object ${T.constructor.name}]`;g.add(T)}return T},u=h?` ${JSON.stringify(h,r)}`:"",w=C(Z);return Z+u+w}(ge,te)),this.name="CKEditorError",this.context=X,this.data=te}is(ge){return ge==="CKEditorError"}static rethrowUnexpectedError(ge,X){if(ge.is&&ge.is("CKEditorError"))throw ge;const te=new A(ge.message,X);throw te.stack=ge.stack,te}}function H(pe,ge){console.warn(...me(pe,ge))}function I(pe,ge){console.error(...me(pe,ge))}function C(pe){return`
Read more: ${d}#error-${pe}`}function me(pe,ge){const X=C(pe);return ge?[pe,ge,X]:[pe,X]}},"./packages/ckeditor5-utils/src/dom/emittermixin.ts":(f,v,a)=>{"use strict";a.d(v,{Z:()=>me});var d=a("./packages/ckeditor5-utils/src/emittermixin.ts"),A=a("./packages/ckeditor5-utils/src/uid.ts"),H=a("./packages/ckeditor5-utils/src/dom/isnode.ts"),I=a("./packages/ckeditor5-utils/src/dom/iswindow.ts");const C=me((0,d.ZP)());function me(X){return X?class extends X{listenTo(te,Z,h,g={}){if((0,H.Z)(te)||(0,I.Z)(te)){const r={capture:!!g.useCapture,passive:!!g.usePassive},u=this._getProxyEmitter(te,r)||new pe(te,r);this.listenTo(u,Z,h,g)}else super.listenTo(te,Z,h,g)}stopListening(te,Z,h){if((0,H.Z)(te)||(0,I.Z)(te)){const g=this._getAllProxyEmitters(te);for(const r of g)this.stopListening(r,Z,h)}else super.stopListening(te,Z,h)}_getProxyEmitter(te,Z){return(0,d.Rl)(this,ge(te,Z))}_getAllProxyEmitters(te){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(Z=>this._getProxyEmitter(te,Z)).filter(Z=>!!Z)}}:C}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(X=>{me[X]=C.prototype[X]});class pe extends(0,d.ZP)(){constructor(te,Z){super(),(0,d.Hv)(this,ge(te,Z)),this._domNode=te,this._options=Z}attach(te){if(this._domListeners&&this._domListeners[te])return;const Z=this._createDomListener(te);this._domNode.addEventListener(te,Z,this._options),this._domListeners||(this._domListeners={}),this._domListeners[te]=Z}detach(te){let Z;!this._domListeners[te]||(Z=this._events[te])&&Z.callbacks.length||this._domListeners[te].removeListener()}_addEventListener(te,Z,h){this.attach(te),(0,d.ZP)().prototype._addEventListener.call(this,te,Z,h)}_removeEventListener(te,Z){(0,d.ZP)().prototype._removeEventListener.call(this,te,Z),this.detach(te)}_createDomListener(te){const Z=h=>{this.fire(te,h)};return Z.removeListener=()=>{this._domNode.removeEventListener(te,Z,this._options),delete this._domListeners[te]},Z}}function ge(X,te){let Z=function(h){return h["data-ck-expando"]||(h["data-ck-expando"]=(0,A.Z)())}(X);for(const h of Object.keys(te).sort())te[h]&&(Z+="-"+h);return Z}},"./packages/ckeditor5-utils/src/dom/isnode.ts":(f,v,a)=>{"use strict";function d(A){if(A){if(A.defaultView)return A instanceof A.defaultView.Document;if(A.ownerDocument&&A.ownerDocument.defaultView)return A instanceof A.ownerDocument.defaultView.Node}return!1}a.d(v,{Z:()=>d})},"./packages/ckeditor5-utils/src/dom/iswindow.ts":(f,v,a)=>{"use strict";function d(A){const H=Object.prototype.toString.apply(A);return H=="[object Window]"||H=="[object global]"}a.d(v,{Z:()=>d})},"./packages/ckeditor5-utils/src/emittermixin.ts":(f,v,a)=>{"use strict";a.d(v,{Hv:()=>h,Rl:()=>Z,ZP:()=>te});var d=a("./packages/ckeditor5-utils/src/eventinfo.ts"),A=a("./packages/ckeditor5-utils/src/uid.ts"),H=a("./packages/ckeditor5-utils/src/priorities.ts"),I=a("./packages/ckeditor5-utils/src/inserttopriorityarray.ts"),C=(a("./packages/ckeditor5-utils/src/version.ts"),a("./packages/ckeditor5-utils/src/ckeditorerror.ts"));const me=Symbol("listeningTo"),pe=Symbol("emitterId"),ge=Symbol("delegations"),X=te(Object);function te(z){return z?class extends z{on(L,x,c){this.listenTo(this,L,x,c)}once(L,x,c){let D=!1;this.listenTo(this,L,(W,...q)=>{D||(D=!0,W.off(),x.call(this,W,...q))},c)}off(L,x){this.stopListening(this,L,x)}listenTo(L,x,c,D={}){let W,q;this[me]||(this[me]={});const ae=this[me];g(L)||h(L);const Ie=g(L);(W=ae[Ie])||(W=ae[Ie]={emitter:L,callbacks:{}}),(q=W.callbacks[x])||(q=W.callbacks[x]=[]),q.push(c),function(Ve,_e,Me,Qe,dt){_e._addEventListener?_e._addEventListener(Me,Qe,dt):Ve._addEventListener.call(_e,Me,Qe,dt)}(this,L,x,c,D)}stopListening(L,x,c){const D=this[me];let W=L&&g(L);const q=D&&W?D[W]:void 0,ae=q&&x?q.callbacks[x]:void 0;if(!(!D||L&&!q||x&&!ae))if(c)T(this,L,x,c),ae.indexOf(c)!==-1&&(ae.length===1?delete q.callbacks[x]:T(this,L,x,c));else if(ae){for(;c=ae.pop();)T(this,L,x,c);delete q.callbacks[x]}else if(q){for(x in q.callbacks)this.stopListening(L,x);delete D[W]}else{for(W in D)this.stopListening(D[W].emitter);delete this[me]}}fire(L,...x){try{const c=L instanceof d.Z?L:new d.Z(this,L),D=c.name;let W=w(this,D);if(c.path.push(this),W){const ae=[c,...x];W=Array.from(W);for(let Ie=0;Ie<W.length&&(W[Ie].callback.apply(this,ae),c.off.called&&(delete c.off.called,this._removeEventListener(D,W[Ie].callback)),!c.stop.called);Ie++);}const q=this[ge];if(q){const ae=q.get(D),Ie=q.get("*");ae&&_(ae,c,x),Ie&&_(Ie,c,x)}return c.return}catch(c){C.ZP.rethrowUnexpectedError(c,this)}}delegate(...L){return{to:(x,c)=>{this[ge]||(this[ge]=new Map),L.forEach(D=>{const W=this[ge].get(D);W?W.set(x,c):this[ge].set(D,new Map([[x,c]]))})}}}stopDelegating(L,x){if(this[ge])if(L)if(x){const c=this[ge].get(L);c&&c.delete(x)}else this[ge].delete(L);else this[ge].clear()}_addEventListener(L,x,c){(function(q,ae){const Ie=r(q);if(Ie[ae])return;let Ve=ae,_e=null;const Me=[];for(;Ve!==""&&!Ie[Ve];)Ie[Ve]={callbacks:[],childEvents:[]},Me.push(Ie[Ve]),_e&&Ie[Ve].childEvents.push(_e),_e=Ve,Ve=Ve.substr(0,Ve.lastIndexOf(":"));if(Ve!==""){for(const Qe of Me)Qe.callbacks=Ie[Ve].callbacks.slice();Ie[Ve].childEvents.push(_e)}})(this,L);const D=u(this,L),W={callback:x,priority:H.Z.get(c.priority)};for(const q of D)(0,I.Z)(q,W)}_removeEventListener(L,x){const c=u(this,L);for(const D of c)for(let W=0;W<D.length;W++)D[W].callback==x&&(D.splice(W,1),W--)}}:X}function Z(z,L){const x=z[me];return x&&x[L]?x[L].emitter:null}function h(z,L){z[pe]||(z[pe]=L||(0,A.Z)())}function g(z){return z[pe]}function r(z){return z._events||Object.defineProperty(z,"_events",{value:{}}),z._events}function u(z,L){const x=r(z)[L];if(!x)return[];let c=[x.callbacks];for(let D=0;D<x.childEvents.length;D++){const W=u(z,x.childEvents[D]);c=c.concat(W)}return c}function w(z,L){let x;return z._events&&(x=z._events[L])&&x.callbacks.length?x.callbacks:L.indexOf(":")>-1?w(z,L.substr(0,L.lastIndexOf(":"))):null}function _(z,L,x){for(let[c,D]of z){D?typeof D=="function"&&(D=D(L.name)):D=L.name;const W=new d.Z(L.source,D);W.path=[...L.path],c.fire(W,...x)}}function T(z,L,x,c){L._removeEventListener?L._removeEventListener(x,c):z._removeEventListener.call(L,x,c)}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(z=>{te[z]=X.prototype[z]})},"./packages/ckeditor5-utils/src/env.ts":(f,v,a)=>{"use strict";a.d(v,{ZP:()=>H});const d=function(){try{return navigator.userAgent.toLowerCase()}catch{return""}}(),A={isMac:I(d),isWindows:function(C){return C.indexOf("windows")>-1}(d),isGecko:function(C){return!!C.match(/gecko\/\d+/)}(d),isSafari:function(C){return C.indexOf(" applewebkit/")>-1&&C.indexOf("chrome")===-1}(d),isiOS:function(C){return!!C.match(/iphone|ipad/i)||I(C)&&navigator.maxTouchPoints>0}(d),isAndroid:function(C){return C.indexOf("android")>-1}(d),isBlink:function(C){return C.indexOf("chrome/")>-1&&C.indexOf("edge/")<0}(d),features:{isRegExpUnicodePropertySupported:function(){let C=!1;try{C="\u0107".search(new RegExp("[\\p{L}]","u"))===0}catch{}return C}()}},H=A;function I(C){return C.indexOf("macintosh")>-1}},"./packages/ckeditor5-utils/src/eventinfo.ts":(f,v,a)=>{"use strict";a.d(v,{Z:()=>A});const d=function(){return function H(){H.called=!0}};class A{constructor(I,C){this.source=I,this.name=C,this.path=[],this.stop=d(),this.off=d()}}},"./packages/ckeditor5-utils/src/index.ts":(f,v,a)=>{"use strict";a.d(v,{Bb:()=>X.ZP,FE:()=>de,De:()=>Nt,Xu:()=>tt.Z,a6:()=>D,ln:()=>pe.ZP,M3:()=>ge.Z,Rh:()=>$e,VD:()=>at.Z,go:()=>P,Re:()=>_,UL:()=>wt,do:()=>bt,Rt:()=>q,QX:()=>W,az:()=>dt,Hg:()=>C,OB:()=>d.ZP,HZ:()=>A,wm:()=>Bt,Ps:()=>Ce,dk:()=>Ke,Cq:()=>fi.Cq,yy:()=>kt,XU:()=>fi.XU,j9:()=>ke,mA:()=>fi.mA,xZ:()=>oi,CO:()=>Ae,cq:()=>Ze,ZQ:()=>pt,VG:()=>Ut.Z,dj:()=>fi.dj,tO:()=>Ni,C3:()=>Ct,Zt:()=>fi.Zt,Cb:()=>Ii,pp:()=>Ui,YK:()=>we,to:()=>Oi,TW:()=>ae,nA:()=>zi,UG:()=>St.Z,bR:()=>Yt,Gs:()=>It,pn:()=>Xt,Do:()=>fi.Do,H:()=>X.H,KE:()=>X.KE,CD:()=>me,Zz:()=>fi.Zz,tA:()=>Ge.Z,Od:()=>Ti,F0:()=>Ei,mR:()=>Mt,jS:()=>fe,x:()=>yi,qo:()=>V,qL:()=>Tt,nn:()=>je,hQ:()=>N.Z,i8:()=>He.Z});var d=a("./packages/ckeditor5-utils/src/env.ts");function A(J,R,Q,ve){Q=Q||function(wi,mt){return wi===mt};const De=Array.isArray(J)?J:Array.prototype.slice.call(J),rt=Array.isArray(R)?R:Array.prototype.slice.call(R),Pt=function(wi,mt,U){const se=H(wi,mt,U);if(se===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const Te=I(wi,se),Le=I(mt,se),Ye=H(Te,Le,U),Je=wi.length-Ye,At=mt.length-Ye;return{firstIndex:se,lastIndexOld:Je,lastIndexNew:At}}(De,rt,Q);return ve?function(wi,mt){const{firstIndex:U,lastIndexOld:se,lastIndexNew:Te}=wi;if(U===-1)return Array(mt).fill("equal");let Le=[];return U>0&&(Le=Le.concat(Array(U).fill("equal"))),Te-U>0&&(Le=Le.concat(Array(Te-U).fill("insert"))),se-U>0&&(Le=Le.concat(Array(se-U).fill("delete"))),Te<mt&&(Le=Le.concat(Array(mt-Te).fill("equal"))),Le}(Pt,rt.length):function(wi,mt){const U=[],{firstIndex:se,lastIndexOld:Te,lastIndexNew:Le}=mt;return Le-se>0&&U.push({index:se,type:"insert",values:wi.slice(se,Le)}),Te-se>0&&U.push({index:se+(Le-se),type:"delete",howMany:Te-se}),U}(rt,Pt)}function H(J,R,Q){for(let ve=0;ve<Math.max(J.length,R.length);ve++)if(J[ve]===void 0||R[ve]===void 0||!Q(J[ve],R[ve]))return ve;return-1}function I(J,R){return J.slice(R).reverse()}function C(J,R,Q){Q=Q||function(Je,At){return Je===At};const ve=J.length,De=R.length;if(ve>200||De>200||ve+De>300)return C.fastDiff(J,R,Q,!0);let rt,Pt;if(De<ve){const Je=J;J=R,R=Je,rt="delete",Pt="insert"}else rt="insert",Pt="delete";const ai=J.length,wi=R.length,mt=wi-ai,U={},se={};function Te(Je){const At=(se[Je-1]!==void 0?se[Je-1]:-1)+1,_t=se[Je+1]!==void 0?se[Je+1]:-1,Rt=At>_t?-1:1;U[Je+Rt]&&(U[Je]=U[Je+Rt].slice(0)),U[Je]||(U[Je]=[]),U[Je].push(At>_t?rt:Pt);let Vt=Math.max(At,_t),$t=Vt-Je;for(;$t<ai&&Vt<wi&&Q(J[$t],R[Vt]);)$t++,Vt++,U[Je].push("equal");return Vt}let Le,Ye=0;do{for(Le=-Ye;Le<mt;Le++)se[Le]=Te(Le);for(Le=mt+Ye;Le>mt;Le--)se[Le]=Te(Le);se[mt]=Te(mt),Ye++}while(se[mt]!==wi);return U[mt].slice(1)}function me(J,...R){R.forEach(Q=>{const ve=Object.getOwnPropertyNames(Q),De=Object.getOwnPropertySymbols(Q);ve.concat(De).forEach(rt=>{if(rt in J.prototype||typeof Q=="function"&&(rt=="length"||rt=="name"||rt=="prototype"))return;const Pt=Object.getOwnPropertyDescriptor(Q,rt);Pt.enumerable=!1,Object.defineProperty(J.prototype,rt,Pt)})})}C.fastDiff=A;var pe=a("./packages/ckeditor5-utils/src/emittermixin.ts"),ge=a("./packages/ckeditor5-utils/src/eventinfo.ts"),X=a("./packages/ckeditor5-utils/src/ckeditorerror.ts"),te=a("./node_modules/lodash-es/isObject.js");const Z=Symbol("observableProperties"),h=Symbol("boundObservables"),g=Symbol("boundProperties"),r=Symbol("decoratedMethods"),u=Symbol("decoratedOriginal"),w=_((0,pe.ZP)());function _(J){return J?class extends J{set(R,Q){if((0,te.Z)(R))return void Object.keys(R).forEach(De=>{this.set(De,R[De])},this);T(this);const ve=this[Z];if(R in this&&!ve.has(R))throw new X.ZP("observable-set-cannot-override",this);Object.defineProperty(this,R,{enumerable:!0,configurable:!0,get:()=>ve.get(R),set(De){const rt=ve.get(R);let Pt=this.fire(`set:${R}`,R,De,rt);Pt===void 0&&(Pt=De),rt===Pt&&ve.has(R)||(ve.set(R,Pt),this.fire(`change:${R}`,R,Pt,rt))}}),this[R]=Q}bind(...R){if(!R.length||!x(R))throw new X.ZP("observable-bind-wrong-properties",this);if(new Set(R).size!==R.length)throw new X.ZP("observable-bind-duplicate-properties",this);T(this);const Q=this[g];R.forEach(De=>{if(Q.has(De))throw new X.ZP("observable-bind-rebind",this)});const ve=new Map;return R.forEach(De=>{const rt={property:De,to:[]};Q.set(De,rt),ve.set(De,rt)}),{to:z,toMany:L,_observable:this,_bindProperties:R,_to:[],_bindings:ve}}unbind(...R){if(!this[Z])return;const Q=this[g],ve=this[h];if(R.length){if(!x(R))throw new X.ZP("observable-unbind-wrong-properties",this);R.forEach(De=>{const rt=Q.get(De);rt&&(rt.to.forEach(([Pt,ai])=>{const wi=ve.get(Pt),mt=wi[ai];mt.delete(rt),mt.size||delete wi[ai],Object.keys(wi).length||(ve.delete(Pt),this.stopListening(Pt,"change"))}),Q.delete(De))})}else ve.forEach((De,rt)=>{this.stopListening(rt,"change")}),ve.clear(),Q.clear()}decorate(R){T(this);const Q=this[R];if(!Q)throw new X.ZP("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:R});this.on(R,(ve,De)=>{ve.return=Q.apply(this,De)}),this[R]=function(...ve){return this.fire(R,ve)},this[R][u]=Q,this[r]||(this[r]=[]),this[r].push(R)}stopListening(R,Q,ve){if(!R&&this[r]){for(const De of this[r])this[De]=this[De][u];delete this[r]}super.stopListening(R,Q,ve)}}:w}function T(J){J[Z]||(Object.defineProperty(J,Z,{value:new Map}),Object.defineProperty(J,h,{value:new Map}),Object.defineProperty(J,g,{value:new Map}))}function z(...J){const R=function(...rt){if(!rt.length)throw new X.ZP("observable-bind-to-parse-error",null);const Pt={to:[]};let ai;return typeof rt[rt.length-1]=="function"&&(Pt.callback=rt.pop()),rt.forEach(wi=>{if(typeof wi=="string")ai.properties.push(wi);else{if(typeof wi!="object")throw new X.ZP("observable-bind-to-parse-error",null);ai={observable:wi,properties:[]},Pt.to.push(ai)}}),Pt}(...J),Q=Array.from(this._bindings.keys()),ve=Q.length;if(!R.callback&&R.to.length>1)throw new X.ZP("observable-bind-to-no-callback",this);if(ve>1&&R.callback)throw new X.ZP("observable-bind-to-extra-callback",this);var De;R.to.forEach(rt=>{if(rt.properties.length&&rt.properties.length!==ve)throw new X.ZP("observable-bind-to-properties-length",this);rt.properties.length||(rt.properties=this._bindProperties)}),this._to=R.to,R.callback&&(this._bindings.get(Q[0]).callback=R.callback),De=this._observable,this._to.forEach(rt=>{const Pt=De[h];let ai;Pt.get(rt.observable)||De.listenTo(rt.observable,"change",(wi,mt)=>{ai=Pt.get(rt.observable)[mt],ai&&ai.forEach(U=>{c(De,U.property)})})}),function(rt){let Pt;rt._bindings.forEach((ai,wi)=>{rt._to.forEach(mt=>{Pt=mt.properties[ai.callback?0:rt._bindProperties.indexOf(wi)],ai.to.push([mt.observable,Pt]),function(U,se,Te,Le){const Ye=U[h],Je=Ye.get(Te),At=Je||{};At[Le]||(At[Le]=new Set),At[Le].add(se),Je||Ye.set(Te,At)}(rt._observable,ai,mt.observable,Pt)})})}(this),this._bindProperties.forEach(rt=>{c(this._observable,rt)})}function L(J,R,Q){if(this._bindings.size>1)throw new X.ZP("observable-bind-to-many-not-one-binding",this);this.to(...function(ve,De){const rt=ve.map(Pt=>[Pt,De]);return Array.prototype.concat.apply([],rt)}(J,R),Q)}function x(J){return J.every(R=>typeof R=="string")}function c(J,R){const Q=J[g].get(R);let ve;Q.callback?ve=Q.callback.apply(J,Q.to.map(De=>De[0][De[1]])):(ve=Q.to[0],ve=ve[0][ve[1]]),Object.prototype.hasOwnProperty.call(J,R)?J[R]=ve:J.set(R,ve)}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(J=>{_[J]=w.prototype[J]});class D{constructor(){this._replacedElements=[]}replace(R,Q){this._replacedElements.push({element:R,newElement:Q}),R.style.display="none",Q&&R.parentNode.insertBefore(Q,R.nextSibling)}restore(){this._replacedElements.forEach(({element:R,newElement:Q})=>{R.style.display="",Q&&Q.remove()}),this._replacedElements=[]}}function W(J){let R=0;for(const Q of J)R++;return R}function q(J,R){const Q=Math.min(J.length,R.length);for(let ve=0;ve<Q;ve++)if(J[ve]!=R[ve])return ve;return J.length==R.length?"same":J.length<R.length?"prefix":"extension"}function ae(J){return!(!J||!J[Symbol.iterator])}var Ie=a("./node_modules/lodash-es/_baseGetTag.js"),Ve=a("./node_modules/lodash-es/isArray.js"),_e=a("./node_modules/lodash-es/isObjectLike.js"),Me="[object String]";const Qe=function(J){return typeof J=="string"||!(0,Ve.Z)(J)&&(0,_e.Z)(J)&&(0,Ie.Z)(J)==Me};function dt(J,R,Q={},ve=[]){const De=Q&&Q.xmlns,rt=De?J.createElementNS(De,R):J.createElement(R);for(const Pt in Q)rt.setAttribute(Pt,Q[Pt]);!Qe(ve)&&ae(ve)||(ve=[ve]);for(let Pt of ve)Qe(Pt)&&(Pt=J.createTextNode(Pt)),rt.appendChild(Pt);return rt}var nt=a("./node_modules/lodash-es/isPlainObject.js"),qe=a("./node_modules/lodash-es/cloneDeepWith.js"),et=a("./node_modules/lodash-es/isElement.js");class Nt{constructor(R,Q){this._config={},Q&&this.define(jt(Q)),R&&this._setObjectToTarget(this._config,R)}set(R,Q){this._setToTarget(this._config,R,Q)}define(R,Q){this._setToTarget(this._config,R,Q,!0)}get(R){return this._getFromSource(this._config,R)}*names(){for(const R of Object.keys(this._config))yield R}_setToTarget(R,Q,ve,De=!1){if((0,nt.Z)(Q))return void this._setObjectToTarget(R,Q,De);const rt=Q.split(".");Q=rt.pop();for(const Pt of rt)(0,nt.Z)(R[Pt])||(R[Pt]={}),R=R[Pt];if((0,nt.Z)(ve))return(0,nt.Z)(R[Q])||(R[Q]={}),R=R[Q],void this._setObjectToTarget(R,ve,De);De&&R[Q]!==void 0||(R[Q]=ve)}_getFromSource(R,Q){const ve=Q.split(".");Q=ve.pop();for(const De of ve){if(!(0,nt.Z)(R[De])){R=null;break}R=R[De]}return R?jt(R[Q]):void 0}_setObjectToTarget(R,Q,ve){Object.keys(Q).forEach(De=>{this._setToTarget(R,De,Q[De],ve)})}}function jt(J){return(0,qe.Z)(J,yt)}function yt(J){return(0,et.Z)(J)?J:void 0}var tt=a("./packages/ckeditor5-utils/src/dom/emittermixin.ts");function Bt(J){let R=J.parentElement;if(!R)return null;for(;R.tagName!="BODY";){const Q=R.style.overflowY||a.g.window.getComputedStyle(R).overflowY;if(Q==="auto"||Q==="scroll")break;if(R=R.parentElement,!R)return null}return R}let ye;try{ye={window,document}}catch{ye={window:{},document:{}}}const Ae=ye;function Ke(J){const R=[];let Q=J;for(;Q&&Q.nodeType!=Node.DOCUMENT_NODE;)R.unshift(Q),Q=Q.parentNode;return R}function kt(J){return J instanceof HTMLTextAreaElement?J.value:J.innerHTML}function It(J){return Object.prototype.toString.call(J)=="[object Text]"}function Yt(J){return Object.prototype.toString.apply(J)=="[object Range]"}var zt=a("./packages/ckeditor5-utils/src/dom/iswindow.ts");function ot(J){const R=J.ownerDocument.defaultView.getComputedStyle(J);return{top:parseInt(R.borderTopWidth,10),right:parseInt(R.borderRightWidth,10),bottom:parseInt(R.borderBottomWidth,10),left:parseInt(R.borderLeftWidth,10)}}const Dt=["top","right","bottom","left","width","height"];class wt{constructor(R){const Q=Yt(R);if(Object.defineProperty(this,"_source",{value:R._source||R,writable:!0,enumerable:!1}),xi(R)||Q)if(Q){const ve=wt.getDomRangeRects(R);ni(this,wt.getBoundingRect(ve))}else ni(this,R.getBoundingClientRect());else if((0,zt.Z)(R)){const{innerWidth:ve,innerHeight:De}=R;ni(this,{top:0,right:ve,bottom:De,left:0,width:ve,height:De})}else ni(this,R)}clone(){return new wt(this)}moveTo(R,Q){return this.top=Q,this.right=R+this.width,this.bottom=Q+this.height,this.left=R,this}moveBy(R,Q){return this.top+=Q,this.right+=R,this.left+=R,this.bottom+=Q,this}getIntersection(R){const Q={top:Math.max(this.top,R.top),right:Math.min(this.right,R.right),bottom:Math.min(this.bottom,R.bottom),left:Math.max(this.left,R.left),width:0,height:0};return Q.width=Q.right-Q.left,Q.height=Q.bottom-Q.top,Q.width<0||Q.height<0?null:new wt(Q)}getIntersectionArea(R){const Q=this.getIntersection(R);return Q?Q.getArea():0}getArea(){return this.width*this.height}getVisible(){const R=this._source;let Q=this.clone();if(!di(R)){let ve=R.parentNode||R.commonAncestorContainer;for(;ve&&!di(ve);){const De=new wt(ve),rt=Q.getIntersection(De);if(!rt)return null;rt.getArea()<Q.getArea()&&(Q=rt),ve=ve.parentNode}}return Q}isEqual(R){for(const Q of Dt)if(this[Q]!==R[Q])return!1;return!0}contains(R){const Q=this.getIntersection(R);return!(!Q||!Q.isEqual(R))}excludeScrollbarsAndBorders(){const R=this._source;let Q,ve,De;if((0,zt.Z)(R))Q=R.innerWidth-R.document.documentElement.clientWidth,ve=R.innerHeight-R.document.documentElement.clientHeight,De=R.getComputedStyle(R.document.documentElement).direction;else{const rt=ot(R);Q=R.offsetWidth-R.clientWidth-rt.left-rt.right,ve=R.offsetHeight-R.clientHeight-rt.top-rt.bottom,De=R.ownerDocument.defaultView.getComputedStyle(R).direction,this.left+=rt.left,this.top+=rt.top,this.right-=rt.right,this.bottom-=rt.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=Q,De==="ltr"?this.right-=Q:this.left+=Q,this.height-=ve,this.bottom-=ve,this}static getDomRangeRects(R){const Q=[],ve=Array.from(R.getClientRects());if(ve.length)for(const De of ve)Q.push(new wt(De));else{let De=R.startContainer;It(De)&&(De=De.parentNode);const rt=new wt(De.getBoundingClientRect());rt.right=rt.left,rt.width=0,Q.push(rt)}return Q}static getBoundingRect(R){const Q={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let ve=0;for(const De of R)ve++,Q.left=Math.min(Q.left,De.left),Q.top=Math.min(Q.top,De.top),Q.right=Math.max(Q.right,De.right),Q.bottom=Math.max(Q.bottom,De.bottom);return ve==0?null:(Q.width=Q.right-Q.left,Q.height=Q.bottom-Q.top,new wt(Q))}}function ni(J,R){for(const Q of Dt)J[Q]=R[Q]}function di(J){return!!xi(J)&&J===J.ownerDocument.body}function xi(J){return J!==null&&typeof J=="object"&&J.nodeType===1&&typeof J.getBoundingClientRect=="function"}class bt{constructor(R,Q){bt._observerInstance||bt._createObserver(),this._element=R,this._callback=Q,bt._addElementCallback(R,Q),bt._observerInstance.observe(R)}destroy(){bt._deleteElementCallback(this._element,this._callback)}static _addElementCallback(R,Q){bt._elementCallbacks||(bt._elementCallbacks=new Map);let ve=bt._elementCallbacks.get(R);ve||(ve=new Set,bt._elementCallbacks.set(R,ve)),ve.add(Q)}static _deleteElementCallback(R,Q){const ve=bt._getElementCallbacks(R);ve&&(ve.delete(Q),ve.size||(bt._elementCallbacks.delete(R),bt._observerInstance.unobserve(R))),bt._elementCallbacks&&!bt._elementCallbacks.size&&(bt._observerInstance=null,bt._elementCallbacks=null)}static _getElementCallbacks(R){return bt._elementCallbacks?bt._elementCallbacks.get(R):null}static _createObserver(){bt._observerInstance=new Ae.window.ResizeObserver(R=>{for(const Q of R){const ve=bt._getElementCallbacks(Q.target);if(ve)for(const De of ve)De(Q)}})}}function fe(J,R){J instanceof HTMLTextAreaElement&&(J.value=R),J.innerHTML=R}function je(J){return R=>R+J}function Ze(J){let R=0;for(;J.previousSibling;)J=J.previousSibling,R++;return R}function pt(J,R,Q){J.insertBefore(Q,J.childNodes[R]||null)}function Ct(J){return J&&J.nodeType===Node.COMMENT_NODE}bt._observerInstance=null,bt._elementCallbacks=null;var St=a("./packages/ckeditor5-utils/src/dom/isnode.ts");function Xt(J){return!!(J&&J.getClientRects&&J.getClientRects().length)}var Zt=a("./node_modules/lodash-es/isFunction.js");function oi({element:J,target:R,positions:Q,limiter:ve,fitInViewport:De,viewportOffsetConfig:rt}){(0,Zt.Z)(R)&&(R=R()),(0,Zt.Z)(ve)&&(ve=ve());const Pt=function(Te){return Te&&Te.parentNode?Te.offsetParent===Ae.document.body?null:Te.offsetParent:null}(J),ai=new wt(J),wi=new wt(R);let mt;const U=De&&function(Te){Te=Object.assign({top:0,bottom:0,left:0,right:0},Te);const Le=new wt(Ae.window);return Le.top+=Te.top,Le.height-=Te.top,Le.bottom-=Te.bottom,Le.height-=Te.bottom,Le}(rt)||null,se={targetRect:wi,elementRect:ai,positionedElementAncestor:Pt,viewportRect:U};if(ve||De){const Te=ve&&new wt(ve).getVisible();Object.assign(se,{limiterRect:Te,viewportRect:U}),mt=function(Le,Ye){const{elementRect:Je}=Ye,At=Je.getArea(),_t=Le.map($t=>new gi($t,Ye)).filter($t=>!!$t.name);let Rt=0,Vt=null;for(const $t of _t){const{limiterIntersectionArea:li,viewportIntersectionArea:Ci}=$t;if(li===At)return $t;const hi=Ci**2+li**2;hi>Rt&&(Rt=hi,Vt=$t)}return Vt}(Q,se)||new gi(Q[0],se)}else mt=new gi(Q[0],se);return mt}function bi(J){const{scrollX:R,scrollY:Q}=Ae.window;return J.clone().moveBy(R,Q)}class gi{constructor(R,Q){const ve=R(Q.targetRect,Q.elementRect,Q.viewportRect);if(!ve)return;const{left:De,top:rt,name:Pt,config:ai}=ve;this.name=Pt,this.config=ai,this._positioningFunctionCorrdinates={left:De,top:rt},this._options=Q}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const R=this._options.limiterRect;if(R){const Q=this._options.viewportRect;if(!Q)return R.getIntersectionArea(this._rect);{const ve=R.getIntersection(Q);if(ve)return ve.getIntersectionArea(this._rect)}}return 0}get viewportIntersectionArea(){const R=this._options.viewportRect;return R?R.getIntersectionArea(this._rect):0}get _rect(){return this._cachedRect||(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCorrdinates.left,this._positioningFunctionCorrdinates.top)),this._cachedRect}get _absoluteRect(){return this._cachedAbsoluteRect||(this._cachedAbsoluteRect=bi(this._rect),this._options.positionedElementAncestor&&function(R,Q){const ve=bi(new wt(Q)),De=ot(Q);let rt=0,Pt=0;rt-=ve.left,Pt-=ve.top,rt+=Q.scrollLeft,Pt+=Q.scrollTop,rt-=De.left,Pt-=De.top,R.moveBy(rt,Pt)}(this._cachedAbsoluteRect,this._options.positionedElementAncestor)),this._cachedAbsoluteRect}}function Ti(J){const R=J.parentNode;R&&R.removeChild(J)}function Mt({target:J,viewportOffset:R=0}){const Q=Li(J);let ve=Q,De=null;for(;ve;){let rt;rt=dn(ve==Q?J:De),Yi(rt,()=>pi(J,ve));const Pt=pi(J,ve);if(Ri(ve,Pt,R),ve.parent!=ve){if(De=ve.frameElement,ve=ve.parent,!De)return}else ve=null}}function Ei(J){Yi(dn(J),()=>new wt(J))}function Ri(J,R,Q){const ve=R.clone().moveBy(0,Q),De=R.clone().moveBy(0,-Q),rt=new wt(J).excludeScrollbarsAndBorders();if(![De,ve].every(Pt=>rt.contains(Pt))){let{scrollX:Pt,scrollY:ai}=J;Pi(De,rt)?ai-=rt.top-R.top+Q:ji(ve,rt)&&(ai+=R.bottom-rt.bottom+Q),qi(R,rt)?Pt-=rt.left-R.left+Q:nn(R,rt)&&(Pt+=R.right-rt.right+Q),J.scrollTo(Pt,ai)}}function Yi(J,R){const Q=Li(J);let ve,De;for(;J!=Q.document.body;)De=R(),ve=new wt(J).excludeScrollbarsAndBorders(),ve.contains(De)||(Pi(De,ve)?J.scrollTop-=ve.top-De.top:ji(De,ve)&&(J.scrollTop+=De.bottom-ve.bottom),qi(De,ve)?J.scrollLeft-=ve.left-De.left:nn(De,ve)&&(J.scrollLeft+=De.right-ve.right)),J=J.parentNode}function ji(J,R){return J.bottom>R.bottom}function Pi(J,R){return J.top<R.top}function qi(J,R){return J.left<R.left}function nn(J,R){return J.right>R.right}function Li(J){return Yt(J)?J.startContainer.ownerDocument.defaultView:J.ownerDocument.defaultView}function dn(J){if(Yt(J)){let R=J.commonAncestorContainer;return It(R)&&(R=R.parentNode),R}return J.parentNode}function pi(J,R){const Q=Li(J),ve=new wt(J);if(Q===R)return ve;{let De=Q;for(;De!=R;){const rt=De.frameElement,Pt=new wt(rt).excludeScrollbarsAndBorders();ve.moveBy(Pt.left,Pt.top),De=De.parent}}return ve}var fi=a("./packages/ckeditor5-utils/src/keyboard.ts");const Ki=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function ke(J){return Ki.includes(J)?"rtl":"ltr"}function V(J){return Array.isArray(J)?J:[J]}function F(J,R,Q=1){if(typeof Q!="number")throw new X.ZP("translation-service-quantity-not-a-number",null,{quantity:Q});const ve=Object.keys(Ae.window.CKEDITOR_TRANSLATIONS).length;ve===1&&(J=Object.keys(Ae.window.CKEDITOR_TRANSLATIONS)[0]);const De=R.id||R.string;if(ve===0||!function(wi,mt){return!!Ae.window.CKEDITOR_TRANSLATIONS[wi]&&!!Ae.window.CKEDITOR_TRANSLATIONS[wi].dictionary[mt]}(J,De))return Q!==1?R.plural:R.string;const rt=Ae.window.CKEDITOR_TRANSLATIONS[J].dictionary,Pt=Ae.window.CKEDITOR_TRANSLATIONS[J].getPluralForm||(wi=>wi===1?0:1),ai=rt[De];return typeof ai=="string"?ai:ai[Number(Pt(Q))]}Ae.window.CKEDITOR_TRANSLATIONS||(Ae.window.CKEDITOR_TRANSLATIONS={});class P{constructor({uiLanguage:R="en",contentLanguage:Q}={}){this.uiLanguage=R,this.contentLanguage=Q||this.uiLanguage,this.uiLanguageDirection=ke(this.uiLanguage),this.contentLanguageDirection=ke(this.contentLanguage),this.t=(ve,De)=>this._t(ve,De)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(R,Q=[]){Q=V(Q),typeof R=="string"&&(R={string:R});const ve=R.plural?Q[0]:1;return function(De,rt){return De.replace(/%(\d+)/g,(Pt,ai)=>ai<rt.length?rt[ai]:Pt)}(F(this.uiLanguage,R,ve),Q)}}var N=a("./packages/ckeditor5-utils/src/uid.ts");class de extends(0,pe.ZP)(){constructor(R={},Q={}){super();const ve=ae(R);if(ve||(Q=R),this._items=[],this._itemMap=new Map,this._idProperty=Q.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],ve)for(const De of R)this._items.push(De),this._itemMap.set(this._getItemIdBeforeAdding(De),De)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(R,Q){return this.addMany([R],Q)}addMany(R,Q){if(Q===void 0)Q=this._items.length;else if(Q>this._items.length||Q<0)throw new X.ZP("collection-add-item-invalid-index",this);let ve=0;for(const De of R){const rt=this._getItemIdBeforeAdding(De),Pt=Q+ve;this._items.splice(Pt,0,De),this._itemMap.set(rt,De),this.fire("add",De,Pt),ve++}return this.fire("change",{added:R,removed:[],index:Q}),this}get(R){let Q;if(typeof R=="string")Q=this._itemMap.get(R);else{if(typeof R!="number")throw new X.ZP("collection-get-invalid-arg",this);Q=this._items[R]}return Q||null}has(R){if(typeof R=="string")return this._itemMap.has(R);{const Q=R[this._idProperty];return Q&&this._itemMap.has(Q)}}getIndex(R){let Q;return Q=typeof R=="string"?this._itemMap.get(R):R,Q?this._items.indexOf(Q):-1}remove(R){const[Q,ve]=this._remove(R);return this.fire("change",{added:[],removed:[Q],index:ve}),Q}map(R,Q){return this._items.map(R,Q)}find(R,Q){return this._items.find(R,Q)}filter(R,Q){return this._items.filter(R,Q)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const R=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:R,index:0})}bindTo(R){if(this._bindToCollection)throw new X.ZP("collection-bind-to-rebind",this);return this._bindToCollection=R,{as:Q=>{this._setUpBindToBinding(ve=>new Q(ve))},using:Q=>{typeof Q=="function"?this._setUpBindToBinding(Q):this._setUpBindToBinding(ve=>ve[Q])}}}_setUpBindToBinding(R){const Q=this._bindToCollection,ve=(De,rt,Pt)=>{const ai=Q._bindToCollection==this,wi=Q._bindToInternalToExternalMap.get(rt);if(ai&&wi)this._bindToExternalToInternalMap.set(rt,wi),this._bindToInternalToExternalMap.set(wi,rt);else{const mt=R(rt);if(!mt)return void this._skippedIndexesFromExternal.push(Pt);let U=Pt;for(const se of this._skippedIndexesFromExternal)Pt>se&&U--;for(const se of Q._skippedIndexesFromExternal)U>=se&&U++;this._bindToExternalToInternalMap.set(rt,mt),this._bindToInternalToExternalMap.set(mt,rt),this.add(mt,U);for(let se=0;se<Q._skippedIndexesFromExternal.length;se++)U<=Q._skippedIndexesFromExternal[se]&&Q._skippedIndexesFromExternal[se]++}};for(const De of Q)ve(0,De,Q.getIndex(De));this.listenTo(Q,"add",ve),this.listenTo(Q,"remove",(De,rt,Pt)=>{const ai=this._bindToExternalToInternalMap.get(rt);ai&&this.remove(ai),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((wi,mt)=>(Pt<mt&&wi.push(mt-1),Pt>mt&&wi.push(mt),wi),[])})}_getItemIdBeforeAdding(R){const Q=this._idProperty;let ve;if(Q in R){if(ve=R[Q],typeof ve!="string")throw new X.ZP("collection-add-invalid-id",this);if(this.get(ve))throw new X.ZP("collection-add-item-already-exists",this)}else R[Q]=ve=(0,N.Z)();return ve}_remove(R){let Q,ve,De,rt=!1;const Pt=this._idProperty;if(typeof R=="string"?(ve=R,De=this._itemMap.get(ve),rt=!De,De&&(Q=this._items.indexOf(De))):typeof R=="number"?(Q=R,De=this._items[Q],rt=!De,De&&(ve=De[Pt])):(De=R,ve=De[Pt],Q=this._items.indexOf(De),rt=Q==-1||!this._itemMap.get(ve)),rt)throw new X.ZP("collection-remove-404",this);this._items.splice(Q,1),this._itemMap.delete(ve);const ai=this._bindToInternalToExternalMap.get(De);return this._bindToInternalToExternalMap.delete(De),this._bindToExternalToInternalMap.delete(ai),this.fire("remove",De,Q),[De,Q]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}function Ce(J){const R=J.next();return R.done?null:R.value}class $e extends(0,tt.Z)(_()){constructor(){super(),this._elements=new Set,this._nextEventLoopTimeout=null,this.set("isFocused",!1),this.set("focusedElement",null)}add(R){if(this._elements.has(R))throw new X.ZP("focustracker-add-element-already-exist",this);this.listenTo(R,"focus",()=>this._focus(R),{useCapture:!0}),this.listenTo(R,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(R)}remove(R){R===this.focusedElement&&this._blur(),this._elements.has(R)&&(this.stopListening(R),this._elements.delete(R))}destroy(){this.stopListening()}_focus(R){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=R,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}var at=a("./packages/ckeditor5-utils/src/keystrokehandler.ts");function Tt(J){return ae(J)?new Map(J):function(R){const Q=new Map;for(const ve in R)Q.set(ve,R[ve]);return Q}(J)}var Ge=a("./packages/ckeditor5-utils/src/priorities.ts"),Ut=a("./packages/ckeditor5-utils/src/inserttopriorityarray.ts");const ci=1e4;function yi(J,R,Q,ve){if(Math.max(R.length,J.length)>ci)return J.slice(0,Q).concat(R).concat(J.slice(Q+ve,J.length));{const De=Array.from(J);return De.splice(Q,ve,...R),De}}function Ni(J){return!!J&&J.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(J)}function Ii(J){return!!J&&J.length==1&&/[\ud800-\udbff]/.test(J)}function zi(J){return!!J&&J.length==1&&/[\udc00-\udfff]/.test(J)}function Oi(J,R){return Ii(J.charAt(R-1))&&zi(J.charAt(R))}function Ui(J,R){return Ni(J.charAt(R))}const Wt=function(){const J=/\p{Regional_Indicator}{2}/u.source,R="(?:"+[/\p{Emoji}[\u{E0020}-\u{E007E}]+\u{E007F}/u,/\p{Emoji}\u{FE0F}?\u{20E3}/u,/\p{Emoji}\u{FE0F}/u,/(?=\p{General_Category=Other_Symbol})\p{Emoji}\p{Emoji_Modifier}*/u].map(Q=>Q.source).join("|")+")";return new RegExp(`${J}|${R}(?:\u200D${R})*`,"ug")}();function we(J,R){const Q=String(J).matchAll(Wt);return Array.from(Q).some(ve=>ve.index<R&&R<ve.index+ve[0].length)}var He=a("./packages/ckeditor5-utils/src/version.ts")},"./packages/ckeditor5-utils/src/inserttopriorityarray.ts":(f,v,a)=>{"use strict";a.d(v,{Z:()=>A});var d=a("./packages/ckeditor5-utils/src/priorities.ts");function A(H,I){const C=d.Z.get(I.priority);for(let me=0;me<H.length;me++)if(d.Z.get(H[me].priority)<C)return void H.splice(me,0,I);H.push(I)}},"./packages/ckeditor5-utils/src/keyboard.ts":(f,v,a)=>{"use strict";a.d(v,{Cq:()=>pe,Do:()=>C,XU:()=>X,Zt:()=>h,Zz:()=>ge,dj:()=>te,mA:()=>Z});var d=a("./packages/ckeditor5-utils/src/ckeditorerror.ts"),A=a("./packages/ckeditor5-utils/src/env.ts");const H={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21E7"},I={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},C=function(){const g={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let r=65;r<=90;r++)g[String.fromCharCode(r).toLowerCase()]=r;for(let r=48;r<=57;r++)g[r-48]=r;for(let r=112;r<=123;r++)g["f"+(r-111)]=r;for(const r of"`-=[];',./\\")g[r]=r.charCodeAt(0);return g}(),me=Object.fromEntries(Object.entries(C).map(([g,r])=>[r,g.charAt(0).toUpperCase()+g.slice(1)]));function pe(g){let r;if(typeof g=="string"){if(r=C[g.toLowerCase()],!r)throw new d.ZP("keyboard-unknown-key",null,{key:g})}else r=g.keyCode+(g.altKey?C.alt:0)+(g.ctrlKey?C.ctrl:0)+(g.shiftKey?C.shift:0)+(g.metaKey?C.cmd:0);return r}function ge(g){return typeof g=="string"&&(g=function(r){return r.split("+").map(u=>u.trim())}(g)),g.map(r=>typeof r=="string"?function(u){if(u.endsWith("!"))return pe(u.slice(0,-1));const w=pe(u);return A.ZP.isMac&&w==C.ctrl?C.cmd:w}(r):r).reduce((r,u)=>u+r,0)}function X(g){let r=ge(g);return Object.entries(A.ZP.isMac?H:I).reduce((u,[w,_])=>(r&C[w]&&(r&=~C[w],u+=_),u),"")+(r?me[r]:"")}function te(g){return g==C.arrowright||g==C.arrowleft||g==C.arrowup||g==C.arrowdown}function Z(g,r){const u=r==="ltr";switch(g){case C.arrowleft:return u?"left":"right";case C.arrowright:return u?"right":"left";case C.arrowup:return"up";case C.arrowdown:return"down"}}function h(g,r){const u=Z(g,r);return u==="down"||u==="right"}},"./packages/ckeditor5-utils/src/keystrokehandler.ts":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./packages/ckeditor5-utils/src/dom/emittermixin.ts"),A=a("./packages/ckeditor5-utils/src/keyboard.ts");class H{constructor(){this._listener=new((0,d.Z)())}listenTo(C){this._listener.listenTo(C,"keydown",(me,pe)=>{this._listener.fire("_keydown:"+(0,A.Cq)(pe),pe)})}set(C,me,pe={}){const ge=(0,A.Zz)(C),X=pe.priority;this._listener.listenTo(this._listener,"_keydown:"+ge,(te,Z)=>{me(Z,()=>{Z.preventDefault(),Z.stopPropagation(),te.stop()}),te.return=!0},{priority:X})}press(C){return!!this._listener.fire("_keydown:"+(0,A.Cq)(C),C)}destroy(){this._listener.stopListening()}}},"./packages/ckeditor5-utils/src/priorities.ts":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d={get(A="normal"){return typeof A!="number"?this[A]||this.normal:A},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5}},"./packages/ckeditor5-utils/src/uid.ts":(f,v,a)=>{"use strict";a.d(v,{Z:()=>A});const d=new Array(256).fill("").map((H,I)=>("0"+I.toString(16)).slice(-2));function A(){const H=4294967296*Math.random()>>>0,I=4294967296*Math.random()>>>0,C=4294967296*Math.random()>>>0,me=4294967296*Math.random()>>>0;return"e"+d[H>>0&255]+d[H>>8&255]+d[H>>16&255]+d[H>>24&255]+d[I>>0&255]+d[I>>8&255]+d[I>>16&255]+d[I>>24&255]+d[C>>0&255]+d[C>>8&255]+d[C>>16&255]+d[C>>24&255]+d[me>>0&255]+d[me>>8&255]+d[me>>16&255]+d[me>>24&255]}},"./packages/ckeditor5-utils/src/version.ts":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./packages/ckeditor5-utils/src/ckeditorerror.ts");const A="36.0.1",H=A,I=typeof window=="object"?window:a.g;if(I.CKEDITOR_VERSION)throw new d.ZP("ckeditor-duplicated-modules",null);I.CKEDITOR_VERSION=A},"./packages/ckeditor5-widget/src/index.ts":(f,v,a)=>{"use strict";a.d(v,{s4:()=>h,Uo:()=>g,$L:()=>ye,WR:()=>xi,e8:()=>Ke,Ww:()=>et,KT:()=>c,id:()=>L,Qd:()=>r,em:()=>T,l6:()=>z,XC:()=>u,sC:()=>x,$n:()=>D});var d=a("./packages/ckeditor5-core/src/index.ts"),A=a("./packages/ckeditor5-engine/src/index.ts"),H=a("./packages/ckeditor5-typing/src/index.ts"),I=a("./packages/ckeditor5-utils/src/index.ts"),C=a("./packages/ckeditor5-ui/src/index.ts"),me=a("./packages/ckeditor5-enter/src/index.ts");class pe extends(0,I.ln)(){constructor(){super(),this._stack=[]}add(fe,je){const Ze=this._stack,pt=Ze[0];this._insertDescriptor(fe);const Ct=Ze[0];pt===Ct||ge(pt,Ct)||this.fire("change:top",{oldDescriptor:pt,newDescriptor:Ct,writer:je})}remove(fe,je){const Ze=this._stack,pt=Ze[0];this._removeDescriptor(fe);const Ct=Ze[0];pt===Ct||ge(pt,Ct)||this.fire("change:top",{oldDescriptor:pt,newDescriptor:Ct,writer:je})}_insertDescriptor(fe){const je=this._stack,Ze=je.findIndex(Ct=>Ct.id===fe.id);if(ge(fe,je[Ze]))return;Ze>-1&&je.splice(Ze,1);let pt=0;for(;je[pt]&&X(je[pt],fe);)pt++;je.splice(pt,0,fe)}_removeDescriptor(fe){const je=this._stack,Ze=je.findIndex(pt=>pt.id===fe);Ze>-1&&je.splice(Ze,1)}}function ge(bt,fe){return bt&&fe&&bt.priority==fe.priority&&te(bt.classes)==te(fe.classes)}function X(bt,fe){return bt.priority>fe.priority||!(bt.priority<fe.priority)&&te(bt.classes)>te(fe.classes)}function te(bt){return Array.isArray(bt)?bt.sort().join(","):bt}const Z='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',h="ck-widget",g="ck-widget_selected";function r(bt){return!!bt.is("element")&&!!bt.getCustomProperty("widget")}function u(bt,fe,je={}){if(!bt.is("containerElement"))throw new I.Bb("widget-to-widget-wrong-element-type",null,{element:bt});return fe.setAttribute("contenteditable","false",bt),fe.addClass(h,bt),fe.setCustomProperty("widget",!0,bt),bt.getFillerOffset=W,fe.setCustomProperty("widgetLabel",[],bt),je.label&&z(bt,je.label),je.hasSelectionHandle&&function(Ze,pt){const Ct=pt.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(St){const Xt=this.toDomElement(St),Zt=new C.mO;return Zt.set("content",Z),Zt.render(),Xt.appendChild(Zt.element),Xt});pt.insert(pt.createPositionAt(Ze,0),Ct),pt.addClass(["ck-widget_with-selection-handle"],Ze)}(bt,fe),T(bt,fe),bt}function w(bt,fe,je){if(fe.classes&&je.addClass((0,I.qo)(fe.classes),bt),fe.attributes)for(const Ze in fe.attributes)je.setAttribute(Ze,fe.attributes[Ze],bt)}function _(bt,fe,je){if(fe.classes&&je.removeClass((0,I.qo)(fe.classes),bt),fe.attributes)for(const Ze in fe.attributes)je.removeAttribute(Ze,bt)}function T(bt,fe,je=w,Ze=_){const pt=new pe;pt.on("change:top",(Ct,St)=>{St.oldDescriptor&&Ze(bt,St.oldDescriptor,St.writer),St.newDescriptor&&je(bt,St.newDescriptor,St.writer)}),fe.setCustomProperty("addHighlight",(Ct,St,Xt)=>pt.add(St,Xt),bt),fe.setCustomProperty("removeHighlight",(Ct,St,Xt)=>pt.remove(St,Xt),bt)}function z(bt,fe){bt.getCustomProperty("widgetLabel").push(fe)}function L(bt){return bt.getCustomProperty("widgetLabel").reduce((fe,je)=>typeof je=="function"?fe?fe+". "+je():je():fe?fe+". "+je:je,"")}function x(bt,fe,je={}){return fe.addClass(["ck-editor__editable","ck-editor__nested-editable"],bt),fe.setAttribute("role","textbox",bt),je.label&&fe.setAttribute("aria-label",je.label,bt),fe.setAttribute("contenteditable",bt.isReadOnly?"false":"true",bt),bt.on("change:isReadOnly",(Ze,pt,Ct)=>{fe.setAttribute("contenteditable",Ct?"false":"true",bt)}),bt.on("change:isFocused",(Ze,pt,Ct)=>{Ct?fe.addClass("ck-editor__nested-editable_focused",bt):fe.removeClass("ck-editor__nested-editable_focused",bt)}),T(bt,fe),bt}function c(bt,fe){const je=bt.getSelectedElement();if(je){const Ze=Ie(bt);if(Ze)return fe.createRange(fe.createPositionAt(je,Ze))}return(0,A.KT)(bt,fe)}function D(bt,fe){return(je,Ze)=>{const{mapper:pt,viewPosition:Ct}=Ze,St=pt.findMappedViewAncestor(Ct);if(!fe(St))return;const Xt=pt.toModelElement(St);Ze.modelPosition=bt.createPositionAt(Xt,Ct.isAtStart?"before":"after")}}function W(){return null}const q="widget-type-around";function ae(bt,fe,je){return!!bt&&r(bt)&&!je.isInline(fe)}function Ie(bt){return bt.getAttribute(q)}var Ve=a("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_e=a.n(Ve),Me=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-widget/theme/widgettypearound.css"),Qe={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};_e()(Me.Z,Qe),Me.Z.locals;const dt=["before","after"],nt=new DOMParser().parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild,qe="ck-widget__type-around_disabled";class et extends d.Sy{static get pluginName(){return"WidgetTypeAround"}static get requires(){return[me.C,H.HG]}constructor(fe){super(fe),this._currentFakeCaretModelElement=null}init(){const fe=this.editor,je=fe.editing.view;this.on("change:isEnabled",(Ze,pt,Ct)=>{je.change(St=>{for(const Xt of je.document.roots)Ct?St.removeClass(qe,Xt):St.addClass(qe,Xt)}),Ct||fe.model.change(St=>{St.removeSelectionAttribute(q)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(fe,je){const Ze=this.editor,pt=Ze.editing.view,Ct=Ze.model.schema.getAttributesWithProperty(fe,"copyOnReplace",!0);Ze.execute("insertParagraph",{position:Ze.model.createPositionAt(fe,je),attributes:Ct}),pt.focus(),pt.scrollToTheSelection()}_listenToIfEnabled(fe,je,Ze,pt){this.listenTo(fe,je,(...Ct)=>{this.isEnabled&&Ze(...Ct)},pt)}_insertParagraphAccordingToFakeCaretPosition(){const fe=this.editor.model.document.selection,je=Ie(fe);if(!je)return!1;const Ze=fe.getSelectedElement();return this._insertParagraph(Ze,je),!0}_enableTypeAroundUIInjection(){const fe=this.editor,je=fe.model.schema,Ze=fe.locale.t,pt={before:Ze("Insert paragraph before block"),after:Ze("Insert paragraph after block")};fe.editing.downcastDispatcher.on("insert",(Ct,St,Xt)=>{const Zt=Xt.mapper.toViewElement(St.item);Zt&&ae(Zt,St.item,je)&&(function(oi,bi,gi){const Ti=oi.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(Mt){const Ei=this.toDomElement(Mt);return function(Ri,Yi){for(const ji of dt){const Pi=new C.YS({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${ji}`],title:Yi[ji],"aria-hidden":"true"},children:[Ri.ownerDocument.importNode(nt,!0)]});Ri.appendChild(Pi.render())}}(Ei,bi),function(Ri){const Yi=new C.YS({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});Ri.appendChild(Yi.render())}(Ei),Ei});oi.insert(oi.createPositionAt(gi,"end"),Ti)}(Xt.writer,pt,Zt),Zt.getCustomProperty("widgetLabel").push(()=>this.isEnabled?Ze("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const fe=this.editor,je=fe.model,Ze=je.document.selection,pt=je.schema,Ct=fe.editing.view;function St(Xt){return`ck-widget_type-around_show-fake-caret_${Xt}`}this._listenToIfEnabled(Ct.document,"arrowKey",(Xt,Zt)=>{this._handleArrowKeyPress(Xt,Zt)},{context:[r,"$text"],priority:"high"}),this._listenToIfEnabled(Ze,"change:range",(Xt,Zt)=>{Zt.directChange&&fe.model.change(oi=>{oi.removeSelectionAttribute(q)})}),this._listenToIfEnabled(je.document,"change:data",()=>{const Xt=Ze.getSelectedElement();Xt&&ae(fe.editing.mapper.toViewElement(Xt),Xt,pt)||fe.model.change(Zt=>{Zt.removeSelectionAttribute(q)})}),this._listenToIfEnabled(fe.editing.downcastDispatcher,"selection",(Xt,Zt,oi)=>{const bi=oi.writer;if(this._currentFakeCaretModelElement){const Ei=oi.mapper.toViewElement(this._currentFakeCaretModelElement);Ei&&(bi.removeClass(dt.map(St),Ei),this._currentFakeCaretModelElement=null)}const gi=Zt.selection.getSelectedElement();if(!gi)return;const Ti=oi.mapper.toViewElement(gi);if(!ae(Ti,gi,pt))return;const Mt=Ie(Zt.selection);Mt&&(bi.addClass(St(Mt),Ti),this._currentFakeCaretModelElement=gi)}),this._listenToIfEnabled(fe.ui.focusTracker,"change:isFocused",(Xt,Zt,oi)=>{oi||fe.model.change(bi=>{bi.removeSelectionAttribute(q)})})}_handleArrowKeyPress(fe,je){const Ze=this.editor,pt=Ze.model,Ct=pt.document.selection,St=pt.schema,Xt=Ze.editing.view,Zt=je.keyCode,oi=(0,I.Zt)(Zt,Ze.locale.contentLanguageDirection),bi=Xt.document.selection.getSelectedElement();let gi;ae(bi,Ze.editing.mapper.toModelElement(bi),St)?gi=this._handleArrowKeyPressOnSelectedWidget(oi):Ct.isCollapsed?gi=this._handleArrowKeyPressWhenSelectionNextToAWidget(oi):je.shiftKey||(gi=this._handleArrowKeyPressWhenNonCollapsedSelection(oi)),gi&&(je.preventDefault(),fe.stop())}_handleArrowKeyPressOnSelectedWidget(fe){const je=this.editor.model,Ze=Ie(je.document.selection);return je.change(pt=>Ze?Ze!==(fe?"after":"before")?(pt.removeSelectionAttribute(q),!0):!1:(pt.setSelectionAttribute(q,fe?"after":"before"),!0))}_handleArrowKeyPressWhenSelectionNextToAWidget(fe){const je=this.editor,Ze=je.model,pt=Ze.schema,Ct=je.plugins.get("Widget"),St=Ct._getObjectElementNextToSelection(fe);return!!ae(je.editing.mapper.toViewElement(St),St,pt)&&(Ze.change(Xt=>{Ct._setSelectionOverElement(St),Xt.setSelectionAttribute(q,fe?"before":"after")}),!0)}_handleArrowKeyPressWhenNonCollapsedSelection(fe){const je=this.editor,Ze=je.model,pt=Ze.schema,Ct=je.editing.mapper,St=Ze.document.selection,Xt=fe?St.getLastPosition().nodeBefore:St.getFirstPosition().nodeAfter;return!!ae(Ct.toViewElement(Xt),Xt,pt)&&(Ze.change(Zt=>{Zt.setSelection(Xt,"on"),Zt.setSelectionAttribute(q,fe?"after":"before")}),!0)}_enableInsertingParagraphsOnButtonClick(){const fe=this.editor,je=fe.editing.view;this._listenToIfEnabled(je.document,"mousedown",(Ze,pt)=>{const Ct=pt.domTarget.closest(".ck-widget__type-around__button");if(!Ct)return;const St=function(oi){return oi.classList.contains("ck-widget__type-around__button_before")?"before":"after"}(Ct),Xt=function(oi,bi){const gi=oi.closest(".ck-widget");return bi.mapDomToView(gi)}(Ct,je.domConverter),Zt=fe.editing.mapper.toModelElement(Xt);this._insertParagraph(Zt,St),pt.preventDefault(),Ze.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const fe=this.editor,je=fe.model.document.selection,Ze=fe.editing.view;this._listenToIfEnabled(Ze.document,"enter",(pt,Ct)=>{if(pt.eventPhase!="atTarget")return;const St=je.getSelectedElement(),Xt=fe.editing.mapper.toViewElement(St),Zt=fe.model.schema;let oi;this._insertParagraphAccordingToFakeCaretPosition()?oi=!0:ae(Xt,St,Zt)&&(this._insertParagraph(St,Ct.isSoft?"before":"after"),oi=!0),oi&&(Ct.preventDefault(),pt.stop())},{context:r})}_enableInsertingParagraphsOnTypingKeystroke(){const fe=this.editor.editing.view.document;this._listenToIfEnabled(fe,"insertText",(je,Ze)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(Ze.selection=fe.selection)},{priority:"high"}),I.OB.isAndroid?this._listenToIfEnabled(fe,"keydown",(je,Ze)=>{Ze.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(fe,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const fe=this.editor,je=fe.editing.view,Ze=fe.model,pt=Ze.schema;this._listenToIfEnabled(je.document,"delete",(Ct,St)=>{if(Ct.eventPhase!="atTarget")return;const Xt=Ie(Ze.document.selection);if(!Xt)return;const Zt=St.direction,oi=Ze.document.selection.getSelectedElement(),bi=Zt=="forward";if(Xt==="before"===bi)fe.execute("delete",{selection:Ze.createSelection(oi,"on")});else{const gi=pt.getNearestSelectionRange(Ze.createPositionAt(oi,Xt),Zt);if(gi)if(gi.isCollapsed){const Ti=Ze.createSelection(gi.start);if(Ze.modifySelection(Ti,{direction:Zt}),Ti.focus.isEqual(gi.start)){const Mt=function(Ei,Ri){let Yi=Ri;for(const ji of Ri.getAncestors({parentFirst:!0})){if(ji.childCount>1||Ei.isLimit(ji))break;Yi=ji}return Yi}(pt,gi.start.parent);Ze.deleteContent(Ze.createSelection(Mt,"on"),{doNotAutoparagraph:!0})}else Ze.change(Mt=>{Mt.setSelection(gi),fe.execute(bi?"deleteForward":"delete")})}else Ze.change(Ti=>{Ti.setSelection(gi),fe.execute(bi?"deleteForward":"delete")})}St.preventDefault(),Ct.stop()},{context:r})}_enableInsertContentIntegration(){const fe=this.editor,je=this.editor.model,Ze=je.document.selection;this._listenToIfEnabled(fe.model,"insertContent",(pt,[Ct,St])=>{if(St&&!St.is("documentSelection"))return;const Xt=Ie(Ze);return Xt?(pt.stop(),je.change(Zt=>{const oi=Ze.getSelectedElement(),bi=je.createPositionAt(oi,Xt),gi=Zt.createSelection(bi),Ti=je.insertContent(Ct,gi);return Zt.setSelection(gi),Ti})):void 0},{priority:"high"})}_enableInsertObjectIntegration(){const fe=this.editor,je=this.editor.model.document.selection;this._listenToIfEnabled(fe.model,"insertObject",(Ze,pt)=>{const[,Ct,,St={}]=pt;if(Ct&&!Ct.is("documentSelection"))return;const Xt=Ie(je);Xt&&(St.findOptimalPosition=Xt,pt[3]=St)},{priority:"high"})}_enableDeleteContentIntegration(){const fe=this.editor,je=this.editor.model.document.selection;this._listenToIfEnabled(fe.model,"deleteContent",(Ze,[pt])=>{pt&&!pt.is("documentSelection")||Ie(je)&&Ze.stop()},{priority:"high"})}}function Nt(bt){const fe=bt.model;return(je,Ze)=>{const pt=Ze.keyCode==I.Do.arrowup,Ct=Ze.keyCode==I.Do.arrowdown,St=Ze.shiftKey,Xt=fe.document.selection;if(!pt&&!Ct)return;const Zt=Ct;if(St&&function(bi,gi){return!bi.isCollapsed&&bi.isBackward==gi}(Xt,Zt))return;const oi=function(bi,gi,Ti){const Mt=bi.model;if(Ti){const Ei=gi.isCollapsed?gi.focus:gi.getLastPosition(),Ri=jt(Mt,Ei,"forward");if(!Ri)return null;const Yi=Mt.createRange(Ei,Ri),ji=yt(Mt.schema,Yi,"backward");return ji?Mt.createRange(Ei,ji):null}{const Ei=gi.isCollapsed?gi.focus:gi.getFirstPosition(),Ri=jt(Mt,Ei,"backward");if(!Ri)return null;const Yi=Mt.createRange(Ri,Ei),ji=yt(Mt.schema,Yi,"forward");return ji?Mt.createRange(ji,Ei):null}}(bt,Xt,Zt);if(oi){if(oi.isCollapsed&&(Xt.isCollapsed||St))return;(oi.isCollapsed||function(bi,gi,Ti){const Mt=bi.model,Ei=bi.view.domConverter;if(Ti){const qi=Mt.createSelection(gi.start);Mt.modifySelection(qi),qi.focus.isAtEnd||gi.start.isEqual(qi.focus)||(gi=Mt.createRange(qi.focus,gi.end))}const Ri=bi.mapper.toViewRange(gi),Yi=Ei.viewRangeToDom(Ri),ji=I.UL.getDomRangeRects(Yi);let Pi;for(const qi of ji)if(Pi!==void 0){if(Math.round(qi.top)>=Pi)return!1;Pi=Math.max(Pi,Math.round(qi.bottom))}else Pi=Math.round(qi.bottom);return!0}(bt,oi,Zt))&&(fe.change(bi=>{const gi=Zt?oi.end:oi.start;if(St){const Ti=fe.createSelection(Xt.anchor);Ti.setFocus(gi),bi.setSelection(Ti)}else bi.setSelection(gi)}),je.stop(),Ze.preventDefault(),Ze.stopPropagation())}}}function jt(bt,fe,je){const Ze=bt.schema,pt=bt.createRangeIn(fe.root),Ct=je=="forward"?"elementStart":"elementEnd";for(const{previousPosition:St,item:Xt,type:Zt}of pt.getWalker({startPosition:fe,direction:je})){if(Ze.isLimit(Xt)&&!Ze.isInline(Xt))return St;if(Zt==Ct&&Ze.isBlock(Xt))return null}return null}function yt(bt,fe,je){const Ze=je=="backward"?fe.end:fe.start;if(bt.checkChild(Ze,"$text"))return Ze;for(const{nextPosition:pt}of fe.getWalker({direction:je}))if(bt.checkChild(pt,"$text"))return pt;return null}var tt=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-widget/theme/widget.css"),Bt={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};_e()(tt.Z,Bt),tt.Z.locals;class ye extends d.Sy{static get pluginName(){return"Widget"}static get requires(){return[et,H.HG]}init(){const fe=this.editor,je=fe.editing.view,Ze=je.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",(pt,Ct,St)=>{const Xt=St.writer,Zt=Ct.selection;if(Zt.isCollapsed)return;const oi=Zt.getSelectedElement();if(!oi)return;const bi=fe.editing.mapper.toViewElement(oi);r(bi)&&St.consumable.consume(Zt,"selection")&&Xt.setSelection(Xt.createRangeOn(bi),{fake:!0,label:L(bi)})}),this.editor.editing.downcastDispatcher.on("selection",(pt,Ct,St)=>{this._clearPreviouslySelectedWidgets(St.writer);const Xt=St.writer,Zt=Xt.document.selection;let oi=null;for(const bi of Zt.getRanges())for(const gi of bi){const Ti=gi.item;r(Ti)&&!Ae(Ti,oi)&&(Xt.addClass(g,Ti),this._previouslySelected.add(Ti),oi=Ti)}},{priority:"low"}),je.addObserver(A.dM),this.listenTo(Ze,"mousedown",(...pt)=>this._onMousedown(...pt)),this.listenTo(Ze,"arrowKey",(...pt)=>{this._handleSelectionChangeOnArrowKeyPress(...pt)},{context:[r,"$text"]}),this.listenTo(Ze,"arrowKey",(...pt)=>{this._preventDefaultOnArrowKeyPress(...pt)},{context:"$root"}),this.listenTo(Ze,"arrowKey",Nt(this.editor.editing),{context:"$text"}),this.listenTo(Ze,"delete",(pt,Ct)=>{this._handleDelete(Ct.direction=="forward")&&(Ct.preventDefault(),pt.stop())},{context:"$root"})}_onMousedown(fe,je){const Ze=this.editor,pt=Ze.editing.view,Ct=pt.document;let St=je.target;if(function(Zt){let oi=Zt;for(;oi;){if(oi.is("editableElement")&&!oi.is("rootElement"))return!0;if(r(oi))return!1;oi=oi.parent}return!1}(St)){if((I.OB.isSafari||I.OB.isGecko)&&je.domEvent.detail>=3){const Zt=Ze.editing.mapper,oi=St.is("attributeElement")?St.findAncestor(gi=>!gi.is("attributeElement")):St,bi=Zt.toModelElement(oi);je.preventDefault(),this.editor.model.change(gi=>{gi.setSelection(bi,"in")})}return}if(!r(St)&&(St=St.findAncestor(r),!St))return;I.OB.isAndroid&&je.preventDefault(),Ct.isFocused||pt.focus();const Xt=Ze.editing.mapper.toModelElement(St);this._setSelectionOverElement(Xt)}_handleSelectionChangeOnArrowKeyPress(fe,je){const Ze=je.keyCode,pt=this.editor.model,Ct=pt.schema,St=pt.document.selection,Xt=St.getSelectedElement(),Zt=(0,I.mA)(Ze,this.editor.locale.contentLanguageDirection),oi=Zt=="down"||Zt=="right",bi=Zt=="up"||Zt=="down";if(Xt&&Ct.isObject(Xt)){const Ti=oi?St.getLastPosition():St.getFirstPosition(),Mt=Ct.getNearestSelectionRange(Ti,oi?"forward":"backward");return void(Mt&&(pt.change(Ei=>{Ei.setSelection(Mt)}),je.preventDefault(),fe.stop()))}if(!St.isCollapsed&&!je.shiftKey){const Ti=St.getFirstPosition(),Mt=St.getLastPosition(),Ei=Ti.nodeAfter,Ri=Mt.nodeBefore;return void((Ei&&Ct.isObject(Ei)||Ri&&Ct.isObject(Ri))&&(pt.change(Yi=>{Yi.setSelection(oi?Mt:Ti)}),je.preventDefault(),fe.stop()))}if(!St.isCollapsed)return;const gi=this._getObjectElementNextToSelection(oi);if(gi&&Ct.isObject(gi)){if(Ct.isInline(gi)&&bi)return;this._setSelectionOverElement(gi),je.preventDefault(),fe.stop()}}_preventDefaultOnArrowKeyPress(fe,je){const Ze=this.editor.model,pt=Ze.schema,Ct=Ze.document.selection.getSelectedElement();Ct&&pt.isObject(Ct)&&(je.preventDefault(),fe.stop())}_handleDelete(fe){if(this.editor.isReadOnly)return;const je=this.editor.model.document.selection;if(!je.isCollapsed)return;const Ze=this._getObjectElementNextToSelection(fe);return Ze?(this.editor.model.change(pt=>{let Ct=je.anchor.parent;for(;Ct.isEmpty;){const St=Ct;Ct=St.parent,pt.remove(St)}this._setSelectionOverElement(Ze)}),!0):void 0}_setSelectionOverElement(fe){this.editor.model.change(je=>{je.setSelection(je.createRangeOn(fe))})}_getObjectElementNextToSelection(fe){const je=this.editor.model,Ze=je.schema,pt=je.document.selection,Ct=je.createSelection(pt);if(je.modifySelection(Ct,{direction:fe?"forward":"backward"}),Ct.isEqual(pt))return null;const St=fe?Ct.focus.nodeBefore:Ct.focus.nodeAfter;return St&&Ze.isObject(St)?St:null}_clearPreviouslySelectedWidgets(fe){for(const je of this._previouslySelected)fe.removeClass(g,je);this._previouslySelected.clear()}}function Ae(bt,fe){return!!fe&&Array.from(bt.getAncestors()).includes(fe)}class Ke extends d.Sy{static get requires(){return[C.WB]}static get pluginName(){return"WidgetToolbarRepository"}init(){const fe=this.editor;if(fe.plugins.has("BalloonToolbar")){const je=fe.plugins.get("BalloonToolbar");this.listenTo(je,"show",Ze=>{(function(pt){const Ct=pt.getSelectedElement();return!(!Ct||!r(Ct))})(fe.editing.view.document.selection)&&Ze.stop()},{priority:"high"})}this._toolbarDefinitions=new Map,this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(fe.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(fe.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const fe of this._toolbarDefinitions.values())fe.view.destroy()}register(fe,{ariaLabel:je,items:Ze,getRelatedElement:pt,balloonClassName:Ct="ck-toolbar-container"}){if(!Ze.length)return void(0,I.KE)("widget-toolbar-no-items",{toolbarId:fe});const St=this.editor,Xt=St.t,Zt=new C.jB(St.locale);if(Zt.ariaLabel=je||Xt("Widget toolbar"),this._toolbarDefinitions.has(fe))throw new I.Bb("widget-toolbar-duplicated",this,{toolbarId:fe});const oi={view:Zt,getRelatedElement:pt,balloonClassName:Ct,itemsConfig:Ze,initialized:!1};St.ui.addToolbar(Zt,{isContextual:!0,beforeFocus:()=>{const bi=pt(St.editing.view.document.selection);bi&&this._showToolbar(oi,bi)},afterBlur:()=>{this._hideToolbar(oi)}}),this._toolbarDefinitions.set(fe,oi)}_updateToolbarsVisibility(){let fe=0,je=null,Ze=null;for(const pt of this._toolbarDefinitions.values()){const Ct=pt.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&Ct)if(this.editor.ui.focusTracker.isFocused){const St=Ct.getAncestors().length;St>fe&&(fe=St,je=Ct,Ze=pt)}else this._isToolbarVisible(pt)&&this._hideToolbar(pt);else this._isToolbarInBalloon(pt)&&this._hideToolbar(pt)}Ze&&this._showToolbar(Ze,je)}_hideToolbar(fe){this._balloon.remove(fe.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(fe,je){this._isToolbarVisible(fe)?kt(this.editor,je):this._isToolbarInBalloon(fe)||(fe.initialized||(fe.initialized=!0,fe.view.fillFromConfig(fe.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:fe.view,position:It(this.editor,je),balloonClassName:fe.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const Ze of this._toolbarDefinitions.values())if(this._isToolbarVisible(Ze)){const pt=Ze.getRelatedElement(this.editor.editing.view.document.selection);kt(this.editor,pt)}}))}_isToolbarVisible(fe){return this._balloon.visibleView===fe.view}_isToolbarInBalloon(fe){return this._balloon.hasView(fe.view)}}function kt(bt,fe){const je=bt.plugins.get("ContextualBalloon"),Ze=It(bt,fe);je.updatePosition(Ze)}function It(bt,fe){const je=bt.editing.view,Ze=C.no.defaultPositions;return{target:je.domConverter.mapViewToDom(fe),positions:[Ze.northArrowSouth,Ze.northArrowSouthWest,Ze.northArrowSouthEast,Ze.southArrowNorth,Ze.southArrowNorthWest,Ze.southArrowNorthEast,Ze.viewportStickyNorth]}}class Yt extends(0,I.Re)(){constructor(fe){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=fe,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(fe,je,Ze){const pt=new I.UL(je);this.activeHandlePosition=function(St){const Xt=["top-left","top-right","bottom-right","bottom-left"];for(const Zt of Xt)if(St.classList.contains(zt(Zt)))return Zt}(fe),this._referenceCoordinates=function(St,Xt){const Zt=new I.UL(St),oi=Xt.split("-"),bi={x:oi[1]=="right"?Zt.right:Zt.left,y:oi[0]=="bottom"?Zt.bottom:Zt.top};return bi.x+=St.ownerDocument.defaultView.scrollX,bi.y+=St.ownerDocument.defaultView.scrollY,bi}(je,function(St){const Xt=St.split("-"),Zt={top:"bottom",bottom:"top",left:"right",right:"left"};return`${Zt[Xt[0]]}-${Zt[Xt[1]]}`}(this.activeHandlePosition)),this._originalWidth=pt.width,this._originalHeight=pt.height,this._aspectRatio=pt.width/pt.height;const Ct=Ze.style.width;Ct&&Ct.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(Ct):this._originalWidthPercents=function(St,Xt){const Zt=St.parentElement,oi=parseFloat(Zt.ownerDocument.defaultView.getComputedStyle(Zt).width);return Xt.width/oi*100}(Ze,pt)}update(fe){this.proposedWidth=fe.width,this.proposedHeight=fe.height,this.proposedWidthPercents=fe.widthPercents,this.proposedHandleHostWidth=fe.handleHostWidth,this.proposedHandleHostHeight=fe.handleHostHeight}}function zt(bt){return`ck-widget__resizer__handle-${bt}`}class ot extends C.G7{constructor(){super();const fe=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",fe.to("_viewPosition",je=>je?`ck-orientation-${je}`:"")],style:{display:fe.if("_isVisible","none",je=>!je)}},children:[{text:fe.to("_label")}]})}_bindToState(fe,je){this.bind("_isVisible").to(je,"proposedWidth",je,"proposedHeight",(Ze,pt)=>Ze!==null&&pt!==null),this.bind("_label").to(je,"proposedHandleHostWidth",je,"proposedHandleHostHeight",je,"proposedWidthPercents",(Ze,pt,Ct)=>fe.unit==="px"?`${Ze}\xD7${pt}`:`${Ct}%`),this.bind("_viewPosition").to(je,"activeHandlePosition",je,"proposedHandleHostWidth",je,"proposedHandleHostHeight",(Ze,pt,Ct)=>pt<50||Ct<50?"above-center":Ze)}_dismiss(){this.unbind(),this._isVisible=!1}}class Dt extends(0,I.Re)(){constructor(fe){super(),this._options=fe,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(je,Ze)=>je&&Ze),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",je=>{this.state.proposedWidth||this.state.proposedWidthPercents||(this._cleanup(),je.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(fe=>{fe.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(fe=>{fe.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const fe=this,je=this._options.viewElement;this._options.editor.editing.view.change(Ze=>{const pt=Ze.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(Ct){const St=this.toDomElement(Ct);return fe._appendHandles(St),fe._appendSizeUI(St),St});Ze.insert(Ze.createPositionAt(je,"end"),pt),Ze.addClass("ck-widget_with-resizer",je),this._viewResizerWrapper=pt,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(fe){this._state=new Yt(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(fe,this._getHandleHost(),this._getResizeHost())}updateSize(fe){const je=this._proposeNewSize(fe);this._options.editor.editing.view.change(Zt=>{const oi=this._options.unit||"%",bi=(oi==="%"?je.widthPercents:je.width)+oi;Zt.setStyle("width",bi,this._options.viewElement)});const Ze=this._getHandleHost(),pt=new I.UL(Ze),Ct=Math.round(pt.width),St=Math.round(pt.height),Xt=new I.UL(Ze);je.width=Math.round(Xt.width),je.height=Math.round(Xt.height),this.redraw(pt),this.state.update({...je,handleHostWidth:Ct,handleHostHeight:St})}commit(){const fe=this._options.unit||"%",je=(fe==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+fe;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(je)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(fe){const je=this._domResizerWrapper;if(!((Ze=je)&&Ze.ownerDocument&&Ze.ownerDocument.contains(Ze)))return;var Ze;const pt=je.parentElement,Ct=this._getHandleHost(),St=this._viewResizerWrapper,Xt=[St.getStyle("width"),St.getStyle("height"),St.getStyle("left"),St.getStyle("top")];let Zt;if(pt.isSameNode(Ct)){const oi=fe||new I.UL(Ct);Zt=[oi.width+"px",oi.height+"px",void 0,void 0]}else Zt=[Ct.offsetWidth+"px",Ct.offsetHeight+"px",Ct.offsetLeft+"px",Ct.offsetTop+"px"];(0,I.Rt)(Xt,Zt)!=="same"&&this._options.editor.editing.view.change(oi=>{oi.setStyle({width:Zt[0],height:Zt[1],left:Zt[2],top:Zt[3]},St)})}containsHandle(fe){return this._domResizerWrapper.contains(fe)}static isResizeHandle(fe){return fe.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(fe=>{fe.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(fe){const je=this.state,Ze={x:(pt=fe).pageX,y:pt.pageY};var pt;const Ct=!this._options.isCentered||this._options.isCentered(this),St={x:je._referenceCoordinates.x-(Ze.x+je.originalWidth),y:Ze.y-je.originalHeight-je._referenceCoordinates.y};Ct&&je.activeHandlePosition.endsWith("-right")&&(St.x=Ze.x-(je._referenceCoordinates.x+je.originalWidth)),Ct&&(St.x*=2);let Xt=Math.abs(je.originalWidth+St.x),Zt=Math.abs(je.originalHeight+St.y);return(Xt/je.aspectRatio>Zt?"width":"height")=="width"?Zt=Xt/je.aspectRatio:Xt=Zt*je.aspectRatio,{width:Math.round(Xt),height:Math.round(Zt),widthPercents:Math.min(Math.round(je.originalWidthPercents/je.originalWidth*Xt*100)/100,100)}}_getResizeHost(){const fe=this._domResizerWrapper.parentElement;return this._options.getResizeHost(fe)}_getHandleHost(){const fe=this._domResizerWrapper.parentElement;return this._options.getHandleHost(fe)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(fe){const je=["top-left","top-right","bottom-right","bottom-left"];for(const pt of je)fe.appendChild(new C.YS({tag:"div",attributes:{class:"ck-widget__resizer__handle "+(Ze=pt,`ck-widget__resizer__handle-${Ze}`)}}).render());var Ze}_appendSizeUI(fe){this._sizeView=new ot,this._sizeView.render(),fe.appendChild(this._sizeView.element)}}var wt=a("./node_modules/lodash-es/throttle.js"),ni=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-widget/theme/widgetresize.css"),di={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};_e()(ni.Z,di),ni.Z.locals;class xi extends d.Sy{static get pluginName(){return"WidgetResize"}init(){const fe=this.editor.editing,je=I.CO.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),this._resizers=new Map,fe.view.addObserver(A.dM),this._observer=new((0,I.Xu)()),this.listenTo(fe.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(je,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(je,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=(0,wt.Z)(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[pt,Ct]of this._resizers)pt.isAttached()||(this._resizers.delete(pt),Ct.destroy())},{priority:"lowest"}),this._observer.listenTo(I.CO.window,"resize",this._redrawSelectedResizerThrottled);const Ze=this.editor.editing.view.document.selection;Ze.on("change",()=>{const pt=Ze.getSelectedElement(),Ct=this.getResizerByViewElement(pt)||null;Ct?this.select(Ct):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const fe of this._resizers.values())fe.destroy();this._redrawSelectedResizerThrottled.cancel()}select(fe){this.deselect(),this.selectedResizer=fe,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(fe){const je=new Dt(fe),Ze=this.editor.plugins;if(je.attach(),Ze.has("WidgetToolbarRepository")){const Ct=Ze.get("WidgetToolbarRepository");je.on("begin",()=>{Ct.forceDisabled("resize")},{priority:"lowest"}),je.on("cancel",()=>{Ct.clearForceDisabled("resize")},{priority:"highest"}),je.on("commit",()=>{Ct.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(fe.viewElement,je);const pt=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(pt)==je&&this.select(je),je}getResizerByViewElement(fe){return this._resizers.get(fe)}_getResizerByHandle(fe){for(const je of this._resizers.values())if(je.containsHandle(fe))return je}_mouseDownListener(fe,je){const Ze=je.domTarget;Dt.isResizeHandle(Ze)&&(this._activeResizer=this._getResizerByHandle(Ze)||null,this._activeResizer&&(this._activeResizer.begin(Ze),fe.stop(),je.preventDefault()))}_mouseMoveListener(fe,je){this._activeResizer&&this._activeResizer.updateSize(je)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}},"./src/clipboard.js":(f,v,a)=>{"use strict";a.r(v),a.d(v,{Clipboard:()=>L,ClipboardPipeline:()=>pe,DragDrop:()=>r,PastePlainText:()=>z});var d=a("./packages/ckeditor5-core/src/index.ts"),A=a("./packages/ckeditor5-utils/src/index.ts"),H=a("./packages/ckeditor5-engine/src/index.ts");class I extends H.qZ{constructor(c){super(c);const D=this.document;function W(q){return(ae,Ie)=>{Ie.preventDefault();const Ve=Ie.dropRange?[Ie.dropRange]:null,_e=new A.M3(D,q);D.fire(_e,{dataTransfer:Ie.dataTransfer,method:ae.name,targetRanges:Ve,target:Ie.target}),_e.stop.called&&Ie.stopPropagation()}}this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"],this.listenTo(D,"paste",W("clipboardInput"),{priority:"low"}),this.listenTo(D,"drop",W("clipboardInput"),{priority:"low"}),this.listenTo(D,"dragover",W("dragging"),{priority:"low"})}onDomEvent(c){const D="clipboardData"in c?c.clipboardData:c.dataTransfer,W=c.type=="drop"||c.type=="paste",q={dataTransfer:new H.tn(D,{cacheFiles:W})};c.type!="drop"&&c.type!="dragover"||(q.dropRange=function(ae,Ie){const Ve=Ie.target.ownerDocument,_e=Ie.clientX,Me=Ie.clientY;let Qe;return Ve.caretRangeFromPoint&&Ve.caretRangeFromPoint(_e,Me)?Qe=Ve.caretRangeFromPoint(_e,Me):Ie.rangeParent&&(Qe=Ve.createRange(),Qe.setStart(Ie.rangeParent,Ie.rangeOffset),Qe.collapse(!0)),Qe?ae.domConverter.domRangeToView(Qe):null}(this.view,c)),this.fire(c.type,c,q)}}const C=["figcaption","li"];function me(x){let c="";if(x.is("$text")||x.is("$textProxy"))c=x.data;else if(x.is("element","img")&&x.hasAttribute("alt"))c=x.getAttribute("alt");else if(x.is("element","br"))c=`
`;else{let D=null;for(const W of x.getChildren()){const q=me(W);D&&(D.is("containerElement")||W.is("containerElement"))&&(C.includes(D.name)||C.includes(W.name)?c+=`
`:c+=`

`),c+=q,D=W}}return c}class pe extends d.Sy{static get pluginName(){return"ClipboardPipeline"}init(){this.editor.editing.view.addObserver(I),this._setupPasteDrop(),this._setupCopyCut()}_setupPasteDrop(){const c=this.editor,D=c.model,W=c.editing.view,q=W.document;this.listenTo(q,"clipboardInput",ae=>{c.isReadOnly&&ae.stop()},{priority:"highest"}),this.listenTo(q,"clipboardInput",(ae,Ie)=>{const Ve=Ie.dataTransfer;let _e;if(Ie.content)_e=Ie.content;else{let dt="";Ve.getData("text/html")?dt=function(nt){return nt.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(qe,et)=>et.length==1?" ":et).replace(/<!--[\s\S]*?-->/g,"")}(Ve.getData("text/html")):Ve.getData("text/plain")&&(((Me=(Me=Ve.getData("text/plain")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||Me.includes("<br>"))&&(Me=`<p>${Me}</p>`),dt=Me),_e=this.editor.data.htmlProcessor.toView(dt)}var Me;const Qe=new A.M3(this,"inputTransformation");this.fire(Qe,{content:_e,dataTransfer:Ve,targetRanges:Ie.targetRanges,method:Ie.method}),Qe.stop.called&&ae.stop(),W.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(ae,Ie)=>{if(Ie.content.isEmpty)return;const Ve=this.editor.data.toModel(Ie.content,"$clipboardHolder");Ve.childCount!=0&&(ae.stop(),D.change(()=>{this.fire("contentInsertion",{content:Ve,method:Ie.method,dataTransfer:Ie.dataTransfer,targetRanges:Ie.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(ae,Ie)=>{Ie.resultRange=D.insertContent(Ie.content)},{priority:"low"})}_setupCopyCut(){const c=this.editor,D=c.model.document,W=c.editing.view.document,q=(ae,Ie)=>{const Ve=Ie.dataTransfer;Ie.preventDefault();const _e=c.data.toView(c.model.getSelectedContent(D.selection));W.fire("clipboardOutput",{dataTransfer:Ve,content:_e,method:ae.name})};this.listenTo(W,"copy",q,{priority:"low"}),this.listenTo(W,"cut",(ae,Ie)=>{c.isReadOnly?Ie.preventDefault():q(ae,Ie)},{priority:"low"}),this.listenTo(W,"clipboardOutput",(ae,Ie)=>{Ie.content.isEmpty||(Ie.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(Ie.content)),Ie.dataTransfer.setData("text/plain",me(Ie.content))),Ie.method=="cut"&&c.model.deleteContent(D.selection)},{priority:"low"})}}var ge=a("./packages/ckeditor5-widget/src/index.ts"),X=a("./node_modules/lodash-es/throttle.js"),te=a("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),Z=a.n(te),h=a("./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./packages/ckeditor5-clipboard/theme/clipboard.css"),g={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Z()(h.Z,g),h.Z.locals;class r extends d.Sy{static get pluginName(){return"DragDrop"}static get requires(){return[pe,ge.$L]}init(){const c=this.editor,D=c.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=(0,X.Z)(W=>this._updateDropMarker(W),40),this._removeDropMarkerDelayed=_(()=>this._removeDropMarker(),40),this._clearDraggableAttributesDelayed=_(()=>this._clearDraggableAttributes(),40),D.addObserver(I),D.addObserver(H.dM),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(c,"change:isReadOnly",(W,q,ae)=>{ae?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(W,q,ae)=>{ae||this._finalizeDragging(!1)}),A.OB.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const c=this.editor,D=c.model,W=D.document,q=c.editing.view,ae=q.document;this.listenTo(ae,"dragstart",(Ie,Ve)=>{const _e=W.selection;if(Ve.target&&Ve.target.is("editableElement"))return void Ve.preventDefault();const Me=Ve.target?T(Ve.target):null;if(Me){const nt=c.editing.mapper.toModelElement(Me);this._draggedRange=H.iE.fromRange(D.createRangeOn(nt)),c.plugins.has("WidgetToolbarRepository")&&c.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop")}else if(!ae.selection.isCollapsed){const nt=ae.selection.getSelectedElement();nt&&(0,ge.Qd)(nt)||(this._draggedRange=H.iE.fromRange(_e.getFirstRange()))}if(!this._draggedRange)return void Ve.preventDefault();this._draggingUid=(0,A.hQ)(),Ve.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",Ve.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const Qe=D.createSelection(this._draggedRange.toRange()),dt=c.data.toView(D.getSelectedContent(Qe));ae.fire("clipboardOutput",{dataTransfer:Ve.dataTransfer,content:dt,method:"dragstart"}),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(ae,"dragend",(Ie,Ve)=>{this._finalizeDragging(!Ve.dataTransfer.isCanceled&&Ve.dataTransfer.dropEffect=="move")},{priority:"low"}),this.listenTo(ae,"dragenter",()=>{this.isEnabled&&q.focus()}),this.listenTo(ae,"dragleave",()=>{this._removeDropMarkerDelayed()}),this.listenTo(ae,"dragging",(Ie,Ve)=>{if(!this.isEnabled)return void(Ve.dataTransfer.dropEffect="none");this._removeDropMarkerDelayed.cancel();const _e=u(c,Ve.targetRanges,Ve.target);this._draggedRange||(Ve.dataTransfer.dropEffect="copy"),A.OB.isGecko||(Ve.dataTransfer.effectAllowed=="copy"?Ve.dataTransfer.dropEffect="copy":["all","copyMove"].includes(Ve.dataTransfer.effectAllowed)&&(Ve.dataTransfer.dropEffect="move")),_e&&this._updateDropMarkerThrottled(_e)},{priority:"low"})}_setupClipboardInputIntegration(){const c=this.editor,D=c.editing.view.document;this.listenTo(D,"clipboardInput",(W,q)=>{if(q.method!="drop")return;const ae=u(c,q.targetRanges,q.target);if(this._removeDropMarker(),!ae)return this._finalizeDragging(!1),void W.stop();if(this._draggedRange&&this._draggingUid!=q.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),w(q.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(ae,!0))return this._finalizeDragging(!1),void W.stop();q.targetRanges=[c.editing.mapper.toViewRange(ae)]},{priority:"high"})}_setupContentInsertionIntegration(){const c=this.editor.plugins.get(pe);c.on("contentInsertion",(D,W)=>{if(!this.isEnabled||W.method!=="drop")return;const q=W.targetRanges.map(ae=>this.editor.editing.mapper.toModelRange(ae));this.editor.model.change(ae=>ae.setSelection(q))},{priority:"high"}),c.on("contentInsertion",(D,W)=>{if(!this.isEnabled||W.method!=="drop")return;const q=w(W.dataTransfer)=="move",ae=!W.resultRange||!W.resultRange.isCollapsed;this._finalizeDragging(ae&&q)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const c=this.editor,D=c.editing.view,W=D.document;this.listenTo(W,"mousedown",(q,ae)=>{if(A.OB.isAndroid||!ae)return;this._clearDraggableAttributesDelayed.cancel();let Ie=T(ae.target);if(A.OB.isBlink&&!c.isReadOnly&&!Ie&&!W.selection.isCollapsed){const Ve=W.selection.getSelectedElement();Ve&&(0,ge.Qd)(Ve)||(Ie=W.selection.editableElement)}Ie&&(D.change(Ve=>{Ve.setAttribute("draggable","true",Ie)}),this._draggableElement=c.editing.mapper.toModelElement(Ie))}),this.listenTo(W,"mouseup",()=>{A.OB.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const c=this.editor.editing;c.view.change(D=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&D.removeAttribute("draggable",c.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_setupDropMarker(){const c=this.editor;c.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),c.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(D,{writer:W})=>{if(c.model.schema.checkChild(D.markerRange.start,"$text"))return W.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(q){const ae=this.toDomElement(q);return ae.append("\u2060",q.createElement("span"),"\u2060"),ae})}})}_updateDropMarker(c){const D=this.editor,W=D.model.markers;D.model.change(q=>{W.has("drop-target")?W.get("drop-target").getRange().isEqual(c)||q.updateMarker("drop-target",{range:c}):q.addMarker("drop-target",{range:c,usingOperation:!1,affectsData:!1})})}_removeDropMarker(){const c=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),c.markers.has("drop-target")&&c.change(D=>{D.removeMarker("drop-target")})}_finalizeDragging(c){const D=this.editor,W=D.model;this._removeDropMarker(),this._clearDraggableAttributes(),D.plugins.has("WidgetToolbarRepository")&&D.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._draggedRange&&(c&&this.isEnabled&&W.deleteContent(W.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}}function u(x,c,D){const W=x.model,q=x.editing.mapper;let ae=null;const Ie=c?c[0].start:null;if(D.is("uiElement")&&(D=D.parent),ae=function(Me,Qe){const dt=Me.model,nt=Me.editing.mapper;if((0,ge.Qd)(Qe))return dt.createRangeOn(nt.toModelElement(Qe));if(!Qe.is("editableElement")){const qe=Qe.findAncestor(et=>(0,ge.Qd)(et)||et.is("editableElement"));if((0,ge.Qd)(qe))return dt.createRangeOn(nt.toModelElement(qe))}return null}(x,D),ae)return ae;const Ve=function(Me,Qe){const dt=Me.editing.mapper,nt=Me.editing.view,qe=dt.toModelElement(Qe);if(qe)return qe;const et=nt.createPositionBefore(Qe),Nt=dt.findMappedViewAncestor(et);return dt.toModelElement(Nt)}(x,D),_e=Ie?q.toModelPosition(Ie):null;return _e?(ae=function(Me,Qe,dt){const nt=Me.model;if(!nt.schema.checkChild(dt,"$block"))return null;const qe=nt.createPositionAt(dt,0),et=Qe.path.slice(0,qe.path.length),Nt=nt.createPositionFromPath(Qe.root,et),jt=Nt.nodeAfter;return jt&&nt.schema.isObject(jt)?nt.createRangeOn(jt):null}(x,_e,Ve),ae||(ae=W.schema.getNearestSelectionRange(_e,A.OB.isGecko?"forward":"backward"),ae||function(Me,Qe){const dt=Me.model;let nt=Qe;for(;nt;){if(dt.schema.isObject(nt))return dt.createRangeOn(nt);nt=nt.parent}return null}(x,_e.parent))):function(Me,Qe){const dt=Me.model,nt=dt.schema,qe=dt.createPositionAt(Qe,0);return nt.getNearestSelectionRange(qe,"forward")}(x,Ve)}function w(x){return A.OB.isGecko?x.dropEffect:["all","copyMove"].includes(x.effectAllowed)?"move":"copy"}function _(x,c){let D;function W(...q){W.cancel(),D=setTimeout(()=>x(...q),c)}return W.cancel=()=>{clearTimeout(D)},W}function T(x){if(x.is("editableElement"))return null;if(x.hasClass("ck-widget__selection-handle"))return x.findAncestor(ge.Qd);if((0,ge.Qd)(x))return x;const c=x.findAncestor(D=>(0,ge.Qd)(D)||D.is("editableElement"));return(0,ge.Qd)(c)?c:null}class z extends d.Sy{static get pluginName(){return"PastePlainText"}static get requires(){return[pe]}init(){const c=this.editor,D=c.model,W=c.editing.view,q=W.document,ae=D.document.selection;let Ie=!1;W.addObserver(I),this.listenTo(q,"keydown",(Ve,_e)=>{Ie=_e.shiftKey}),c.plugins.get(pe).on("contentInsertion",(Ve,_e)=>{(Ie||function(Me,Qe){if(Me.childCount>1)return!1;const dt=Me.getChild(0);return Qe.isObject(dt)?!1:Array.from(dt.getAttributeKeys()).length==0}(_e.content,D.schema))&&D.change(Me=>{const Qe=Array.from(ae.getAttributes()).filter(([nt])=>D.schema.getAttributeProperties(nt).isFormatting);ae.isCollapsed||D.deleteContent(ae,{doNotAutoparagraph:!0}),Qe.push(...ae.getAttributes());const dt=Me.createRangeIn(_e.content);for(const nt of dt.getItems())nt.is("$textProxy")&&Me.setAttributes(Qe,nt)})})}}class L extends d.Sy{static get pluginName(){return"Clipboard"}static get requires(){return[pe,r,z]}}},"./src/core.js":(f,v,a)=>{"use strict";a.r(v),a.d(v,{Command:()=>d.mY,Context:()=>d._y,ContextPlugin:()=>d.eO,DataApiMixin:()=>d.W9,Editor:()=>d.ML,ElementApiMixin:()=>d.xK,MultiCommand:()=>d.AJ,PendingActions:()=>d.lR,Plugin:()=>d.Sy,attachToForm:()=>d.P$,icons:()=>d.ci,secureSourceElement:()=>d.Nu});var d=a("./packages/ckeditor5-core/src/index.ts")},"./src/engine.js":(f,v,a)=>{"use strict";a.r(v),a.d(v,{AttributeElement:()=>d.kW,BubblingEventInfo:()=>d.r7,ClickObserver:()=>d.KU,Conversion:()=>d.uz,DataController:()=>d.Yc,DataTransfer:()=>d.tn,DocumentFragment:()=>d.f4,DocumentSelection:()=>d.uj,DomConverter:()=>d.pG,DomEventData:()=>d.dK,DomEventObserver:()=>d.qZ,DowncastWriter:()=>d.qD,EditingController:()=>d.jH,Element:()=>d.W_,History:()=>d.Ay,HtmlDataProcessor:()=>d.X5,InsertOperation:()=>d.IZ,LivePosition:()=>d.jP,LiveRange:()=>d.iE,MarkerOperation:()=>d.zj,Matcher:()=>d.xO,Model:()=>d.Hn,MouseObserver:()=>d.dM,Observer:()=>d.Qj,OperationFactory:()=>d.Bz,Position:()=>d.Ly,Range:()=>d.e6,Renderer:()=>d.Th,StylesProcessor:()=>d.A_,TabObserver:()=>d.aY,Text:()=>d.xv,TreeWalker:()=>d.Po,UpcastWriter:()=>d.yj,View:()=>d.G7,ViewAttributeElement:()=>d.m1,ViewContainerElement:()=>d.By,ViewDocument:()=>d.Ux,ViewDocumentFragment:()=>d.y_,ViewEditableElement:()=>d.W2,ViewElement:()=>d.y9,ViewEmptyElement:()=>d.pc,ViewRawElement:()=>d.wx,ViewText:()=>d.Xj,ViewUIElement:()=>d.dq,addBackgroundRules:()=>d.QR,addBorderRules:()=>d.sI,addMarginRules:()=>d.vt,addPaddingRules:()=>d.J8,disablePlaceholder:()=>d.DA,enablePlaceholder:()=>d.ID,findOptimalInsertionRange:()=>d.KT,getBoxSidesShorthandValue:()=>d.I8,getBoxSidesValueReducer:()=>d.mq,getBoxSidesValues:()=>d.oz,getFillerOffset:()=>d.YG,getPositionShorthandNormalizer:()=>d.m0,getShorthandValues:()=>d.uT,hidePlaceholder:()=>d.$_,isAttachment:()=>d.SB,isColor:()=>d.D5,isLength:()=>d.G9,isLineStyle:()=>d.IT,isPercentage:()=>d.zz,isPosition:()=>d.WK,isRepeat:()=>d.Zb,isURL:()=>d.PX,needsPlaceholder:()=>d.Q7,showPlaceholder:()=>d.NJ,transformSets:()=>d.Rf});var d=a("./packages/ckeditor5-engine/src/index.ts")},"./src/enter.js":(f,v,a)=>{"use strict";a.r(v),a.d(v,{Enter:()=>d.C,ShiftEnter:()=>d.G});var d=a("./packages/ckeditor5-enter/src/index.ts")},"./src/paragraph.js":(f,v,a)=>{"use strict";a.r(v),a.d(v,{Paragraph:()=>me,ParagraphButtonUI:()=>X});var d=a("./packages/ckeditor5-core/src/index.ts"),A=a("./packages/ckeditor5-utils/src/index.ts");class H extends d.mY{refresh(){const Z=this.editor.model,h=Z.document,g=(0,A.Ps)(h.selection.getSelectedBlocks());this.value=!!g&&g.is("element","paragraph"),this.isEnabled=!!g&&I(g,Z.schema)}execute(Z={}){const h=this.editor.model,g=h.document;h.change(r=>{const u=(Z.selection||g.selection).getSelectedBlocks();for(const w of u)!w.is("element","paragraph")&&I(w,h.schema)&&r.rename(w,"paragraph")})}}function I(te,Z){return Z.checkChild(te.parent,"paragraph")&&!Z.isObject(te)}class C extends d.mY{execute(Z){const h=this.editor.model,g=Z.attributes;let r=Z.position;h.change(u=>{const w=u.createElement("paragraph");if(g&&h.schema.setAllowedAttributes(w,g,u),!h.schema.checkChild(r.parent,w)){const _=h.schema.findAllowedParent(r,w);if(!_)return;r=u.split(r,_).position}h.insertContent(w,r),u.setSelection(w,"in")})}}class me extends d.Sy{static get pluginName(){return"Paragraph"}init(){const Z=this.editor,h=Z.model;Z.commands.add("paragraph",new H(Z)),Z.commands.add("insertParagraph",new C(Z)),h.schema.register("paragraph",{inheritAllFrom:"$block"}),Z.conversion.elementToElement({model:"paragraph",view:"p"}),Z.conversion.for("upcast").elementToElement({model:(g,{writer:r})=>me.paragraphLikeElements.has(g.name)?g.isEmpty?null:r.createElement("paragraph"):null,view:/.+/,converterPriority:"low"})}}me.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);var pe=a("./packages/ckeditor5-ui/src/index.ts");const ge=d.ci.paragraph;class X extends d.Sy{static get requires(){return[me]}init(){const Z=this.editor,h=Z.t;Z.ui.componentFactory.add("paragraph",g=>{const r=new pe.r5(g),u=Z.commands.get("paragraph");return r.label=h("Paragraph"),r.icon=ge,r.tooltip=!0,r.isToggleable=!0,r.bind("isEnabled").to(u),r.bind("isOn").to(u,"value"),r.on("execute",()=>{Z.execute("paragraph")}),r})}}},"./src/select-all.js":(f,v,a)=>{"use strict";a.r(v),a.d(v,{SelectAll:()=>X,SelectAllEditing:()=>me,SelectAllUI:()=>ge});var d=a("./packages/ckeditor5-core/src/index.ts"),A=a("./packages/ckeditor5-utils/src/index.ts");class H extends d.mY{constructor(Z){super(Z),this.affectsData=!1}execute(){const Z=this.editor.model,h=Z.document.selection;let g=Z.schema.getLimitElement(h);if(h.containsEntireContent(g)||!I(Z.schema,g))do if(g=g.parent,!g)return;while(!I(Z.schema,g));Z.change(r=>{r.setSelection(g,"in")})}}function I(te,Z){return te.isLimit(Z)&&(te.checkChild(Z,"$text")||te.checkChild(Z,"paragraph"))}const C=(0,A.Zz)("Ctrl+A");class me extends d.Sy{static get pluginName(){return"SelectAllEditing"}init(){const Z=this.editor,h=Z.editing.view.document;Z.commands.add("selectAll",new H(Z)),this.listenTo(h,"keydown",(g,r)=>{(0,A.Cq)(r)===C&&(Z.execute("selectAll"),r.preventDefault())})}}var pe=a("./packages/ckeditor5-ui/src/index.ts");class ge extends d.Sy{static get pluginName(){return"SelectAllUI"}init(){const Z=this.editor;Z.ui.componentFactory.add("selectAll",h=>{const g=Z.commands.get("selectAll"),r=new pe.r5(h),u=h.t;return r.set({label:u("Select all"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),r.bind("isEnabled").to(g,"isEnabled"),this.listenTo(r,"execute",()=>{Z.execute("selectAll"),Z.editing.view.focus()}),r})}}class X extends d.Sy{static get requires(){return[me,ge]}static get pluginName(){return"SelectAll"}}},"./src/typing.js":(f,v,a)=>{"use strict";a.r(v),a.d(v,{Delete:()=>d.HG,Input:()=>d.II,TextTransformation:()=>d.cL,TextWatcher:()=>d.uL,TwoStepCaretMovement:()=>d.mh,Typing:()=>d.Mq,findAttributeRange:()=>d.VD,getLastTextLine:()=>d.Up,inlineHighlight:()=>d.Im});var d=a("./packages/ckeditor5-typing/src/index.ts")},"./src/ui.js":(f,v,a)=>{"use strict";a.r(v),a.d(v,{BalloonPanelView:()=>d.no,BalloonToolbar:()=>d.Jf,BlockToolbar:()=>d.ee,BodyCollection:()=>d.BK,BoxedEditorUIView:()=>d.py,ButtonView:()=>d.r5,ColorGridView:()=>d.J6,ColorTileView:()=>d._9,ComponentFactory:()=>d._Y,ContextualBalloon:()=>d.WB,DropdownButtonView:()=>d.J0,DropdownView:()=>d._n,EditorUI:()=>d.S8,EditorUIView:()=>d.fF,FocusCycler:()=>d.I0,FormHeaderView:()=>d.Gp,IconView:()=>d.mO,IframeView:()=>d.VY,InlineEditableUIView:()=>d.r1,InputNumberView:()=>d.Xs,InputTextView:()=>d.pq,InputView:()=>d.Em,LabelView:()=>d.Dn,LabeledFieldView:()=>d.KP,ListItemView:()=>d.dn,ListView:()=>d.Bv,Model:()=>d.Hn,Notification:()=>d.P_,SplitButtonView:()=>d.Rm,StickyPanelView:()=>d.lp,SwitchButtonView:()=>d.BM,Template:()=>d.YS,ToolbarSeparatorView:()=>d.$y,ToolbarView:()=>d.jB,TooltipManager:()=>d.gE,View:()=>d.G7,ViewCollection:()=>d.vX,addKeyboardHandlingForGrid:()=>d.IJ,addListToDropdown:()=>d.Pm,addToolbarToDropdown:()=>d.up,clickOutsideHandler:()=>d.eC,createDropdown:()=>d.t9,createLabeledDropdown:()=>d.FH,createLabeledInputNumber:()=>d.sh,createLabeledInputText:()=>d.R,focusChildOnDropdownOpen:()=>d.Mh,getLocalizedColorOptions:()=>d.k6,injectCssTransitionDisabler:()=>d.fe,normalizeColorOptions:()=>d.S1,normalizeSingleColorDefinition:()=>d.jY,normalizeToolbarConfig:()=>d.iw,submitHandler:()=>d.GI});var d=a("./packages/ckeditor5-ui/src/index.ts")},"./src/undo.js":(f,v,a)=>{"use strict";a.r(v),a.d(v,{Undo:()=>g,UndoEditing:()=>ge,UndoUi:()=>h});var d=a("./packages/ckeditor5-core/src/index.ts"),A=a("./packages/ckeditor5-engine/src/index.ts");class H extends d.mY{constructor(u){super(u),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this.listenTo(u.data,"set",(w,_)=>{_[1]={..._[1]};const T=_[1];T.batchType||(T.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(u.data,"set",(w,_)=>{_[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}addBatch(u){const w=this.editor.model.document.selection,_={ranges:w.hasOwnRange?Array.from(w.getRanges()):[],isBackward:w.isBackward};this._stack.push({batch:u,selection:_}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(u,w,_){const T=this.editor.model,z=T.document,L=[],x=u.map(D=>D.getTransformedByOperations(_)),c=x.flat();for(const D of x){const W=D.filter(q=>q.root!=z.graveyard).filter(q=>!C(q,c));W.length&&(I(W),L.push(W[0]))}L.length&&T.change(D=>{D.setSelection(L,{backward:w})})}_undo(u,w){const _=this.editor.model,T=_.document;this._createdBatches.add(w);const z=u.operations.slice().filter(L=>L.isDocumentOperation);z.reverse();for(const L of z){const x=L.baseVersion+1,c=Array.from(T.history.getOperations(x)),D=(0,A.Rf)([L.getReversed()],c,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(const W of D)w.addOperation(W),_.applyOperation(W),T.history.setOperationAsUndone(L,W)}}}function I(r){r.sort((u,w)=>u.start.isBefore(w.start)?-1:1);for(let u=1;u<r.length;u++){const w=r[u-1].getJoined(r[u],!0);w&&(u--,r.splice(u,2,w))}}function C(r,u){return u.some(w=>w!==r&&w.containsRange(r,!0))}class me extends H{execute(u=null){const w=u?this._stack.findIndex(z=>z.batch==u):this._stack.length-1,_=this._stack.splice(w,1)[0],T=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(T,()=>{this._undo(_.batch,T);const z=this.editor.model.document.history.getOperations(_.batch.baseVersion);this._restoreSelection(_.selection.ranges,_.selection.isBackward,z),this.fire("revert",_.batch,T)}),this.refresh()}}class pe extends H{execute(){const u=this._stack.pop(),w=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(w,()=>{const _=u.batch.operations[u.batch.operations.length-1].baseVersion+1,T=this.editor.model.document.history.getOperations(_);this._restoreSelection(u.selection.ranges,u.selection.isBackward,T),this._undo(u.batch,w)}),this.refresh()}}class ge extends d.Sy{static get pluginName(){return"UndoEditing"}constructor(u){super(u),this._batchRegistry=new WeakSet}init(){const u=this.editor;this._undoCommand=new me(u),this._redoCommand=new pe(u),u.commands.add("undo",this._undoCommand),u.commands.add("redo",this._redoCommand),this.listenTo(u.model,"applyOperation",(w,_)=>{const T=_[0];if(!T.isDocumentOperation)return;const z=T.batch,L=this._redoCommand._createdBatches.has(z),x=this._undoCommand._createdBatches.has(z);this._batchRegistry.has(z)||(this._batchRegistry.add(z),z.isUndoable&&(L?this._undoCommand.addBatch(z):x||(this._undoCommand.addBatch(z),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(w,_,T)=>{this._redoCommand.addBatch(T)}),u.keystrokes.set("CTRL+Z","undo"),u.keystrokes.set("CTRL+Y","redo"),u.keystrokes.set("CTRL+SHIFT+Z","redo")}}var X=a("./packages/ckeditor5-ui/src/index.ts");const te='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Z='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';class h extends d.Sy{static get pluginName(){return"UndoUI"}init(){const u=this.editor,w=u.locale,_=u.t,T=w.uiLanguageDirection=="ltr"?te:Z,z=w.uiLanguageDirection=="ltr"?Z:te;this._addButton("undo",_("Undo"),"CTRL+Z",T),this._addButton("redo",_("Redo"),"CTRL+Y",z)}_addButton(u,w,_,T){const z=this.editor;z.ui.componentFactory.add(u,L=>{const x=z.commands.get(u),c=new X.r5(L);return c.set({label:w,icon:T,keystroke:_,tooltip:!0}),c.bind("isEnabled").to(x,"isEnabled"),this.listenTo(c,"execute",()=>{z.execute(u),z.editing.view.focus()}),c})}}class g extends d.Sy{static get requires(){return[ge,h]}static get pluginName(){return"Undo"}}},"./src/upload.js":(f,v,a)=>{"use strict";a.r(v),a.d(v,{Base64UploadAdapter:()=>X,FileDialogButtonView:()=>pe,FileRepository:()=>I,SimpleUploadAdapter:()=>Z});var d=a("./packages/ckeditor5-core/src/index.ts"),A=a("./packages/ckeditor5-utils/src/index.ts");class H extends(0,A.Re)(){constructor(){super();const r=new window.FileReader;this._reader=r,this._data=void 0,this.set("loaded",0),r.onprogress=u=>{this.loaded=u.loaded}}get error(){return this._reader.error}get data(){return this._data}read(r){const u=this._reader;return this.total=r.size,new Promise((w,_)=>{u.onload=()=>{const T=u.result;this._data=T,w(T)},u.onerror=()=>{_("error")},u.onabort=()=>{_("aborted")},this._reader.readAsDataURL(r)})}abort(){this._reader.abort()}}class I extends d.Sy{static get pluginName(){return"FileRepository"}static get requires(){return[d.lR]}init(){this.loaders=new A.FE,this.loaders.on("change",()=>this._updatePendingAction()),this._loadersMap=new Map,this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(r,u)=>u?r/u*100:0)}getLoader(r){return this._loadersMap.get(r)||null}createLoader(r){if(!this.createUploadAdapter)return(0,A.KE)("filerepository-no-upload-adapter"),null;const u=new C(Promise.resolve(r),this.createUploadAdapter);return this.loaders.add(u),this._loadersMap.set(r,u),r instanceof Promise&&u.file.then(w=>{this._loadersMap.set(w,u)}).catch(()=>{}),u.on("change:uploaded",()=>{let w=0;for(const _ of this.loaders)w+=_.uploaded;this.uploaded=w}),u.on("change:uploadTotal",()=>{let w=0;for(const _ of this.loaders)_.uploadTotal&&(w+=_.uploadTotal);this.uploadTotal=w}),u}destroyLoader(r){const u=r instanceof C?r:this.getLoader(r);u._destroy(),this.loaders.remove(u),this._loadersMap.forEach((w,_)=>{w===u&&this._loadersMap.delete(_)})}_updatePendingAction(){const r=this.editor.plugins.get(d.lR);if(this.loaders.length){if(!this._pendingAction){const u=this.editor.t,w=_=>`${u("Upload in progress")} ${parseInt(_)}%.`;this._pendingAction=r.add(w(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",w)}}else r.remove(this._pendingAction),this._pendingAction=null}}class C extends(0,A.Re)(){constructor(r,u){super(),this.id=(0,A.hQ)(),this._filePromiseWrapper=this._createFilePromiseWrapper(r),this._adapter=u(this),this._reader=new H,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(w,_)=>_?w/_*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(r=>this._filePromiseWrapper?r:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new A.Bb("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(r=>this._reader.read(r)).then(r=>{if(this.status!=="reading")throw this.status;return this.status="idle",r}).catch(r=>{throw r==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:r)})}upload(){if(this.status!="idle")throw new A.Bb("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(r=>(this.uploadResponse=r,this.status="idle",r)).catch(r=>{throw this.status==="aborted"?"aborted":(this.status="error",r)})}abort(){const r=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?r=="reading"?this._reader.abort():r=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(r){const u={};return u.promise=new Promise((w,_)=>{u.rejecter=_,u.isFulfilled=!1,r.then(T=>{u.isFulfilled=!0,w(T)}).catch(T=>{u.isFulfilled=!0,_(T)})}),u}}var me=a("./packages/ckeditor5-ui/src/index.ts");class pe extends me.G7{constructor(r){super(r),this.buttonView=new me.r5(r),this._fileInputView=new ge(r),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[this.buttonView,this._fileInputView]}),this.buttonView.on("execute",()=>{this._fileInputView.open()})}focus(){this.buttonView.focus()}}class ge extends me.G7{constructor(r){super(r),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const u=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:u.to("acceptedType"),multiple:u.to("allowMultipleFiles")},on:{change:u.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}class X extends d.Sy{static get requires(){return[I]}static get pluginName(){return"Base64UploadAdapter"}init(){this.editor.plugins.get(I).createUploadAdapter=r=>new te(r)}}class te{constructor(r){this.loader=r}upload(){return new Promise((r,u)=>{const w=this.reader=new window.FileReader;w.addEventListener("load",()=>{r({default:w.result})}),w.addEventListener("error",_=>{u(_)}),w.addEventListener("abort",()=>{u()}),this.loader.file.then(_=>{w.readAsDataURL(_)})})}abort(){this.reader.abort()}}class Z extends d.Sy{static get requires(){return[I]}static get pluginName(){return"SimpleUploadAdapter"}init(){const r=this.editor.config.get("simpleUpload");r&&(r.uploadUrl?this.editor.plugins.get(I).createUploadAdapter=u=>new h(u,r):(0,A.KE)("simple-upload-adapter-missing-uploadurl"))}}class h{constructor(r,u){this.loader=r,this.options=u}upload(){return this.loader.file.then(r=>new Promise((u,w)=>{this._initRequest(),this._initListeners(u,w,r),this._sendRequest(r)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const r=this.xhr=new XMLHttpRequest;r.open("POST",this.options.uploadUrl,!0),r.responseType="json"}_initListeners(r,u,w){const _=this.xhr,T=this.loader,z=`Couldn't upload file: ${w.name}.`;_.addEventListener("error",()=>u(z)),_.addEventListener("abort",()=>u()),_.addEventListener("load",()=>{const L=_.response;if(!L||L.error)return u(L&&L.error&&L.error.message?L.error.message:z);const x=L.url?{default:L.url}:L.urls;r({...L,urls:x})}),_.upload&&_.upload.addEventListener("progress",L=>{L.lengthComputable&&(T.uploadTotal=L.total,T.uploaded=L.loaded)})}_sendRequest(r){const u=this.options.headers||{},w=this.options.withCredentials||!1;for(const T of Object.keys(u))this.xhr.setRequestHeader(T,u[T]);this.xhr.withCredentials=w;const _=new FormData;_.append("upload",r),this.xhr.send(_)}}},"./src/utils.js":(f,v,a)=>{"use strict";a.r(v),a.d(v,{CKEditorError:()=>d.Bb,Collection:()=>d.FE,Config:()=>d.De,DomEmitterMixin:()=>d.Xu,ElementReplacer:()=>d.a6,EmitterMixin:()=>d.ln,EventInfo:()=>d.M3,FocusTracker:()=>d.Rh,KeystrokeHandler:()=>d.VD,Locale:()=>d.go,ObservableMixin:()=>d.Re,Rect:()=>d.UL,ResizeObserver:()=>d.do,compareArrays:()=>d.Rt,count:()=>d.QX,createElement:()=>d.az,diff:()=>d.Hg,env:()=>d.OB,fastDiff:()=>d.HZ,findClosestScrollableAncestor:()=>d.wm,first:()=>d.Ps,getAncestors:()=>d.dk,getCode:()=>d.Cq,getDataFromElement:()=>d.yy,getEnvKeystrokeText:()=>d.XU,getLanguageDirection:()=>d.j9,getLocalizedArrowKeyCodeDirection:()=>d.mA,getOptimalPosition:()=>d.xZ,global:()=>d.CO,indexOf:()=>d.cq,insertAt:()=>d.ZQ,insertToPriorityArray:()=>d.VG,isArrowKeyCode:()=>d.dj,isCombiningMark:()=>d.tO,isComment:()=>d.C3,isForwardArrowKeyCode:()=>d.Zt,isHighSurrogateHalf:()=>d.Cb,isInsideCombinedSymbol:()=>d.pp,isInsideEmojiSequence:()=>d.YK,isInsideSurrogatePair:()=>d.to,isIterable:()=>d.TW,isLowSurrogateHalf:()=>d.nA,isNode:()=>d.UG,isRange:()=>d.bR,isText:()=>d.Gs,isVisible:()=>d.pn,keyCodes:()=>d.Do,logError:()=>d.H,logWarning:()=>d.KE,mix:()=>d.CD,parseKeystroke:()=>d.Zz,priorities:()=>d.tA,remove:()=>d.Od,scrollAncestorsToShowTarget:()=>d.F0,scrollViewportToShowTarget:()=>d.mR,setDataInElement:()=>d.jS,spliceArray:()=>d.x,toArray:()=>d.qo,toMap:()=>d.qL,toUnit:()=>d.nn,uid:()=>d.hQ,version:()=>d.i8});var d=a("./packages/ckeditor5-utils/src/index.ts")},"./src/widget.js":(f,v,a)=>{"use strict";a.r(v),a.d(v,{WIDGET_CLASS_NAME:()=>d.s4,WIDGET_SELECTED_CLASS_NAME:()=>d.Uo,Widget:()=>d.$L,WidgetResize:()=>d.WR,WidgetToolbarRepository:()=>d.e8,WidgetTypeAround:()=>d.Ww,findOptimalInsertionRange:()=>d.KT,getLabel:()=>d.id,isWidget:()=>d.Qd,setHighlightHandling:()=>d.em,setLabel:()=>d.l6,toWidget:()=>d.XC,toWidgetEditable:()=>d.sC,viewToModelPositionOutsideModelElement:()=>d.$n});var d=a("./packages/ckeditor5-widget/src/index.ts")},"?7cdd":(f,v,a)=>{f.exports=a},"./node_modules/lodash-es/_ListCache.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>te});const d=function(){this.__data__=[],this.size=0};var A=a("./node_modules/lodash-es/eq.js");const H=function(Z,h){for(var g=Z.length;g--;)if((0,A.Z)(Z[g][0],h))return g;return-1};var I=Array.prototype.splice;const C=function(Z){var h=this.__data__,g=H(h,Z);return!(g<0)&&(g==h.length-1?h.pop():I.call(h,g,1),--this.size,!0)},me=function(Z){var h=this.__data__,g=H(h,Z);return g<0?void 0:h[g][1]},pe=function(Z){return H(this.__data__,Z)>-1},ge=function(Z,h){var g=this.__data__,r=H(g,Z);return r<0?(++this.size,g.push([Z,h])):g[r][1]=h,this};function X(Z){var h=-1,g=Z==null?0:Z.length;for(this.clear();++h<g;){var r=Z[h];this.set(r[0],r[1])}}X.prototype.clear=d,X.prototype.delete=C,X.prototype.get=me,X.prototype.has=pe,X.prototype.set=ge;const te=X},"./node_modules/lodash-es/_Map.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/lodash-es/_getNative.js"),A=a("./node_modules/lodash-es/_root.js");const H=(0,d.Z)(A.Z,"Map")},"./node_modules/lodash-es/_MapCache.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>D});const d=(0,a("./node_modules/lodash-es/_getNative.js").Z)(Object,"create"),A=function(){this.__data__=d?d(null):{},this.size=0},H=function(W){var q=this.has(W)&&delete this.__data__[W];return this.size-=q?1:0,q};var I="__lodash_hash_undefined__",C=Object.prototype.hasOwnProperty;const me=function(W){var q=this.__data__;if(d){var ae=q[W];return ae===I?void 0:ae}return C.call(q,W)?q[W]:void 0};var pe=Object.prototype.hasOwnProperty;const ge=function(W){var q=this.__data__;return d?q[W]!==void 0:pe.call(q,W)};var X="__lodash_hash_undefined__";const te=function(W,q){var ae=this.__data__;return this.size+=this.has(W)?0:1,ae[W]=d&&q===void 0?X:q,this};function Z(W){var q=-1,ae=W==null?0:W.length;for(this.clear();++q<ae;){var Ie=W[q];this.set(Ie[0],Ie[1])}}Z.prototype.clear=A,Z.prototype.delete=H,Z.prototype.get=me,Z.prototype.has=ge,Z.prototype.set=te;const h=Z;var g=a("./node_modules/lodash-es/_ListCache.js"),r=a("./node_modules/lodash-es/_Map.js");const u=function(){this.size=0,this.__data__={hash:new h,map:new(r.Z||g.Z),string:new h}},w=function(W){var q=typeof W;return q=="string"||q=="number"||q=="symbol"||q=="boolean"?W!=="__proto__":W===null},_=function(W,q){var ae=W.__data__;return w(q)?ae[typeof q=="string"?"string":"hash"]:ae.map},T=function(W){var q=_(this,W).delete(W);return this.size-=q?1:0,q},z=function(W){return _(this,W).get(W)},L=function(W){return _(this,W).has(W)},x=function(W,q){var ae=_(this,W),Ie=ae.size;return ae.set(W,q),this.size+=ae.size==Ie?0:1,this};function c(W){var q=-1,ae=W==null?0:W.length;for(this.clear();++q<ae;){var Ie=W[q];this.set(Ie[0],Ie[1])}}c.prototype.clear=u,c.prototype.delete=T,c.prototype.get=z,c.prototype.has=L,c.prototype.set=x;const D=c},"./node_modules/lodash-es/_Stack.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>Z});var d=a("./node_modules/lodash-es/_ListCache.js");const A=function(){this.__data__=new d.Z,this.size=0},H=function(h){var g=this.__data__,r=g.delete(h);return this.size=g.size,r},I=function(h){return this.__data__.get(h)},C=function(h){return this.__data__.has(h)};var me=a("./node_modules/lodash-es/_Map.js"),pe=a("./node_modules/lodash-es/_MapCache.js"),ge=200;const X=function(h,g){var r=this.__data__;if(r instanceof d.Z){var u=r.__data__;if(!me.Z||u.length<ge-1)return u.push([h,g]),this.size=++r.size,this;r=this.__data__=new pe.Z(u)}return r.set(h,g),this.size=r.size,this};function te(h){var g=this.__data__=new d.Z(h);this.size=g.size}te.prototype.clear=A,te.prototype.delete=H,te.prototype.get=I,te.prototype.has=C,te.prototype.set=X;const Z=te},"./node_modules/lodash-es/_Symbol.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=a("./node_modules/lodash-es/_root.js").Z.Symbol},"./node_modules/lodash-es/_Uint8Array.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=a("./node_modules/lodash-es/_root.js").Z.Uint8Array},"./node_modules/lodash-es/_arrayLikeKeys.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>ge});const d=function(X,te){for(var Z=-1,h=Array(X);++Z<X;)h[Z]=te(Z);return h};var A=a("./node_modules/lodash-es/isArguments.js"),H=a("./node_modules/lodash-es/isArray.js"),I=a("./node_modules/lodash-es/isBuffer.js"),C=a("./node_modules/lodash-es/_isIndex.js"),me=a("./node_modules/lodash-es/isTypedArray.js"),pe=Object.prototype.hasOwnProperty;const ge=function(X,te){var Z=(0,H.Z)(X),h=!Z&&(0,A.Z)(X),g=!Z&&!h&&(0,I.Z)(X),r=!Z&&!h&&!g&&(0,me.Z)(X),u=Z||h||g||r,w=u?d(X.length,String):[],_=w.length;for(var T in X)!te&&!pe.call(X,T)||u&&(T=="length"||g&&(T=="offset"||T=="parent")||r&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||(0,C.Z)(T,_))||w.push(T);return w}},"./node_modules/lodash-es/_arrayPush.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=function(A,H){for(var I=-1,C=H.length,me=A.length;++I<C;)A[me+I]=H[I];return A}},"./node_modules/lodash-es/_assignValue.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>I});var d=a("./node_modules/lodash-es/_baseAssignValue.js"),A=a("./node_modules/lodash-es/eq.js"),H=Object.prototype.hasOwnProperty;const I=function(C,me,pe){var ge=C[me];H.call(C,me)&&(0,A.Z)(ge,pe)&&(pe!==void 0||me in C)||(0,d.Z)(C,me,pe)}},"./node_modules/lodash-es/_baseAssignValue.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>A});var d=a("./node_modules/lodash-es/_defineProperty.js");const A=function(H,I,C){I=="__proto__"&&d.Z?(0,d.Z)(H,I,{configurable:!0,enumerable:!0,value:C,writable:!0}):H[I]=C}},"./node_modules/lodash-es/_baseClone.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>dn});var d=a("./node_modules/lodash-es/_Stack.js");const A=function(pi,fi){for(var Ki=-1,ke=pi==null?0:pi.length;++Ki<ke&&fi(pi[Ki],Ki,pi)!==!1;);return pi};var H=a("./node_modules/lodash-es/_assignValue.js"),I=a("./node_modules/lodash-es/_copyObject.js"),C=a("./node_modules/lodash-es/keys.js");const me=function(pi,fi){return pi&&(0,I.Z)(fi,(0,C.Z)(fi),pi)};var pe=a("./node_modules/lodash-es/keysIn.js");const ge=function(pi,fi){return pi&&(0,I.Z)(fi,(0,pe.Z)(fi),pi)};var X=a("./node_modules/lodash-es/_cloneBuffer.js"),te=a("./node_modules/lodash-es/_copyArray.js"),Z=a("./node_modules/lodash-es/_getSymbols.js");const h=function(pi,fi){return(0,I.Z)(pi,(0,Z.Z)(pi),fi)};var g=a("./node_modules/lodash-es/_arrayPush.js"),r=a("./node_modules/lodash-es/_getPrototype.js"),u=a("./node_modules/lodash-es/stubArray.js");const w=Object.getOwnPropertySymbols?function(pi){for(var fi=[];pi;)(0,g.Z)(fi,(0,Z.Z)(pi)),pi=(0,r.Z)(pi);return fi}:u.Z,_=function(pi,fi){return(0,I.Z)(pi,w(pi),fi)};var T=a("./node_modules/lodash-es/_getAllKeys.js"),z=a("./node_modules/lodash-es/_baseGetAllKeys.js");const L=function(pi){return(0,z.Z)(pi,pe.Z,w)};var x=a("./node_modules/lodash-es/_getTag.js"),c=Object.prototype.hasOwnProperty;const D=function(pi){var fi=pi.length,Ki=new pi.constructor(fi);return fi&&typeof pi[0]=="string"&&c.call(pi,"index")&&(Ki.index=pi.index,Ki.input=pi.input),Ki};var W=a("./node_modules/lodash-es/_cloneArrayBuffer.js");const q=function(pi,fi){var Ki=fi?(0,W.Z)(pi.buffer):pi.buffer;return new pi.constructor(Ki,pi.byteOffset,pi.byteLength)};var ae=/\w*$/;const Ie=function(pi){var fi=new pi.constructor(pi.source,ae.exec(pi));return fi.lastIndex=pi.lastIndex,fi};var Ve=a("./node_modules/lodash-es/_Symbol.js"),_e=Ve.Z?Ve.Z.prototype:void 0,Me=_e?_e.valueOf:void 0;const Qe=function(pi){return Me?Object(Me.call(pi)):{}};var dt=a("./node_modules/lodash-es/_cloneTypedArray.js"),nt="[object Boolean]",qe="[object Date]",et="[object Map]",Nt="[object Number]",jt="[object RegExp]",yt="[object Set]",tt="[object String]",Bt="[object Symbol]",ye="[object ArrayBuffer]",Ae="[object DataView]",Ke="[object Float32Array]",kt="[object Float64Array]",It="[object Int8Array]",Yt="[object Int16Array]",zt="[object Int32Array]",ot="[object Uint8Array]",Dt="[object Uint8ClampedArray]",wt="[object Uint16Array]",ni="[object Uint32Array]";const di=function(pi,fi,Ki){var ke=pi.constructor;switch(fi){case ye:return(0,W.Z)(pi);case nt:case qe:return new ke(+pi);case Ae:return q(pi,Ki);case Ke:case kt:case It:case Yt:case zt:case ot:case Dt:case wt:case ni:return(0,dt.Z)(pi,Ki);case et:return new ke;case Nt:case tt:return new ke(pi);case jt:return Ie(pi);case yt:return new ke;case Bt:return Qe(pi)}};var xi=a("./node_modules/lodash-es/_initCloneObject.js"),bt=a("./node_modules/lodash-es/isArray.js"),fe=a("./node_modules/lodash-es/isBuffer.js"),je=a("./node_modules/lodash-es/isObjectLike.js"),Ze="[object Map]";const pt=function(pi){return(0,je.Z)(pi)&&(0,x.Z)(pi)==Ze};var Ct=a("./node_modules/lodash-es/_baseUnary.js"),St=a("./node_modules/lodash-es/_nodeUtil.js"),Xt=St.Z&&St.Z.isMap;const Zt=Xt?(0,Ct.Z)(Xt):pt;var oi=a("./node_modules/lodash-es/isObject.js"),bi="[object Set]";const gi=function(pi){return(0,je.Z)(pi)&&(0,x.Z)(pi)==bi};var Ti=St.Z&&St.Z.isSet;const Mt=Ti?(0,Ct.Z)(Ti):gi;var Ei=1,Ri=2,Yi=4,ji="[object Arguments]",Pi="[object Function]",qi="[object GeneratorFunction]",nn="[object Object]",Li={};Li[ji]=Li["[object Array]"]=Li["[object ArrayBuffer]"]=Li["[object DataView]"]=Li["[object Boolean]"]=Li["[object Date]"]=Li["[object Float32Array]"]=Li["[object Float64Array]"]=Li["[object Int8Array]"]=Li["[object Int16Array]"]=Li["[object Int32Array]"]=Li["[object Map]"]=Li["[object Number]"]=Li[nn]=Li["[object RegExp]"]=Li["[object Set]"]=Li["[object String]"]=Li["[object Symbol]"]=Li["[object Uint8Array]"]=Li["[object Uint8ClampedArray]"]=Li["[object Uint16Array]"]=Li["[object Uint32Array]"]=!0,Li["[object Error]"]=Li[Pi]=Li["[object WeakMap]"]=!1;const dn=function pi(fi,Ki,ke,V,F,P){var N,de=Ki&Ei,Ce=Ki&Ri,$e=Ki&Yi;if(ke&&(N=F?ke(fi,V,F,P):ke(fi)),N!==void 0)return N;if(!(0,oi.Z)(fi))return fi;var at=(0,bt.Z)(fi);if(at){if(N=D(fi),!de)return(0,te.Z)(fi,N)}else{var Tt=(0,x.Z)(fi),Ge=Tt==Pi||Tt==qi;if((0,fe.Z)(fi))return(0,X.Z)(fi,de);if(Tt==nn||Tt==ji||Ge&&!F){if(N=Ce||Ge?{}:(0,xi.Z)(fi),!de)return Ce?_(fi,ge(N,fi)):h(fi,me(N,fi))}else{if(!Li[Tt])return F?fi:{};N=di(fi,Tt,de)}}P||(P=new d.Z);var Ut=P.get(fi);if(Ut)return Ut;P.set(fi,N),Mt(fi)?fi.forEach(function(Ni){N.add(pi(Ni,Ki,ke,Ni,fi,P))}):Zt(fi)&&fi.forEach(function(Ni,Ii){N.set(Ii,pi(Ni,Ki,ke,Ii,fi,P))});var ci=$e?Ce?L:T.Z:Ce?pe.Z:C.Z,yi=at?void 0:ci(fi);return A(yi||fi,function(Ni,Ii){yi&&(Ni=fi[Ii=Ni]),(0,H.Z)(N,Ii,pi(Ni,Ki,ke,Ii,fi,P))}),N}},"./node_modules/lodash-es/_baseGetAllKeys.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/lodash-es/_arrayPush.js"),A=a("./node_modules/lodash-es/isArray.js");const H=function(I,C,me){var pe=C(I);return(0,A.Z)(I)?pe:(0,d.Z)(pe,me(I))}},"./node_modules/lodash-es/_baseGetTag.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>h});var d=a("./node_modules/lodash-es/_Symbol.js"),A=Object.prototype,H=A.hasOwnProperty,I=A.toString,C=d.Z?d.Z.toStringTag:void 0;const me=function(g){var r=H.call(g,C),u=g[C];try{g[C]=void 0;var w=!0}catch{}var _=I.call(g);return w&&(r?g[C]=u:delete g[C]),_};var pe=Object.prototype.toString;const ge=function(g){return pe.call(g)};var X="[object Null]",te="[object Undefined]",Z=d.Z?d.Z.toStringTag:void 0;const h=function(g){return g==null?g===void 0?te:X:Z&&Z in Object(g)?me(g):ge(g)}},"./node_modules/lodash-es/_baseUnary.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=function(A){return function(H){return A(H)}}},"./node_modules/lodash-es/_cloneArrayBuffer.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>A});var d=a("./node_modules/lodash-es/_Uint8Array.js");const A=function(H){var I=new H.constructor(H.byteLength);return new d.Z(I).set(new d.Z(H)),I}},"./node_modules/lodash-es/_cloneBuffer.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>me});var d=a("./node_modules/lodash-es/_root.js"),A=Gt&&!Gt.nodeType&&Gt,H=A&&!0&&ii&&!ii.nodeType&&ii,I=H&&H.exports===A?d.Z.Buffer:void 0,C=I?I.allocUnsafe:void 0;const me=function(pe,ge){if(ge)return pe.slice();var X=pe.length,te=C?C(X):new pe.constructor(X);return pe.copy(te),te}},"./node_modules/lodash-es/_cloneTypedArray.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>A});var d=a("./node_modules/lodash-es/_cloneArrayBuffer.js");const A=function(H,I){var C=I?(0,d.Z)(H.buffer):H.buffer;return new H.constructor(C,H.byteOffset,H.length)}},"./node_modules/lodash-es/_copyArray.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=function(A,H){var I=-1,C=A.length;for(H||(H=Array(C));++I<C;)H[I]=A[I];return H}},"./node_modules/lodash-es/_copyObject.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/lodash-es/_assignValue.js"),A=a("./node_modules/lodash-es/_baseAssignValue.js");const H=function(I,C,me,pe){var ge=!me;me||(me={});for(var X=-1,te=C.length;++X<te;){var Z=C[X],h=pe?pe(me[Z],I[Z],Z,me,I):void 0;h===void 0&&(h=I[Z]),ge?(0,A.Z)(me,Z,h):(0,d.Z)(me,Z,h)}return me}},"./node_modules/lodash-es/_createAssigner.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>T});const d=function(z){return z},A=function(z,L,x){switch(x.length){case 0:return z.call(L);case 1:return z.call(L,x[0]);case 2:return z.call(L,x[0],x[1]);case 3:return z.call(L,x[0],x[1],x[2])}return z.apply(L,x)};var H=Math.max;const I=function(z,L,x){return L=H(L===void 0?z.length-1:L,0),function(){for(var c=arguments,D=-1,W=H(c.length-L,0),q=Array(W);++D<W;)q[D]=c[L+D];D=-1;for(var ae=Array(L+1);++D<L;)ae[D]=c[D];return ae[L]=x(q),A(z,this,ae)}},C=function(z){return function(){return z}};var me=a("./node_modules/lodash-es/_defineProperty.js");const pe=me.Z?function(z,L){return(0,me.Z)(z,"toString",{configurable:!0,enumerable:!1,value:C(L),writable:!0})}:d;var ge=800,X=16,te=Date.now;const Z=function(z){var L=0,x=0;return function(){var c=te(),D=X-(c-x);if(x=c,D>0){if(++L>=ge)return arguments[0]}else L=0;return z.apply(void 0,arguments)}}(pe),h=function(z,L){return Z(I(z,L,d),z+"")};var g=a("./node_modules/lodash-es/eq.js"),r=a("./node_modules/lodash-es/isArrayLike.js"),u=a("./node_modules/lodash-es/_isIndex.js"),w=a("./node_modules/lodash-es/isObject.js");const _=function(z,L,x){if(!(0,w.Z)(x))return!1;var c=typeof L;return!!(c=="number"?(0,r.Z)(x)&&(0,u.Z)(L,x.length):c=="string"&&L in x)&&(0,g.Z)(x[L],z)},T=function(z){return h(function(L,x){var c=-1,D=x.length,W=D>1?x[D-1]:void 0,q=D>2?x[2]:void 0;for(W=z.length>3&&typeof W=="function"?(D--,W):void 0,q&&_(x[0],x[1],q)&&(W=D<3?void 0:W,D=1),L=Object(L);++c<D;){var ae=x[c];ae&&z(L,ae,c,W)}return L})}},"./node_modules/lodash-es/_defineProperty.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>A});var d=a("./node_modules/lodash-es/_getNative.js");const A=function(){try{var H=(0,d.Z)(Object,"defineProperty");return H({},"",{}),H}catch{}}()},"./node_modules/lodash-es/_freeGlobal.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=typeof Y.g=="object"&&Y.g&&Y.g.Object===Object&&Y.g},"./node_modules/lodash-es/_getAllKeys.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>I});var d=a("./node_modules/lodash-es/_baseGetAllKeys.js"),A=a("./node_modules/lodash-es/_getSymbols.js"),H=a("./node_modules/lodash-es/keys.js");const I=function(C){return(0,d.Z)(C,H.Z,A.Z)}},"./node_modules/lodash-es/_getNative.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>w});var d=a("./node_modules/lodash-es/isFunction.js");const A=a("./node_modules/lodash-es/_root.js").Z["__core-js_shared__"];var H,I=(H=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"";const C=function(_){return!!I&&I in _};var me=a("./node_modules/lodash-es/isObject.js"),pe=a("./node_modules/lodash-es/_toSource.js"),ge=/^\[object .+?Constructor\]$/,X=Function.prototype,te=Object.prototype,Z=X.toString,h=te.hasOwnProperty,g=RegExp("^"+Z.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const r=function(_){return!(!(0,me.Z)(_)||C(_))&&((0,d.Z)(_)?g:ge).test((0,pe.Z)(_))},u=function(_,T){return _?.[T]},w=function(_,T){var z=u(_,T);return r(z)?z:void 0}},"./node_modules/lodash-es/_getPrototype.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=(0,a("./node_modules/lodash-es/_overArg.js").Z)(Object.getPrototypeOf,Object)},"./node_modules/lodash-es/_getSymbols.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>C});const d=function(me,pe){for(var ge=-1,X=me==null?0:me.length,te=0,Z=[];++ge<X;){var h=me[ge];pe(h,ge,me)&&(Z[te++]=h)}return Z};var A=a("./node_modules/lodash-es/stubArray.js"),H=Object.prototype.propertyIsEnumerable,I=Object.getOwnPropertySymbols;const C=I?function(me){return me==null?[]:(me=Object(me),d(I(me),function(pe){return H.call(me,pe)}))}:A.Z},"./node_modules/lodash-es/_getTag.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>x});var d=a("./node_modules/lodash-es/_getNative.js"),A=a("./node_modules/lodash-es/_root.js");const H=(0,d.Z)(A.Z,"DataView");var I=a("./node_modules/lodash-es/_Map.js");const C=(0,d.Z)(A.Z,"Promise"),me=(0,d.Z)(A.Z,"Set"),pe=(0,d.Z)(A.Z,"WeakMap");var ge=a("./node_modules/lodash-es/_baseGetTag.js"),X=a("./node_modules/lodash-es/_toSource.js"),te="[object Map]",Z="[object Promise]",h="[object Set]",g="[object WeakMap]",r="[object DataView]",u=(0,X.Z)(H),w=(0,X.Z)(I.Z),_=(0,X.Z)(C),T=(0,X.Z)(me),z=(0,X.Z)(pe),L=ge.Z;(H&&L(new H(new ArrayBuffer(1)))!=r||I.Z&&L(new I.Z)!=te||C&&L(C.resolve())!=Z||me&&L(new me)!=h||pe&&L(new pe)!=g)&&(L=function(c){var D=(0,ge.Z)(c),W=D=="[object Object]"?c.constructor:void 0,q=W?(0,X.Z)(W):"";if(q)switch(q){case u:return r;case w:return te;case _:return Z;case T:return h;case z:return g}return D});const x=L},"./node_modules/lodash-es/_initCloneObject.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>me});var d=a("./node_modules/lodash-es/isObject.js"),A=Object.create;const H=function(){function pe(){}return function(ge){if(!(0,d.Z)(ge))return{};if(A)return A(ge);pe.prototype=ge;var X=new pe;return pe.prototype=void 0,X}}();var I=a("./node_modules/lodash-es/_getPrototype.js"),C=a("./node_modules/lodash-es/_isPrototype.js");const me=function(pe){return typeof pe.constructor!="function"||(0,C.Z)(pe)?{}:H((0,I.Z)(pe))}},"./node_modules/lodash-es/_isIndex.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=9007199254740991,A=/^(?:0|[1-9]\d*)$/;const H=function(I,C){var me=typeof I;return!!(C=C??d)&&(me=="number"||me!="symbol"&&A.test(I))&&I>-1&&I%1==0&&I<C}},"./node_modules/lodash-es/_isPrototype.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>A});var d=Object.prototype;const A=function(H){var I=H&&H.constructor;return H===(typeof I=="function"&&I.prototype||d)}},"./node_modules/lodash-es/_nodeUtil.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>C});var d=a("./node_modules/lodash-es/_freeGlobal.js"),A=Gt&&!Gt.nodeType&&Gt,H=A&&!0&&ii&&!ii.nodeType&&ii,I=H&&H.exports===A&&d.Z.process;const C=function(){try{var me=H&&H.require&&H.require("util").types;return me||I&&I.binding&&I.binding("util")}catch{}}()},"./node_modules/lodash-es/_overArg.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=function(A,H){return function(I){return A(H(I))}}},"./node_modules/lodash-es/_root.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/lodash-es/_freeGlobal.js"),A=typeof self=="object"&&self&&self.Object===Object&&self;const H=d.Z||A||Function("return this")()},"./node_modules/lodash-es/_toSource.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>A});var d=Function.prototype.toString;const A=function(H){if(H!=null){try{return d.call(H)}catch{}try{return H+""}catch{}}return""}},"./node_modules/lodash-es/assignIn.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>I});var d=a("./node_modules/lodash-es/_copyObject.js"),A=a("./node_modules/lodash-es/_createAssigner.js"),H=a("./node_modules/lodash-es/keysIn.js");const I=(0,A.Z)(function(C,me){(0,d.Z)(me,(0,H.Z)(me),C)})},"./node_modules/lodash-es/cloneDeepWith.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>I});var d=a("./node_modules/lodash-es/_baseClone.js"),A=1,H=4;const I=function(C,me){return me=typeof me=="function"?me:void 0,(0,d.Z)(C,A|H,me)}},"./node_modules/lodash-es/debounce.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>T});var d=a("./node_modules/lodash-es/isObject.js"),A=a("./node_modules/lodash-es/_root.js");const H=function(){return A.Z.Date.now()};var I=/\s/;const C=function(z){for(var L=z.length;L--&&I.test(z.charAt(L)););return L};var me=/^\s+/;const pe=function(z){return z&&z.slice(0,C(z)+1).replace(me,"")};var ge=a("./node_modules/lodash-es/isSymbol.js"),X=NaN,te=/^[-+]0x[0-9a-f]+$/i,Z=/^0b[01]+$/i,h=/^0o[0-7]+$/i,g=parseInt;const r=function(z){if(typeof z=="number")return z;if((0,ge.Z)(z))return X;if((0,d.Z)(z)){var L=typeof z.valueOf=="function"?z.valueOf():z;z=(0,d.Z)(L)?L+"":L}if(typeof z!="string")return z===0?z:+z;z=pe(z);var x=Z.test(z);return x||h.test(z)?g(z.slice(2),x?2:8):te.test(z)?X:+z};var u="Expected a function",w=Math.max,_=Math.min;const T=function(z,L,x){var c,D,W,q,ae,Ie,Ve=0,_e=!1,Me=!1,Qe=!0;if(typeof z!="function")throw new TypeError(u);function dt(jt){var yt=c,tt=D;return c=D=void 0,Ve=jt,q=z.apply(tt,yt)}function nt(jt){var yt=jt-Ie;return Ie===void 0||yt>=L||yt<0||Me&&jt-Ve>=W}function qe(){var jt=H();if(nt(jt))return et(jt);ae=setTimeout(qe,function(yt){var tt=L-(yt-Ie);return Me?_(tt,W-(yt-Ve)):tt}(jt))}function et(jt){return ae=void 0,Qe&&c?dt(jt):(c=D=void 0,q)}function Nt(){var jt=H(),yt=nt(jt);if(c=arguments,D=this,Ie=jt,yt){if(ae===void 0)return function(tt){return Ve=tt,ae=setTimeout(qe,L),_e?dt(tt):q}(Ie);if(Me)return clearTimeout(ae),ae=setTimeout(qe,L),dt(Ie)}return ae===void 0&&(ae=setTimeout(qe,L)),q}return L=r(L)||0,(0,d.Z)(x)&&(_e=!!x.leading,W=(Me="maxWait"in x)?w(r(x.maxWait)||0,L):W,Qe="trailing"in x?!!x.trailing:Qe),Nt.cancel=function(){ae!==void 0&&clearTimeout(ae),Ve=0,c=Ie=D=ae=void 0},Nt.flush=function(){return ae===void 0?q:et(H())},Nt}},"./node_modules/lodash-es/eq.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=function(A,H){return A===H||A!=A&&H!=H}},"./node_modules/lodash-es/isArguments.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>ge});var d=a("./node_modules/lodash-es/_baseGetTag.js"),A=a("./node_modules/lodash-es/isObjectLike.js"),H="[object Arguments]";const I=function(X){return(0,A.Z)(X)&&(0,d.Z)(X)==H};var C=Object.prototype,me=C.hasOwnProperty,pe=C.propertyIsEnumerable;const ge=I(function(){return arguments}())?I:function(X){return(0,A.Z)(X)&&me.call(X,"callee")&&!pe.call(X,"callee")}},"./node_modules/lodash-es/isArray.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=Array.isArray},"./node_modules/lodash-es/isArrayLike.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/lodash-es/isFunction.js"),A=a("./node_modules/lodash-es/isLength.js");const H=function(I){return I!=null&&(0,A.Z)(I.length)&&!(0,d.Z)(I)}},"./node_modules/lodash-es/isBuffer.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>me});var d=a("./node_modules/lodash-es/_root.js");const A=function(){return!1};var H=Gt&&!Gt.nodeType&&Gt,I=H&&!0&&ii&&!ii.nodeType&&ii,C=I&&I.exports===H?d.Z.Buffer:void 0;const me=(C?C.isBuffer:void 0)||A},"./node_modules/lodash-es/isElement.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a("./node_modules/lodash-es/isObjectLike.js"),A=a("./node_modules/lodash-es/isPlainObject.js");const H=function(I){return(0,d.Z)(I)&&I.nodeType===1&&!(0,A.Z)(I)}},"./node_modules/lodash-es/isFunction.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>pe});var d=a("./node_modules/lodash-es/_baseGetTag.js"),A=a("./node_modules/lodash-es/isObject.js"),H="[object AsyncFunction]",I="[object Function]",C="[object GeneratorFunction]",me="[object Proxy]";const pe=function(ge){if(!(0,A.Z)(ge))return!1;var X=(0,d.Z)(ge);return X==I||X==C||X==H||X==me}},"./node_modules/lodash-es/isLength.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>A});var d=9007199254740991;const A=function(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=d}},"./node_modules/lodash-es/isObject.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=function(A){var H=typeof A;return A!=null&&(H=="object"||H=="function")}},"./node_modules/lodash-es/isObjectLike.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=function(A){return A!=null&&typeof A=="object"}},"./node_modules/lodash-es/isPlainObject.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>te});var d=a("./node_modules/lodash-es/_baseGetTag.js"),A=a("./node_modules/lodash-es/_getPrototype.js"),H=a("./node_modules/lodash-es/isObjectLike.js"),I="[object Object]",C=Function.prototype,me=Object.prototype,pe=C.toString,ge=me.hasOwnProperty,X=pe.call(Object);const te=function(Z){if(!(0,H.Z)(Z)||(0,d.Z)(Z)!=I)return!1;var h=(0,A.Z)(Z);if(h===null)return!0;var g=ge.call(h,"constructor")&&h.constructor;return typeof g=="function"&&g instanceof g&&pe.call(g)==X}},"./node_modules/lodash-es/isSymbol.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>I});var d=a("./node_modules/lodash-es/_baseGetTag.js"),A=a("./node_modules/lodash-es/isObjectLike.js"),H="[object Symbol]";const I=function(C){return typeof C=="symbol"||(0,A.Z)(C)&&(0,d.Z)(C)==H}},"./node_modules/lodash-es/isTypedArray.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>X});var d=a("./node_modules/lodash-es/_baseGetTag.js"),A=a("./node_modules/lodash-es/isLength.js"),H=a("./node_modules/lodash-es/isObjectLike.js"),I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I["[object Arguments]"]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object DataView]"]=I["[object Date]"]=I["[object Error]"]=I["[object Function]"]=I["[object Map]"]=I["[object Number]"]=I["[object Object]"]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object WeakMap]"]=!1;const C=function(te){return(0,H.Z)(te)&&(0,A.Z)(te.length)&&!!I[(0,d.Z)(te)]};var me=a("./node_modules/lodash-es/_baseUnary.js"),pe=a("./node_modules/lodash-es/_nodeUtil.js"),ge=pe.Z&&pe.Z.isTypedArray;const X=ge?(0,me.Z)(ge):C},"./node_modules/lodash-es/keys.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>pe});var d=a("./node_modules/lodash-es/_arrayLikeKeys.js"),A=a("./node_modules/lodash-es/_isPrototype.js");const H=(0,a("./node_modules/lodash-es/_overArg.js").Z)(Object.keys,Object);var I=Object.prototype.hasOwnProperty;const C=function(ge){if(!(0,A.Z)(ge))return H(ge);var X=[];for(var te in Object(ge))I.call(ge,te)&&te!="constructor"&&X.push(te);return X};var me=a("./node_modules/lodash-es/isArrayLike.js");const pe=function(ge){return(0,me.Z)(ge)?(0,d.Z)(ge):C(ge)}},"./node_modules/lodash-es/keysIn.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>ge});var d=a("./node_modules/lodash-es/_arrayLikeKeys.js"),A=a("./node_modules/lodash-es/isObject.js"),H=a("./node_modules/lodash-es/_isPrototype.js");const I=function(X){var te=[];if(X!=null)for(var Z in Object(X))te.push(Z);return te};var C=Object.prototype.hasOwnProperty;const me=function(X){if(!(0,A.Z)(X))return I(X);var te=(0,H.Z)(X),Z=[];for(var h in X)(h!="constructor"||!te&&C.call(X,h))&&Z.push(h);return Z};var pe=a("./node_modules/lodash-es/isArrayLike.js");const ge=function(X){return(0,pe.Z)(X)?(0,d.Z)(X,!0):me(X)}},"./node_modules/lodash-es/stubArray.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>d});const d=function(){return[]}},"./node_modules/lodash-es/throttle.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>I});var d=a("./node_modules/lodash-es/debounce.js"),A=a("./node_modules/lodash-es/isObject.js"),H="Expected a function";const I=function(C,me,pe){var ge=!0,X=!0;if(typeof C!="function")throw new TypeError(H);return(0,A.Z)(pe)&&(ge="leading"in pe?!!pe.leading:ge,X="trailing"in pe?!!pe.trailing:X),(0,d.Z)(C,me,{leading:ge,maxWait:me,trailing:X})}},"./node_modules/lodash-es/toString.js":(f,v,a)=>{"use strict";a.d(v,{Z:()=>X});var d=a("./node_modules/lodash-es/_Symbol.js");const A=function(te,Z){for(var h=-1,g=te==null?0:te.length,r=Array(g);++h<g;)r[h]=Z(te[h],h,te);return r};var H=a("./node_modules/lodash-es/isArray.js"),I=a("./node_modules/lodash-es/isSymbol.js"),C=1/0,me=d.Z?d.Z.prototype:void 0,pe=me?me.toString:void 0;const ge=function te(Z){if(typeof Z=="string")return Z;if((0,H.Z)(Z))return A(Z,te)+"";if((0,I.Z)(Z))return pe?pe.call(Z):"";var h=Z+"";return h=="0"&&1/Z==-C?"-0":h},X=function(te){return te==null?"":ge(te)}}},m={};function E(f){var v=m[f];if(v!==void 0)return v.exports;var a=m[f]={id:f,exports:{}};return Qt[f](a,a.exports,E),a.exports}E.n=f=>{var v=f&&f.__esModule?()=>f.default:()=>f;return E.d(v,{a:v}),v},E.d=(f,v)=>{for(var a in v)E.o(v,a)&&!E.o(f,a)&&Object.defineProperty(f,a,{enumerable:!0,get:v[a]})},E.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),E.o=(f,v)=>Object.prototype.hasOwnProperty.call(f,v),E.r=f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},E.nc=void 0;var y=E("?7cdd");(window.CKEditor5=window.CKEditor5||{}).dll=y})(),function(Qt){Qt.CKEditor5=Qt.CKEditor5||{};const m=["utils","core","engine","ui","clipboard","enter","paragraph","select-all","typing","undo","upload","widget"];for(const E of m){const y=E.replace(/-([a-z])/g,(f,v)=>v.toUpperCase());Qt.CKEditor5[y]=Qt.CKEditor5.dll(`./src/${E}.js`)}}(window)},54482:(ii,Gt,Y)=>{"use strict";Y.r(Gt),Y.d(Gt,{default:()=>Yt});var Qt=Y(67294),m=Y(86896),E=Y(7681),y=Y(54574),f=Y(19270),v=Y(63428),a=Y(96404),d=Y(45697),A=Y.n(d),H=Y(71997);const I=H.iv`
  .ck-word-count {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
    padding-block: 0.2rem;
    font-size: 0.875rem;
  }

  .ck-editor__main {
    --ck-font-face: "Source Sans Pro", system-ui, Roboto, "Helvetica Neue", "Helvetica", Arial, sans-serif;
    color: var(--ck-color-editor-base-text);
    font-family: var(--ck-font-face);

    * {
      font: revert;
      margin: revert;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 0.6em;
      font-weight: 400;
    }

    h2 {
      font-size: 1.68em;
      margin-bottom: 0.4em;
      font-weight: 400;
    }

    h3 {
      font-size: 1.36em;
      margin-bottom: 0.2em;
      font-weight: 400;
    }

    h4 {
      font-size: 1.15em;
      margin-bottom: 0.1em;
      font-weight: 400;
    }

    p {
      font-size: 1em;
      line-height: 1.6em;
      margin-bottom: 0.8em;
    }

    figcaption {
      background-color: var(--ck-color-image-caption-background);
      caption-side: bottom;
      color: var(--ck-color-image-caption-text);
      display: table-caption;
      font-size: .75em;
      outline-offset: -1px;
      padding: 0.6em;
      word-break: break-word;
    }

    blockquote {
    }

    .table {
      margin: 0;
    }

    ul.todo-list {
      list-style: none;
      margin: revert;
      color: revert;
      font-family: revert;
      margin-left: 2rem;
    }

    ul,
    ol {
      list-style: initial;
      margin-left: 2rem;
    }

    ol {
      list-style: decimal;
    }

    sub {
      vertical-align: sub
    }

    sup {
      vertical-align: super
    }

    // higher specificity needed
    .ck.ck-content.ck-editor__editable {
      line-height: initial;
      min-height: 12.5rem;
      border-bottom-left-radius: 0.25rem;
      border-bottom-right-radius: 0.25rem;

      // so it's more Strapi alike
      &.ck-focused:not(.ck-editor__nested-editable) {
        border: 1px solid rgb(73, 69, 255);
        box-shadow: rgb(73 69 255) 0 0 0 0.125rem;
        border-top-left-radius: 0.25rem;
        border-top-right-radius: 0.25rem;
        transition-property: border-color, box-shadow;
        transition-duration: 0.2s;
      }
    }
  }
`,C=H.iv`
`,me=H.iv`
  .ck {
    --ck-color-toolbar-background: rgb(24, 24, 38);
    --ck-color-text: rgb(165, 165, 186);
    --ck-color-editor-base-text: rgb(255, 255, 255);
    --ck-color-toolbar-border: rgb(74, 74, 106);
    --ck-color-base-border: rgb(74, 74, 106);
    --ck-color-base-background: rgb(33, 33, 52);
    --ck-color-button-default-background: rgb(33, 33, 52);
    --ck-color-list-button-hover-background: rgb(24, 24, 38);
    --ck-color-button-default-hover-background: rgb(33, 33, 52);
    --ck-color-button-on-background: rgb(33, 33, 52);
    --ck-color-button-on-hover-background: rgb(33, 33, 52);
    --ck-color-button-default-active-background: rgb(33, 33, 52);
  }
  .ck-word-count {
    color: rgb(165, 165, 186)
  }
`,pe=zt=>{let ot=null;switch(zt){case"dark":ot=me;break;case"light":ot=C;break}return H.vJ`
    ${I}
    ${ot}
  `};var ge=Y(77868),X=Y(14611),te=Y(76079),Z=Y(11026),h=Y(50952),g=Y(15535),r=Y(66064),u=Y(96796),w=Y(63856),_=Y(56347),T=Y(78590),z=Y(29781),L=Y(31546),x=Y(17680),c=Y(77606),D=Y(57051),W=Y(81460),q=Y(66491),ae=Y(51609),Ie=Y(46609),Ve=Y(54132),_e=Y(51207),Me=Y(20060),Qe=Y(6653),dt=Y(47655);const nt=window.CKEditor5.core.Plugin,qe=window.CKEditor5.ui.ButtonView,et='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.3.6a.9.9 0 100 1.8h15.311a.9.9 0 100-1.8H4.301zm17.1 3.7A1.6 1.6 0 0123 5.9v15.5a1.6 1.6 0 01-1.6 1.6H2.6A1.601 1.601 0 011 21.4V8 5.915C1 5.03 1.716 4.3 2.6 4.3h18.8zM5.032 19.18h14.336l-3.136-3.205-1.792 1.831-4.032-4.12-5.376 5.494zm13.44-8.697c0 1.282-.985 2.289-2.24 2.289-1.254 0-2.24-1.007-2.24-2.29 0-1.281.986-2.288 2.24-2.288 1.255 0 2.24 1.007 2.24 2.289z"></path></svg>';class Nt extends nt{strapiToggle=null;static get pluginName(){return"strapiMediaLib"}init(){this.editor.ui.componentFactory.add("strapiMediaLib",()=>{const Dt=new qe;return Dt.set({label:"Media Library",icon:et,tooltip:!0}),Dt.on("execute",this.toggle.bind(this)),Dt})}connect(ot){if(typeof ot!="function")throw new Error("Input parameter for toogle should be a function");this.strapiToggle=ot}toggle(){if(typeof this.strapiToggle!="function")throw new Error("Strapi media library toggle function not connected. Use connect function first");this.strapiToggle()}}const jt={light:{plugins:[window.CKEditor5.autoformat.Autoformat,window.CKEditor5.basicStyles.Bold,window.CKEditor5.basicStyles.Italic,window.CKEditor5.essentials.Essentials,window.CKEditor5.heading.Heading,window.CKEditor5.image.Image,window.CKEditor5.image.ImageCaption,window.CKEditor5.image.ImageStyle,window.CKEditor5.image.ImageToolbar,window.CKEditor5.image.ImageUpload,window.CKEditor5.indent.Indent,window.CKEditor5.link.Link,window.CKEditor5.list.List,window.CKEditor5.paragraph.Paragraph,window.CKEditor5.pasteFromOffice.PasteFromOffice,window.CKEditor5.table.Table,window.CKEditor5.table.TableToolbar,window.CKEditor5.table.TableColumnResize,window.CKEditor5.table.TableCaption,window.CKEditor5.wordCount.WordCount,Nt],toolbar:["undo","redo","|","heading","|","bold","italic","|","link","strapiMediaLib","insertTable","|","bulletedList","numberedList"],heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"}]},image:{toolbar:["imageStyle:inline","imageStyle:block","imageStyle:side","|","toggleImageCaption","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","|","toggleTableCaption"]}},standard:{plugins:[window.CKEditor5.autoformat.Autoformat,window.CKEditor5.basicStyles.Bold,window.CKEditor5.basicStyles.Italic,window.CKEditor5.blockQuote.BlockQuote,window.CKEditor5.codeBlock.CodeBlock,window.CKEditor5.essentials.Essentials,window.CKEditor5.heading.Heading,window.CKEditor5.image.Image,window.CKEditor5.image.ImageCaption,window.CKEditor5.image.ImageStyle,window.CKEditor5.image.ImageToolbar,window.CKEditor5.image.ImageUpload,window.CKEditor5.indent.Indent,window.CKEditor5.link.Link,window.CKEditor5.link.LinkImage,window.CKEditor5.list.List,window.CKEditor5.mediaEmbed.MediaEmbed,window.CKEditor5.paragraph.Paragraph,window.CKEditor5.pasteFromOffice.PasteFromOffice,window.CKEditor5.table.Table,window.CKEditor5.table.TableToolbar,window.CKEditor5.table.TableColumnResize,window.CKEditor5.table.TableCaption,window.CKEditor5.wordCount.WordCount,Nt],toolbar:["undo","redo","|","heading","|","bold","italic","|","link","strapiMediaLib","mediaEmbed","blockQuote","insertTable","codeBlock","|","bulletedList","numberedList","outdent","indent"],heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"}]},image:{toolbar:["imageStyle:inline","imageStyle:block","imageStyle:side","|","toggleImageCaption","imageTextAlternative","|","linkImage"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","|","toggleTableCaption"]}},rich:{plugins:[window.CKEditor5.alignment.Alignment,window.CKEditor5.autoformat.Autoformat,window.CKEditor5.basicStyles.Bold,window.CKEditor5.basicStyles.Italic,window.CKEditor5.basicStyles.Underline,window.CKEditor5.basicStyles.Strikethrough,window.CKEditor5.basicStyles.Code,window.CKEditor5.basicStyles.Subscript,window.CKEditor5.basicStyles.Superscript,window.CKEditor5.blockQuote.BlockQuote,window.CKEditor5.codeBlock.CodeBlock,window.CKEditor5.essentials.Essentials,window.CKEditor5.font.FontSize,window.CKEditor5.font.FontFamily,window.CKEditor5.font.FontColor,window.CKEditor5.font.FontBackgroundColor,window.CKEditor5.findAndReplace.FindAndReplace,window.CKEditor5.heading.Heading,window.CKEditor5.horizontalLine.HorizontalLine,window.CKEditor5.htmlEmbed.HtmlEmbed,window.CKEditor5.image.Image,window.CKEditor5.image.ImageCaption,window.CKEditor5.image.ImageStyle,window.CKEditor5.image.ImageToolbar,window.CKEditor5.image.ImageUpload,window.CKEditor5.image.ImageResize,window.CKEditor5.indent.Indent,window.CKEditor5.indent.IndentBlock,window.CKEditor5.link.Link,window.CKEditor5.link.LinkImage,window.CKEditor5.list.List,window.CKEditor5.list.ListProperties,window.CKEditor5.list.TodoList,window.CKEditor5.mediaEmbed.MediaEmbed,window.CKEditor5.paragraph.Paragraph,window.CKEditor5.pasteFromOffice.PasteFromOffice,window.CKEditor5.removeFormat.RemoveFormat,window.CKEditor5.specialCharacters.SpecialCharacters,window.CKEditor5.specialCharacters.SpecialCharactersEssentials,window.CKEditor5.table.Table,window.CKEditor5.table.TableToolbar,window.CKEditor5.table.TableProperties,window.CKEditor5.table.TableCellProperties,window.CKEditor5.table.TableColumnResize,window.CKEditor5.table.TableCaption,window.CKEditor5.wordCount.WordCount,window.CKEditor5.highlight.Highlight,Nt],toolbar:{items:["undo","redo","|","findAndReplace","selectAll","|","heading","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","bold","italic","underline","strikethrough","superscript","subscript","code","removeFormat","-","link","strapiMediaLib","mediaEmbed","insertTable","horizontalLine","blockQuote","codeBlock","htmlEmbed","specialCharacters","highlight","|","alignment","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!0},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"}]},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},image:{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}],toolbar:["imageStyle:inline","imageStyle:block","imageStyle:side","|","toggleImageCaption","imageTextAlternative","|","linkImage","|","resizeImage:25","resizeImage:50","resizeImage:75","resizeImage:original"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","|","tableCellProperties","tableProperties","|","toggleTableCaption"]},fontSize:{options:[9,11,13,"default",17,19,21,27,35],supportAllValues:!1},fontFamily:{options:["default","Arial, Helvetica Neue, Helvetica, Source Sans Pro, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif","Roboto, Roboto Black, Roboto Medium, Roboto Light, sans-serif"],supportAllValues:!0},fontColor:{columns:5,documentColors:10},fontBackgroundColor:{columns:5,documentColors:10}}};class yt{constructor(ot){this.fieldConfig=ot}getEditorConfig(){const ot=this._getBaseConfig(),Dt=this.fieldConfig.maxLength;return this.fieldConfig.options.output==="Markdown"&&ot.plugins.push(window.CKEditor5.markdownGfm.Markdown),Dt&&(ot.plugins.push(window.CKEditor5.maximumLength.MaximumLength),ot.maximumLength={characters:Dt}),ot}_getBaseConfig(){const ot=this.fieldConfig.options.preset;switch(ot){case"light":return jt.light;case"standard":return jt.standard;case"rich":return jt.rich;default:throw new Error("Invalid preset name "+ot)}}}var tt=Y(87631);const Bt=({isOpen:zt,onChange:ot,onToggle:Dt})=>{const{components:wt}=(0,tt.yX)(),ni=wt["media-library"],di=xi=>{const bt=xi.map(fe=>({alt:fe.alternativeText||fe.name,url:(0,tt.CR)(fe.url),mime:fe.mime}));ot(bt)};return zt?Qt.createElement(ni,{onClose:Dt,onSelectAssets:di}):null};Bt.defaultProps={isOpen:!1,onChange:()=>{},onToggle:()=>{}},Bt.propTypes={isOpen:A().bool,onChange:A().func,onToggle:A().func};const ye=Bt;var Ae=Y(89390),Ke=Y(97846);function kt(zt){const ot={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};for(const Dt in ot){const wt=ot[Dt];zt=zt.replaceAll(Dt,wt)}return zt}const It=({attribute:zt,onChange:ot,name:Dt,value:wt,disabled:ni,labelAction:di,intlLabel:xi,required:bt,description:fe,error:je})=>{const[Ze,pt]=(0,Qt.useState)(!1),{formatMessage:Ct}=(0,m.Z)(),{maxLengthCharacters:St,...Xt}=zt.options,oi=new yt({options:Xt,maxLength:St}).getEditorConfig(),bi=(0,Qt.useRef)(null),gi=localStorage.getItem("STRAPI_THEME"),Ti=pe(gi),[Mt,Ei]=(0,Qt.useState)(!1),Ri=()=>Ei(ji=>!ji),Yi=ji=>{let Pi="";ji.map(Li=>{if(Li.mime.includes("image")){const dn=kt(Li.url),pi=kt(Li.alt);Pi+=`<img src="${dn}" alt="${pi}" />`}});const qi=Ze.data.processor.toView(Pi),nn=Ze.data.toModel(qi);Ze.model.insertContent(nn),Ri()};return Qt.createElement(y.g,{name:Dt,id:Dt,error:je,hint:fe&&Ct(fe)},Qt.createElement(E.K,{spacing:1},Qt.createElement(f.Q,{action:di,required:bt},Ct(xi)),Qt.createElement(Ti,null),Qt.createElement(Ae.CKEditor,{editor:window.CKEditor5.editorClassic.ClassicEditor,disabled:ni,data:wt,onReady:ji=>{const Pi=ji.plugins.get("WordCount");bi.current.appendChild(Pi.wordCountContainer),ji.plugins.get("strapiMediaLib").connect(Ri),pt(ji)},onChange:(ji,Pi)=>{const qi=Pi.getData();ot({target:{name:Dt,value:qi}}),Pi.plugins.get("WordCount").characters>St&&console.log("Too long")},config:oi}),Qt.createElement("div",{ref:bi}),Qt.createElement(v.J,null),Qt.createElement(a.c,null)),Qt.createElement(ye,{isOpen:Mt,onChange:Yi,onToggle:Ri}))};It.defaultProps={description:null,disabled:!1,error:null,labelAction:null,required:!1,value:""},It.propTypes={intlLabel:A().object.isRequired,onChange:A().func.isRequired,attribute:A().object.isRequired,name:A().string.isRequired,description:A().object,disabled:A().bool,error:A().string,labelAction:A().object,required:A().bool,value:A().string};const Yt=It},14611:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{"Align center":"Align center","Align left":"Align left","Align right":"Align right",Justify:"Justify","Text alignment":"Text alignment","Text alignment toolbar":"Text alignment toolbar"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{Alignment:()=>pe,AlignmentEditing:()=>H,AlignmentUI:()=>me});var m=Y(704),E=Y(209);const y=["left","right","center","justify"];function f(ge){return y.includes(ge)}function v(ge,X){return X.contentLanguageDirection=="rtl"?ge==="right":ge==="left"}function a(ge){const X=ge.map(Z=>{let h;return h=typeof Z=="string"?{name:Z}:Z,h}).filter(Z=>{const h=y.includes(Z.name);return h||(0,E.logWarning)("alignment-config-name-not-recognized",{option:Z}),h}),te=X.filter(Z=>Boolean(Z.className)).length;if(te&&te<X.length)throw new E.CKEditorError("alignment-config-classnames-are-missing",{configuredOptions:ge});return X.forEach((Z,h,g)=>{const r=g.slice(h+1);if(r.some(u=>u.name==Z.name))throw new E.CKEditorError("alignment-config-name-already-defined",{option:Z,configuredOptions:ge});if(Z.className&&r.some(u=>u.className==Z.className))throw new E.CKEditorError("alignment-config-classname-already-defined",{option:Z,configuredOptions:ge})}),X}const d="alignment";class A extends m.Command{refresh(){const X=this.editor.locale,te=(0,E.first)(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=Boolean(te)&&this._canBeAligned(te),this.isEnabled&&te.hasAttribute("alignment")?this.value=te.getAttribute("alignment"):this.value=X.contentLanguageDirection==="rtl"?"right":"left"}execute(X={}){const te=this.editor,Z=te.locale,h=te.model,g=h.document,r=X.value;h.change(u=>{const w=Array.from(g.selection.getSelectedBlocks()).filter(T=>this._canBeAligned(T)),_=w[0].getAttribute("alignment");v(r,Z)||_===r||!r?function(T,z){for(const L of T)z.removeAttribute(d,L)}(w,u):function(T,z,L){for(const x of T)z.setAttribute(d,L,x)}(w,u,r)})}_canBeAligned(X){return this.editor.model.schema.checkAttribute(X,d)}}class H extends m.Plugin{static get pluginName(){return"AlignmentEditing"}constructor(X){super(X),X.config.define("alignment",{options:y.map(te=>({name:te}))})}init(){const X=this.editor,te=X.locale,Z=X.model.schema,h=a(X.config.get("alignment.options")).filter(w=>f(w.name)&&!v(w.name,te)),g=h.some(w=>!!w.className);Z.extend("$block",{allowAttributes:"alignment"}),X.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),g?X.conversion.attributeToAttribute(function(w){const _={};for(const z of w)_[z.name]={key:"class",value:z.className};return{model:{key:"alignment",values:w.map(z=>z.name)},view:_}}(h)):X.conversion.for("downcast").attributeToAttribute(function(w){const _={};for(const{name:z}of w)_[z]={key:"style",value:{"text-align":z}};return{model:{key:"alignment",values:w.map(z=>z.name)},view:_}}(h));const r=function(w){const _=[];for(const{name:T}of w)_.push({view:{key:"style",value:{"text-align":T}},model:{key:"alignment",value:T}});return _}(h);for(const w of r)X.conversion.for("upcast").attributeToAttribute(w);const u=function(w){const _=[];for(const{name:T}of w)_.push({view:{key:"align",value:T},model:{key:"alignment",value:T}});return _}(h);for(const w of u)X.conversion.for("upcast").attributeToAttribute(w);X.commands.add("alignment",new A(X))}}var I=Y(273);const C=new Map([["left",m.icons.alignLeft],["right",m.icons.alignRight],["center",m.icons.alignCenter],["justify",m.icons.alignJustify]]);class me extends m.Plugin{get localizedOptionTitles(){const X=this.editor.t;return{left:X("Align left"),right:X("Align right"),center:X("Align center"),justify:X("Justify")}}static get pluginName(){return"AlignmentUI"}init(){const X=this.editor,te=X.ui.componentFactory,Z=X.t,h=a(X.config.get("alignment.options"));h.map(g=>g.name).filter(f).forEach(g=>this._addButton(g)),te.add("alignment",g=>{const r=(0,I.createDropdown)(g);(0,I.addToolbarToDropdown)(r,()=>h.map(_=>te.create(`alignment:${_.name}`)),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:Z("Text alignment toolbar")}),r.buttonView.set({label:Z("Text alignment"),tooltip:!0}),r.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const u=g.contentLanguageDirection==="rtl"?C.get("right"):C.get("left"),w=X.commands.get("alignment");return r.buttonView.bind("icon").to(w,"value",_=>C.get(_)||u),r.bind("isEnabled").to(w,"isEnabled"),this.listenTo(r,"execute",()=>{X.editing.view.focus()}),r})}_addButton(X){const te=this.editor;te.ui.componentFactory.add(`alignment:${X}`,Z=>{const h=te.commands.get("alignment"),g=new I.ButtonView(Z);return g.set({label:this.localizedOptionTitles[X],icon:C.get(X),tooltip:!0,isToggleable:!0}),g.bind("isEnabled").to(h),g.bind("isOn").to(h,"value",r=>r===X),this.listenTo(g,"execute",()=>{te.execute("alignment",{value:X}),te.editing.view.focus()}),g})}}class pe extends m.Plugin{static get requires(){return[H,me]}static get pluginName(){return"Alignment"}}})(),(window.CKEditor5=window.CKEditor5||{}).alignment=Qt})()},76079:()=>{/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(()=>{var ii={704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},492:(m,E,y)=>{m.exports=y(79)("./src/engine.js")},181:(m,E,y)=>{m.exports=y(79)("./src/typing.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{Autoformat:()=>A});var m=Y(704),E=Y(181),y=Y(492),f=Y(209);function v(I,C,me,pe){let ge,X=null;typeof pe=="function"?ge=pe:(X=I.commands.get(pe),ge=()=>{I.execute(pe)}),I.model.document.on("change:data",(te,Z)=>{if(X&&!X.isEnabled||!C.isEnabled)return;const h=(0,f.first)(I.model.document.selection.getRanges());if(!h.isCollapsed||Z.isUndo||!Z.isLocal)return;const g=Array.from(I.model.document.differ.getChanges()),r=g[0];if(g.length!=1||r.type!=="insert"||r.name!="$text"||r.length!=1)return;const u=r.position.parent;if(u.is("element","codeBlock")||u.is("element","listItem")&&typeof pe!="function"&&!["numberedList","bulletedList","todoList"].includes(pe)||X&&X.value===!0)return;const w=u.getChild(0),_=I.model.createRangeOn(w);if(!_.containsRange(h)&&!h.end.isEqual(_.end))return;const T=me.exec(w.data.substr(0,h.end.offset));T&&I.model.enqueueChange(z=>{const L=z.createPositionAt(u,0),x=z.createPositionAt(u,T[0].length),c=new y.LiveRange(L,x);if(ge({match:T})!==!1){z.remove(c);const D=I.model.document.selection.getFirstRange(),W=z.createRangeIn(u);!u.isEmpty||W.isEqual(D)||W.containsRange(D,!0)||z.remove(u)}c.detach(),I.model.enqueueChange(()=>{I.plugins.get("Delete").requestUndoOnBackspace()})})})}function a(I,C,me,pe){let ge,X;me instanceof RegExp?ge=me:X=me,X=X||(te=>{let Z;const h=[],g=[];for(;(Z=ge.exec(te))!==null&&!(Z&&Z.length<4);){let{index:r,1:u,2:w,3:_}=Z;const T=u+w+_;r+=Z[0].length-T.length;const z=[r,r+u.length],L=[r+u.length+w.length,r+u.length+w.length+_.length];h.push(z),h.push(L),g.push([r+u.length,r+u.length+w.length])}return{remove:h,format:g}}),I.model.document.on("change:data",(te,Z)=>{if(Z.isUndo||!Z.isLocal||!C.isEnabled)return;const h=I.model,g=h.document.selection;if(!g.isCollapsed)return;const r=Array.from(h.document.differ.getChanges()),u=r[0];if(r.length!=1||u.type!=="insert"||u.name!="$text"||u.length!=1)return;const w=g.focus,_=w.parent,{text:T,range:z}=function(D,W){let q=D.start;return{text:Array.from(D.getItems()).reduce((Ie,Ve)=>!Ve.is("$text")&&!Ve.is("$textProxy")||Ve.getAttribute("code")?(q=W.createPositionAfter(Ve),""):Ie+Ve.data,""),range:W.createRange(q,D.end)}}(h.createRange(h.createPositionAt(_,0),w),h),L=X(T),x=d(z.start,L.format,h),c=d(z.start,L.remove,h);x.length&&c.length&&h.enqueueChange(D=>{if(pe(D,x)!==!1){for(const W of c.reverse())D.remove(W);h.enqueueChange(()=>{I.plugins.get("Delete").requestUndoOnBackspace()})}})})}function d(I,C,me){return C.filter(pe=>pe[0]!==void 0&&pe[1]!==void 0).map(pe=>me.createRange(I.getShiftedBy(pe[0]),I.getShiftedBy(pe[1])))}class A extends m.Plugin{static get requires(){return[E.Delete]}static get pluginName(){return"Autoformat"}afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats()}_addListAutoformats(){const C=this.editor.commands;C.get("bulletedList")&&v(this.editor,this,/^[*-]\s$/,"bulletedList"),C.get("numberedList")&&v(this.editor,this,/^1[.|)]\s$/,"numberedList"),C.get("todoList")&&v(this.editor,this,/^\[\s?\]\s$/,"todoList"),C.get("checkTodoList")&&v(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const C=this.editor.commands;if(C.get("bold")){const me=H(this.editor,"bold");a(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,me),a(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,me)}if(C.get("italic")){const me=H(this.editor,"italic");a(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,me),a(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,me)}if(C.get("code")){const me=H(this.editor,"code");a(this.editor,this,/(`)([^`]+)(`)$/g,me)}if(C.get("strikethrough")){const me=H(this.editor,"strikethrough");a(this.editor,this,/(~~)([^~]+)(~~)$/g,me)}}_addHeadingAutoformats(){const C=this.editor.commands.get("heading");C&&C.modelElements.filter(me=>me.match(/^heading[1-6]$/)).forEach(me=>{const pe=me[7],ge=new RegExp(`^(#{${pe}})\\s$`);v(this.editor,this,ge,()=>{if(!C.isEnabled||C.value===me)return!1;this.editor.execute("heading",{value:me})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&v(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const C=this.editor,me=C.model.document.selection;C.commands.get("codeBlock")&&v(C,this,/^```$/,()=>{if(me.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&v(this.editor,this,/^---$/,"horizontalLine")}}function H(I,C){return(me,pe)=>{if(!I.commands.get(C).isEnabled)return!1;const ge=I.model.schema.getValidRanges(pe,C);for(const X of ge)me.setAttribute(C,!0,X);me.removeSelectionAttribute(C)}}})(),(window.CKEditor5=window.CKEditor5||{}).autoformat=Qt})()},11026:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{Bold:"Bold",Code:"Code",Italic:"Italic",Strikethrough:"Strikethrough",Subscript:"Subscript",Superscript:"Superscript",Underline:"Underline"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={415:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck-content code{background-color:hsla(0,0%,78%,.3);border-radius:2px;padding:.15em}.ck.ck-editor__editable .ck-code_selected{background-color:hsla(0,0%,78%,.5)}",""]);const a=v},609:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},62:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},181:(m,E,y)=>{m.exports=y(79)("./src/typing.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{Bold:()=>A,BoldEditing:()=>f,BoldUI:()=>d,Code:()=>h,CodeEditing:()=>C,CodeUI:()=>Z,Italic:()=>_,ItalicEditing:()=>r,ItalicUI:()=>w,Strikethrough:()=>c,StrikethroughEditing:()=>z,StrikethroughUI:()=>x,Subscript:()=>Ie,SubscriptEditing:()=>W,SubscriptUI:()=>ae,Superscript:()=>dt,SuperscriptEditing:()=>_e,SuperscriptUI:()=>Qe,Underline:()=>jt,UnderlineEditing:()=>qe,UnderlineUI:()=>Nt});var m=Y(704);class E extends m.Command{constructor(tt,Bt){super(tt),this.attributeKey=Bt}refresh(){const tt=this.editor.model,Bt=tt.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=tt.schema.checkAttributeInSelection(Bt.selection,this.attributeKey)}execute(tt={}){const Bt=this.editor.model,ye=Bt.document.selection,Ae=tt.forceValue===void 0?!this.value:tt.forceValue;Bt.change(Ke=>{if(ye.isCollapsed)Ae?Ke.setSelectionAttribute(this.attributeKey,!0):Ke.removeSelectionAttribute(this.attributeKey);else{const kt=Bt.schema.getValidRanges(ye.getRanges(),this.attributeKey);for(const It of kt)Ae?Ke.setAttribute(this.attributeKey,Ae,It):Ke.removeAttribute(this.attributeKey,It)}})}_getValueFromFirstAllowedNode(){const tt=this.editor.model,Bt=tt.schema,ye=tt.document.selection;if(ye.isCollapsed)return ye.hasAttribute(this.attributeKey);for(const Ae of ye.getRanges())for(const Ke of Ae.getItems())if(Bt.checkAttribute(Ke,this.attributeKey))return Ke.hasAttribute(this.attributeKey);return!1}}const y="bold";class f extends m.Plugin{static get pluginName(){return"BoldEditing"}init(){const tt=this.editor;tt.model.schema.extend("$text",{allowAttributes:y}),tt.model.schema.setAttributeProperties(y,{isFormatting:!0,copyOnEnter:!0}),tt.conversion.attributeToElement({model:y,view:"strong",upcastAlso:["b",Bt=>{const ye=Bt.getStyle("font-weight");return ye&&(ye=="bold"||Number(ye)>=600)?{name:!0,styles:["font-weight"]}:null}]}),tt.commands.add(y,new E(tt,y)),tt.keystrokes.set("CTRL+B",y)}}var v=Y(273);const a="bold";class d extends m.Plugin{static get pluginName(){return"BoldUI"}init(){const tt=this.editor,Bt=tt.t;tt.ui.componentFactory.add(a,ye=>{const Ae=tt.commands.get(a),Ke=new v.ButtonView(ye);return Ke.set({label:Bt("Bold"),icon:m.icons.bold,keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),Ke.bind("isOn","isEnabled").to(Ae,"value","isEnabled"),this.listenTo(Ke,"execute",()=>{tt.execute(a),tt.editing.view.focus()}),Ke})}}class A extends m.Plugin{static get requires(){return[f,d]}static get pluginName(){return"Bold"}}var H=Y(181);const I="code";class C extends m.Plugin{static get pluginName(){return"CodeEditing"}static get requires(){return[H.TwoStepCaretMovement]}init(){const tt=this.editor;tt.model.schema.extend("$text",{allowAttributes:I}),tt.model.schema.setAttributeProperties(I,{isFormatting:!0,copyOnEnter:!1}),tt.conversion.attributeToElement({model:I,view:"code",upcastAlso:{styles:{"word-wrap":"break-word"}}}),tt.commands.add(I,new E(tt,I)),tt.plugins.get(H.TwoStepCaretMovement).registerAttribute(I),(0,H.inlineHighlight)(tt,I,"code","ck-code_selected")}}var me=Y(62),pe=Y.n(me),ge=Y(415),X={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};pe()(ge.Z,X),ge.Z.locals;const te="code";class Z extends m.Plugin{static get pluginName(){return"CodeUI"}init(){const tt=this.editor,Bt=tt.t;tt.ui.componentFactory.add(te,ye=>{const Ae=tt.commands.get(te),Ke=new v.ButtonView(ye);return Ke.set({label:Bt("Code"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>',tooltip:!0,isToggleable:!0}),Ke.bind("isOn","isEnabled").to(Ae,"value","isEnabled"),this.listenTo(Ke,"execute",()=>{tt.execute(te),tt.editing.view.focus()}),Ke})}}class h extends m.Plugin{static get requires(){return[C,Z]}static get pluginName(){return"Code"}}const g="italic";class r extends m.Plugin{static get pluginName(){return"ItalicEditing"}init(){const tt=this.editor;tt.model.schema.extend("$text",{allowAttributes:g}),tt.model.schema.setAttributeProperties(g,{isFormatting:!0,copyOnEnter:!0}),tt.conversion.attributeToElement({model:g,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),tt.commands.add(g,new E(tt,g)),tt.keystrokes.set("CTRL+I",g)}}const u="italic";class w extends m.Plugin{static get pluginName(){return"ItalicUI"}init(){const tt=this.editor,Bt=tt.t;tt.ui.componentFactory.add(u,ye=>{const Ae=tt.commands.get(u),Ke=new v.ButtonView(ye);return Ke.set({label:Bt("Italic"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),Ke.bind("isOn","isEnabled").to(Ae,"value","isEnabled"),this.listenTo(Ke,"execute",()=>{tt.execute(u),tt.editing.view.focus()}),Ke})}}class _ extends m.Plugin{static get requires(){return[r,w]}static get pluginName(){return"Italic"}}const T="strikethrough";class z extends m.Plugin{static get pluginName(){return"StrikethroughEditing"}init(){const tt=this.editor;tt.model.schema.extend("$text",{allowAttributes:T}),tt.model.schema.setAttributeProperties(T,{isFormatting:!0,copyOnEnter:!0}),tt.conversion.attributeToElement({model:T,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),tt.commands.add(T,new E(tt,T)),tt.keystrokes.set("CTRL+SHIFT+X","strikethrough")}}const L="strikethrough";class x extends m.Plugin{static get pluginName(){return"StrikethroughUI"}init(){const tt=this.editor,Bt=tt.t;tt.ui.componentFactory.add(L,ye=>{const Ae=tt.commands.get(L),Ke=new v.ButtonView(ye);return Ke.set({label:Bt("Strikethrough"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>',keystroke:"CTRL+SHIFT+X",tooltip:!0,isToggleable:!0}),Ke.bind("isOn","isEnabled").to(Ae,"value","isEnabled"),this.listenTo(Ke,"execute",()=>{tt.execute(L),tt.editing.view.focus()}),Ke})}}class c extends m.Plugin{static get requires(){return[z,x]}static get pluginName(){return"Strikethrough"}}const D="subscript";class W extends m.Plugin{static get pluginName(){return"SubscriptEditing"}init(){const tt=this.editor;tt.model.schema.extend("$text",{allowAttributes:D}),tt.model.schema.setAttributeProperties(D,{isFormatting:!0,copyOnEnter:!0}),tt.conversion.attributeToElement({model:D,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),tt.commands.add(D,new E(tt,D))}}const q="subscript";class ae extends m.Plugin{static get pluginName(){return"SubscriptUI"}init(){const tt=this.editor,Bt=tt.t;tt.ui.componentFactory.add(q,ye=>{const Ae=tt.commands.get(q),Ke=new v.ButtonView(ye);return Ke.set({label:Bt("Subscript"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>',tooltip:!0,isToggleable:!0}),Ke.bind("isOn","isEnabled").to(Ae,"value","isEnabled"),this.listenTo(Ke,"execute",()=>{tt.execute(q),tt.editing.view.focus()}),Ke})}}class Ie extends m.Plugin{static get requires(){return[W,ae]}static get pluginName(){return"Subscript"}}const Ve="superscript";class _e extends m.Plugin{static get pluginName(){return"SuperscriptEditing"}init(){const tt=this.editor;tt.model.schema.extend("$text",{allowAttributes:Ve}),tt.model.schema.setAttributeProperties(Ve,{isFormatting:!0,copyOnEnter:!0}),tt.conversion.attributeToElement({model:Ve,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),tt.commands.add(Ve,new E(tt,Ve))}}const Me="superscript";class Qe extends m.Plugin{static get pluginName(){return"SuperscriptUI"}init(){const tt=this.editor,Bt=tt.t;tt.ui.componentFactory.add(Me,ye=>{const Ae=tt.commands.get(Me),Ke=new v.ButtonView(ye);return Ke.set({label:Bt("Superscript"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>',tooltip:!0,isToggleable:!0}),Ke.bind("isOn","isEnabled").to(Ae,"value","isEnabled"),this.listenTo(Ke,"execute",()=>{tt.execute(Me),tt.editing.view.focus()}),Ke})}}class dt extends m.Plugin{static get requires(){return[_e,Qe]}static get pluginName(){return"Superscript"}}const nt="underline";class qe extends m.Plugin{static get pluginName(){return"UnderlineEditing"}init(){const tt=this.editor;tt.model.schema.extend("$text",{allowAttributes:nt}),tt.model.schema.setAttributeProperties(nt,{isFormatting:!0,copyOnEnter:!0}),tt.conversion.attributeToElement({model:nt,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),tt.commands.add(nt,new E(tt,nt)),tt.keystrokes.set("CTRL+U","underline")}}const et="underline";class Nt extends m.Plugin{static get pluginName(){return"UnderlineUI"}init(){const tt=this.editor,Bt=tt.t;tt.ui.componentFactory.add(et,ye=>{const Ae=tt.commands.get(et),Ke=new v.ButtonView(ye);return Ke.set({label:Bt("Underline"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),Ke.bind("isOn","isEnabled").to(Ae,"value","isEnabled"),this.listenTo(Ke,"execute",()=>{tt.execute(et),tt.editing.view.focus()}),Ke})}}class jt extends m.Plugin{static get requires(){return[qe,Nt]}static get pluginName(){return"Underline"}}})(),(window.CKEditor5=window.CKEditor5||{}).basicStyles=Qt})()},50952:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{"Block quote":"Block quote"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={446:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck-content blockquote{border-left:5px solid #ccc;font-style:italic;margin-left:0;margin-right:0;overflow:hidden;padding-left:1.5em;padding-right:1.5em}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}",""]);const a=v},609:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},62:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},331:(m,E,y)=>{m.exports=y(79)("./src/enter.js")},181:(m,E,y)=>{m.exports=y(79)("./src/typing.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{BlockQuote:()=>te,BlockQuoteEditing:()=>H,BlockQuoteUI:()=>X});var m=Y(704),E=Y(331),y=Y(181),f=Y(209);class v extends m.Command{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(h={}){const g=this.editor.model,r=g.schema,u=g.document.selection,w=Array.from(u.getSelectedBlocks()),_=h.forceValue===void 0?!this.value:h.forceValue;g.change(T=>{if(_){const z=w.filter(L=>a(L)||A(r,L));this._applyQuote(T,z)}else this._removeQuote(T,w.filter(a))})}_getValue(){const h=this.editor.model.document.selection,g=(0,f.first)(h.getSelectedBlocks());return!(!g||!a(g))}_checkEnabled(){if(this.value)return!0;const h=this.editor.model.document.selection,g=this.editor.model.schema,r=(0,f.first)(h.getSelectedBlocks());return!!r&&A(g,r)}_removeQuote(h,g){d(h,g).reverse().forEach(r=>{if(r.start.isAtStart&&r.end.isAtEnd)return void h.unwrap(r.start.parent);if(r.start.isAtStart){const w=h.createPositionBefore(r.start.parent);return void h.move(r,w)}r.end.isAtEnd||h.split(r.end);const u=h.createPositionAfter(r.end.parent);h.move(r,u)})}_applyQuote(h,g){const r=[];d(h,g).reverse().forEach(u=>{let w=a(u.start);w||(w=h.createElement("blockQuote"),h.wrap(u,w)),r.push(w)}),r.reverse().reduce((u,w)=>u.nextSibling==w?(h.merge(h.createPositionAfter(u)),u):w)}}function a(Z){return Z.parent.name=="blockQuote"?Z.parent:null}function d(Z,h){let g,r=0;const u=[];for(;r<h.length;){const w=h[r],_=h[r+1];g||(g=Z.createPositionBefore(w)),_&&w.nextSibling==_||(u.push(Z.createRange(g,Z.createPositionAfter(w))),g=null),r++}return u}function A(Z,h){const g=Z.checkChild(h.parent,"blockQuote"),r=Z.checkChild(["$root","blockQuote"],h);return g&&r}class H extends m.Plugin{static get pluginName(){return"BlockQuoteEditing"}static get requires(){return[E.Enter,y.Delete]}init(){const h=this.editor,g=h.model.schema;h.commands.add("blockQuote",new v(h)),g.register("blockQuote",{inheritAllFrom:"$container"}),h.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),h.model.document.registerPostFixer(_=>{const T=h.model.document.differ.getChanges();for(const z of T)if(z.type=="insert"){const L=z.position.nodeAfter;if(!L)continue;if(L.is("element","blockQuote")&&L.isEmpty)return _.remove(L),!0;if(L.is("element","blockQuote")&&!g.checkChild(z.position,L))return _.unwrap(L),!0;if(L.is("element")){const x=_.createRangeIn(L);for(const c of x.getItems())if(c.is("element","blockQuote")&&!g.checkChild(_.createPositionBefore(c),c))return _.unwrap(c),!0}}else if(z.type=="remove"){const L=z.position.parent;if(L.is("element","blockQuote")&&L.isEmpty)return _.remove(L),!0}return!1});const r=this.editor.editing.view.document,u=h.model.document.selection,w=h.commands.get("blockQuote");this.listenTo(r,"enter",(_,T)=>{!u.isCollapsed||!w.value||u.getLastPosition().parent.isEmpty&&(h.execute("blockQuote"),h.editing.view.scrollToTheSelection(),T.preventDefault(),_.stop())},{context:"blockquote"}),this.listenTo(r,"delete",(_,T)=>{if(T.direction!="backward"||!u.isCollapsed||!w.value)return;const z=u.getLastPosition().parent;z.isEmpty&&!z.previousSibling&&(h.execute("blockQuote"),h.editing.view.scrollToTheSelection(),T.preventDefault(),_.stop())},{context:"blockquote"})}}var I=Y(273),C=Y(62),me=Y.n(C),pe=Y(446),ge={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};me()(pe.Z,ge),pe.Z.locals;class X extends m.Plugin{static get pluginName(){return"BlockQuoteUI"}init(){const h=this.editor,g=h.t;h.ui.componentFactory.add("blockQuote",r=>{const u=h.commands.get("blockQuote"),w=new I.ButtonView(r);return w.set({label:g("Block quote"),icon:m.icons.quote,tooltip:!0,isToggleable:!0}),w.bind("isOn","isEnabled").to(u,"value","isEnabled"),this.listenTo(w,"execute",()=>{h.execute("blockQuote"),h.editing.view.focus()}),w})}}class te extends m.Plugin{static get requires(){return[H,X]}static get pluginName(){return"BlockQuote"}}})(),(window.CKEditor5=window.CKEditor5||{}).blockQuote=Qt})()},97846:(ii,Gt,Y)=>{/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(()=>{var Qt={655:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}",""]);const H=A},609:f=>{"use strict";f.exports=function(v){var a=[];return a.toString=function(){return this.map(function(d){var A=v(d);return d[2]?"@media ".concat(d[2]," {").concat(A,"}"):A}).join("")},a.i=function(d,A,H){typeof d=="string"&&(d=[[null,d,""]]);var I={};if(H)for(var C=0;C<this.length;C++){var me=this[C][0];me!=null&&(I[me]=!0)}for(var pe=0;pe<d.length;pe++){var ge=[].concat(d[pe]);H&&I[ge[0]]||(A&&(ge[2]?ge[2]="".concat(A," and ").concat(ge[2]):ge[2]=A),a.push(ge))}},a}},62:(f,v,a)=>{"use strict";var d,A=function(){return d===void 0&&(d=Boolean(window&&document&&document.all&&!window.atob)),d},H=function(){var u={};return function(w){if(u[w]===void 0){var _=document.querySelector(w);if(window.HTMLIFrameElement&&_ instanceof window.HTMLIFrameElement)try{_=_.contentDocument.head}catch{_=null}u[w]=_}return u[w]}}(),I=[];function C(u){for(var w=-1,_=0;_<I.length;_++)if(I[_].identifier===u){w=_;break}return w}function me(u,w){for(var _={},T=[],z=0;z<u.length;z++){var L=u[z],x=w.base?L[0]+w.base:L[0],c=_[x]||0,D="".concat(x," ").concat(c);_[x]=c+1;var W=C(D),q={css:L[1],media:L[2],sourceMap:L[3]};W!==-1?(I[W].references++,I[W].updater(q)):I.push({identifier:D,updater:r(q,w),references:1}),T.push(D)}return T}function pe(u){var w=document.createElement("style"),_=u.attributes||{};if(_.nonce===void 0){var T=a.nc;T&&(_.nonce=T)}if(Object.keys(_).forEach(function(L){w.setAttribute(L,_[L])}),typeof u.insert=="function")u.insert(w);else{var z=H(u.insert||"head");if(!z)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");z.appendChild(w)}return w}var ge,X=(ge=[],function(u,w){return ge[u]=w,ge.filter(Boolean).join(`
`)});function te(u,w,_,T){var z=_?"":T.media?"@media ".concat(T.media," {").concat(T.css,"}"):T.css;if(u.styleSheet)u.styleSheet.cssText=X(w,z);else{var L=document.createTextNode(z),x=u.childNodes;x[w]&&u.removeChild(x[w]),x.length?u.insertBefore(L,x[w]):u.appendChild(L)}}function Z(u,w,_){var T=_.css,z=_.media,L=_.sourceMap;if(z?u.setAttribute("media",z):u.removeAttribute("media"),L&&typeof btoa<"u"&&(T+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(L))))," */")),u.styleSheet)u.styleSheet.cssText=T;else{for(;u.firstChild;)u.removeChild(u.firstChild);u.appendChild(document.createTextNode(T))}}var h=null,g=0;function r(u,w){var _,T,z;if(w.singleton){var L=g++;_=h||(h=pe(w)),T=te.bind(null,_,L,!1),z=te.bind(null,_,L,!0)}else _=pe(w),T=Z.bind(null,_,w),z=function(){(function(x){if(x.parentNode===null)return!1;x.parentNode.removeChild(x)})(_)};return T(u),function(x){if(x){if(x.css===u.css&&x.media===u.media&&x.sourceMap===u.sourceMap)return;T(u=x)}else z()}}f.exports=function(u,w){(w=w||{}).singleton||typeof w.singleton=="boolean"||(w.singleton=A());var _=me(u=u||[],w);return function(T){if(T=T||[],Object.prototype.toString.call(T)==="[object Array]"){for(var z=0;z<_.length;z++){var L=C(_[z]);I[L].references--}for(var x=me(T,w),c=0;c<_.length;c++){var D=C(_[c]);I[D].references===0&&(I[D].updater(),I.splice(D,1))}_=x}}}},704:(f,v,a)=>{f.exports=a(79)("./src/core.js")},492:(f,v,a)=>{f.exports=a(79)("./src/engine.js")},273:(f,v,a)=>{f.exports=a(79)("./src/ui.js")},209:(f,v,a)=>{f.exports=a(79)("./src/utils.js")},79:f=>{"use strict";f.exports=CKEditor5.dll}},m={};function E(f){var v=m[f];if(v!==void 0)return v.exports;var a=m[f]={id:f,exports:{}};return Qt[f](a,a.exports,E),a.exports}E.n=f=>{var v=f&&f.__esModule?()=>f.default:()=>f;return E.d(v,{a:v}),v},E.d=(f,v)=>{for(var a in v)E.o(v,a)&&!E.o(f,a)&&Object.defineProperty(f,a,{enumerable:!0,get:v[a]})},E.o=(f,v)=>Object.prototype.hasOwnProperty.call(f,v),E.r=f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},E.nc=void 0;var y={};(()=>{"use strict";E.r(y),E.d(y,{ClassicEditor:()=>dt});var f=E(273),v=E(492),a=E(209);class d extends f.EditorUI{constructor(et,Nt){super(et),this.view=Nt,this._toolbarConfig=(0,f.normalizeToolbarConfig)(et.config.get("toolbar")),this._elementReplacer=new a.ElementReplacer}get element(){return this.view.element}init(et){const Nt=this.editor,jt=this.view,yt=Nt.editing.view,tt=jt.editable,Bt=yt.document.getRoot();tt.name=Bt.rootName,jt.render();const ye=tt.element;this.setEditableElement(tt.name,ye),jt.editable.bind("isFocused").to(this.focusTracker),yt.attachDomRoot(ye),et&&this._elementReplacer.replace(et,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){super.destroy();const et=this.view,Nt=this.editor.editing.view;this._elementReplacer.restore(),Nt.detachDomRoot(et.editable.name),et.destroy()}_initToolbar(){const et=this.view;et.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),et.stickyPanel.limiterElement=et.element,et.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:Nt})=>Nt||0),et.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(et.toolbar)}_initPlaceholder(){const et=this.editor,Nt=et.editing.view,jt=Nt.document.getRoot(),yt=et.sourceElement,tt=et.config.get("placeholder")||yt&&yt.tagName.toLowerCase()==="textarea"&&yt.getAttribute("placeholder");tt&&(0,v.enablePlaceholder)({view:Nt,element:jt,text:tt,isDirectHost:!1,keepOnFocus:!0})}}var A=E(62),H=E.n(A),I=E(655),C={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};H()(I.Z,C),I.Z.locals;class me extends f.BoxedEditorUIView{constructor(et,Nt,jt={}){super(et),this.stickyPanel=new f.StickyPanelView(et),this.toolbar=new f.ToolbarView(et,{shouldGroupWhenFull:jt.shouldToolbarGroupWhenFull}),this.editable=new f.InlineEditableUIView(et,Nt)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}var pe=E(704);const ge=function(qe){return qe!=null&&typeof qe=="object"},X=typeof Y.g=="object"&&Y.g&&Y.g.Object===Object&&Y.g;var te=typeof self=="object"&&self&&self.Object===Object&&self;const Z=(X||te||Function("return this")()).Symbol;var h=Object.prototype,g=h.hasOwnProperty,r=h.toString,u=Z?Z.toStringTag:void 0;const w=function(qe){var et=g.call(qe,u),Nt=qe[u];try{qe[u]=void 0;var jt=!0}catch{}var yt=r.call(qe);return jt&&(et?qe[u]=Nt:delete qe[u]),yt};var _=Object.prototype.toString;const T=function(qe){return _.call(qe)};var z="[object Null]",L="[object Undefined]",x=Z?Z.toStringTag:void 0;const c=function(qe){return qe==null?qe===void 0?L:z:x&&x in Object(qe)?w(qe):T(qe)},D=function(qe,et){return function(Nt){return qe(et(Nt))}}(Object.getPrototypeOf,Object);var W="[object Object]",q=Function.prototype,ae=Object.prototype,Ie=q.toString,Ve=ae.hasOwnProperty,_e=Ie.call(Object);const Me=function(qe){if(!ge(qe)||c(qe)!=W)return!1;var et=D(qe);if(et===null)return!0;var Nt=Ve.call(et,"constructor")&&et.constructor;return typeof Nt=="function"&&Nt instanceof Nt&&Ie.call(Nt)==_e},Qe=function(qe){return ge(qe)&&qe.nodeType===1&&!Me(qe)};class dt extends(0,pe.DataApiMixin)((0,pe.ElementApiMixin)(pe.Editor)){constructor(et,Nt={}){if(!nt(et)&&Nt.initialData!==void 0)throw new a.CKEditorError("editor-create-initial-data",null);super(Nt),this.config.get("initialData")===void 0&&this.config.set("initialData",function(tt){return nt(tt)?(0,a.getDataFromElement)(tt):tt}(et)),nt(et)&&(this.sourceElement=et),this.model.document.createRoot();const jt=!this.config.get("toolbar.shouldNotGroupWhenFull"),yt=new me(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:jt});this.ui=new d(this,yt),(0,pe.attachToForm)(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(et,Nt={}){return new Promise(jt=>{const yt=new this(et,Nt);jt(yt.initPlugins().then(()=>yt.ui.init(nt(et)?et:null)).then(()=>yt.data.init(yt.config.get("initialData"))).then(()=>yt.fire("ready")).then(()=>yt))})}}function nt(qe){return Qe(qe)}})(),(window.CKEditor5=window.CKEditor5||{}).editorClassic=y})()},66064:()=>{/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(()=>{var ii={945:(m,E,y)=>{m.exports=y(79)("./src/clipboard.js")},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},331:(m,E,y)=>{m.exports=y(79)("./src/enter.js")},468:(m,E,y)=>{m.exports=y(79)("./src/select-all.js")},181:(m,E,y)=>{m.exports=y(79)("./src/typing.js")},254:(m,E,y)=>{m.exports=y(79)("./src/undo.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{Essentials:()=>d});var m=Y(704),E=Y(945),y=Y(331),f=Y(468),v=Y(181),a=Y(254);class d extends m.Plugin{static get requires(){return[E.Clipboard,y.Enter,f.SelectAll,y.ShiftEnter,v.Typing,a.Undo]}static get pluginName(){return"Essentials"}}})(),(window.CKEditor5=window.CKEditor5||{}).essentials=Qt})()},96796:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{Big:"Big",Default:"Default","Document colors":"Document colors","Font Background Color":"Font Background Color","Font Color":"Font Color","Font Family":"Font Family","Font Size":"Font Size",Huge:"Huge",Small:"Small",Tiny:"Tiny"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={159:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck .ck-button.ck-color-table__remove-color{align-items:center;display:flex;width:100%}label.ck.ck-color-grid__label{font-weight:unset}.ck .ck-button.ck-color-table__remove-color{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard)}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}",""]);const a=v},222:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}",""]);const a=v},609:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},62:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},492:(m,E,y)=>{m.exports=y(79)("./src/engine.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{Font:()=>tt,FontBackgroundColor:()=>yt,FontBackgroundColorEditing:()=>Nt,FontBackgroundColorUI:()=>jt,FontColor:()=>qe,FontColorEditing:()=>Qe,FontColorUI:()=>nt,FontFamily:()=>T,FontFamilyEditing:()=>w,FontFamilyUI:()=>_,FontSize:()=>_e,FontSizeEditing:()=>q,FontSizeUI:()=>Ve});var m=Y(704);class E extends m.Command{constructor(ye,Ae){super(ye),this.attributeKey=Ae}refresh(){const ye=this.editor.model,Ae=ye.document;this.value=Ae.selection.getAttribute(this.attributeKey),this.isEnabled=ye.schema.checkAttributeInSelection(Ae.selection,this.attributeKey)}execute(ye={}){const Ae=this.editor.model,Ke=Ae.document.selection,kt=ye.value;Ae.change(It=>{if(Ke.isCollapsed)kt?It.setSelectionAttribute(this.attributeKey,kt):It.removeSelectionAttribute(this.attributeKey);else{const Yt=Ae.schema.getValidRanges(Ke.getRanges(),this.attributeKey);for(const zt of Yt)kt?It.setAttribute(this.attributeKey,kt,zt):It.removeAttribute(this.attributeKey,zt)}})}}var y=Y(273),f=Y(209);class v extends f.Collection{constructor(ye){super(ye),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(ye,Ae){this.find(Ke=>Ke.color===ye.color)||super.add(ye,Ae)}hasColor(ye){return!!this.find(Ae=>Ae.color===ye)}}(0,f.mix)(v,f.ObservableMixin);var a=Y(62),d=Y.n(a),A=Y(159),H={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};d()(A.Z,H),A.Z.locals;class I extends y.View{constructor(ye,{colors:Ae,columns:Ke,removeButtonLabel:kt,documentColorsLabel:It,documentColorsCount:Yt}){super(ye),this.items=this.createCollection(),this.colorDefinitions=Ae,this.focusTracker=new f.FocusTracker,this.keystrokes=new f.KeystrokeHandler,this.set("selectedColor"),this.removeButtonLabel=kt,this.columns=Ke,this.documentColors=new v,this.documentColorsCount=Yt,this._focusables=new y.ViewCollection,this._focusCycler=new y.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._documentColorsLabel=It,this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-table"]},children:this.items}),this.items.add(this._createRemoveColorButton())}updateDocumentColors(ye,Ae){const Ke=ye.document,kt=this.documentColorsCount;this.documentColors.clear();for(const It of Ke.getRootNames()){const Yt=Ke.getRoot(It),zt=ye.createRangeIn(Yt);for(const ot of zt.getItems())if(ot.is("$textProxy")&&ot.hasAttribute(Ae)&&(this._addColorToDocumentColors(ot.getAttribute(Ae)),this.documentColors.length>=kt))return}}updateSelectedColors(){const ye=this.documentColorsGrid,Ae=this.staticColorsGrid,Ke=this.selectedColor;Ae.selectedColor=Ke,ye&&(ye.selectedColor=Ke)}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendGrids(){if(!this.staticColorsGrid&&(this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid),this.documentColorsCount)){const ye=y.Template.bind(this.documentColors,this.documentColors),Ae=new y.LabelView(this.locale);Ae.text=this._documentColorsLabel,Ae.extendTemplate({attributes:{class:["ck","ck-color-grid__label",ye.if("isEmpty","ck-hidden")]}}),this.items.add(Ae),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid),this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid)}}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_createRemoveColorButton(){const ye=new y.ButtonView;return ye.set({withText:!0,icon:m.icons.eraser,label:this.removeButtonLabel}),ye.class="ck-color-table__remove-color",ye.on("execute",()=>{this.fire("execute",{value:null})}),ye.render(),this.focusTracker.add(ye.element),this._focusables.add(ye),ye}_createStaticColorsGrid(){const ye=new y.ColorGridView(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return ye.delegate("execute").to(this),ye}_createDocumentColorsGrid(){const ye=y.Template.bind(this.documentColors,this.documentColors),Ae=new y.ColorGridView(this.locale,{columns:this.columns});return Ae.delegate("execute").to(this),Ae.extendTemplate({attributes:{class:ye.if("isEmpty","ck-hidden")}}),Ae.items.bindTo(this.documentColors).using(Ke=>{const kt=new y.ColorTileView;return kt.set({color:Ke.color,hasBorder:Ke.options&&Ke.options.hasBorder}),Ke.label&&kt.set({label:Ke.label,tooltip:!0}),kt.on("execute",()=>{this.fire("execute",{value:Ke.color})}),kt}),this.documentColors.on("change:isEmpty",(Ke,kt,It)=>{It&&(Ae.selectedColor=null)}),Ae}_addColorToDocumentColors(ye){const Ae=this.colorDefinitions.find(Ke=>Ke.color===ye);Ae?this.documentColors.add(Object.assign({},Ae)):this.documentColors.add({color:ye,label:ye,options:{hasBorder:!1}})}}const C="fontSize",me="fontFamily",pe="fontColor",ge="fontBackgroundColor";function X(Bt,ye){const Ae={model:{key:Bt,values:[]},view:{},upcastAlso:{}};for(const Ke of ye)Ae.model.values.push(Ke.model),Ae.view[Ke.model]=Ke.view,Ke.upcastAlso&&(Ae.upcastAlso[Ke.model]=Ke.upcastAlso);return Ae}function te(Bt){return ye=>ye.getStyle(Bt).replace(/\s/g,"")}function Z(Bt){return(ye,{writer:Ae})=>Ae.createAttributeElement("span",{style:`${Bt}:${ye}`},{priority:7})}class h extends E{constructor(ye){super(ye,me)}}function g(Bt){return Bt.map(r).filter(ye=>!!ye)}function r(Bt){return typeof Bt=="object"?Bt:Bt==="default"?{title:"Default",model:void 0}:typeof Bt=="string"?function(ye){const Ae=ye.replace(/"|'/g,"").split(","),Ke=Ae[0],kt=Ae.map(u).join(", ");return{title:Ke,model:kt,view:{name:"span",styles:{"font-family":kt},priority:7}}}(Bt):void 0}function u(Bt){return(Bt=Bt.trim()).indexOf(" ")>0&&(Bt=`'${Bt}'`),Bt}class w extends m.Plugin{static get pluginName(){return"FontFamilyEditing"}constructor(ye){super(ye),ye.config.define(me,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const ye=this.editor;ye.model.schema.extend("$text",{allowAttributes:me}),ye.model.schema.setAttributeProperties(me,{isFormatting:!0,copyOnEnter:!0});const Ae=g(ye.config.get("fontFamily.options")).filter(kt=>kt.model),Ke=X(me,Ae);ye.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):ye.conversion.attributeToElement(Ke),ye.commands.add(me,new h(ye))}_prepareAnyValueConverters(){const ye=this.editor;ye.conversion.for("downcast").attributeToElement({model:me,view:(Ae,{writer:Ke})=>Ke.createAttributeElement("span",{style:"font-family:"+Ae},{priority:7})}),ye.conversion.for("upcast").elementToAttribute({model:{key:me,value:Ae=>Ae.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:me,value:ye=>ye.getAttribute("face")}})}}class _ extends m.Plugin{static get pluginName(){return"FontFamilyUI"}init(){const ye=this.editor,Ae=ye.t,Ke=this._getLocalizedOptions(),kt=ye.commands.get(me);ye.ui.componentFactory.add(me,It=>{const Yt=(0,y.createDropdown)(It);return(0,y.addListToDropdown)(Yt,()=>function(zt,ot){const Dt=new f.Collection;for(const wt of zt){const ni={type:"button",model:new y.Model({commandName:me,commandParam:wt.model,label:wt.title,withText:!0})};ni.model.bind("isOn").to(ot,"value",di=>di===wt.model||!(!di||!wt.model)&&di.split(",")[0].replace(/'/g,"").toLowerCase()===wt.model.toLowerCase()),wt.view&&wt.view.styles&&ni.model.set("labelStyle",`font-family: ${wt.view.styles["font-family"]}`),Dt.add(ni)}return Dt}(Ke,kt)),Yt.buttonView.set({label:Ae("Font Family"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>',tooltip:!0}),Yt.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),Yt.bind("isEnabled").to(kt),this.listenTo(Yt,"execute",zt=>{ye.execute(zt.source.commandName,{value:zt.source.commandParam}),ye.editing.view.focus()}),Yt})}_getLocalizedOptions(){const ye=this.editor,Ae=ye.t;return g(ye.config.get(me).options).map(Ke=>(Ke.title==="Default"&&(Ke.title=Ae("Default")),Ke))}}class T extends m.Plugin{static get requires(){return[w,_]}static get pluginName(){return"FontFamily"}}var z=Y(492);class L extends E{constructor(ye){super(ye,C)}}function x(Bt){return Bt.map(ye=>function(Ae){if(Ke=Ae,typeof Ke=="object"&&Ke.title&&Ke.model&&Ke.view)return D(Ae);var Ke;const kt=function(It){return c[It]||c[It.model]}(Ae);if(kt)return D(kt);if(Ae==="default")return{model:void 0,title:"Default"};if(!function(It){let Yt;if(typeof It=="object"){if(!It.model)throw new f.CKEditorError("font-size-invalid-definition",null,It);Yt=parseFloat(It.model)}else Yt=parseFloat(It);return isNaN(Yt)}(Ae))return function(It){return typeof It!="number"&&typeof It!="string"||(It={title:String(It),model:`${parseFloat(It)}px`}),It.view={name:"span",styles:{"font-size":It.model}},D(It)}(Ae)}(ye)).filter(ye=>!!ye)}const c={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function D(Bt){return Bt.view.priority||(Bt.view.priority=7),Bt}const W=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class q extends m.Plugin{static get pluginName(){return"FontSizeEditing"}constructor(ye){super(ye),ye.config.define(C,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const ye=this.editor;ye.model.schema.extend("$text",{allowAttributes:C}),ye.model.schema.setAttributeProperties(C,{isFormatting:!0,copyOnEnter:!0});const Ae=ye.config.get("fontSize.supportAllValues"),Ke=x(this.editor.config.get("fontSize.options")).filter(It=>It.model),kt=X(C,Ke);Ae?(this._prepareAnyValueConverters(kt),this._prepareCompatibilityConverter()):ye.conversion.attributeToElement(kt),ye.commands.add(C,new L(ye))}_prepareAnyValueConverters(ye){const Ae=this.editor,Ke=ye.model.values.filter(kt=>!(0,z.isLength)(String(kt))&&!(0,z.isPercentage)(String(kt)));if(Ke.length)throw new f.CKEditorError("font-size-invalid-use-of-named-presets",null,{presets:Ke});Ae.conversion.for("downcast").attributeToElement({model:C,view:(kt,{writer:It})=>{if(kt)return It.createAttributeElement("span",{style:"font-size:"+kt},{priority:7})}}),Ae.conversion.for("upcast").elementToAttribute({model:{key:C,value:kt=>kt.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:C,value:ye=>{const Ae=ye.getAttribute("size"),Ke=Ae[0]==="-"||Ae[0]==="+";let kt=parseInt(Ae,10);Ke&&(kt=3+kt);const It=W.length-1,Yt=Math.min(Math.max(kt,0),It);return W[Yt]}}})}}var ae=Y(222),Ie={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};d()(ae.Z,Ie),ae.Z.locals;class Ve extends m.Plugin{static get pluginName(){return"FontSizeUI"}init(){const ye=this.editor,Ae=ye.t,Ke=this._getLocalizedOptions(),kt=ye.commands.get(C);ye.ui.componentFactory.add(C,It=>{const Yt=(0,y.createDropdown)(It);return(0,y.addListToDropdown)(Yt,()=>function(zt,ot){const Dt=new f.Collection;for(const wt of zt){const ni={type:"button",model:new y.Model({commandName:C,commandParam:wt.model,label:wt.title,class:"ck-fontsize-option",withText:!0})};wt.view&&wt.view.styles&&ni.model.set("labelStyle",`font-size:${wt.view.styles["font-size"]}`),wt.view&&wt.view.classes&&ni.model.set("class",`${ni.model.class} ${wt.view.classes}`),ni.model.bind("isOn").to(ot,"value",di=>di===wt.model),Dt.add(ni)}return Dt}(Ke,kt)),Yt.buttonView.set({label:Ae("Font Size"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',tooltip:!0}),Yt.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),Yt.bind("isEnabled").to(kt),this.listenTo(Yt,"execute",zt=>{ye.execute(zt.source.commandName,{value:zt.source.commandParam}),ye.editing.view.focus()}),Yt})}_getLocalizedOptions(){const ye=this.editor,Ae=ye.t,Ke={Default:Ae("Default"),Tiny:Ae("Tiny"),Small:Ae("Small"),Big:Ae("Big"),Huge:Ae("Huge")};return x(ye.config.get(C).options).map(kt=>{const It=Ke[kt.title];return It&&It!=kt.title&&(kt=Object.assign({},kt,{title:It})),kt})}}class _e extends m.Plugin{static get requires(){return[q,Ve]}static get pluginName(){return"FontSize"}normalizeSizeOptions(ye){return x(ye)}}class Me extends E{constructor(ye){super(ye,pe)}}class Qe extends m.Plugin{static get pluginName(){return"FontColorEditing"}constructor(ye){super(ye),ye.config.define(pe,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),ye.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:pe,value:te("color")}}),ye.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:pe,value:Ae=>Ae.getAttribute("color")}}),ye.conversion.for("downcast").attributeToElement({model:pe,view:Z("color")}),ye.commands.add(pe,new Me(ye)),ye.model.schema.extend("$text",{allowAttributes:pe}),ye.model.schema.setAttributeProperties(pe,{isFormatting:!0,copyOnEnter:!0})}}class dt extends m.Plugin{constructor(ye,{commandName:Ae,icon:Ke,componentName:kt,dropdownLabel:It}){super(ye),this.commandName=Ae,this.componentName=kt,this.icon=Ke,this.dropdownLabel=It,this.columns=ye.config.get(`${this.componentName}.columns`),this.colorTableView=void 0}init(){const ye=this.editor,Ae=ye.locale,Ke=Ae.t,kt=ye.commands.get(this.commandName),It=(0,y.normalizeColorOptions)(ye.config.get(this.componentName).colors),Yt=(0,y.getLocalizedColorOptions)(Ae,It),zt=ye.config.get(`${this.componentName}.documentColors`);ye.ui.componentFactory.add(this.componentName,ot=>{const Dt=(0,y.createDropdown)(ot);return this.colorTableView=function({dropdownView:wt,colors:ni,columns:di,removeButtonLabel:xi,documentColorsLabel:bt,documentColorsCount:fe}){const je=wt.locale,Ze=new I(je,{colors:ni,columns:di,removeButtonLabel:xi,documentColorsLabel:bt,documentColorsCount:fe});return wt.colorTableView=Ze,wt.panelView.children.add(Ze),Ze.delegate("execute").to(wt,"execute"),Ze}({dropdownView:Dt,colors:Yt.map(wt=>({label:wt.label,color:wt.model,options:{hasBorder:wt.hasBorder}})),columns:this.columns,removeButtonLabel:Ke("Remove color"),documentColorsLabel:zt!==0?Ke("Document colors"):void 0,documentColorsCount:zt===void 0?this.columns:zt}),this.colorTableView.bind("selectedColor").to(kt,"value"),Dt.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),Dt.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),Dt.bind("isEnabled").to(kt),Dt.on("execute",(wt,ni)=>{ye.execute(this.commandName,ni),ye.editing.view.focus()}),Dt.on("change:isOpen",(wt,ni,di)=>{Dt.colorTableView.appendGrids(),di&&(zt!==0&&this.colorTableView.updateDocumentColors(ye.model,this.componentName),this.colorTableView.updateSelectedColors())}),(0,y.focusChildOnDropdownOpen)(Dt,()=>Dt.colorTableView.staticColorsGrid.items.find(wt=>wt.isOn)),Dt})}}class nt extends dt{constructor(ye){const Ae=ye.locale.t;super(ye,{commandName:pe,componentName:pe,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',dropdownLabel:Ae("Font Color")})}static get pluginName(){return"FontColorUI"}}class qe extends m.Plugin{static get requires(){return[Qe,nt]}static get pluginName(){return"FontColor"}}class et extends E{constructor(ye){super(ye,ge)}}class Nt extends m.Plugin{static get pluginName(){return"FontBackgroundColorEditing"}constructor(ye){super(ye),ye.config.define(ge,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),ye.data.addStyleProcessorRules(z.addBackgroundRules),ye.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:ge,value:te("background-color")}}),ye.conversion.for("downcast").attributeToElement({model:ge,view:Z("background-color")}),ye.commands.add(ge,new et(ye)),ye.model.schema.extend("$text",{allowAttributes:ge}),ye.model.schema.setAttributeProperties(ge,{isFormatting:!0,copyOnEnter:!0})}}class jt extends dt{constructor(ye){const Ae=ye.locale.t;super(ye,{commandName:ge,componentName:ge,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>',dropdownLabel:Ae("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class yt extends m.Plugin{static get requires(){return[Nt,jt]}static get pluginName(){return"FontBackgroundColor"}}class tt extends m.Plugin{static get requires(){return[T,_e,qe,yt]}static get pluginName(){return"Font"}}})(),(window.CKEditor5=window.CKEditor5||{}).font=Qt})()},63856:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{"Choose heading":"Choose heading",Heading:"Heading","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6",Paragraph:"Paragraph","Type or paste your content here.":"Type or paste your content here.","Type your title":"Type your title"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={609:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(298),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}",""]);const a=v},298:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},62:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},492:(m,E,y)=>{m.exports=y(79)("./src/engine.js")},747:(m,E,y)=>{m.exports=y(79)("./src/paragraph.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{Heading:()=>X,HeadingButtonsUI:()=>Z,HeadingEditing:()=>d,HeadingUI:()=>ge,Title:()=>r});var m=Y(704),E=Y(747),y=Y(209);class f extends m.Command{constructor(x,c){super(x),this.modelElements=c}refresh(){const x=(0,y.first)(this.editor.model.document.selection.getSelectedBlocks());this.value=!!x&&this.modelElements.includes(x.name)&&x.name,this.isEnabled=!!x&&this.modelElements.some(c=>v(x,c,this.editor.model.schema))}execute(x){const c=this.editor.model,D=c.document,W=x.value;c.change(q=>{const ae=Array.from(D.selection.getSelectedBlocks()).filter(Ie=>v(Ie,W,c.schema));for(const Ie of ae)Ie.is("element",W)||q.rename(Ie,W)})}}function v(L,x,c){return c.checkChild(L.parent,x)&&!c.isObject(L)}const a="paragraph";class d extends m.Plugin{static get pluginName(){return"HeadingEditing"}constructor(x){super(x),x.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[E.Paragraph]}init(){const x=this.editor,c=x.config.get("heading.options"),D=[];for(const W of c)W.model!=="paragraph"&&(x.model.schema.register(W.model,{inheritAllFrom:"$block"}),x.conversion.elementToElement(W),D.push(W.model));this._addDefaultH1Conversion(x),x.commands.add("heading",new f(x,D))}afterInit(){const x=this.editor,c=x.commands.get("enter"),D=x.config.get("heading.options");c&&this.listenTo(c,"afterExecute",(W,q)=>{const ae=x.model.document.selection.getFirstPosition().parent;D.some(Ie=>ae.is("element",Ie.model))&&!ae.is("element",a)&&ae.childCount===0&&q.writer.rename(ae,a)})}_addDefaultH1Conversion(x){x.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:y.priorities.get("low")+1})}}var A=Y(273);function H(L){const x=L.t,c={Paragraph:x("Paragraph"),"Heading 1":x("Heading 1"),"Heading 2":x("Heading 2"),"Heading 3":x("Heading 3"),"Heading 4":x("Heading 4"),"Heading 5":x("Heading 5"),"Heading 6":x("Heading 6")};return L.config.get("heading.options").map(D=>{const W=c[D.title];return W&&W!=D.title&&(D.title=W),D})}var I=Y(62),C=Y.n(I),me=Y(609),pe={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};C()(me.Z,pe),me.Z.locals;class ge extends m.Plugin{static get pluginName(){return"HeadingUI"}init(){const x=this.editor,c=x.t,D=H(x),W=c("Choose heading"),q=c("Heading");x.ui.componentFactory.add("heading",ae=>{const Ie={},Ve=new y.Collection,_e=x.commands.get("heading"),Me=x.commands.get("paragraph"),Qe=[_e];for(const nt of D){const qe={type:"button",model:new A.Model({label:nt.title,class:nt.class,withText:!0})};nt.model==="paragraph"?(qe.model.bind("isOn").to(Me,"value"),qe.model.set("commandName","paragraph"),Qe.push(Me)):(qe.model.bind("isOn").to(_e,"value",et=>et===nt.model),qe.model.set({commandName:"heading",commandValue:nt.model})),Ve.add(qe),Ie[nt.model]=nt.title}const dt=(0,A.createDropdown)(ae);return(0,A.addListToDropdown)(dt,Ve),dt.buttonView.set({isOn:!1,withText:!0,tooltip:q}),dt.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),dt.bind("isEnabled").toMany(Qe,"isEnabled",(...nt)=>nt.some(qe=>qe)),dt.buttonView.bind("label").to(_e,"value",Me,"value",(nt,qe)=>{const et=nt||qe&&"paragraph";return typeof et=="boolean"?W:Ie[et]?Ie[et]:W}),this.listenTo(dt,"execute",nt=>{const{commandName:qe,commandValue:et}=nt.source;x.execute(qe,et?{value:et}:void 0),x.editing.view.focus()}),dt})}}class X extends m.Plugin{static get requires(){return[d,ge]}static get pluginName(){return"Heading"}}const te={heading1:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',heading2:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',heading3:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',heading4:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',heading5:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',heading6:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>'};class Z extends m.Plugin{init(){H(this.editor).filter(x=>x.model!=="paragraph").map(x=>this._createButton(x))}_createButton(x){const c=this.editor;c.ui.componentFactory.add(x.model,D=>{const W=new A.ButtonView(D),q=c.commands.get("heading");return W.label=x.title,W.icon=x.icon||te[x.model],W.tooltip=!0,W.isToggleable=!0,W.bind("isEnabled").to(q),W.bind("isOn").to(q,"value",ae=>ae==x.model),W.on("execute",()=>{c.execute("heading",{value:x.model}),c.editing.view.focus()}),W})}}var h=Y(492);const g=new Set(["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"]);class r extends m.Plugin{static get pluginName(){return"Title"}static get requires(){return["Paragraph"]}init(){const x=this.editor,c=x.model;this._bodyPlaceholder=null,c.schema.register("title",{isBlock:!0,allowIn:"$root"}),c.schema.register("title-content",{isBlock:!0,allowIn:"title",allowAttributes:["alignment"]}),c.schema.extend("$text",{allowIn:"title-content"}),c.schema.addAttributeCheck(D=>{if(D.endsWith("title-content $text"))return!1}),x.editing.mapper.on("modelToViewPosition",w(x.editing.view)),x.data.mapper.on("modelToViewPosition",w(x.editing.view)),x.conversion.for("downcast").elementToElement({model:"title-content",view:"h1"}),x.conversion.for("downcast").add(D=>D.on("insert:title",(W,q,ae)=>{ae.consumable.consume(q.item,W.name)})),x.data.upcastDispatcher.on("element:h1",u,{priority:"high"}),x.data.upcastDispatcher.on("element:h2",u,{priority:"high"}),x.data.upcastDispatcher.on("element:h3",u,{priority:"high"}),c.document.registerPostFixer(D=>this._fixTitleContent(D)),c.document.registerPostFixer(D=>this._fixTitleElement(D)),c.document.registerPostFixer(D=>this._fixBodyElement(D)),c.document.registerPostFixer(D=>this._fixExtraParagraph(D)),this._attachPlaceholders(),this._attachTabPressHandling()}getTitle(x={}){const c=this._getTitleElement().getChild(0);return this.editor.data.stringify(c,x)}getBody(x={}){const c=this.editor,D=c.data,W=c.model,q=c.model.document.getRoot(),ae=c.editing.view,Ie=new h.DowncastWriter(ae.document),Ve=W.createRangeIn(q),_e=Ie.createDocumentFragment(),Me=W.createPositionAfter(q.getChild(0)),Qe=W.createRange(Me,W.createPositionAt(q,"end")),dt=new Map;for(const nt of W.markers){const qe=Qe.getIntersection(nt.getRange());qe&&dt.set(nt.name,qe)}return D.mapper.clearBindings(),D.mapper.bindElements(q,_e),D.downcastDispatcher.convert(Ve,dt,Ie,x),Ie.remove(Ie.createRangeOn(_e.getChild(0))),c.data.processor.toData(_e)}_getTitleElement(){const x=this.editor.model.document.getRoot();for(const c of x.getChildren())if(_(c))return c}_fixTitleContent(x){const c=this._getTitleElement();if(!c||c.maxOffset===1)return!1;const D=Array.from(c.getChildren());D.shift();for(const W of D)x.move(x.createRangeOn(W),c,"after"),x.rename(W,"paragraph");return!0}_fixTitleElement(x){const c=this.editor.model,D=c.document.getRoot(),W=Array.from(D.getChildren()).filter(_),q=W[0],ae=D.getChild(0);if(ae.is("element","title"))return T(W,x,c);if(!q&&!g.has(ae.name)){const Ie=x.createElement("title");return x.insert(Ie,D),x.insertElement("title-content",Ie),!0}return g.has(ae.name)?function(Ie,Ve,_e){const Me=Ve.createElement("title");Ve.insert(Me,Ie,"before"),Ve.insert(Ie,Me,0),Ve.rename(Ie,"title-content"),_e.schema.removeDisallowedAttributes([Ie],Ve)}(ae,x,c):x.move(x.createRangeOn(q),D,0),T(W,x,c),!0}_fixBodyElement(x){const c=this.editor.model.document.getRoot();return c.childCount<2&&(this._bodyPlaceholder=x.createElement("paragraph"),x.insert(this._bodyPlaceholder,c,1),!0)}_fixExtraParagraph(x){const c=this.editor.model.document.getRoot(),D=this._bodyPlaceholder;return!!function(W,q){return!(!W||!W.is("element","paragraph")||W.childCount||q.childCount<=2||q.getChild(q.childCount-1)!==W)}(D,c)&&(this._bodyPlaceholder=null,x.remove(D),!0)}_attachPlaceholders(){const x=this.editor,c=x.t,D=x.editing.view,W=D.document.getRoot(),q=x.sourceElement,ae=x.config.get("title.placeholder")||c("Type your title"),Ie=x.config.get("placeholder")||q&&q.tagName.toLowerCase()==="textarea"&&q.getAttribute("placeholder")||c("Type or paste your content here.");let Ve;x.editing.downcastDispatcher.on("insert:title-content",(_e,Me,Qe)=>{(0,h.enablePlaceholder)({view:D,element:Qe.mapper.toViewElement(Me.item),text:ae,keepOnFocus:!0})}),D.document.registerPostFixer(_e=>{const Me=W.getChild(1);let Qe=!1;return Me!==Ve&&(Ve&&((0,h.hidePlaceholder)(_e,Ve),_e.removeAttribute("data-placeholder",Ve)),_e.setAttribute("data-placeholder",Ie,Me),Ve=Me,Qe=!0),Qe=(0,h.needsPlaceholder)(Me,!0)&&W.childCount===2&&Me.name==="p"?!!(0,h.showPlaceholder)(_e,Me)||Qe:!!(0,h.hidePlaceholder)(_e,Me)||Qe,Qe})}_attachTabPressHandling(){const x=this.editor,c=x.model;x.keystrokes.set("TAB",(D,W)=>{c.change(q=>{const ae=c.document.selection,Ie=Array.from(ae.getSelectedBlocks());if(Ie.length===1&&Ie[0].is("element","title-content")){const Ve=c.document.getRoot().getChild(1);q.setSelection(Ve,0),W()}})}),x.keystrokes.set("SHIFT + TAB",(D,W)=>{c.change(q=>{const ae=c.document.selection;if(!ae.isCollapsed)return;const Ie=x.model.document.getRoot(),Ve=(0,y.first)(ae.getSelectedBlocks()),_e=ae.getFirstPosition(),Me=Ie.getChild(0);Ve===Ie.getChild(1)&&_e.isAtStart&&(q.setSelection(Me.getChild(0),0),W())})})}}function u(L,x,c){const D=x.modelCursor,W=x.viewItem;if(!D.isAtStart||!D.parent.is("element","$root")||!c.consumable.consume(W,{name:!0}))return;const q=c.writer,ae=q.createElement("title"),Ie=q.createElement("title-content");q.append(Ie,ae),q.insert(ae,D),c.convertChildren(W,Ie),c.updateConversionResult(ae,x)}function w(L){return(x,c)=>{const D=c.modelPosition.parent;if(!D.is("element","title"))return;const W=D.parent,q=c.mapper.toViewElement(W);c.viewPosition=L.createPositionAt(q,0),x.stop()}}function _(L){return L.is("element","title")}function T(L,x,c){let D=!1;for(const W of L)W.index!==0&&(z(W,x,c),D=!0);return D}function z(L,x,c){const D=L.getChild(0);D.isEmpty?x.remove(L):(x.move(x.createRangeOn(D),L,"before"),x.rename(D,"paragraph"),x.remove(L),c.schema.removeDisallowedAttributes([D],x))}})(),(window.CKEditor5=window.CKEditor5||{}).heading=Qt})()},56347:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{"Blue marker":"Blue marker","Green marker":"Green marker","Green pen":"Green pen",Highlight:"Highlight","Pink marker":"Pink marker","Red pen":"Red pen","Remove highlight":"Remove highlight","Text highlight toolbar":"Text highlight toolbar","Yellow marker":"Yellow marker"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={458:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,":root{--ck-highlight-marker-yellow:#fdfd77;--ck-highlight-marker-green:#62f962;--ck-highlight-marker-pink:#fc7899;--ck-highlight-marker-blue:#72ccfd;--ck-highlight-pen-red:#e71313;--ck-highlight-pen-green:#128a00}.ck-content .marker-yellow{background-color:var(--ck-highlight-marker-yellow)}.ck-content .marker-green{background-color:var(--ck-highlight-marker-green)}.ck-content .marker-pink{background-color:var(--ck-highlight-marker-pink)}.ck-content .marker-blue{background-color:var(--ck-highlight-marker-blue)}.ck-content .pen-red{background-color:transparent;color:var(--ck-highlight-pen-red)}.ck-content .pen-green{background-color:transparent;color:var(--ck-highlight-pen-green)}",""]);const a=v},609:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},62:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{Highlight:()=>pe,HighlightEditing:()=>y,HighlightUI:()=>C});var m=Y(704);class E extends m.Command{refresh(){const X=this.editor.model,te=X.document;this.value=te.selection.getAttribute("highlight"),this.isEnabled=X.schema.checkAttributeInSelection(te.selection,"highlight")}execute(X={}){const te=this.editor.model,Z=te.document.selection,h=X.value;te.change(g=>{if(Z.isCollapsed){const r=Z.getFirstPosition();if(Z.hasAttribute("highlight")){const u=z=>z.item.hasAttribute("highlight")&&z.item.getAttribute("highlight")===this.value,w=r.getLastMatchingPosition(u,{direction:"backward"}),_=r.getLastMatchingPosition(u),T=g.createRange(w,_);h&&this.value!==h?(r.isEqual(_)||g.setAttribute("highlight",h,T),g.setSelectionAttribute("highlight",h)):(r.isEqual(_)||g.removeAttribute("highlight",T),g.removeSelectionAttribute("highlight"))}else h&&g.setSelectionAttribute("highlight",h)}else{const r=te.schema.getValidRanges(Z.getRanges(),"highlight");for(const u of r)h?g.setAttribute("highlight",h,u):g.removeAttribute("highlight",u)}})}}class y extends m.Plugin{static get pluginName(){return"HighlightEditing"}constructor(X){super(X),X.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){const X=this.editor;X.model.schema.extend("$text",{allowAttributes:"highlight"});const te=X.config.get("highlight.options");X.conversion.attributeToElement(function(Z){const h={model:{key:"highlight",values:[]},view:{}};for(const g of Z)h.model.values.push(g.model),h.view[g.model]={name:"mark",classes:g.class};return h}(te)),X.commands.add("highlight",new E(X))}}var f=Y(273);const v='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',a='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>';var d=Y(62),A=Y.n(d),H=Y(458),I={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};A()(H.Z,I),H.Z.locals;class C extends m.Plugin{get localizedOptionTitles(){const X=this.editor.t;return{"Yellow marker":X("Yellow marker"),"Green marker":X("Green marker"),"Pink marker":X("Pink marker"),"Blue marker":X("Blue marker"),"Red pen":X("Red pen"),"Green pen":X("Green pen")}}static get pluginName(){return"HighlightUI"}init(){const X=this.editor.config.get("highlight.options");for(const te of X)this._addHighlighterButton(te);this._addRemoveHighlightButton(),this._addDropdown(X)}_addRemoveHighlightButton(){const X=this.editor.t,te=this.editor.commands.get("highlight");this._addButton("removeHighlight",X("Remove highlight"),m.icons.eraser,null,Z=>{Z.bind("isEnabled").to(te,"isEnabled")})}_addHighlighterButton(X){const te=this.editor.commands.get("highlight");this._addButton("highlight:"+X.model,X.title,me(X.type),X.model,function(Z){Z.bind("isEnabled").to(te,"isEnabled"),Z.bind("isOn").to(te,"value",h=>h===X.model),Z.iconView.fillColor=X.color,Z.isToggleable=!0})}_addButton(X,te,Z,h,g){const r=this.editor;r.ui.componentFactory.add(X,u=>{const w=new f.ButtonView(u),_=this.localizedOptionTitles[te]?this.localizedOptionTitles[te]:te;return w.set({label:_,icon:Z,tooltip:!0}),w.on("execute",()=>{r.execute("highlight",{value:h}),r.editing.view.focus()}),g(w),w})}_addDropdown(X){const te=this.editor,Z=te.t,h=te.ui.componentFactory,g=X[0],r=X.reduce((u,w)=>(u[w.model]=w,u),{});h.add("highlight",u=>{const w=te.commands.get("highlight"),_=(0,f.createDropdown)(u,f.SplitButtonView),T=_.buttonView;T.set({label:Z("Highlight"),tooltip:!0,lastExecuted:g.model,commandValue:g.model,isToggleable:!0}),T.bind("icon").to(w,"value",L=>me(z(L,"type"))),T.bind("color").to(w,"value",L=>z(L,"color")),T.bind("commandValue").to(w,"value",L=>z(L,"model")),T.bind("isOn").to(w,"value",L=>!!L),T.delegate("execute").to(_);function z(L,x){const c=L&&L!==T.lastExecuted?L:T.lastExecuted;return r[c][x]}return _.bind("isEnabled").to(w,"isEnabled"),(0,f.addToolbarToDropdown)(_,()=>{const L=X.map(x=>{const c=h.create("highlight:"+x.model);return this.listenTo(c,"execute",()=>{_.buttonView.set({lastExecuted:x.model})}),c});return L.push(new f.ToolbarSeparatorView),L.push(h.create("removeHighlight")),L},{enableActiveItemFocusOnDropdownOpen:!0,ariaLabel:Z("Text highlight toolbar")}),function(L){L.buttonView.actionView.iconView.bind("fillColor").to(L.buttonView,"color")}(_),T.on("execute",()=>{te.execute("highlight",{value:T.commandValue})}),this.listenTo(_,"execute",()=>{te.editing.view.focus()}),_})}}function me(ge){return ge==="marker"?v:a}class pe extends m.Plugin{static get requires(){return[y,C]}static get pluginName(){return"Highlight"}}})(),(window.CKEditor5=window.CKEditor5||{}).highlight=Qt})()},77606:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{"Break text":"Break text","Caption for image: %0":"Caption for image: %0","Caption for the image":"Caption for the image","Centered image":"Centered image","Change image text alternative":"Change image text alternative","Enter image caption":"Enter image caption","Full size image":"Full size image","Image resize list":"Image resize list","Image toolbar":"Image toolbar","image widget":"image widget","In line":"In line",Insert:"Insert","Insert image":"Insert image","Insert image via URL":"Insert image via URL","Left aligned image":"Left aligned image",Original:"Original","Resize image":"Resize image","Resize image to %0":"Resize image to %0","Resize image to the original size":"Resize image to the original size","Right aligned image":"Right aligned image","Side image":"Side image","Text alternative":"Text alternative",Update:"Update","Update image URL":"Update image URL","Upload failed":"Upload failed","Wrap text":"Wrap text"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={540:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck-content .image{clear:both;display:table;margin:.9em auto;min-width:50px;text-align:center}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:100%}.ck-content .image-inline{align-items:flex-start;display:inline-flex;max-width:100%}.ck-content .image-inline picture{display:flex}.ck-content .image-inline img,.ck-content .image-inline picture{flex-grow:1;flex-shrink:1;max-width:100%}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{overflow:hidden;padding-left:inherit;padding-right:inherit;text-overflow:ellipsis;white-space:nowrap}.ck.ck-editor__editable .image-inline.ck-widget_selected,.ck.ck-editor__editable .image.ck-widget_selected{z-index:1}.ck.ck-editor__editable .image-inline.ck-widget_selected ::selection{display:none}.ck.ck-editor__editable td .image-inline img,.ck.ck-editor__editable th .image-inline img{max-width:none}",""]);const a=v},560:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,":root{--ck-color-image-caption-background:#f7f7f7;--ck-color-image-caption-text:#333;--ck-color-image-caption-highligted-background:#fd0}.ck-content .image>figcaption{background-color:var(--ck-color-image-caption-background);caption-side:bottom;color:var(--ck-color-image-caption-text);display:table-caption;font-size:.75em;outline-offset:-1px;padding:.6em;word-break:break-word}.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:ck-image-caption-highlight .6s ease-out}@keyframes ck-image-caption-highlight{0%{background-color:var(--ck-color-image-caption-highligted-background)}to{background-color:var(--ck-color-image-caption-background)}}",""]);const a=v},91:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-image-insert__panel{padding:var(--ck-spacing-large)}.ck.ck-image-insert__ck-finder-button{border:1px solid #ccc;border-radius:var(--ck-border-radius);display:block;margin:var(--ck-spacing-standard) auto;width:100%}.ck.ck-splitbutton>.ck-file-dialog-button.ck-button{border:none;margin:0;padding:0}",""]);const a=v},439:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-image-insert-form:focus{outline:none}.ck.ck-form__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__row>:not(.ck-label){flex-grow:1}.ck.ck-form__row.ck-image-insert-form__action-row{margin-top:var(--ck-spacing-standard)}.ck.ck-form__row.ck-image-insert-form__action-row .ck-button-cancel,.ck.ck-form__row.ck-image-insert-form__action-row .ck-button-save{justify-content:center}.ck.ck-form__row.ck-image-insert-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}",""]);const a=v},601:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck-content .image.image_resized{box-sizing:border-box;display:block;max-width:100%}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}.ck.ck-editor__editable td .image-inline.image_resized img,.ck.ck-editor__editable th .image-inline.image_resized img{max-width:100%}[dir=ltr] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-left:var(--ck-spacing-standard)}.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label{width:4em}",""]);const a=v},29:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,":root{--ck-image-style-spacing:1.5em;--ck-inline-image-style-spacing:calc(var(--ck-image-style-spacing)/2)}.ck-content .image-style-block-align-left,.ck-content .image-style-block-align-right{max-width:calc(100% - var(--ck-image-style-spacing))}.ck-content .image-style-align-left,.ck-content .image-style-align-right{clear:none}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-block-align-right{margin-left:auto;margin-right:0}.ck-content .image-style-block-align-left{margin-left:0;margin-right:auto}.ck-content p+.image-style-align-left,.ck-content p+.image-style-align-right,.ck-content p+.image-style-side{margin-top:0}.ck-content .image-inline.image-style-align-left,.ck-content .image-inline.image-style-align-right{margin-bottom:var(--ck-inline-image-style-spacing);margin-top:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-left{margin-right:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-right{margin-left:var(--ck-inline-image-style-spacing)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-background)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after{display:none}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-hover-background)}",""]);const a=v},948:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,'.ck-image-upload-complete-icon{border-radius:50%;display:block;position:absolute;right:min(var(--ck-spacing-medium),6%);top:min(var(--ck-spacing-medium),6%);z-index:1}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20;--ck-image-upload-icon-width:2px;--ck-image-upload-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck-image-upload-complete-icon{animation-delay:0ms,3s;animation-duration:.5s,.5s;animation-fill-mode:forwards,forwards;animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;background:var(--ck-color-image-upload-icon-background);font-size:calc(1px*var(--ck-image-upload-icon-size));height:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size));opacity:0;overflow:hidden;width:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size))}.ck-image-upload-complete-icon:after{animation-delay:.5s;animation-duration:.5s;animation-fill-mode:forwards;animation-name:ck-upload-complete-icon-check;border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);box-sizing:border-box;height:0;left:25%;opacity:0;top:50%;transform:scaleX(-1) rotate(135deg);transform-origin:left top;width:0}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{height:0;opacity:1;width:0}33%{height:0;width:.3em}to{height:.45em;opacity:1;width:.3em}}',""]);const a=v},467:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,'.ck .ck-upload-placeholder-loader{align-items:center;display:flex;justify-content:center;left:0;position:absolute;top:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px;--ck-upload-placeholder-image-aspect-ratio:2.8}.ck .ck-image-upload-placeholder{margin:0;width:100%}.ck .ck-image-upload-placeholder.image-inline{width:calc(var(--ck-upload-placeholder-loader-size)*2*var(--ck-upload-placeholder-image-aspect-ratio))}.ck .ck-image-upload-placeholder img{aspect-ratio:var(--ck-upload-placeholder-image-aspect-ratio)}.ck .ck-upload-placeholder-loader{height:100%;width:100%}.ck .ck-upload-placeholder-loader:before{animation:ck-upload-placeholder-loader 1s linear infinite;border-radius:50%;border-right:2px solid transparent;border-top:3px solid var(--ck-color-upload-placeholder-loader);height:var(--ck-upload-placeholder-loader-size);width:var(--ck-upload-placeholder-loader-size)}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}',""]);const a=v},271:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-editor__editable .image,.ck.ck-editor__editable .image-inline{position:relative}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{left:0;position:absolute;top:0}.ck.ck-editor__editable .image-inline.ck-appear,.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{background:var(--ck-color-upload-bar-background);height:2px;transition:width .1s;width:0}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}",""]);const a=v},168:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}",""]);const a=v},764:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,'.ck-vertical-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck-vertical-form .ck-button:focus:after{display:none}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck.ck-responsive-form .ck-button:focus:after{display:none}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-width)*.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){border-radius:0;margin-top:var(--ck-spacing-large);padding:var(--ck-spacing-standard)}.ck.ck-responsive-form>.ck-button:last-child:not(:focus),.ck.ck-responsive-form>.ck-button:nth-last-child(2):not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}',""]);const a=v},609:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},62:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},945:(m,E,y)=>{m.exports=y(79)("./src/clipboard.js")},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},492:(m,E,y)=>{m.exports=y(79)("./src/engine.js")},181:(m,E,y)=>{m.exports=y(79)("./src/typing.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},254:(m,E,y)=>{m.exports=y(79)("./src/undo.js")},448:(m,E,y)=>{m.exports=y(79)("./src/upload.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},995:(m,E,y)=>{m.exports=y(79)("./src/widget.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{AutoImage:()=>ge,Image:()=>et,ImageCaption:()=>Ae,ImageCaptionEditing:()=>yt,ImageCaptionUtils:()=>Nt,ImageEditing:()=>Ie,ImageInsert:()=>qi,ImageInsertUI:()=>ji,ImageResize:()=>N,ImageResizeButtons:()=>pi,ImageResizeEditing:()=>Li,ImageResizeHandles:()=>V,ImageStyle:()=>Pt,ImageStyleEditing:()=>Wt,ImageStyleUI:()=>Q,ImageTextAlternative:()=>x,ImageTextAlternativeEditing:()=>te,ImageTextAlternativeUI:()=>L,ImageToolbar:()=>ai,ImageUpload:()=>oi,ImageUploadEditing:()=>Xt,ImageUploadProgress:()=>bt,ImageUploadUI:()=>zt,PictureEditing:()=>wi});var m=Y(704),E=Y(945),y=Y(492),f=Y(254),v=Y(181),a=Y(209),d=Y(995);function A(mt){return mt.createContainerElement("figure",{class:"image"},[mt.createEmptyElement("img"),mt.createSlot()])}function H(mt,U){const se=mt.plugins.get("ImageUtils"),Te=mt.plugins.has("ImageInlineEditing")&&mt.plugins.has("ImageBlockEditing");return Ye=>se.isInlineImageView(Ye)?Te&&(Ye.getStyle("display")=="block"||Ye.findAncestor(se.isBlockImageView)?"imageBlock":"imageInline")!==U?null:Le(Ye):null;function Le(Ye){const Je={name:!0};return Ye.hasAttribute("src")&&(Je.attributes=["src"]),Je}}function I(mt,U){const se=(0,a.first)(U.getSelectedBlocks());return!se||mt.isObject(se)||se.isEmpty&&se.name!="listItem"?"imageBlock":"imageInline"}class C extends m.Plugin{static get pluginName(){return"ImageUtils"}isImage(U){return this.isInlineImage(U)||this.isBlockImage(U)}isInlineImageView(U){return!!U&&U.is("element","img")}isBlockImageView(U){return!!U&&U.is("element","figure")&&U.hasClass("image")}insertImage(U={},se=null,Te=null){const Le=this.editor,Ye=Le.model,Je=Ye.document.selection;Te=me(Le,se||Je,Te),U={...Object.fromEntries(Je.getAttributes()),...U};for(const At in U)Ye.schema.checkAttribute(Te,At)||delete U[At];return Ye.change(At=>{const _t=At.createElement(Te,U);return Ye.insertObject(_t,se,null,{setSelection:"on",findOptimalPosition:!se&&Te!="imageInline"}),_t.parent?_t:null})}getClosestSelectedImageWidget(U){const se=U.getFirstPosition();if(!se)return null;const Te=U.getSelectedElement();if(Te&&this.isImageWidget(Te))return Te;let Le=se.parent;for(;Le;){if(Le.is("element")&&this.isImageWidget(Le))return Le;Le=Le.parent}return null}getClosestSelectedImageElement(U){const se=U.getSelectedElement();return this.isImage(se)?se:U.getFirstPosition().findAncestor("imageBlock")}isImageAllowed(){const U=this.editor.model.document.selection;return function(se,Te){if(me(se,Te)=="imageBlock"){const Ye=function(Je,At){const _t=(0,d.findOptimalInsertionRange)(Je,At),Rt=_t.start.parent;return Rt.isEmpty&&!Rt.is("element","$root")?Rt.parent:Rt}(Te,se.model);if(se.model.schema.checkChild(Ye,"imageBlock"))return!0}else if(se.model.schema.checkChild(Te.focus,"imageInline"))return!0;return!1}(this.editor,U)&&function(se){return[...se.focus.getAncestors()].every(Te=>!Te.is("element","imageBlock"))}(U)}toImageWidget(U,se,Te){return se.setCustomProperty("image",!0,U),(0,d.toWidget)(U,se,{label:()=>{const Le=this.findViewImgElement(U).getAttribute("alt");return Le?`${Le} ${Te}`:Te}})}isImageWidget(U){return!!U.getCustomProperty("image")&&(0,d.isWidget)(U)}isBlockImage(U){return!!U&&U.is("element","imageBlock")}isInlineImage(U){return!!U&&U.is("element","imageInline")}findViewImgElement(U){if(this.isInlineImageView(U))return U;const se=this.editor.editing.view;for(const{item:Te}of se.createRangeIn(U))if(this.isInlineImageView(Te))return Te}}function me(mt,U,se){const Te=mt.model.schema,Le=mt.config.get("image.insert.type");return mt.plugins.has("ImageBlockEditing")?mt.plugins.has("ImageInlineEditing")?se||(Le==="inline"?"imageInline":Le==="block"?"imageBlock":U.is("selection")?I(Te,U):Te.checkChild(U,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const pe=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class ge extends m.Plugin{static get requires(){return[E.Clipboard,C,f.Undo,v.Delete]}static get pluginName(){return"AutoImage"}constructor(U){super(U),this._timeoutId=null,this._positionToInsert=null}init(){const U=this.editor,se=U.model.document;this.listenTo(U.plugins.get("ClipboardPipeline"),"inputTransformation",()=>{const Te=se.selection.getFirstRange(),Le=y.LivePosition.fromPosition(Te.start);Le.stickiness="toPrevious";const Ye=y.LivePosition.fromPosition(Te.end);Ye.stickiness="toNext",se.once("change:data",()=>{this._embedImageBetweenPositions(Le,Ye),Le.detach(),Ye.detach()},{priority:"high"})}),U.commands.get("undo").on("execute",()=>{this._timeoutId&&(a.global.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(U,se){const Te=this.editor,Le=new y.LiveRange(U,se),Ye=Le.getWalker({ignoreElementEnd:!0}),Je=Object.fromEntries(Te.model.document.selection.getAttributes()),At=this.editor.plugins.get("ImageUtils");let _t="";for(const Rt of Ye)Rt.item.is("$textProxy")&&(_t+=Rt.item.data);_t=_t.trim(),_t.match(pe)?(this._positionToInsert=y.LivePosition.fromPosition(U),this._timeoutId=a.global.window.setTimeout(()=>{Te.commands.get("insertImage").isEnabled?(Te.model.change(Rt=>{let Vt;this._timeoutId=null,Rt.remove(Le),Le.detach(),this._positionToInsert.root.rootName!=="$graveyard"&&(Vt=this._positionToInsert.toPosition()),At.insertImage({...Je,src:_t},Vt),this._positionToInsert.detach(),this._positionToInsert=null}),Te.plugins.get("Delete").requestUndoOnBackspace()):Le.detach()},100)):Le.detach()}}class X extends m.Command{refresh(){const U=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!U,this.isEnabled&&U.hasAttribute("alt")?this.value=U.getAttribute("alt"):this.value=!1}execute(U){const se=this.editor,Te=se.plugins.get("ImageUtils"),Le=se.model,Ye=Te.getClosestSelectedImageElement(Le.document.selection);Le.change(Je=>{Je.setAttribute("alt",U.newValue,Ye)})}}class te extends m.Plugin{static get requires(){return[C]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new X(this.editor))}}var Z=Y(273),h=Y(62),g=Y.n(h),r=Y(168),u={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(r.Z,u),r.Z.locals;var w=Y(764),_={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(w.Z,_),w.Z.locals;class T extends Z.View{constructor(U){super(U);const se=this.locale.t;this.focusTracker=new a.FocusTracker,this.keystrokes=new a.KeystrokeHandler,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(se("Save"),m.icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(se("Cancel"),m.icons.cancel,"ck-button-cancel","cancel"),this._focusables=new Z.ViewCollection,this._focusCycler=new Z.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]}),(0,Z.injectCssTransitionDisabler)(this)}render(){super.render(),this.keystrokes.listenTo(this.element),(0,Z.submitHandler)({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(U=>{this._focusables.add(U),this.focusTracker.add(U.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(U,se,Te,Le){const Ye=new Z.ButtonView(this.locale);return Ye.set({label:U,icon:se,tooltip:!0}),Ye.extendTemplate({attributes:{class:Te}}),Le&&Ye.delegate("execute").to(this,Le),Ye}_createLabeledInputView(){const U=this.locale.t,se=new Z.LabeledFieldView(this.locale,Z.createLabeledInputText);return se.label=U("Text alternative"),se}}function z(mt){const U=mt.editing.view,se=Z.BalloonPanelView.defaultPositions,Te=mt.plugins.get("ImageUtils");return{target:U.domConverter.mapViewToDom(Te.getClosestSelectedImageWidget(U.document.selection)),positions:[se.northArrowSouth,se.northArrowSouthWest,se.northArrowSouthEast,se.southArrowNorth,se.southArrowNorthWest,se.southArrowNorthEast,se.viewportStickyNorth]}}class L extends m.Plugin{static get requires(){return[Z.ContextualBalloon]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const U=this.editor,se=U.t;U.ui.componentFactory.add("imageTextAlternative",Te=>{const Le=U.commands.get("imageTextAlternative"),Ye=new Z.ButtonView(Te);return Ye.set({label:se("Change image text alternative"),icon:m.icons.lowVision,tooltip:!0}),Ye.bind("isEnabled").to(Le,"isEnabled"),Ye.bind("isOn").to(Le,"value",Je=>!!Je),this.listenTo(Ye,"execute",()=>{this._showForm()}),Ye})}_createForm(){const U=this.editor,se=U.editing.view.document,Te=U.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new T(U.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{U.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(Le,Ye)=>{this._hideForm(!0),Ye()}),this.listenTo(U.ui,"update",()=>{Te.getClosestSelectedImageWidget(se.selection)?this._isVisible&&function(Le){const Ye=Le.plugins.get("ContextualBalloon");if(Le.plugins.get("ImageUtils").getClosestSelectedImageWidget(Le.editing.view.document.selection)){const Je=z(Le);Ye.updatePosition(Je)}}(U):this._hideForm(!0)}),(0,Z.clickOutsideHandler)({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const U=this.editor,se=U.commands.get("imageTextAlternative"),Te=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:z(U)}),Te.fieldView.value=Te.fieldView.element.value=se.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(U){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),U&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class x extends m.Plugin{static get requires(){return[te,L]}static get pluginName(){return"ImageTextAlternative"}}function c(mt,U){return Te=>{Te.on(`attribute:srcset:${U}`,se)};function se(Te,Le,Ye){if(!Ye.consumable.consume(Le.item,Te.name))return;const Je=Ye.writer,At=Ye.mapper.toViewElement(Le.item),_t=mt.findViewImgElement(At);if(Le.attributeNewValue===null){const Rt=Le.attributeOldValue;Rt.data&&(Je.removeAttribute("srcset",_t),Je.removeAttribute("sizes",_t),Rt.width&&Je.removeAttribute("width",_t))}else{const Rt=Le.attributeNewValue;Rt.data&&(Je.setAttribute("srcset",Rt.data,_t),Je.setAttribute("sizes","100vw",_t),Rt.width&&Je.setAttribute("width",Rt.width,_t))}}}function D(mt,U,se){return Le=>{Le.on(`attribute:${se}:${U}`,Te)};function Te(Le,Ye,Je){if(!Je.consumable.consume(Ye.item,Le.name))return;const At=Je.writer,_t=Je.mapper.toViewElement(Ye.item),Rt=mt.findViewImgElement(_t);At.setAttribute(Ye.attributeKey,Ye.attributeNewValue||"",Rt)}}class W extends y.Observer{observe(U){this.listenTo(U,"load",(se,Te)=>{const Le=Te.target;this.checkShouldIgnoreEventFromTarget(Le)||Le.tagName=="IMG"&&this._fireEvents(Te)},{useCapture:!0})}_fireEvents(U){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",U))}}class q extends m.Command{constructor(U){super(U);const se=U.config.get("image.insert.type");U.plugins.has("ImageBlockEditing")||se==="block"&&(0,a.logWarning)("image-block-plugin-required"),U.plugins.has("ImageInlineEditing")||se==="inline"&&(0,a.logWarning)("image-inline-plugin-required")}refresh(){this.isEnabled=this.editor.plugins.get("ImageUtils").isImageAllowed()}execute(U){const se=(0,a.toArray)(U.source),Te=this.editor.model.document.selection,Le=this.editor.plugins.get("ImageUtils"),Ye=Object.fromEntries(Te.getAttributes());se.forEach((Je,At)=>{const _t=Te.getSelectedElement();if(typeof Je=="string"&&(Je={src:Je}),At&&_t&&Le.isImage(_t)){const Rt=this.editor.model.createPositionAfter(_t);Le.insertImage({...Je,...Ye},Rt)}else Le.insertImage({...Je,...Ye})})}}class ae extends m.Command{refresh(){const U=this.editor.plugins.get("ImageUtils"),se=this.editor.model.document.selection.getSelectedElement();this.isEnabled=U.isImage(se),this.value=this.isEnabled?se.getAttribute("src"):null}execute(U){const se=this.editor.model.document.selection.getSelectedElement();this.editor.model.change(Te=>{Te.setAttribute("src",U.source,se),Te.removeAttribute("srcset",se),Te.removeAttribute("sizes",se)})}}class Ie extends m.Plugin{static get requires(){return[C]}static get pluginName(){return"ImageEditing"}init(){const U=this.editor,se=U.conversion;U.editing.view.addObserver(W),se.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:Ye=>{const Je={data:Ye.getAttribute("srcset")};return Ye.hasAttribute("width")&&(Je.width=Ye.getAttribute("width")),Je}}});const Te=new q(U),Le=new ae(U);U.commands.add("insertImage",Te),U.commands.add("replaceImageSource",Le),U.commands.add("imageInsert",Te)}}class Ve extends m.Command{constructor(U,se){super(U),this._modelElementName=se}refresh(){const U=this.editor.plugins.get("ImageUtils"),se=U.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=U.isInlineImage(se):this.isEnabled=U.isBlockImage(se)}execute(){const U=this.editor,se=this.editor.model,Te=U.plugins.get("ImageUtils"),Le=Te.getClosestSelectedImageElement(se.document.selection),Ye=Object.fromEntries(Le.getAttributes());return Ye.src||Ye.uploadId?se.change(Je=>{const At=Array.from(se.markers).filter(Vt=>Vt.getRange().containsItem(Le)),_t=Te.insertImage(Ye,se.createSelection(Le,"on"),this._modelElementName);if(!_t)return null;const Rt=Je.createRangeOn(_t);for(const Vt of At){const $t=Vt.getRange(),li=$t.root.rootName!="$graveyard"?$t.getJoined(Rt,!0):Rt;Je.updateMarker(Vt,{range:li})}return{oldElement:Le,newElement:_t}}):null}}class _e extends m.Plugin{static get requires(){return[Ie,C,E.ClipboardPipeline]}static get pluginName(){return"ImageBlockEditing"}init(){const U=this.editor;U.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),U.plugins.has("ImageInlineEditing")&&(U.commands.add("imageTypeBlock",new Ve(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const U=this.editor,se=U.t,Te=U.conversion,Le=U.plugins.get("ImageUtils");Te.for("dataDowncast").elementToStructure({model:"imageBlock",view:(Ye,{writer:Je})=>A(Je)}),Te.for("editingDowncast").elementToStructure({model:"imageBlock",view:(Ye,{writer:Je})=>Le.toImageWidget(A(Je),Je,se("image widget"))}),Te.for("downcast").add(D(Le,"imageBlock","src")).add(D(Le,"imageBlock","alt")).add(c(Le,"imageBlock")),Te.for("upcast").elementToElement({view:H(U,"imageBlock"),model:(Ye,{writer:Je})=>Je.createElement("imageBlock",Ye.hasAttribute("src")?{src:Ye.getAttribute("src")}:null)}).add(function(Ye){return At=>{At.on("element:figure",Je)};function Je(At,_t,Rt){if(!Rt.consumable.test(_t.viewItem,{name:!0,classes:"image"}))return;const Vt=Ye.findViewImgElement(_t.viewItem);if(!Vt||!Rt.consumable.test(Vt,{name:!0}))return;Rt.consumable.consume(_t.viewItem,{name:!0,classes:"image"});const $t=Rt.convertItem(Vt,_t.modelCursor),li=(0,a.first)($t.modelRange.getItems());li?(Rt.convertChildren(_t.viewItem,li),Rt.updateConversionResult(li,_t)):Rt.consumable.revert(_t.viewItem,{name:!0,classes:"image"})}}(Le))}_setupClipboardIntegration(){const U=this.editor,se=U.model,Te=U.editing.view,Le=U.plugins.get("ImageUtils");this.listenTo(U.plugins.get("ClipboardPipeline"),"inputTransformation",(Ye,Je)=>{const At=Array.from(Je.content.getChildren());let _t;if(!At.every(Le.isInlineImageView))return;_t=Je.targetRanges?U.editing.mapper.toModelRange(Je.targetRanges[0]):se.document.selection.getFirstRange();const Rt=se.createSelection(_t);if(I(se.schema,Rt)==="imageBlock"){const Vt=new y.UpcastWriter(Te.document),$t=At.map(li=>Vt.createElement("figure",{class:"image"},li));Je.content=Vt.createDocumentFragment($t)}})}}var Me=Y(540),Qe={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(Me.Z,Qe),Me.Z.locals;class dt extends m.Plugin{static get requires(){return[_e,d.Widget,x]}static get pluginName(){return"ImageBlock"}}class nt extends m.Plugin{static get requires(){return[Ie,C,E.ClipboardPipeline]}static get pluginName(){return"ImageInlineEditing"}init(){const U=this.editor,se=U.model.schema;se.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"]}),se.addChildCheck((Te,Le)=>{if(Te.endsWith("caption")&&Le.name==="imageInline")return!1}),this._setupConversion(),U.plugins.has("ImageBlockEditing")&&(U.commands.add("imageTypeInline",new Ve(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const U=this.editor,se=U.t,Te=U.conversion,Le=U.plugins.get("ImageUtils");Te.for("dataDowncast").elementToElement({model:"imageInline",view:(Ye,{writer:Je})=>Je.createEmptyElement("img")}),Te.for("editingDowncast").elementToStructure({model:"imageInline",view:(Ye,{writer:Je})=>Le.toImageWidget(function(At){return At.createContainerElement("span",{class:"image-inline"},At.createEmptyElement("img"))}(Je),Je,se("image widget"))}),Te.for("downcast").add(D(Le,"imageInline","src")).add(D(Le,"imageInline","alt")).add(c(Le,"imageInline")),Te.for("upcast").elementToElement({view:H(U,"imageInline"),model:(Ye,{writer:Je})=>Je.createElement("imageInline",Ye.hasAttribute("src")?{src:Ye.getAttribute("src")}:null)})}_setupClipboardIntegration(){const U=this.editor,se=U.model,Te=U.editing.view,Le=U.plugins.get("ImageUtils");this.listenTo(U.plugins.get("ClipboardPipeline"),"inputTransformation",(Ye,Je)=>{const At=Array.from(Je.content.getChildren());let _t;if(!At.every(Le.isBlockImageView))return;_t=Je.targetRanges?U.editing.mapper.toModelRange(Je.targetRanges[0]):se.document.selection.getFirstRange();const Rt=se.createSelection(_t);if(I(se.schema,Rt)==="imageInline"){const Vt=new y.UpcastWriter(Te.document),$t=At.map(li=>li.childCount===1?(Array.from(li.getAttributes()).forEach(Ci=>Vt.setAttribute(...Ci,Le.findViewImgElement(li))),li.getChild(0)):li);Je.content=Vt.createDocumentFragment($t)}})}}class qe extends m.Plugin{static get requires(){return[nt,d.Widget,x]}static get pluginName(){return"ImageInline"}}class et extends m.Plugin{static get requires(){return[dt,qe]}static get pluginName(){return"Image"}}class Nt extends m.Plugin{static get pluginName(){return"ImageCaptionUtils"}static get requires(){return[C]}getCaptionFromImageModelElement(U){for(const se of U.getChildren())if(se&&se.is("element","caption"))return se;return null}getCaptionFromModelSelection(U){const se=this.editor.plugins.get("ImageUtils"),Te=U.getFirstPosition().findAncestor("caption");return Te&&se.isBlockImage(Te.parent)?Te:null}matchImageCaptionViewElement(U){const se=this.editor.plugins.get("ImageUtils");return U.name=="figcaption"&&se.isBlockImageView(U.parent)?{name:!0}:null}}class jt extends m.Command{refresh(){const U=this.editor,se=U.plugins.get("ImageCaptionUtils");if(!U.plugins.has(_e))return this.isEnabled=!1,void(this.value=!1);const Te=U.model.document.selection,Le=Te.getSelectedElement();if(!Le){const Ye=se.getCaptionFromModelSelection(Te);return this.isEnabled=!!Ye,void(this.value=!!Ye)}this.isEnabled=this.editor.plugins.get("ImageUtils").isImage(Le),this.isEnabled?this.value=!!se.getCaptionFromImageModelElement(Le):this.value=!1}execute(U={}){const{focusCaptionOnShow:se}=U;this.editor.model.change(Te=>{this.value?this._hideImageCaption(Te):this._showImageCaption(Te,se)})}_showImageCaption(U,se){const Te=this.editor.model.document.selection,Le=this.editor.plugins.get("ImageCaptionEditing");let Ye=Te.getSelectedElement();const Je=Le._getSavedCaption(Ye);this.editor.plugins.get("ImageUtils").isInlineImage(Ye)&&(this.editor.execute("imageTypeBlock"),Ye=Te.getSelectedElement());const At=Je||U.createElement("caption");U.append(At,Ye),se&&U.setSelection(At,"in")}_hideImageCaption(U){const se=this.editor,Te=se.model.document.selection,Le=se.plugins.get("ImageCaptionEditing"),Ye=se.plugins.get("ImageCaptionUtils");let Je,At=Te.getSelectedElement();At?Je=Ye.getCaptionFromImageModelElement(At):(Je=Ye.getCaptionFromModelSelection(Te),At=Je.parent),Le._saveCaption(At,Je),U.setSelection(At,"on"),U.remove(Je)}}class yt extends m.Plugin{static get requires(){return[C,Nt]}static get pluginName(){return"ImageCaptionEditing"}constructor(U){super(U),this._savedCaptionsMap=new WeakMap}init(){const U=this.editor,se=U.model.schema;se.isRegistered("caption")?se.extend("caption",{allowIn:"imageBlock"}):se.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),U.commands.add("toggleImageCaption",new jt(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const U=this.editor,se=U.editing.view,Te=U.plugins.get("ImageUtils"),Le=U.plugins.get("ImageCaptionUtils"),Ye=U.t;U.conversion.for("upcast").elementToElement({view:Je=>Le.matchImageCaptionViewElement(Je),model:"caption"}),U.conversion.for("dataDowncast").elementToElement({model:"caption",view:(Je,{writer:At})=>Te.isBlockImage(Je.parent)?At.createContainerElement("figcaption"):null}),U.conversion.for("editingDowncast").elementToElement({model:"caption",view:(Je,{writer:At})=>{if(!Te.isBlockImage(Je.parent))return null;const _t=At.createEditableElement("figcaption");At.setCustomProperty("imageCaption",!0,_t),(0,y.enablePlaceholder)({view:se,element:_t,text:Ye("Enter image caption"),keepOnFocus:!0});const Rt=Je.parent.getAttribute("alt"),Vt=Rt?Ye("Caption for image: %0",[Rt]):Ye("Caption for the image");return(0,d.toWidgetEditable)(_t,At,{label:Vt})}})}_setupImageTypeCommandsIntegration(){const U=this.editor,se=U.plugins.get("ImageUtils"),Te=U.plugins.get("ImageCaptionUtils"),Le=U.commands.get("imageTypeInline"),Ye=U.commands.get("imageTypeBlock"),Je=At=>{if(!At.return)return;const{oldElement:_t,newElement:Rt}=At.return;if(!_t)return;if(se.isBlockImage(_t)){const $t=Te.getCaptionFromImageModelElement(_t);if($t)return void this._saveCaption(Rt,$t)}const Vt=this._getSavedCaption(_t);Vt&&this._saveCaption(Rt,Vt)};Le&&this.listenTo(Le,"execute",Je,{priority:"low"}),Ye&&this.listenTo(Ye,"execute",Je,{priority:"low"})}_getSavedCaption(U){const se=this._savedCaptionsMap.get(U);return se?y.Element.fromJSON(se):null}_saveCaption(U,se){this._savedCaptionsMap.set(U,se.toJSON())}_registerCaptionReconversion(){const U=this.editor,se=U.model,Te=U.plugins.get("ImageUtils"),Le=U.plugins.get("ImageCaptionUtils");se.document.on("change:data",()=>{const Ye=se.document.differ.getChanges();for(const Je of Ye){if(Je.attributeKey!=="alt")continue;const At=Je.range.start.nodeAfter;if(Te.isBlockImage(At)){const _t=Le.getCaptionFromImageModelElement(At);if(!_t)return;U.editing.reconvertItem(_t)}}})}}class tt extends m.Plugin{static get requires(){return[Nt]}static get pluginName(){return"ImageCaptionUI"}init(){const U=this.editor,se=U.editing.view,Te=U.plugins.get("ImageCaptionUtils"),Le=U.t;U.ui.componentFactory.add("toggleImageCaption",Ye=>{const Je=U.commands.get("toggleImageCaption"),At=new Z.ButtonView(Ye);return At.set({icon:m.icons.caption,tooltip:!0,isToggleable:!0}),At.bind("isOn","isEnabled").to(Je,"value","isEnabled"),At.bind("label").to(Je,"value",_t=>Le(_t?"Toggle caption off":"Toggle caption on")),this.listenTo(At,"execute",()=>{U.execute("toggleImageCaption",{focusCaptionOnShow:!0});const _t=Te.getCaptionFromModelSelection(U.model.document.selection);if(_t){const Rt=U.editing.mapper.toViewElement(_t);se.scrollToTheSelection(),se.change(Vt=>{Vt.addClass("image__caption_highlighted",Rt)})}U.editing.view.focus()}),At})}}var Bt=Y(560),ye={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(Bt.Z,ye),Bt.Z.locals;class Ae extends m.Plugin{static get requires(){return[yt,tt]}static get pluginName(){return"ImageCaption"}}var Ke=Y(448);function kt(mt){const U=mt.map(se=>se.replace("+","\\+"));return new RegExp(`^image\\/(${U.join("|")})$`)}function It(mt){return new Promise((U,se)=>{const Te=mt.getAttribute("src");fetch(Te).then(Le=>Le.blob()).then(Le=>{const Ye=Yt(Le,Te),Je=Ye.replace("image/",""),At=new File([Le],`image.${Je}`,{type:Ye});U(At)}).catch(Le=>Le&&Le.name==="TypeError"?function(Ye){return function(Je){return new Promise((At,_t)=>{const Rt=a.global.document.createElement("img");Rt.addEventListener("load",()=>{const Vt=a.global.document.createElement("canvas");Vt.width=Rt.width,Vt.height=Rt.height,Vt.getContext("2d").drawImage(Rt,0,0),Vt.toBlob($t=>$t?At($t):_t())}),Rt.addEventListener("error",()=>_t()),Rt.src=Je})}(Ye).then(Je=>{const At=Yt(Je,Ye),_t=At.replace("image/","");return new File([Je],`image.${_t}`,{type:At})})}(Te).then(U).catch(se):se(Le))})}function Yt(mt,U){return mt.type?mt.type:U.match(/data:(image\/\w+);base64/)?U.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}class zt extends m.Plugin{static get pluginName(){return"ImageUploadUI"}init(){const U=this.editor,se=U.t,Te=Le=>{const Ye=new Ke.FileDialogButtonView(Le),Je=U.commands.get("uploadImage"),At=U.config.get("image.upload.types"),_t=kt(At);return Ye.set({acceptedType:At.map(Rt=>`image/${Rt}`).join(","),allowMultipleFiles:!0}),Ye.buttonView.set({label:se("Insert image"),icon:m.icons.image,tooltip:!0}),Ye.buttonView.bind("isEnabled").to(Je),Ye.on("done",(Rt,Vt)=>{const $t=Array.from(Vt).filter(li=>_t.test(li.type));$t.length&&(U.execute("uploadImage",{file:$t}),U.editing.view.focus())}),Ye};U.ui.componentFactory.add("uploadImage",Te),U.ui.componentFactory.add("imageUpload",Te)}}var ot=Y(271),Dt={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(ot.Z,Dt),ot.Z.locals;var wt=Y(948),ni={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(wt.Z,ni),wt.Z.locals;var di=Y(467),xi={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(di.Z,xi),di.Z.locals;class bt extends m.Plugin{static get pluginName(){return"ImageUploadProgress"}constructor(U){super(U),this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const U=this.editor;U.plugins.has("ImageBlockEditing")&&U.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",(...se)=>this.uploadStatusChange(...se)),U.plugins.has("ImageInlineEditing")&&U.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",(...se)=>this.uploadStatusChange(...se))}uploadStatusChange(U,se,Te){const Le=this.editor,Ye=se.item,Je=Ye.getAttribute("uploadId");if(!Te.consumable.consume(se.item,U.name))return;const At=Le.plugins.get("ImageUtils"),_t=Le.plugins.get(Ke.FileRepository),Rt=Je?se.attributeNewValue:null,Vt=this.placeholder,$t=Le.editing.mapper.toViewElement(Ye),li=Te.writer;if(Rt=="reading")return fe($t,li),void je(At,Vt,$t,li);if(Rt=="uploading"){const Ci=_t.loaders.get(Je);return fe($t,li),void(Ci?(Ze($t,li),function(hi,Fi,un,an){const Cn=function(fn){const Tn=fn.createUIElement("div",{class:"ck-progress-bar"});return fn.setCustomProperty("progressBar",!0,Tn),Tn}(Fi);Fi.insert(Fi.createPositionAt(hi,"end"),Cn),un.on("change:uploadedPercent",(fn,Tn,In)=>{an.change(Dn=>{Dn.setStyle("width",In+"%",Cn)})})}($t,li,Ci,Le.editing.view),function(hi,Fi,un,an){if(an.data){const Cn=hi.findViewImgElement(Fi);un.setAttribute("src",an.data,Cn)}}(At,$t,li,Ci)):je(At,Vt,$t,li))}Rt=="complete"&&_t.loaders.get(Je)&&function(Ci,hi,Fi){const un=hi.createUIElement("div",{class:"ck-image-upload-complete-icon"});hi.insert(hi.createPositionAt(Ci,"end"),un),setTimeout(()=>{Fi.change(an=>an.remove(an.createRangeOn(un)))},3e3)}($t,li,Le.editing.view),function(Ci,hi){Ct(Ci,hi,"progressBar")}($t,li),Ze($t,li),function(Ci,hi){hi.removeClass("ck-appear",Ci)}($t,li)}}function fe(mt,U){mt.hasClass("ck-appear")||U.addClass("ck-appear",mt)}function je(mt,U,se,Te){se.hasClass("ck-image-upload-placeholder")||Te.addClass("ck-image-upload-placeholder",se);const Le=mt.findViewImgElement(se);Le.getAttribute("src")!==U&&Te.setAttribute("src",U,Le),pt(se,"placeholder")||Te.insert(Te.createPositionAfter(Le),function(Ye){const Je=Ye.createUIElement("div",{class:"ck-upload-placeholder-loader"});return Ye.setCustomProperty("placeholder",!0,Je),Je}(Te))}function Ze(mt,U){mt.hasClass("ck-image-upload-placeholder")&&U.removeClass("ck-image-upload-placeholder",mt),Ct(mt,U,"placeholder")}function pt(mt,U){for(const se of mt.getChildren())if(se.getCustomProperty(U))return se}function Ct(mt,U,se){const Te=pt(mt,se);Te&&U.remove(U.createRangeOn(Te))}class St extends m.Command{refresh(){const U=this.editor,se=U.plugins.get("ImageUtils"),Te=U.model.document.selection.getSelectedElement();this.isEnabled=se.isImageAllowed()||se.isImage(Te)}execute(U){const se=(0,a.toArray)(U.file),Te=this.editor.model.document.selection,Le=this.editor.plugins.get("ImageUtils"),Ye=Object.fromEntries(Te.getAttributes());se.forEach((Je,At)=>{const _t=Te.getSelectedElement();if(At&&_t&&Le.isImage(_t)){const Rt=this.editor.model.createPositionAfter(_t);this._uploadImage(Je,Ye,Rt)}else this._uploadImage(Je,Ye)})}_uploadImage(U,se,Te){const Le=this.editor,Ye=Le.plugins.get(Ke.FileRepository).createLoader(U),Je=Le.plugins.get("ImageUtils");Ye&&Je.insertImage({...se,uploadId:Ye.id},Te)}}class Xt extends m.Plugin{static get requires(){return[Ke.FileRepository,Z.Notification,E.ClipboardPipeline,C]}static get pluginName(){return"ImageUploadEditing"}constructor(U){super(U),U.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const U=this.editor,se=U.model.document,Te=U.conversion,Le=U.plugins.get(Ke.FileRepository),Ye=U.plugins.get("ImageUtils"),Je=kt(U.config.get("image.upload.types")),At=new St(U);U.commands.add("uploadImage",At),U.commands.add("imageUpload",At),Te.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(U.editing.view.document,"clipboardInput",(_t,Rt)=>{if(Vt=Rt.dataTransfer,Array.from(Vt.types).includes("text/html")&&Vt.getData("text/html")!=="")return;var Vt;const $t=Array.from(Rt.dataTransfer.files).filter(li=>!!li&&Je.test(li.type));$t.length&&(_t.stop(),U.model.change(li=>{Rt.targetRanges&&li.setSelection(Rt.targetRanges.map(Ci=>U.editing.mapper.toModelRange(Ci))),U.model.enqueueChange(()=>{U.execute("uploadImage",{file:$t})})}))}),this.listenTo(U.plugins.get("ClipboardPipeline"),"inputTransformation",(_t,Rt)=>{const Vt=Array.from(U.editing.view.createRangeIn(Rt.content)).filter(li=>function(Ci,hi){return!(!Ci.isInlineImageView(hi)||!hi.getAttribute("src"))&&(hi.getAttribute("src").match(/^data:image\/\w+;base64,/g)||hi.getAttribute("src").match(/^blob:/g))}(Ye,li.item)&&!li.item.getAttribute("uploadProcessed")).map(li=>({promise:It(li.item),imageElement:li.item}));if(!Vt.length)return;const $t=new y.UpcastWriter(U.editing.view.document);for(const li of Vt){$t.setAttribute("uploadProcessed",!0,li.imageElement);const Ci=Le.createLoader(li.promise);Ci&&($t.setAttribute("src","",li.imageElement),$t.setAttribute("uploadId",Ci.id,li.imageElement))}}),U.editing.view.document.on("dragover",(_t,Rt)=>{Rt.preventDefault()}),se.on("change",()=>{const _t=se.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),Rt=new Set;for(const Vt of _t)if(Vt.type=="insert"&&Vt.name!="$text"){const $t=Vt.position.nodeAfter,li=Vt.position.root.rootName=="$graveyard";for(const Ci of Zt(U,$t)){const hi=Ci.getAttribute("uploadId");if(!hi)continue;const Fi=Le.loaders.get(hi);Fi&&(li?Rt.has(hi)||Fi.abort():(Rt.add(hi),this._uploadImageElements.set(hi,Ci),Fi.status=="idle"&&this._readAndUpload(Fi)))}}}),this.on("uploadComplete",(_t,{imageElement:Rt,data:Vt})=>{const $t=Vt.urls?Vt.urls:Vt;this.editor.model.change(li=>{li.setAttribute("src",$t.default,Rt),this._parseAndSetSrcsetAttributeOnImage($t,Rt,li)})},{priority:"low"})}afterInit(){const U=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&U.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&U.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(U){const se=this.editor,Te=se.model,Le=se.locale.t,Ye=se.plugins.get(Ke.FileRepository),Je=se.plugins.get(Z.Notification),At=se.plugins.get("ImageUtils"),_t=this._uploadImageElements;return Te.enqueueChange({isUndoable:!1},Vt=>{Vt.setAttribute("uploadStatus","reading",_t.get(U.id))}),U.read().then(()=>{const Vt=U.upload(),$t=_t.get(U.id);if(a.env.isSafari){const li=se.editing.mapper.toViewElement($t),Ci=At.findViewImgElement(li);se.editing.view.once("render",()=>{if(!Ci.parent)return;const hi=se.editing.view.domConverter.mapViewToDom(Ci.parent);if(!hi)return;const Fi=hi.style.display;hi.style.display="none",hi._ckHack=hi.offsetHeight,hi.style.display=Fi})}return Te.enqueueChange({isUndoable:!1},li=>{li.setAttribute("uploadStatus","uploading",$t)}),Vt}).then(Vt=>{Te.enqueueChange({isUndoable:!1},$t=>{const li=_t.get(U.id);$t.setAttribute("uploadStatus","complete",li),this.fire("uploadComplete",{data:Vt,imageElement:li})}),Rt()}).catch(Vt=>{if(U.status!=="error"&&U.status!=="aborted")throw Vt;U.status=="error"&&Vt&&Je.showWarning(Vt,{title:Le("Upload failed"),namespace:"upload"}),Te.enqueueChange({isUndoable:!1},$t=>{$t.remove(_t.get(U.id))}),Rt()});function Rt(){Te.enqueueChange({isUndoable:!1},Vt=>{const $t=_t.get(U.id);Vt.removeAttribute("uploadId",$t),Vt.removeAttribute("uploadStatus",$t),_t.delete(U.id)}),Ye.destroyLoader(U)}}_parseAndSetSrcsetAttributeOnImage(U,se,Te){let Le=0;const Ye=Object.keys(U).filter(Je=>{const At=parseInt(Je,10);if(!isNaN(At))return Le=Math.max(Le,At),!0}).map(Je=>`${U[Je]} ${Je}w`).join(", ");Ye!=""&&Te.setAttribute("srcset",{data:Ye,width:Le},se)}}function Zt(mt,U){const se=mt.plugins.get("ImageUtils");return Array.from(mt.model.createRangeOn(U)).filter(Te=>se.isImage(Te.item)).map(Te=>Te.item)}class oi extends m.Plugin{static get pluginName(){return"ImageUpload"}static get requires(){return[Xt,zt,bt]}}var bi=Y(439),gi={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(bi.Z,gi),bi.Z.locals;class Ti extends Z.View{constructor(U,se={}){super(U);const Te=this.bindTemplate;this.set("class",se.class||null),this.children=this.createCollection(),se.children&&se.children.forEach(Le=>this.children.add(Le)),this.set("_role",null),this.set("_ariaLabelledBy",null),se.labelView&&this.set({_role:"group",_ariaLabelledBy:se.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",Te.to("class")],role:Te.to("_role"),"aria-labelledby":Te.to("_ariaLabelledBy")},children:this.children})}}var Mt=Y(91),Ei={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(Mt.Z,Ei),Mt.Z.locals;class Ri extends Z.View{constructor(U,se){super(U);const{insertButtonView:Te,cancelButtonView:Le}=this._createActionButtons(U);if(this.insertButtonView=Te,this.cancelButtonView=Le,this.set("imageURLInputValue",""),this.focusTracker=new a.FocusTracker,this.keystrokes=new a.KeystrokeHandler,this._focusables=new Z.ViewCollection,this._focusCycler=new Z.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.set("_integrations",new a.Collection),se)for(const[Ye,Je]of Object.entries(se))Ye==="insertImageViaUrl"&&(Je.fieldView.bind("value").to(this,"imageURLInputValue",At=>At||""),Je.fieldView.on("input",()=>{this.imageURLInputValue=Je.fieldView.element.value.trim()})),Je.name=Ye,this._integrations.add(Je);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:"-1"},children:[...this._integrations,new Ti(U,{children:[this.insertButtonView,this.cancelButtonView],class:"ck-image-insert-form__action-row"})]})}render(){super.render(),(0,Z.submitHandler)({view:this});const U=[...this._integrations,this.insertButtonView,this.cancelButtonView];U.forEach(Te=>{this._focusables.add(Te),this.focusTracker.add(Te.element)}),this.keystrokes.listenTo(this.element);const se=Te=>Te.stopPropagation();this.keystrokes.set("arrowright",se),this.keystrokes.set("arrowleft",se),this.keystrokes.set("arrowup",se),this.keystrokes.set("arrowdown",se),this.listenTo(U[0].element,"selectstart",(Te,Le)=>{Le.stopPropagation()},{priority:"high"})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}getIntegration(U){return this._integrations.find(se=>se.name===U)}_createActionButtons(U){const se=U.t,Te=new Z.ButtonView(U),Le=new Z.ButtonView(U);return Te.set({label:se("Insert"),icon:m.icons.check,class:"ck-button-save",type:"submit",withText:!0,isEnabled:this.imageURLInputValue}),Le.set({label:se("Cancel"),icon:m.icons.cancel,class:"ck-button-cancel",withText:!0}),Te.bind("isEnabled").to(this,"imageURLInputValue",Ye=>!!Ye),Te.delegate("execute").to(this,"submit"),Le.delegate("execute").to(this,"cancel"),{insertButtonView:Te,cancelButtonView:Le}}focus(){this._focusCycler.focusFirst()}}function Yi(mt){const U=mt.t,se=new Z.LabeledFieldView(mt,Z.createLabeledInputText);return se.set({label:U("Insert image via URL")}),se.fieldView.placeholder="https://example.com/image.png",se}class ji extends m.Plugin{static get pluginName(){return"ImageInsertUI"}init(){const U=this.editor,se=Te=>this._createDropdownView(Te);U.ui.componentFactory.add("insertImage",se),U.ui.componentFactory.add("imageInsert",se)}_createDropdownView(U){const se=this.editor,Te=U.t,Le=se.commands.get("uploadImage"),Ye=se.commands.get("insertImage");this.dropdownView=(0,Z.createDropdown)(U,Le?Z.SplitButtonView:void 0);const Je=this.dropdownView.buttonView,At=this.dropdownView.panelView;if(Je.set({label:Te("Insert image"),icon:m.icons.image,tooltip:!0}),At.extendTemplate({attributes:{class:"ck-image-insert__panel"}}),Le){const _t=this.dropdownView.buttonView;_t.actionView=se.ui.componentFactory.create("uploadImage"),_t.actionView.extendTemplate({attributes:{class:"ck ck-button ck-splitbutton__action"}})}return this._setUpDropdown(Le||Ye)}_setUpDropdown(U){const se=this.editor,Te=se.t,Le=this.dropdownView,Ye=Le.panelView,Je=this.editor.plugins.get("ImageUtils"),At=se.commands.get("replaceImageSource");let _t;function Rt(){se.editing.view.focus(),Le.isOpen=!1}return Le.bind("isEnabled").to(U),Le.once("change:isOpen",()=>{_t=new Ri(se.locale,function(Vt){const $t=Vt.config.get("image.insert.integrations"),li=Vt.plugins.get("ImageInsertUI"),Ci={insertImageViaUrl:Yi(Vt.locale)};if(!$t)return Ci;if($t.find(hi=>hi==="openCKFinder")&&Vt.ui.componentFactory.has("ckfinder")){const hi=Vt.ui.componentFactory.create("ckfinder");hi.set({withText:!0,class:"ck-image-insert__ck-finder-button"}),hi.delegate("execute").to(li,"cancel"),Ci.openCKFinder=hi}return $t.reduce((hi,Fi)=>(Ci[Fi]?hi[Fi]=Ci[Fi]:Vt.ui.componentFactory.has(Fi)&&(hi[Fi]=Vt.ui.componentFactory.create(Fi)),hi),{})}(se)),_t.delegate("submit","cancel").to(Le),Ye.children.add(_t)}),Le.on("change:isOpen",()=>{const Vt=se.model.document.selection.getSelectedElement(),$t=_t.insertButtonView,li=_t.getIntegration("insertImageViaUrl");Le.isOpen&&(Je.isImage(Vt)?(_t.imageURLInputValue=At.value,$t.label=Te("Update"),li.label=Te("Update image URL")):(_t.imageURLInputValue="",$t.label=Te("Insert"),li.label=Te("Insert image via URL")))},{priority:"low"}),this.delegate("cancel").to(Le),Le.on("submit",()=>{Rt(),function(){const Vt=se.model.document.selection.getSelectedElement();Je.isImage(Vt)?se.execute("replaceImageSource",{source:_t.imageURLInputValue}):se.execute("insertImage",{source:_t.imageURLInputValue})}()}),Le.on("cancel",()=>{Rt()}),Le}}class Pi extends m.Plugin{static get pluginName(){return"ImageInsertViaUrl"}static get requires(){return[ji]}}class qi extends m.Plugin{static get pluginName(){return"ImageInsert"}static get requires(){return[oi,Pi,ji]}}class nn extends m.Command{refresh(){const U=this.editor,se=U.plugins.get("ImageUtils").getClosestSelectedImageElement(U.model.document.selection);this.isEnabled=!!se,se&&se.hasAttribute("width")?this.value={width:se.getAttribute("width"),height:null}:this.value=null}execute(U){const se=this.editor,Te=se.model,Le=se.plugins.get("ImageUtils").getClosestSelectedImageElement(Te.document.selection);this.value={width:U.width,height:null},Le&&Te.change(Ye=>{Ye.setAttribute("width",U.width,Le)})}}class Li extends m.Plugin{static get requires(){return[C]}static get pluginName(){return"ImageResizeEditing"}constructor(U){super(U),U.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const U=this.editor,se=new nn(U);this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline"),U.commands.add("resizeImage",se),U.commands.add("imageResize",se)}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:"width"}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:"width"})}_registerConverters(U){const se=this.editor;se.conversion.for("downcast").add(Te=>Te.on(`attribute:width:${U}`,(Le,Ye,Je)=>{if(!Je.consumable.consume(Ye.item,Le.name))return;const At=Je.writer,_t=Je.mapper.toViewElement(Ye.item);Ye.attributeNewValue!==null?(At.setStyle("width",Ye.attributeNewValue,_t),At.addClass("image_resized",_t)):(At.removeStyle("width",_t),At.removeClass("image_resized",_t))})),se.conversion.for("upcast").attributeToAttribute({view:{name:U==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"width",value:Te=>Te.getStyle("width")}})}}const dn={small:m.icons.objectSizeSmall,medium:m.icons.objectSizeMedium,large:m.icons.objectSizeLarge,original:m.icons.objectSizeFull};class pi extends m.Plugin{static get requires(){return[Li]}static get pluginName(){return"ImageResizeButtons"}constructor(U){super(U),this._resizeUnit=U.config.get("image.resizeUnit")}init(){const U=this.editor,se=U.config.get("image.resizeOptions"),Te=U.commands.get("resizeImage");this.bind("isEnabled").to(Te);for(const Le of se)this._registerImageResizeButton(Le);this._registerImageResizeDropdown(se)}_registerImageResizeButton(U){const se=this.editor,{name:Te,value:Le,icon:Ye}=U,Je=Le?Le+this._resizeUnit:null;se.ui.componentFactory.add(Te,At=>{const _t=new Z.ButtonView(At),Rt=se.commands.get("resizeImage"),Vt=this._getOptionLabelValue(U,!0);if(!dn[Ye])throw new a.CKEditorError("imageresizebuttons-missing-icon",se,U);return _t.set({label:Vt,icon:dn[Ye],tooltip:Vt,isToggleable:!0}),_t.bind("isEnabled").to(this),_t.bind("isOn").to(Rt,"value",fi(Je)),this.listenTo(_t,"execute",()=>{se.execute("resizeImage",{width:Je})}),_t})}_registerImageResizeDropdown(U){const se=this.editor,Te=se.t,Le=U.find(Je=>!Je.value),Ye=Je=>{const At=se.commands.get("resizeImage"),_t=(0,Z.createDropdown)(Je,Z.DropdownButtonView),Rt=_t.buttonView;return Rt.set({tooltip:Te("Resize image"),commandValue:Le.value,icon:dn.medium,isToggleable:!0,label:this._getOptionLabelValue(Le),withText:!0,class:"ck-resize-image-button"}),Rt.bind("label").to(At,"value",Vt=>Vt&&Vt.width?Vt.width:this._getOptionLabelValue(Le)),_t.bind("isOn").to(At),_t.bind("isEnabled").to(this),(0,Z.addListToDropdown)(_t,()=>this._getResizeDropdownListItemDefinitions(U,At),{ariaLabel:Te("Image resize list")}),this.listenTo(_t,"execute",Vt=>{se.execute(Vt.source.commandName,{width:Vt.source.commandValue}),se.editing.view.focus()}),_t};se.ui.componentFactory.add("resizeImage",Ye),se.ui.componentFactory.add("imageResize",Ye)}_getOptionLabelValue(U,se){const Te=this.editor.t;return U.label?U.label:se?U.value?Te("Resize image to %0",U.value+this._resizeUnit):Te("Resize image to the original size"):U.value?U.value+this._resizeUnit:Te("Original")}_getResizeDropdownListItemDefinitions(U,se){const Te=new a.Collection;return U.map(Le=>{const Ye=Le.value?Le.value+this._resizeUnit:null,Je={type:"button",model:new Z.Model({commandName:"resizeImage",commandValue:Ye,label:this._getOptionLabelValue(Le),withText:!0,icon:null})};Je.model.bind("isOn").to(se,"value",fi(Ye)),Te.add(Je)}),Te}}function fi(mt){return U=>mt===null&&U===mt||U&&U.width===mt}const Ki=/(image|image-inline)/,ke="image_resized";class V extends m.Plugin{static get requires(){return[d.WidgetResize]}static get pluginName(){return"ImageResizeHandles"}init(){const U=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(U),this._setupResizerCreator()}_setupResizerCreator(){const U=this.editor,se=U.editing.view;se.addObserver(W),this.listenTo(se.document,"imageLoaded",(Te,Le)=>{if(!Le.target.matches("figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img"))return;const Ye=U.editing.view.domConverter,Je=Ye.domToView(Le.target).findAncestor({classes:Ki});let At=this.editor.plugins.get(d.WidgetResize).getResizerByViewElement(Je);if(At)return void At.redraw();const _t=U.editing.mapper,Rt=_t.toModelElement(Je);At=U.plugins.get(d.WidgetResize).attachTo({unit:U.config.get("image.resizeUnit"),modelElement:Rt,viewElement:Je,editor:U,getHandleHost:Vt=>Vt.querySelector("img"),getResizeHost:()=>Ye.mapViewToDom(_t.toViewElement(Rt.parent)),isCentered(){const Vt=Rt.getAttribute("imageStyle");return!Vt||Vt=="block"||Vt=="alignCenter"},onCommit(Vt){se.change($t=>{$t.removeClass(ke,Je)}),U.execute("resizeImage",{width:Vt})}}),At.on("updateSize",()=>{Je.hasClass(ke)||se.change(Vt=>{Vt.addClass(ke,Je)})}),At.bind("isEnabled").to(this)})}}var F=Y(601),P={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(F.Z,P),F.Z.locals;class N extends m.Plugin{static get requires(){return[Li,V,pi]}static get pluginName(){return"ImageResize"}}class de extends m.Command{constructor(U,se){super(U),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(se.map(Te=>{if(Te.isDefault)for(const Le of Te.modelElements)this._defaultStyles[Le]=Te.name;return[Te.name,Te]}))}refresh(){const U=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!U,this.isEnabled?U.hasAttribute("imageStyle")?this.value=U.getAttribute("imageStyle"):this.value=this._defaultStyles[U.name]:this.value=!1}execute(U={}){const se=this.editor,Te=se.model,Le=se.plugins.get("ImageUtils");Te.change(Ye=>{const Je=U.value;let At=Le.getClosestSelectedImageElement(Te.document.selection);Je&&this.shouldConvertImageType(Je,At)&&(this.editor.execute(Le.isBlockImage(At)?"imageTypeInline":"imageTypeBlock"),At=Le.getClosestSelectedImageElement(Te.document.selection)),!Je||this._styles.get(Je).isDefault?Ye.removeAttribute("imageStyle",At):Ye.setAttribute("imageStyle",Je,At)})}shouldConvertImageType(U,se){return!this._styles.get(U).modelElements.includes(se.name)}}const{objectFullWidth:Ce,objectInline:$e,objectLeft:at,objectRight:Tt,objectCenter:Ge,objectBlockLeft:Ut,objectBlockRight:ci}=m.icons,yi={get inline(){return{name:"inline",title:"In line",icon:$e,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:at,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:Ut,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:Ge,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:Tt,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:ci,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:Ge,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:Tt,modelElements:["imageBlock"],className:"image-style-side"}}},Ni={full:Ce,left:Ut,right:ci,center:Ge,inlineLeft:at,inlineRight:Tt,inline:$e},Ii=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function zi(mt){(0,a.logWarning)("image-style-configuration-definition-invalid",mt)}const Oi={normalizeStyles:function(mt){return(mt.configuredStyles.options||[]).map(U=>function(se){return se=typeof se=="string"?yi[se]?{...yi[se]}:{name:se}:function(Te,Le){const Ye={...Le};for(const Je in Te)Object.prototype.hasOwnProperty.call(Le,Je)||(Ye[Je]=Te[Je]);return Ye}(yi[se.name],se),typeof se.icon=="string"&&(se.icon=Ni[se.icon]||se.icon),se}(U)).filter(U=>function(se,{isBlockPluginLoaded:Te,isInlinePluginLoaded:Le}){const{modelElements:Ye,name:Je}=se;if(!(Ye&&Ye.length&&Je))return zi({style:se}),!1;{const At=[Te?"imageBlock":null,Le?"imageInline":null];if(!Ye.some(_t=>At.includes(_t)))return(0,a.logWarning)("image-style-missing-dependency",{style:se,missingPlugins:Ye.map(_t=>_t==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}(U,mt))},getDefaultStylesConfiguration:function(mt,U){return mt&&U?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:mt?{options:["block","side"]}:U?{options:["inline","alignLeft","alignRight"]}:{}},getDefaultDropdownDefinitions:function(mt){return mt.has("ImageBlockEditing")&&mt.has("ImageInlineEditing")?[...Ii]:[]},warnInvalidStyle:zi,DEFAULT_OPTIONS:yi,DEFAULT_ICONS:Ni,DEFAULT_DROPDOWN_DEFINITIONS:Ii};function Ui(mt,U){for(const se of U)if(se.name===mt)return se}class Wt extends m.Plugin{static get pluginName(){return"ImageStyleEditing"}static get requires(){return[C]}init(){const{normalizeStyles:U,getDefaultStylesConfiguration:se}=Oi,Te=this.editor,Le=Te.plugins.has("ImageBlockEditing"),Ye=Te.plugins.has("ImageInlineEditing");Te.config.define("image.styles",se(Le,Ye)),this.normalizedStyles=U({configuredStyles:Te.config.get("image.styles"),isBlockPluginLoaded:Le,isInlinePluginLoaded:Ye}),this._setupConversion(Le,Ye),this._setupPostFixer(),Te.commands.add("imageStyle",new de(Te,this.normalizedStyles))}_setupConversion(U,se){const Te=this.editor,Le=Te.model.schema,Ye=(Je=this.normalizedStyles,(_t,Rt,Vt)=>{if(!Vt.consumable.consume(Rt.item,_t.name))return;const $t=Ui(Rt.attributeNewValue,Je),li=Ui(Rt.attributeOldValue,Je),Ci=Vt.mapper.toViewElement(Rt.item),hi=Vt.writer;li&&hi.removeClass(li.className,Ci),$t&&hi.addClass($t.className,Ci)});var Je;const At=function(_t){const Rt={imageInline:_t.filter(Vt=>!Vt.isDefault&&Vt.modelElements.includes("imageInline")),imageBlock:_t.filter(Vt=>!Vt.isDefault&&Vt.modelElements.includes("imageBlock"))};return(Vt,$t,li)=>{if(!$t.modelRange)return;const Ci=$t.viewItem,hi=(0,a.first)($t.modelRange.getItems());if(hi&&li.schema.checkAttribute(hi,"imageStyle"))for(const Fi of Rt[hi.name])li.consumable.consume(Ci,{classes:Fi.className})&&li.writer.setAttribute("imageStyle",Fi.name,hi)}}(this.normalizedStyles);Te.editing.downcastDispatcher.on("attribute:imageStyle",Ye),Te.data.downcastDispatcher.on("attribute:imageStyle",Ye),U&&(Le.extend("imageBlock",{allowAttributes:"imageStyle"}),Te.data.upcastDispatcher.on("element:figure",At,{priority:"low"})),se&&(Le.extend("imageInline",{allowAttributes:"imageStyle"}),Te.data.upcastDispatcher.on("element:img",At,{priority:"low"}))}_setupPostFixer(){const U=this.editor,se=U.model.document,Te=U.plugins.get(C),Le=new Map(this.normalizedStyles.map(Ye=>[Ye.name,Ye]));se.registerPostFixer(Ye=>{let Je=!1;for(const At of se.differ.getChanges())if(At.type=="insert"||At.type=="attribute"&&At.attributeKey=="imageStyle"){let _t=At.type=="insert"?At.position.nodeAfter:At.range.start.nodeAfter;if(_t&&_t.is("element","paragraph")&&_t.childCount>0&&(_t=_t.getChild(0)),!Te.isImage(_t))continue;const Rt=_t.getAttribute("imageStyle");if(!Rt)continue;const Vt=Le.get(Rt);Vt&&Vt.modelElements.includes(_t.name)||(Ye.removeAttribute("imageStyle",_t),Je=!0)}return Je})}}const we=function(mt){var U=typeof mt;return mt!=null&&(U=="object"||U=="function")},He=function(mt){return mt};var J=Y(29),R={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};g()(J.Z,R),J.Z.locals;class Q extends m.Plugin{static get requires(){return[Wt]}static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const U=this.editor.t;return{"Wrap text":U("Wrap text"),"Break text":U("Break text"),"In line":U("In line"),"Full size image":U("Full size image"),"Side image":U("Side image"),"Left aligned image":U("Left aligned image"),"Centered image":U("Centered image"),"Right aligned image":U("Right aligned image")}}init(){const U=this.editor.plugins,se=this.editor.config.get("image.toolbar")||[],Te=ve(U.get("ImageStyleEditing").normalizedStyles,this.localizedDefaultStylesTitles);for(const Ye of Te)this._createButton(Ye);const Le=ve([...se.filter(we),...Oi.getDefaultDropdownDefinitions(U)],this.localizedDefaultStylesTitles);for(const Ye of Le)this._createDropdown(Ye,Te)}_createDropdown(U,se){const Te=this.editor.ui.componentFactory;Te.add(U.name,Le=>{let Ye;const{defaultItem:Je,items:At,title:_t}=U,Rt=At.filter(Ci=>se.find(({name:hi})=>De(hi)===Ci)).map(Ci=>{const hi=Te.create(Ci);return Ci===Je&&(Ye=hi),hi});At.length!==Rt.length&&Oi.warnInvalidStyle({dropdown:U});const Vt=(0,Z.createDropdown)(Le,Z.SplitButtonView),$t=Vt.buttonView,li=$t.arrowView;return(0,Z.addToolbarToDropdown)(Vt,Rt,{enableActiveItemFocusOnDropdownOpen:!0}),$t.set({label:rt(_t,Ye.label),class:null,tooltip:!0}),li.unbind("label"),li.set({label:_t}),$t.bind("icon").toMany(Rt,"isOn",(...Ci)=>{const hi=Ci.findIndex(He);return hi<0?Ye.icon:Rt[hi].icon}),$t.bind("label").toMany(Rt,"isOn",(...Ci)=>{const hi=Ci.findIndex(He);return rt(_t,hi<0?Ye.label:Rt[hi].label)}),$t.bind("isOn").toMany(Rt,"isOn",(...Ci)=>Ci.some(He)),$t.bind("class").toMany(Rt,"isOn",(...Ci)=>Ci.some(He)?"ck-splitbutton_flatten":null),$t.on("execute",()=>{Rt.some(({isOn:Ci})=>Ci)?Vt.isOpen=!Vt.isOpen:Ye.fire("execute")}),Vt.bind("isEnabled").toMany(Rt,"isEnabled",(...Ci)=>Ci.some(He)),this.listenTo(Vt,"execute",()=>{this.editor.editing.view.focus()}),Vt})}_createButton(U){const se=U.name;this.editor.ui.componentFactory.add(De(se),Te=>{const Le=this.editor.commands.get("imageStyle"),Ye=new Z.ButtonView(Te);return Ye.set({label:U.title,icon:U.icon,tooltip:!0,isToggleable:!0}),Ye.bind("isEnabled").to(Le,"isEnabled"),Ye.bind("isOn").to(Le,"value",Je=>Je===se),Ye.on("execute",this._executeCommand.bind(this,se)),Ye})}_executeCommand(U){this.editor.execute("imageStyle",{value:U}),this.editor.editing.view.focus()}}function ve(mt,U){for(const se of mt)U[se.title]&&(se.title=U[se.title]);return mt}function De(mt){return`imageStyle:${mt}`}function rt(mt,U){return(mt?mt+": ":"")+U}class Pt extends m.Plugin{static get requires(){return[Wt,Q]}static get pluginName(){return"ImageStyle"}}class ai extends m.Plugin{static get requires(){return[d.WidgetToolbarRepository,C]}static get pluginName(){return"ImageToolbar"}afterInit(){const U=this.editor,se=U.t,Te=U.plugins.get(d.WidgetToolbarRepository),Le=U.plugins.get("ImageUtils");var Ye;Te.register("image",{ariaLabel:se("Image toolbar"),items:(Ye=U.config.get("image.toolbar")||[],Ye.map(Je=>we(Je)?Je.name:Je)),getRelatedElement:Je=>Le.getClosestSelectedImageWidget(Je)})}}class wi extends m.Plugin{static get requires(){return[Ie,C]}static get pluginName(){return"PictureEditing"}afterInit(){const U=this.editor;U.plugins.has("ImageBlockEditing")&&U.model.schema.extend("imageBlock",{allowAttributes:["sources"]}),U.plugins.has("ImageInlineEditing")&&U.model.schema.extend("imageInline",{allowAttributes:["sources"]}),this._setupConversion(),this._setupImageUploadEditingIntegration()}_setupConversion(){const U=this.editor,se=U.conversion,Te=U.plugins.get("ImageUtils");se.for("upcast").add(function(Le){const Ye=["srcset","media","type","sizes"];return At=>{At.on("element:picture",Je)};function Je(At,_t,Rt){const Vt=_t.viewItem;if(!Rt.consumable.test(Vt,{name:!0}))return;const $t=new Map;for(const hi of Vt.getChildren())if(hi.is("element","source")){const Fi={};for(const un of Ye)hi.hasAttribute(un)&&Rt.consumable.test(hi,{attributes:un})&&(Fi[un]=hi.getAttribute(un));Object.keys(Fi).length&&$t.set(hi,Fi)}const li=Le.findViewImgElement(Vt);if(!li)return;let Ci=_t.modelCursor.parent;if(!Ci.is("element","imageBlock")){const hi=Rt.convertItem(li,_t.modelCursor);_t.modelRange=hi.modelRange,_t.modelCursor=hi.modelCursor,Ci=(0,a.first)(hi.modelRange.getItems())}Rt.consumable.consume(Vt,{name:!0});for(const[hi,Fi]of $t)Rt.consumable.consume(hi,{attributes:Object.keys(Fi)});$t.size&&Rt.writer.setAttribute("sources",Array.from($t.values()),Ci),Rt.convertChildren(Vt,Ci)}}(Te)),se.for("downcast").add(function(Le){return Je=>{Je.on("attribute:sources:imageBlock",Ye),Je.on("attribute:sources:imageInline",Ye)};function Ye(Je,At,_t){if(!_t.consumable.consume(At.item,Je.name))return;const Rt=_t.writer,Vt=_t.mapper.toViewElement(At.item),$t=Le.findViewImgElement(Vt);if(At.attributeNewValue&&At.attributeNewValue.length){const li=Rt.createContainerElement("picture",null,At.attributeNewValue.map(Fi=>Rt.createEmptyElement("source",Fi))),Ci=[];let hi=$t.parent;for(;hi&&hi.is("attributeElement");){const Fi=hi.parent;Rt.unwrap(Rt.createRangeOn($t),hi),Ci.unshift(hi),hi=Fi}Rt.insert(Rt.createPositionBefore($t),li),Rt.move(Rt.createRangeOn($t),Rt.createPositionAt(li,"end"));for(const Fi of Ci)Rt.wrap(Rt.createRangeOn(li),Fi)}else if($t.parent.is("element","picture")){const li=$t.parent;Rt.move(Rt.createRangeOn($t),Rt.createPositionBefore(li)),Rt.remove(li)}}}(Te))}_setupImageUploadEditingIntegration(){const U=this.editor;U.plugins.has("ImageUploadEditing")&&this.listenTo(U.plugins.get("ImageUploadEditing"),"uploadComplete",(se,{imageElement:Te,data:Le})=>{const Ye=Le.sources;Ye&&U.model.change(Je=>{Je.setAttributes({sources:Ye},Te)})})}}})(),(window.CKEditor5=window.CKEditor5||{}).image=Qt})()},57051:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{"Decrease indent":"Decrease indent","Increase indent":"Increase indent"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},492:(m,E,y)=>{m.exports=y(79)("./src/engine.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{Indent:()=>d,IndentBlock:()=>ge,IndentEditing:()=>E,IndentUI:()=>a});var m=Y(704);class E extends m.Plugin{static get pluginName(){return"IndentEditing"}init(){const te=this.editor;te.commands.add("indent",new m.MultiCommand(te)),te.commands.add("outdent",new m.MultiCommand(te))}}var y=Y(273);const f='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',v='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>';class a extends m.Plugin{static get pluginName(){return"IndentUI"}init(){const te=this.editor,Z=te.locale,h=te.t,g=Z.uiLanguageDirection=="ltr"?f:v,r=Z.uiLanguageDirection=="ltr"?v:f;this._defineButton("indent",h("Increase indent"),g),this._defineButton("outdent",h("Decrease indent"),r)}_defineButton(te,Z,h){const g=this.editor;g.ui.componentFactory.add(te,r=>{const u=g.commands.get(te),w=new y.ButtonView(r);return w.set({label:Z,icon:h,tooltip:!0}),w.bind("isOn","isEnabled").to(u,"value","isEnabled"),this.listenTo(w,"execute",()=>{g.execute(te),g.editing.view.focus()}),w})}}class d extends m.Plugin{static get pluginName(){return"Indent"}static get requires(){return[E,a]}}var A=Y(492),H=Y(209);class I extends m.Command{constructor(te,Z){super(te),this._indentBehavior=Z}refresh(){const te=this.editor.model,Z=(0,H.first)(te.document.selection.getSelectedBlocks());Z&&te.schema.checkAttribute(Z,"blockIndent")?this.isEnabled=this._indentBehavior.checkEnabled(Z.getAttribute("blockIndent")):this.isEnabled=!1}execute(){const te=this.editor.model,Z=function(h){const g=h.document.selection,r=h.schema;return Array.from(g.getSelectedBlocks()).filter(u=>r.checkAttribute(u,"blockIndent"))}(te);te.change(h=>{for(const g of Z){const r=g.getAttribute("blockIndent"),u=this._indentBehavior.getNextIndent(r);u?h.setAttribute("blockIndent",u,g):h.removeAttribute("blockIndent",g)}})}}class C{constructor(te){this.isForward=te.direction==="forward",this.offset=te.offset,this.unit=te.unit}checkEnabled(te){const Z=parseFloat(te||0);return this.isForward||Z>0}getNextIndent(te){const Z=parseFloat(te||0);if(!(!te||te.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const h=Z+(this.isForward?this.offset:-this.offset);return h>0?h+this.unit:void 0}}class me{constructor(te){this.isForward=te.direction==="forward",this.classes=te.classes}checkEnabled(te){const Z=this.classes.indexOf(te);return this.isForward?Z<this.classes.length-1:Z>=0}getNextIndent(te){const Z=this.classes.indexOf(te),h=this.isForward?1:-1;return this.classes[Z+h]}}const pe=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class ge extends m.Plugin{constructor(te){super(te),te.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}init(){const te=this.editor,Z=te.config.get("indentBlock"),h=!Z.classes||!Z.classes.length,g=Object.assign({direction:"forward"},Z),r=Object.assign({direction:"backward"},Z);h?(te.data.addStyleProcessorRules(A.addMarginRules),this._setupConversionUsingOffset(te.conversion),te.commands.add("indentBlock",new I(te,new C(g))),te.commands.add("outdentBlock",new I(te,new C(r)))):(this._setupConversionUsingClasses(Z.classes),te.commands.add("indentBlock",new I(te,new me(g))),te.commands.add("outdentBlock",new I(te,new me(r))))}afterInit(){const te=this.editor,Z=te.model.schema,h=te.commands.get("indent"),g=te.commands.get("outdent"),r=te.config.get("heading.options");(r&&r.map(u=>u.model)||pe).forEach(u=>{Z.isRegistered(u)&&Z.extend(u,{allowAttributes:"blockIndent"})}),Z.setAttributeProperties("blockIndent",{isFormatting:!0}),h.registerChildCommand(te.commands.get("indentBlock")),g.registerChildCommand(te.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const te=this.editor.conversion,Z=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";te.for("upcast").attributeToAttribute({view:{styles:{[Z]:/[\s\S]+/}},model:{key:"blockIndent",value:h=>h.getStyle(Z)}}),te.for("downcast").attributeToAttribute({model:"blockIndent",view:h=>({key:"style",value:{[Z]:h}})})}_setupConversionUsingClasses(te){const Z={model:{key:"blockIndent",values:[]},view:{}};for(const h of te)Z.model.values.push(h),Z.view[h]={key:"class",value:[h]};this.editor.conversion.attributeToAttribute(Z)}}})(),(window.CKEditor5=window.CKEditor5||{}).indent=Qt})()},81460:(ii,Gt,Y)=>{(function(Qt){const m=Qt.en=Qt.en||{};m.dictionary=Object.assign(m.dictionary||{},{Downloadable:"Downloadable","Edit link":"Edit link",Link:"Link","Link image":"Link image","Link URL":"Link URL","Open in a new tab":"Open in a new tab","Open link in new tab":"Open link in new tab","This link has no URL":"This link has no URL",Unlink:"Unlink"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var Qt={23:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-link_selected span.image-inline{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{border-right:1px solid var(--ck-color-base-text);height:100%;margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}",""]);const H=A},952:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{color:var(--ck-color-link-default);cursor:pointer;max-width:var(--ck-input-width);min-width:3em;padding:0 var(--ck-spacing-medium);text-align:center;text-overflow:ellipsis}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{max-width:100%;min-width:0}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview),[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}",""]);const H=A},871:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel,.ck.ck-link-form_layout-vertical .ck-button.ck-button-save{margin-top:var(--ck-spacing-medium)}.ck.ck-link-form_layout-vertical{min-width:var(--ck-input-width);padding:0}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical>.ck-button{border-radius:0;margin:0;padding:var(--ck-spacing-standard);width:50%}.ck.ck-link-form_layout-vertical>.ck-button:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form_layout-vertical>.ck-button,[dir=rtl] .ck.ck-link-form_layout-vertical>.ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical>.ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}",""]);const H=A},269:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,'.ck.ck-editor__editable a span.image-inline:after,.ck.ck-editor__editable figure.image>a:after{display:block;position:absolute}:root{--ck-link-image-indicator-icon-size:20;--ck-link-image-indicator-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck.ck-editor__editable a span.image-inline:after,.ck.ck-editor__editable figure.image>a:after{background-color:rgba(0,0,0,.4);background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTExLjA3NyAxNSAuOTkxLTEuNDE2YS43NS43NSAwIDEgMSAxLjIyOS44NmwtMS4xNDggMS42NGEuNzQ4Ljc0OCAwIDAgMS0uMjE3LjIwNiA1LjI1MSA1LjI1MSAwIDAgMS04LjUwMy01Ljk1NS43NDEuNzQxIDAgMCAxIC4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NGwuMDA2LjAwNHptNS40OTQtNS4zMzVhLjc0OC43NDggMCAwIDEtLjEyLjI3NGwtMS4xNDcgMS42MzlhLjc1Ljc1IDAgMSAxLTEuMjI4LS44NmwuODYtMS4yM2EzLjc1IDMuNzUgMCAwIDAtNi4xNDQtNC4zMDFsLS44NiAxLjIyOWEuNzUuNzUgMCAwIDEtMS4yMjktLjg2bDEuMTQ4LTEuNjRhLjc0OC43NDggMCAwIDEgLjIxNy0uMjA2IDUuMjUxIDUuMjUxIDAgMCAxIDguNTAzIDUuOTU1em0tNC41NjMtMi41MzJhLjc1Ljc1IDAgMCAxIC4xODQgMS4wNDVsLTMuMTU1IDQuNTA1YS43NS43NSAwIDEgMS0xLjIyOS0uODZsMy4xNTUtNC41MDZhLjc1Ljc1IDAgMCAxIDEuMDQ1LS4xODR6Ii8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:14px;border-radius:100%;content:"";height:calc(var(--ck-link-image-indicator-icon-is-visible)*var(--ck-link-image-indicator-icon-size));overflow:hidden;right:min(var(--ck-spacing-medium),6%);top:min(var(--ck-spacing-medium),6%);width:calc(var(--ck-link-image-indicator-icon-is-visible)*var(--ck-link-image-indicator-icon-size))}',""]);const H=A},764:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,'.ck-vertical-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck-vertical-form .ck-button:focus:after{display:none}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck.ck-responsive-form .ck-button:focus:after{display:none}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-width)*.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){border-radius:0;margin-top:var(--ck-spacing-large);padding:var(--ck-spacing-standard)}.ck.ck-responsive-form>.ck-button:last-child:not(:focus),.ck.ck-responsive-form>.ck-button:nth-last-child(2):not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}',""]);const H=A},609:f=>{"use strict";f.exports=function(v){var a=[];return a.toString=function(){return this.map(function(d){var A=v(d);return d[2]?"@media ".concat(d[2]," {").concat(A,"}"):A}).join("")},a.i=function(d,A,H){typeof d=="string"&&(d=[[null,d,""]]);var I={};if(H)for(var C=0;C<this.length;C++){var me=this[C][0];me!=null&&(I[me]=!0)}for(var pe=0;pe<d.length;pe++){var ge=[].concat(d[pe]);H&&I[ge[0]]||(A&&(ge[2]?ge[2]="".concat(A," and ").concat(ge[2]):ge[2]=A),a.push(ge))}},a}},62:(f,v,a)=>{"use strict";var d,A=function(){return d===void 0&&(d=Boolean(window&&document&&document.all&&!window.atob)),d},H=function(){var u={};return function(w){if(u[w]===void 0){var _=document.querySelector(w);if(window.HTMLIFrameElement&&_ instanceof window.HTMLIFrameElement)try{_=_.contentDocument.head}catch{_=null}u[w]=_}return u[w]}}(),I=[];function C(u){for(var w=-1,_=0;_<I.length;_++)if(I[_].identifier===u){w=_;break}return w}function me(u,w){for(var _={},T=[],z=0;z<u.length;z++){var L=u[z],x=w.base?L[0]+w.base:L[0],c=_[x]||0,D="".concat(x," ").concat(c);_[x]=c+1;var W=C(D),q={css:L[1],media:L[2],sourceMap:L[3]};W!==-1?(I[W].references++,I[W].updater(q)):I.push({identifier:D,updater:r(q,w),references:1}),T.push(D)}return T}function pe(u){var w=document.createElement("style"),_=u.attributes||{};if(_.nonce===void 0){var T=a.nc;T&&(_.nonce=T)}if(Object.keys(_).forEach(function(L){w.setAttribute(L,_[L])}),typeof u.insert=="function")u.insert(w);else{var z=H(u.insert||"head");if(!z)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");z.appendChild(w)}return w}var ge,X=(ge=[],function(u,w){return ge[u]=w,ge.filter(Boolean).join(`
`)});function te(u,w,_,T){var z=_?"":T.media?"@media ".concat(T.media," {").concat(T.css,"}"):T.css;if(u.styleSheet)u.styleSheet.cssText=X(w,z);else{var L=document.createTextNode(z),x=u.childNodes;x[w]&&u.removeChild(x[w]),x.length?u.insertBefore(L,x[w]):u.appendChild(L)}}function Z(u,w,_){var T=_.css,z=_.media,L=_.sourceMap;if(z?u.setAttribute("media",z):u.removeAttribute("media"),L&&typeof btoa<"u"&&(T+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(L))))," */")),u.styleSheet)u.styleSheet.cssText=T;else{for(;u.firstChild;)u.removeChild(u.firstChild);u.appendChild(document.createTextNode(T))}}var h=null,g=0;function r(u,w){var _,T,z;if(w.singleton){var L=g++;_=h||(h=pe(w)),T=te.bind(null,_,L,!1),z=te.bind(null,_,L,!0)}else _=pe(w),T=Z.bind(null,_,w),z=function(){(function(x){if(x.parentNode===null)return!1;x.parentNode.removeChild(x)})(_)};return T(u),function(x){if(x){if(x.css===u.css&&x.media===u.media&&x.sourceMap===u.sourceMap)return;T(u=x)}else z()}}f.exports=function(u,w){(w=w||{}).singleton||typeof w.singleton=="boolean"||(w.singleton=A());var _=me(u=u||[],w);return function(T){if(T=T||[],Object.prototype.toString.call(T)==="[object Array]"){for(var z=0;z<_.length;z++){var L=C(_[z]);I[L].references--}for(var x=me(T,w),c=0;c<_.length;c++){var D=C(_[c]);I[D].references===0&&(I[D].updater(),I.splice(D,1))}_=x}}}},945:(f,v,a)=>{f.exports=a(79)("./src/clipboard.js")},704:(f,v,a)=>{f.exports=a(79)("./src/core.js")},492:(f,v,a)=>{f.exports=a(79)("./src/engine.js")},181:(f,v,a)=>{f.exports=a(79)("./src/typing.js")},273:(f,v,a)=>{f.exports=a(79)("./src/ui.js")},209:(f,v,a)=>{f.exports=a(79)("./src/utils.js")},995:(f,v,a)=>{f.exports=a(79)("./src/widget.js")},79:f=>{"use strict";f.exports=CKEditor5.dll}},m={};function E(f){var v=m[f];if(v!==void 0)return v.exports;var a=m[f]={id:f,exports:{}};return Qt[f](a,a.exports,E),a.exports}E.n=f=>{var v=f&&f.__esModule?()=>f.default:()=>f;return E.d(v,{a:v}),v},E.d=(f,v)=>{for(var a in v)E.o(v,a)&&!E.o(f,a)&&Object.defineProperty(f,a,{enumerable:!0,get:v[a]})},E.o=(f,v)=>Object.prototype.hasOwnProperty.call(f,v),E.r=f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},E.nc=void 0;var y={};(()=>{"use strict";E.r(y),E.d(y,{AutoLink:()=>Tt,Link:()=>Ut,LinkEditing:()=>Ei,LinkImage:()=>Ui,LinkImageEditing:()=>ci,LinkImageUI:()=>Ii,LinkUI:()=>N});var f=E(704),v=E(492),a=E(181),d=E(945),A=E(209);class H{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(we){Array.isArray(we)?we.forEach(He=>this._definitions.add(He)):this._definitions.add(we)}getDispatcher(){return we=>{we.on("attribute:linkHref",(He,J,R)=>{if(!R.consumable.test(J.item,"attribute:linkHref")||!J.item.is("selection")&&!R.schema.isInline(J.item))return;const Q=R.writer,ve=Q.document.selection;for(const De of this._definitions){const rt=Q.createAttributeElement("a",De.attributes,{priority:5});De.classes&&Q.addClass(De.classes,rt);for(const Pt in De.styles)Q.setStyle(Pt,De.styles[Pt],rt);Q.setCustomProperty("link",!0,rt),De.callback(J.attributeNewValue)?J.item.is("selection")?Q.wrap(ve.getFirstRange(),rt):Q.wrap(R.mapper.toViewRange(J.range),rt):Q.unwrap(R.mapper.toViewRange(J.range),rt)}},{priority:"high"})}}getDispatcherForLinkedImage(){return we=>{we.on("attribute:linkHref:imageBlock",(He,J,{writer:R,mapper:Q})=>{const ve=Q.toViewElement(J.item),De=Array.from(ve.getChildren()).find(rt=>rt.name==="a");for(const rt of this._definitions){const Pt=(0,A.toMap)(rt.attributes);if(rt.callback(J.attributeNewValue)){for(const[ai,wi]of Pt)ai==="class"?R.addClass(wi,De):R.setAttribute(ai,wi,De);rt.classes&&R.addClass(rt.classes,De);for(const ai in rt.styles)R.setStyle(ai,rt.styles[ai],De)}else{for(const[ai,wi]of Pt)ai==="class"?R.removeClass(wi,De):R.removeAttribute(ai,De);rt.classes&&R.removeClass(rt.classes,De);for(const ai in rt.styles)R.removeStyle(ai,De)}}})}}}const I=function(Wt,we,He){var J=-1,R=Wt.length;we<0&&(we=-we>R?0:R+we),(He=He>R?R:He)<0&&(He+=R),R=we>He?0:He-we>>>0,we>>>=0;for(var Q=Array(R);++J<R;)Q[J]=Wt[J+we];return Q},C=function(Wt,we,He){var J=Wt.length;return He=He===void 0?J:He,!we&&He>=J?Wt:I(Wt,we,He)};var me=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const pe=function(Wt){return me.test(Wt)},ge=function(Wt){return Wt.split("")};var X="\\ud800-\\udfff",te="["+X+"]",Z="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",h="\\ud83c[\\udffb-\\udfff]",g="[^"+X+"]",r="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",w="(?:"+Z+"|"+h+")?",_="[\\ufe0e\\ufe0f]?",T=_+w+("(?:\\u200d(?:"+[g,r,u].join("|")+")"+_+w+")*"),z="(?:"+[g+Z+"?",Z,r,u,te].join("|")+")",L=RegExp(h+"(?="+h+")|"+z+T,"g");const x=function(Wt){return Wt.match(L)||[]},c=function(Wt){return pe(Wt)?x(Wt):ge(Wt)},D=typeof Y.g=="object"&&Y.g&&Y.g.Object===Object&&Y.g;var W=typeof self=="object"&&self&&self.Object===Object&&self;const q=(D||W||Function("return this")()).Symbol,ae=function(Wt,we){for(var He=-1,J=Wt==null?0:Wt.length,R=Array(J);++He<J;)R[He]=we(Wt[He],He,Wt);return R},Ie=Array.isArray;var Ve=Object.prototype,_e=Ve.hasOwnProperty,Me=Ve.toString,Qe=q?q.toStringTag:void 0;const dt=function(Wt){var we=_e.call(Wt,Qe),He=Wt[Qe];try{Wt[Qe]=void 0;var J=!0}catch{}var R=Me.call(Wt);return J&&(we?Wt[Qe]=He:delete Wt[Qe]),R};var nt=Object.prototype.toString;const qe=function(Wt){return nt.call(Wt)};var et="[object Null]",Nt="[object Undefined]",jt=q?q.toStringTag:void 0;const yt=function(Wt){return Wt==null?Wt===void 0?Nt:et:jt&&jt in Object(Wt)?dt(Wt):qe(Wt)},tt=function(Wt){return Wt!=null&&typeof Wt=="object"};var Bt="[object Symbol]";const ye=function(Wt){return typeof Wt=="symbol"||tt(Wt)&&yt(Wt)==Bt};var Ae=1/0,Ke=q?q.prototype:void 0,kt=Ke?Ke.toString:void 0;const It=function Wt(we){if(typeof we=="string")return we;if(Ie(we))return ae(we,Wt)+"";if(ye(we))return kt?kt.call(we):"";var He=we+"";return He=="0"&&1/we==-Ae?"-0":He},Yt=function(Wt){return Wt==null?"":It(Wt)},zt=function(Wt){return function(we){we=Yt(we);var He=pe(we)?c(we):void 0,J=He?He[0]:we.charAt(0),R=He?C(He,1).join(""):we.slice(1);return J[Wt]()+R}}("toUpperCase"),ot=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Dt=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,wt=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,ni=/^((\w+:(\/{2,})?)|(\W))/i,di="Ctrl+K";function xi(Wt,{writer:we}){const He=we.createAttributeElement("a",{href:Wt},{priority:5});return we.setCustomProperty("link",!0,He),He}function bt(Wt){return function(we){return we.replace(ot,"").match(Dt)}(Wt=String(Wt))?Wt:"#"}function fe(Wt,we){return!!Wt&&we.checkAttribute(Wt.name,"linkHref")}function je(Wt,we){const He=(J=Wt,wt.test(J)?"mailto:":we);var J;const R=!!He&&!Ze(Wt);return Wt&&R?He+Wt:Wt}function Ze(Wt){return ni.test(Wt)}function pt(Wt){window.open(Wt,"_blank","noopener")}class Ct extends f.Command{constructor(we){super(we),this.manualDecorators=new A.Collection,this.automaticDecorators=new H}restoreManualDecoratorStates(){for(const we of this.manualDecorators)we.value=this._getDecoratorStateFromModel(we.id)}refresh(){const we=this.editor.model,He=we.document.selection,J=He.getSelectedElement()||(0,A.first)(He.getSelectedBlocks());fe(J,we.schema)?(this.value=J.getAttribute("linkHref"),this.isEnabled=we.schema.checkAttribute(J,"linkHref")):(this.value=He.getAttribute("linkHref"),this.isEnabled=we.schema.checkAttributeInSelection(He,"linkHref"));for(const R of this.manualDecorators)R.value=this._getDecoratorStateFromModel(R.id)}execute(we,He={}){const J=this.editor.model,R=J.document.selection,Q=[],ve=[];for(const De in He)He[De]?Q.push(De):ve.push(De);J.change(De=>{if(R.isCollapsed){const rt=R.getFirstPosition();if(R.hasAttribute("linkHref")){const Pt=(0,a.findAttributeRange)(rt,"linkHref",R.getAttribute("linkHref"),J);De.setAttribute("linkHref",we,Pt),Q.forEach(ai=>{De.setAttribute(ai,!0,Pt)}),ve.forEach(ai=>{De.removeAttribute(ai,Pt)}),De.setSelection(De.createPositionAfter(Pt.end.nodeBefore))}else if(we!==""){const Pt=(0,A.toMap)(R.getAttributes());Pt.set("linkHref",we),Q.forEach(wi=>{Pt.set(wi,!0)});const{end:ai}=J.insertContent(De.createText(we,Pt),rt);De.setSelection(ai)}["linkHref",...Q,...ve].forEach(Pt=>{De.removeSelectionAttribute(Pt)})}else{const rt=J.schema.getValidRanges(R.getRanges(),"linkHref"),Pt=[];for(const wi of R.getSelectedBlocks())J.schema.checkAttribute(wi,"linkHref")&&Pt.push(De.createRangeOn(wi));const ai=Pt.slice();for(const wi of rt)this._isRangeToUpdate(wi,Pt)&&ai.push(wi);for(const wi of ai)De.setAttribute("linkHref",we,wi),Q.forEach(mt=>{De.setAttribute(mt,!0,wi)}),ve.forEach(mt=>{De.removeAttribute(mt,wi)})}})}_getDecoratorStateFromModel(we){const He=this.editor.model,J=He.document.selection,R=J.getSelectedElement();return fe(R,He.schema)?R.getAttribute(we):J.getAttribute(we)}_isRangeToUpdate(we,He){for(const J of He)if(J.containsRange(we))return!1;return!0}}class St extends f.Command{refresh(){const we=this.editor.model,He=we.document.selection,J=He.getSelectedElement();fe(J,we.schema)?this.isEnabled=we.schema.checkAttribute(J,"linkHref"):this.isEnabled=we.schema.checkAttributeInSelection(He,"linkHref")}execute(){const we=this.editor,He=this.editor.model,J=He.document.selection,R=we.commands.get("link");He.change(Q=>{const ve=J.isCollapsed?[(0,a.findAttributeRange)(J.getFirstPosition(),"linkHref",J.getAttribute("linkHref"),He)]:He.schema.getValidRanges(J.getRanges(),"linkHref");for(const De of ve)if(Q.removeAttribute("linkHref",De),R)for(const rt of R.manualDecorators)Q.removeAttribute(rt.id,De)})}}class Xt{constructor({id:we,label:He,attributes:J,classes:R,styles:Q,defaultValue:ve}){this.id=we,this.set("value"),this.defaultValue=ve,this.label=He,this.attributes=J,this.classes=R,this.styles=Q}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}(0,A.mix)(Xt,A.ObservableMixin);var Zt=E(62),oi=E.n(Zt),bi=E(23),gi={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};oi()(bi.Z,gi),bi.Z.locals;const Ti="automatic",Mt=/^(https?:)?\/\//;class Ei extends f.Plugin{static get pluginName(){return"LinkEditing"}static get requires(){return[a.TwoStepCaretMovement,a.Input,d.ClipboardPipeline]}constructor(we){super(we),we.config.define("link",{addTargetToExternalLinks:!1})}init(){const we=this.editor;we.model.schema.extend("$text",{allowAttributes:"linkHref"}),we.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:xi}),we.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(J,R)=>xi(bt(J),R)}),we.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:J=>J.getAttribute("href")}}),we.commands.add("link",new Ct(we)),we.commands.add("unlink",new St(we));const He=function(J,R){const Q={"Open in a new tab":J("Open in a new tab"),Downloadable:J("Downloadable")};return R.forEach(ve=>(ve.label&&Q[ve.label]&&(ve.label=Q[ve.label]),ve)),R}(we.t,function(J){const R=[];if(J)for(const[Q,ve]of Object.entries(J)){const De=Object.assign({},ve,{id:`link${zt(Q)}`});R.push(De)}return R}(we.config.get("link.decorators")));this._enableAutomaticDecorators(He.filter(J=>J.mode===Ti)),this._enableManualDecorators(He.filter(J=>J.mode==="manual")),we.plugins.get(a.TwoStepCaretMovement).registerAttribute("linkHref"),(0,a.inlineHighlight)(we,"linkHref","a","ck-link_selected"),this._enableLinkOpen(),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink(),this._enableClipboardIntegration()}_enableAutomaticDecorators(we){const He=this.editor,J=He.commands.get("link").automaticDecorators;He.config.get("link.addTargetToExternalLinks")&&J.add({id:"linkIsExternal",mode:Ti,callback:R=>Mt.test(R),attributes:{target:"_blank",rel:"noopener noreferrer"}}),J.add(we),J.length&&He.conversion.for("downcast").add(J.getDispatcher())}_enableManualDecorators(we){if(!we.length)return;const He=this.editor,J=He.commands.get("link").manualDecorators;we.forEach(R=>{He.model.schema.extend("$text",{allowAttributes:R.id}),R=new Xt(R),J.add(R),He.conversion.for("downcast").attributeToElement({model:R.id,view:(Q,{writer:ve,schema:De},{item:rt})=>{if((rt.is("selection")||De.isInline(rt))&&Q){const Pt=ve.createAttributeElement("a",R.attributes,{priority:5});R.classes&&ve.addClass(R.classes,Pt);for(const ai in R.styles)ve.setStyle(ai,R.styles[ai],Pt);return ve.setCustomProperty("link",!0,Pt),Pt}}}),He.conversion.for("upcast").elementToAttribute({view:{name:"a",...R._createPattern()},model:{key:R.id}})})}_enableLinkOpen(){const we=this.editor,He=we.editing.view.document;this.listenTo(He,"click",(J,R)=>{if(!(A.env.isMac?R.domEvent.metaKey:R.domEvent.ctrlKey))return;let Q=R.domTarget;if(Q.tagName.toLowerCase()!="a"&&(Q=Q.closest("a")),!Q)return;const ve=Q.getAttribute("href");ve&&(J.stop(),R.preventDefault(),pt(ve))},{context:"$capture"}),this.listenTo(He,"keydown",(J,R)=>{const Q=we.commands.get("link").value;Q&&R.keyCode===A.keyCodes.enter&&R.altKey&&(J.stop(),pt(Q))})}_enableInsertContentSelectionAttributesFixer(){const we=this.editor.model,He=we.document.selection;this.listenTo(we,"insertContent",()=>{const J=He.anchor.nodeBefore,R=He.anchor.nodeAfter;He.hasAttribute("linkHref")&&J&&J.hasAttribute("linkHref")&&(R&&R.hasAttribute("linkHref")||we.change(Q=>{Ri(Q,ji(we.schema))}))},{priority:"low"})}_enableClickingAfterLink(){const we=this.editor,He=we.model;we.editing.view.addObserver(v.MouseObserver);let J=!1;this.listenTo(we.editing.view.document,"mousedown",()=>{J=!0}),this.listenTo(we.editing.view.document,"selectionChange",()=>{if(!J)return;J=!1;const R=He.document.selection;if(!R.isCollapsed||!R.hasAttribute("linkHref"))return;const Q=R.getFirstPosition(),ve=(0,a.findAttributeRange)(Q,"linkHref",R.getAttribute("linkHref"),He);(Q.isTouching(ve.start)||Q.isTouching(ve.end))&&He.change(De=>{Ri(De,ji(He.schema))})})}_enableTypingOverLink(){const we=this.editor,He=we.editing.view;let J,R;this.listenTo(He.document,"delete",()=>{R=!0},{priority:"high"}),this.listenTo(we.model,"deleteContent",()=>{const Q=we.model.document.selection;Q.isCollapsed||(R?R=!1:Yi(we)&&function(ve){const De=ve.document.selection,rt=De.getFirstPosition(),Pt=De.getLastPosition(),ai=rt.nodeAfter;if(!ai||!ai.is("$text")||!ai.hasAttribute("linkHref"))return!1;const wi=Pt.textNode||Pt.nodeBefore;return ai===wi?!0:(0,a.findAttributeRange)(rt,"linkHref",ai.getAttribute("linkHref"),ve).containsRange(ve.createRange(rt,Pt),!0)}(we.model)&&(J=Q.getAttributes()))},{priority:"high"}),this.listenTo(we.model,"insertContent",(Q,[ve])=>{R=!1,Yi(we)&&J&&(we.model.change(De=>{for(const[rt,Pt]of J)De.setAttribute(rt,Pt,ve)}),J=null)},{priority:"high"})}_handleDeleteContentAfterLink(){const we=this.editor,He=we.model,J=He.document.selection,R=we.editing.view;let Q=!1,ve=!1;this.listenTo(R.document,"delete",(De,rt)=>{ve=rt.direction==="backward"},{priority:"high"}),this.listenTo(He,"deleteContent",()=>{Q=!1;const De=J.getFirstPosition(),rt=J.getAttribute("linkHref");if(!rt)return;const Pt=(0,a.findAttributeRange)(De,"linkHref",rt,He);Q=Pt.containsPosition(De)||Pt.end.isEqual(De)},{priority:"high"}),this.listenTo(He,"deleteContent",()=>{ve&&(ve=!1,Q||we.model.enqueueChange(De=>{Ri(De,ji(He.schema))}))},{priority:"low"})}_enableClipboardIntegration(){const we=this.editor,He=we.model,J=this.editor.config.get("link.defaultProtocol");J&&this.listenTo(we.plugins.get("ClipboardPipeline"),"contentInsertion",(R,Q)=>{He.change(ve=>{const De=ve.createRangeIn(Q.content);for(const rt of De.getItems())if(rt.hasAttribute("linkHref")){const Pt=je(rt.getAttribute("linkHref"),J);ve.setAttribute("linkHref",Pt,rt)}})})}}function Ri(Wt,we){Wt.removeSelectionAttribute("linkHref");for(const He of we)Wt.removeSelectionAttribute(He)}function Yi(Wt){return Wt.model.change(we=>we.batch).isTyping}function ji(Wt){return Wt.getDefinition("$text").allowAttributes.filter(we=>we.startsWith("link"))}var Pi=E(273),qi=E(995),nn=E(764),Li={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};oi()(nn.Z,Li),nn.Z.locals;var dn=E(871),pi={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};oi()(dn.Z,pi),dn.Z.locals;class fi extends Pi.View{constructor(we,He){super(we);const J=we.t;this.focusTracker=new A.FocusTracker,this.keystrokes=new A.KeystrokeHandler,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(J("Save"),f.icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(J("Cancel"),f.icons.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(He),this.children=this._createFormChildren(He.manualDecorators),this._focusables=new Pi.ViewCollection,this._focusCycler=new Pi.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const R=["ck","ck-link-form","ck-responsive-form"];He.manualDecorators.length&&R.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:R,tabindex:"-1"},children:this.children}),(0,Pi.injectCssTransitionDisabler)(this)}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((we,He)=>(we[He.name]=He.isOn,we),{})}render(){super.render(),(0,Pi.submitHandler)({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(we=>{this._focusables.add(we),this.focusTracker.add(we.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const we=this.locale.t,He=new Pi.LabeledFieldView(this.locale,Pi.createLabeledInputText);return He.label=we("Link URL"),He}_createButton(we,He,J,R){const Q=new Pi.ButtonView(this.locale);return Q.set({label:we,icon:He,tooltip:!0}),Q.extendTemplate({attributes:{class:J}}),R&&Q.delegate("execute").to(this,R),Q}_createManualDecoratorSwitches(we){const He=this.createCollection();for(const J of we.manualDecorators){const R=new Pi.SwitchButtonView(this.locale);R.set({name:J.id,label:J.label,withText:!0}),R.bind("isOn").toMany([J,we],"value",(Q,ve)=>ve===void 0&&Q===void 0?J.defaultValue:Q),R.on("execute",()=>{J.set("value",!R.isOn)}),He.add(R)}return He}_createFormChildren(we){const He=this.createCollection();if(He.add(this.urlInputView),we.length){const J=new Pi.View;J.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(R=>({tag:"li",children:[R],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),He.add(J)}return He.add(this.saveButtonView),He.add(this.cancelButtonView),He}}var Ki=E(952),ke={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};oi()(Ki.Z,ke),Ki.Z.locals;class V extends Pi.View{constructor(we){super(we);const He=we.t;this.focusTracker=new A.FocusTracker,this.keystrokes=new A.KeystrokeHandler,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(He("Unlink"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',"unlink"),this.editButtonView=this._createButton(He("Edit link"),f.icons.pencil,"edit"),this.set("href"),this._focusables=new Pi.ViewCollection,this._focusCycler=new Pi.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(we=>{this._focusables.add(we),this.focusTracker.add(we.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(we,He,J){const R=new Pi.ButtonView(this.locale);return R.set({label:we,icon:He,tooltip:!0}),R.delegate("execute").to(this,J),R}_createPreviewButton(){const we=new Pi.ButtonView(this.locale),He=this.bindTemplate,J=this.t;return we.set({withText:!0,tooltip:J("Open link in new tab")}),we.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:He.to("href",R=>R&&bt(R)),target:"_blank",rel:"noopener noreferrer"}}),we.bind("label").to(this,"href",R=>R||J("This link has no URL")),we.bind("isEnabled").to(this,"href",R=>!!R),we.template.tag="a",we.template.eventListeners={},we}}const F='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',P="link-ui";class N extends f.Plugin{static get requires(){return[Pi.ContextualBalloon]}static get pluginName(){return"LinkUI"}init(){const we=this.editor;we.editing.view.addObserver(v.ClickObserver),this.actionsView=null,this.formView=null,this._balloon=we.plugins.get(Pi.ContextualBalloon),this._createToolbarLinkButton(),this._enableBalloonActivators(),we.conversion.for("editingDowncast").markerToHighlight({model:P,view:{classes:["ck-fake-link-selection"]}}),we.conversion.for("editingDowncast").markerToElement({model:P,view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const we=this.editor,He=new V(we.locale),J=we.commands.get("link"),R=we.commands.get("unlink");return He.bind("href").to(J,"value"),He.editButtonView.bind("isEnabled").to(J),He.unlinkButtonView.bind("isEnabled").to(R),this.listenTo(He,"edit",()=>{this._addFormView()}),this.listenTo(He,"unlink",()=>{we.execute("unlink"),this._hideUI()}),He.keystrokes.set("Esc",(Q,ve)=>{this._hideUI(),ve()}),He.keystrokes.set(di,(Q,ve)=>{this._addFormView(),ve()}),He}_createFormView(){const we=this.editor,He=we.commands.get("link"),J=we.config.get("link.defaultProtocol"),R=new fi(we.locale,He);return R.urlInputView.fieldView.bind("value").to(He,"value"),R.urlInputView.bind("isReadOnly").to(He,"isEnabled",Q=>!Q),R.saveButtonView.bind("isEnabled").to(He),this.listenTo(R,"submit",()=>{const{value:Q}=R.urlInputView.fieldView.element,ve=je(Q,J);we.execute("link",ve,R.getDecoratorSwitchesState()),this._closeFormView()}),this.listenTo(R,"cancel",()=>{this._closeFormView()}),R.keystrokes.set("Esc",(Q,ve)=>{this._closeFormView(),ve()}),R}_createToolbarLinkButton(){const we=this.editor,He=we.commands.get("link"),J=we.t;we.ui.componentFactory.add("link",R=>{const Q=new Pi.ButtonView(R);return Q.isEnabled=!0,Q.label=J("Link"),Q.icon=F,Q.keystroke=di,Q.tooltip=!0,Q.isToggleable=!0,Q.bind("isEnabled").to(He,"isEnabled"),Q.bind("isOn").to(He,"value",ve=>!!ve),this.listenTo(Q,"execute",()=>this._showUI(!0)),Q})}_enableBalloonActivators(){const we=this.editor,He=we.editing.view.document;this.listenTo(He,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),we.keystrokes.set(di,(J,R)=>{R(),we.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(we,He)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),He())},{priority:"high"}),this.editor.keystrokes.set("Esc",(we,He)=>{this._isUIVisible&&(this._hideUI(),He())}),(0,Pi.clickOutsideHandler)({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const we=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=we.value||""}_closeFormView(){const we=this.editor.commands.get("link");we.restoreManualDecoratorStates(),we.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(we=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),we&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),we&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const we=this.editor;this.stopListening(we.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),we.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const we=this.editor,He=we.editing.view.document;let J=this._getSelectedLinkElement(),R=ve();const Q=()=>{const De=this._getSelectedLinkElement(),rt=ve();J&&!De||!J&&rt!==R?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),J=De,R=rt};function ve(){return He.selection.focus.getAncestors().reverse().find(De=>De.is("element"))}this.listenTo(we.ui,"update",Q),this.listenTo(this._balloon,"change:visibleView",Q)}get _isFormInPanel(){return this._balloon.hasView(this.formView)}get _areActionsInPanel(){return this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){return this._balloon.visibleView==this.formView||this._areActionsVisible}_getBalloonPositionData(){const we=this.editor.editing.view,He=this.editor.model,J=we.document;let R=null;if(He.markers.has(P)){const Q=Array.from(this.editor.editing.mapper.markerNameToElements(P)),ve=we.createRange(we.createPositionBefore(Q[0]),we.createPositionAfter(Q[Q.length-1]));R=we.domConverter.viewRangeToDom(ve)}else R=()=>{const Q=this._getSelectedLinkElement();return Q?we.domConverter.mapViewToDom(Q):we.domConverter.viewRangeToDom(J.selection.getFirstRange())};return{target:R}}_getSelectedLinkElement(){const we=this.editor.editing.view,He=we.document.selection,J=He.getSelectedElement();if(He.isCollapsed||J&&(0,qi.isWidget)(J))return de(He.getFirstPosition());{const R=He.getFirstRange().getTrimmed(),Q=de(R.start),ve=de(R.end);return Q&&Q==ve&&we.createRangeIn(Q).getTrimmed().isEqual(R)?Q:null}}_showFakeVisualSelection(){const we=this.editor.model;we.change(He=>{const J=we.document.selection.getFirstRange();if(we.markers.has(P))He.updateMarker(P,{range:J});else if(J.start.isAtEnd){const R=J.start.getLastMatchingPosition(({item:Q})=>!we.schema.isContent(Q),{boundaries:J});He.addMarker(P,{usingOperation:!1,affectsData:!1,range:He.createRange(R,J.end)})}else He.addMarker(P,{usingOperation:!1,affectsData:!1,range:J})})}_hideFakeVisualSelection(){const we=this.editor.model;we.markers.has(P)&&we.change(He=>{He.removeMarker(P)})}}function de(Wt){return Wt.getAncestors().find(we=>{return(He=we).is("attributeElement")&&!!He.getCustomProperty("link");var He})}const Ce=4,$e=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),at=2;class Tt extends f.Plugin{static get requires(){return[a.Delete]}static get pluginName(){return"AutoLink"}init(){const we=this.editor.model.document.selection;we.on("change:range",()=>{this.isEnabled=!we.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling()}_enableTypingHandling(){const we=this.editor,He=new a.TextWatcher(we.model,J=>{if(!function(Q){return Q.length>Ce&&Q[Q.length-1]===" "&&Q[Q.length-2]!==" "}(J))return;const R=Ge(J.substr(0,J.length-1));return R?{url:R}:void 0});He.on("matched:data",(J,R)=>{const{batch:Q,range:ve,url:De}=R;if(!Q.isTyping)return;const rt=ve.end.getShiftedBy(-1),Pt=rt.getShiftedBy(-De.length),ai=we.model.createRange(Pt,rt);this._applyAutoLink(De,ai)}),He.bind("isEnabled").to(this)}_enableEnterHandling(){const we=this.editor,He=we.model,J=we.commands.get("enter");J&&J.on("execute",()=>{const R=He.document.selection.getFirstPosition();if(!R.parent.previousSibling)return;const Q=He.createRangeIn(R.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(Q)})}_enableShiftEnterHandling(){const we=this.editor,He=we.model,J=we.commands.get("shiftEnter");J&&J.on("execute",()=>{const R=He.document.selection.getFirstPosition(),Q=He.createRange(He.createPositionAt(R.parent,0),R.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(Q)})}_checkAndApplyAutoLinkOnRange(we){const He=this.editor.model,{text:J,range:R}=(0,a.getLastTextLine)(we,He),Q=Ge(J);if(Q){const ve=He.createRange(R.end.getShiftedBy(-Q.length),R.end);this._applyAutoLink(Q,ve)}}_applyAutoLink(we,He){const J=this.editor.model,R=je(we,this.editor.config.get("link.defaultProtocol"));this.isEnabled&&function(Q,ve){return ve.schema.checkAttributeInSelection(ve.createSelection(Q),"linkHref")}(He,J)&&Ze(R)&&!function(Q){const ve=Q.start.nodeAfter;return ve&&ve.hasAttribute("linkHref")}(He)&&this._persistAutoLink(R,He)}_persistAutoLink(we,He){const J=this.editor.model,R=this.editor.plugins.get("Delete");J.enqueueChange(Q=>{Q.setAttribute("linkHref",we,He),J.enqueueChange(()=>{R.requestUndoOnBackspace()})})}}function Ge(Wt){const we=$e.exec(Wt);return we?we[at]:null}class Ut extends f.Plugin{static get requires(){return[Ei,N,Tt]}static get pluginName(){return"Link"}}class ci extends f.Plugin{static get requires(){return["ImageEditing","ImageUtils",Ei]}static get pluginName(){return"LinkImageEditing"}init(){const we=this.editor,He=we.model.schema;we.plugins.has("ImageBlockEditing")&&He.extend("imageBlock",{allowAttributes:["linkHref"]}),we.conversion.for("upcast").add(function(J){const R=J.plugins.has("ImageInlineEditing"),Q=J.plugins.get("ImageUtils");return ve=>{ve.on("element:a",(De,rt,Pt)=>{const ai=rt.viewItem,wi=Q.findViewImgElement(ai);if(!wi)return;const mt=wi.findAncestor(Le=>Q.isBlockImageView(Le));if(R&&!mt)return;const U={attributes:["href"]};if(!Pt.consumable.consume(ai,U))return;const se=ai.getAttribute("href");if(!se)return;let Te=rt.modelCursor.parent;if(!Te.is("element","imageBlock")){const Le=Pt.convertItem(wi,rt.modelCursor);rt.modelRange=Le.modelRange,rt.modelCursor=Le.modelCursor,Te=rt.modelCursor.nodeBefore}Te&&Te.is("element","imageBlock")&&Pt.writer.setAttribute("linkHref",se,Te)},{priority:"high"})}}(we)),we.conversion.for("downcast").add(function(J){const R=J.plugins.get("ImageUtils");return Q=>{Q.on("attribute:linkHref:imageBlock",(ve,De,rt)=>{if(!rt.consumable.consume(De.item,ve.name))return;const Pt=rt.mapper.toViewElement(De.item),ai=rt.writer,wi=Array.from(Pt.getChildren()).find(se=>se.name==="a"),mt=R.findViewImgElement(Pt),U=mt.parent.is("element","picture")?mt.parent:mt;if(wi)De.attributeNewValue?ai.setAttribute("href",De.attributeNewValue,wi):(ai.move(ai.createRangeOn(U),ai.createPositionAt(Pt,0)),ai.remove(wi));else{const se=ai.createContainerElement("a",{href:De.attributeNewValue});ai.insert(ai.createPositionAt(Pt,0),se),ai.move(ai.createRangeOn(U),ai.createPositionAt(se,0))}},{priority:"high"})}}(we)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const we=this.editor,He=we.commands.get("link").automaticDecorators;He.length&&we.conversion.for("downcast").add(He.getDispatcherForLinkedImage())}_enableManualDecorators(){const we=this.editor,He=we.commands.get("link");for(const J of He.manualDecorators)we.plugins.has("ImageBlockEditing")&&we.model.schema.extend("imageBlock",{allowAttributes:J.id}),we.plugins.has("ImageInlineEditing")&&we.model.schema.extend("imageInline",{allowAttributes:J.id}),we.conversion.for("downcast").add(yi(J)),we.conversion.for("upcast").add(Ni(we,J))}}function yi(Wt){return we=>{we.on(`attribute:${Wt.id}:imageBlock`,(He,J,R)=>{const Q=R.mapper.toViewElement(J.item),ve=Array.from(Q.getChildren()).find(De=>De.name==="a");if(ve){for(const[De,rt]of(0,A.toMap)(Wt.attributes))R.writer.setAttribute(De,rt,ve);Wt.classes&&R.writer.addClass(Wt.classes,ve);for(const De in Wt.styles)R.writer.setStyle(De,Wt.styles[De],ve)}})}}function Ni(Wt,we){const He=Wt.plugins.has("ImageInlineEditing"),J=Wt.plugins.get("ImageUtils");return R=>{R.on("element:a",(Q,ve,De)=>{const rt=ve.viewItem,Pt=J.findViewImgElement(rt);if(!Pt)return;const ai=Pt.findAncestor(U=>J.isBlockImageView(U));if(He&&!ai)return;const wi=new v.Matcher(we._createPattern()).match(rt);if(!wi||!De.consumable.consume(rt,wi.match))return;const mt=ve.modelCursor.nodeBefore||ve.modelCursor.parent;De.writer.setAttribute(we.id,!0,mt)},{priority:"high"})}}class Ii extends f.Plugin{static get requires(){return[Ei,N,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}init(){const we=this.editor,He=we.editing.view.document;this.listenTo(He,"click",(J,R)=>{this._isSelectedLinkedImage(we.model.document.selection)&&(R.preventDefault(),J.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const we=this.editor,He=we.t;we.ui.componentFactory.add("linkImage",J=>{const R=new Pi.ButtonView(J),Q=we.plugins.get("LinkUI"),ve=we.commands.get("link");return R.set({isEnabled:!0,label:He("Link image"),icon:F,keystroke:di,tooltip:!0,isToggleable:!0}),R.bind("isEnabled").to(ve,"isEnabled"),R.bind("isOn").to(ve,"value",De=>!!De),this.listenTo(R,"execute",()=>{this._isSelectedLinkedImage(we.model.document.selection)?Q._addActionsView():Q._showUI(!0)}),R})}_isSelectedLinkedImage(we){const He=we.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(He)&&He.hasAttribute("linkHref")}}var zi=E(269),Oi={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};oi()(zi.Z,Oi),zi.Z.locals;class Ui extends f.Plugin{static get requires(){return[ci,Ii]}static get pluginName(){return"LinkImage"}}})(),(window.CKEditor5=window.CKEditor5||{}).link=y})()},66491:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{"Bulleted List":"Bulleted List","Bulleted list styles toolbar":"Bulleted list styles toolbar",Circle:"Circle",Decimal:"Decimal","Decimal with leading zero":"Decimal with leading zero",Disc:"Disc","List properties":"List properties","Lower-latin":"Lower-latin","Lower\u2013roman":"Lower\u2013roman","Numbered List":"Numbered List","Numbered list styles toolbar":"Numbered list styles toolbar","Reversed order":"Reversed order",Square:"Square","Start at":"Start at","Start index must be greater than 0.":"Start index must be greater than 0.","To-do List":"To-do List","Toggle the circle list style":"Toggle the circle list style","Toggle the decimal list style":"Toggle the decimal list style","Toggle the decimal with leading zero list style":"Toggle the decimal with leading zero list style","Toggle the disc list style":"Toggle the disc list style","Toggle the lower\u2013latin list style":"Toggle the lower\u2013latin list style","Toggle the lower\u2013roman list style":"Toggle the lower\u2013roman list style","Toggle the square list style":"Toggle the square list style","Toggle the upper\u2013latin list style":"Toggle the upper\u2013latin list style","Toggle the upper\u2013roman list style":"Toggle the upper\u2013roman list style","Upper-latin":"Upper-latin","Upper-roman":"Upper-roman"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={389:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-collapsible.ck-collapsible_collapsed>.ck-collapsible__children{display:none}:root{--ck-collapsible-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-collapsible>.ck.ck-button{border-radius:0;color:inherit;font-weight:700;padding:var(--ck-spacing-medium) var(--ck-spacing-large);width:100%}.ck.ck-collapsible>.ck.ck-button:focus{background:transparent}.ck.ck-collapsible>.ck.ck-button:active,.ck.ck-collapsible>.ck.ck-button:hover:not(:focus),.ck.ck-collapsible>.ck.ck-button:not(:focus){background:transparent;border-color:transparent;box-shadow:none}.ck.ck-collapsible>.ck.ck-button>.ck-icon{margin-right:var(--ck-spacing-medium);width:var(--ck-collapsible-arrow-size)}.ck.ck-collapsible>.ck-collapsible__children{padding:0 var(--ck-spacing-large) var(--ck-spacing-large)}.ck.ck-collapsible.ck-collapsible_collapsed>.ck.ck-button .ck-icon{transform:rotate(-90deg)}",""]);const a=v},78:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck-editor__editable .ck-list-bogus-paragraph{display:block}",""]);const a=v},272:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck-content ol{list-style-type:decimal}.ck-content ol ol{list-style-type:lower-latin}.ck-content ol ol ol{list-style-type:lower-roman}.ck-content ol ol ol ol{list-style-type:upper-latin}.ck-content ol ol ol ol ol{list-style-type:upper-roman}.ck-content ul{list-style-type:disc}.ck-content ul ul{list-style-type:circle}.ck-content ul ul ul,.ck-content ul ul ul ul{list-style-type:square}",""]);const a=v},543:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-list-properties.ck-list-properties_without-styles{padding:var(--ck-spacing-large)}.ck.ck-list-properties.ck-list-properties_without-styles>*{min-width:14em}.ck.ck-list-properties.ck-list-properties_without-styles>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-list-styles-list{grid-template-columns:repeat(4,auto)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible{border-top:1px solid var(--ck-color-base-border)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*{width:100%}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties .ck.ck-numbered-list-properties__start-index .ck-input{min-width:auto;width:100%}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order{background:transparent;margin-bottom:calc(var(--ck-spacing-tiny)*-1);padding-left:0;padding-right:0}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:active,.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:hover{background:none;border-color:transparent;box-shadow:none}",""]);const a=v},657:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-list-styles-list{display:grid}:root{--ck-list-style-button-size:44px}.ck.ck-list-styles-list{column-gap:var(--ck-spacing-medium);grid-template-columns:repeat(3,auto);padding:var(--ck-spacing-large);row-gap:var(--ck-spacing-medium)}.ck.ck-list-styles-list .ck-button{box-sizing:content-box;margin:0;padding:0}.ck.ck-list-styles-list .ck-button,.ck.ck-list-styles-list .ck-button .ck-icon{height:var(--ck-list-style-button-size);width:var(--ck-list-style-button-size)}",""]);const a=v},250:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,':root{--ck-todo-list-checkmark-size:16px}.ck-content .todo-list{list-style:none}.ck-content .todo-list li{margin-bottom:5px}.ck-content .todo-list li .todo-list{margin-top:5px}.ck-content .todo-list .todo-list__label>input{-webkit-appearance:none;border:0;display:inline-block;height:var(--ck-todo-list-checkmark-size);left:-25px;margin-left:0;margin-right:-15px;position:relative;right:0;vertical-align:middle;width:var(--ck-todo-list-checkmark-size)}.ck-content .todo-list .todo-list__label>input:before{border:1px solid #333;border-radius:2px;box-sizing:border-box;content:"";display:block;height:100%;position:absolute;transition:box-shadow .25s ease-in-out,background .25s ease-in-out,border .25s ease-in-out;width:100%}.ck-content .todo-list .todo-list__label>input:after{border-color:transparent;border-style:solid;border-width:0 calc(var(--ck-todo-list-checkmark-size)/8) calc(var(--ck-todo-list-checkmark-size)/8) 0;box-sizing:content-box;content:"";display:block;height:calc(var(--ck-todo-list-checkmark-size)/2.6);left:calc(var(--ck-todo-list-checkmark-size)/3);pointer-events:none;position:absolute;top:calc(var(--ck-todo-list-checkmark-size)/5.3);transform:rotate(45deg);width:calc(var(--ck-todo-list-checkmark-size)/5.3)}.ck-content .todo-list .todo-list__label>input[checked]:before{background:#26ab33;border-color:#26ab33}.ck-content .todo-list .todo-list__label>input[checked]:after{border-color:#fff}.ck-content .todo-list .todo-list__label .todo-list__label__description{vertical-align:middle}[dir=rtl] .todo-list .todo-list__label>input{left:0;margin-left:-15px;margin-right:0;right:-25px}.ck-editor__editable .todo-list .todo-list__label>input{cursor:pointer}.ck-editor__editable .todo-list .todo-list__label>input:hover:before{box-shadow:0 0 0 5px rgba(0,0,0,.1)}',""]);const a=v},609:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},62:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},492:(m,E,y)=>{m.exports=y(79)("./src/engine.js")},331:(m,E,y)=>{m.exports=y(79)("./src/enter.js")},181:(m,E,y)=>{m.exports=y(79)("./src/typing.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{DocumentList:()=>bi,DocumentListEditing:()=>It,DocumentListProperties:()=>Ge,DocumentListPropertiesEditing:()=>Ki,DocumentListPropertiesUtils:()=>pi,DocumentListUtils:()=>W,List:()=>mt,ListEditing:()=>ai,ListProperties:()=>$t,ListPropertiesEditing:()=>Ye,ListPropertiesUI:()=>at,ListUI:()=>oi,ListUtils:()=>Ii,TodoList:()=>Fn,TodoListEditing:()=>fn,TodoListUI:()=>Tn});var m=Y(704),E=Y(181),y=Y(331),f=Y(209);class v{constructor(j,ie){this._startElement=j,this._referenceIndent=j.getAttribute("listIndent"),this._isForward=ie.direction=="forward",this._includeSelf=!!ie.includeSelf,this._sameAttributes=(0,f.toArray)(ie.sameAttributes||[]),this._sameIndent=!!ie.sameIndent,this._lowerIndent=!!ie.lowerIndent,this._higherIndent=!!ie.higherIndent}static first(j,ie){const ue=new this(j,ie)[Symbol.iterator]();return(0,f.first)(ue)}*[Symbol.iterator](){const j=[];for(const{node:ie}of a(this._getStartNode(),this._isForward?"forward":"backward")){const ue=ie.getAttribute("listIndent");if(ue<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=ue}else if(ue>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){j.push(ie);continue}}else{if(!this._sameIndent){if(this._higherIndent){j.length&&(yield*j,j.length=0);break}continue}if(this._sameAttributes.some(Ee=>ie.getAttribute(Ee)!==this._startElement.getAttribute(Ee)))break}j.length&&(yield*j,j.length=0),yield ie}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}function*a(Be,j="forward"){const ie=j=="forward";let ue=null;for(;H(Be);)yield{node:Be,previous:ue},ue=Be,Be=ie?Be.nextSibling:Be.previousSibling}class d{constructor(j){this._listHead=j}[Symbol.iterator](){return a(this._listHead,"forward")}}class A{static next(){return(0,f.uid)()}}function H(Be){return!!Be&&Be.is("element")&&Be.hasAttribute("listItemId")}function I(Be,j={}){return[...C(Be,{...j,direction:"backward"}),...C(Be,{...j,direction:"forward"})]}function C(Be,j={}){const ie=j.direction=="forward",ue=Array.from(new v(Be,{...j,includeSelf:ie,sameIndent:!0,sameAttributes:"listItemId"}));return ie?ue:ue.reverse()}function me(Be){const j=new v(Be,{sameIndent:!0,sameAttributes:"listType"}),ie=new v(Be,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward"});return[...Array.from(j).reverse(),...ie]}function pe(Be){return!v.first(Be,{sameIndent:!0,sameAttributes:"listItemId"})}function ge(Be){return!v.first(Be,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function X(Be,j={}){Be=(0,f.toArray)(Be);const ie=j.withNested!==!1,ue=new Set;for(const Ee of Be)for(const Re of I(Ee,{higherIndent:ie}))ue.add(Re);return w(ue)}function te(Be){Be=(0,f.toArray)(Be);const j=new Set;for(const ie of Be)for(const ue of me(ie))j.add(ue);return w(j)}function Z(Be,j){const ie=C(Be,{direction:"forward"}),ue=A.next();for(const Ee of ie)j.setAttribute("listItemId",ue,Ee);return ie}function h(Be,j,ie){const ue={};for(const[Re,ze]of j.getAttributes())Re.startsWith("list")&&(ue[Re]=ze);const Ee=C(Be,{direction:"forward"});for(const Re of Ee)ie.setAttributes(ue,Re);return Ee}function g(Be,j,{expand:ie,indentBy:ue=1}={}){Be=(0,f.toArray)(Be);const Ee=ie?X(Be):Be;for(const Re of Ee){const ze=Re.getAttribute("listIndent")+ue;ze<0?r(Re,j):j.setAttribute("listIndent",ze,Re)}return Ee}function r(Be,j){Be=(0,f.toArray)(Be);for(const ie of Be)for(const ue of ie.getAttributeKeys())ue.startsWith("list")&&j.removeAttribute(ue,ie);return Be}function u(Be){if(!Be.length)return!1;const j=Be[0].getAttribute("listItemId");return!!j&&!Be.some(ie=>ie.getAttribute("listItemId")!=j)}function w(Be){return Array.from(Be).filter(j=>j.root.rootName!=="$graveyard").sort((j,ie)=>j.index-ie.index)}function _(Be){const j=Be.document.selection.getSelectedElement();return j&&Be.schema.isObject(j)&&Be.schema.isBlock(j)?j:null}function T(Be,j,ie){return C(j,{direction:"forward"}).pop().index>Be.index?h(Be,j,ie):[]}class z extends m.Command{constructor(j,ie){super(j),this._direction=ie}refresh(){this.isEnabled=this._checkEnabled()}execute(){const j=this.editor.model,ie=L(j.document.selection);j.change(ue=>{const Ee=[];u(ie)&&!pe(ie[0])?(this._direction=="forward"&&Ee.push(...g(ie,ue)),Ee.push(...Z(ie[0],ue))):this._direction=="forward"?Ee.push(...g(ie,ue,{expand:!0})):Ee.push(...function(Re,ze){const Ne=X(Re=(0,f.toArray)(Re)),Fe=new Set,lt=Math.min(...Ne.map(ut=>ut.getAttribute("listIndent"))),gt=new Map;for(const ut of Ne)gt.set(ut,v.first(ut,{lowerIndent:!0}));for(const ut of Ne){if(Fe.has(ut))continue;Fe.add(ut);const vt=ut.getAttribute("listIndent")-1;if(vt<0)r(ut,ze);else{if(ut.getAttribute("listIndent")==lt){const Ot=T(ut,gt.get(ut),ze);for(const ei of Ot)Fe.add(ei);if(Ot.length)continue}ze.setAttribute("listIndent",vt,ut)}}return w(Fe)}(ie,ue));for(const Re of Ee){if(!Re.hasAttribute("listType"))continue;const ze=v.first(Re,{sameIndent:!0});ze&&ue.setAttribute("listType",ze.getAttribute("listType"),Re)}this._fireAfterExecute(Ee)})}_fireAfterExecute(j){this.fire("afterExecute",w(new Set(j)))}_checkEnabled(){let j=L(this.editor.model.document.selection),ie=j[0];if(!ie)return!1;if(this._direction=="backward"||u(j)&&!pe(j[0]))return!0;j=X(j),ie=j[0];const ue=v.first(ie,{sameIndent:!0});return!!ue&&ue.getAttribute("listType")==ie.getAttribute("listType")}}function L(Be){const j=Array.from(Be.getSelectedBlocks()),ie=j.findIndex(ue=>!H(ue));return ie!=-1&&(j.length=ie),j}class x extends m.Command{constructor(j,ie){super(j),this.type=ie}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(j={}){const ie=this.editor.model,ue=ie.document,Ee=_(ie),Re=Array.from(ue.selection.getSelectedBlocks()).filter(Ne=>ie.schema.checkAttribute(Ne,"listType")),ze=j.forceValue!==void 0?!j.forceValue:this.value;ie.change(Ne=>{if(ze){const Fe=Re[Re.length-1],lt=C(Fe,{direction:"forward"}),gt=[];lt.length>1&&gt.push(...Z(lt[1],Ne)),gt.push(...r(Re,Ne)),gt.push(...function(ut,vt){const Ot=[];let ei=Number.POSITIVE_INFINITY;for(const{node:xt}of a(ut.nextSibling,"forward")){const ri=xt.getAttribute("listIndent");if(ri==0)break;ri<ei&&(ei=ri);const vi=ri-ei;vt.setAttribute("listIndent",vi,xt),Ot.push(xt)}return Ot}(Fe,Ne)),this._fireAfterExecute(gt)}else if((Ee||ue.selection.isCollapsed)&&H(Re[0])){const Fe=me(Ee||Re[0]);for(const lt of Fe)Ne.setAttribute("listType",this.type,lt);this._fireAfterExecute(Fe)}else{const Fe=[];for(const lt of Re)if(lt.hasAttribute("listType"))for(const gt of X(lt,{withNested:!1}))gt.getAttribute("listType")!=this.type&&(Ne.setAttribute("listType",this.type,gt),Fe.push(gt));else Ne.setAttributes({listIndent:0,listItemId:A.next(),listType:this.type},lt),Fe.push(lt);this._fireAfterExecute(Fe)}})}_fireAfterExecute(j){this.fire("afterExecute",w(new Set(j)))}_getValue(){const j=this.editor.model.document.selection,ie=Array.from(j.getSelectedBlocks());if(!ie.length)return!1;for(const ue of ie)if(ue.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const j=this.editor.model.document.selection,ie=this.editor.model.schema,ue=Array.from(j.getSelectedBlocks());if(!ue.length)return!1;if(this.value)return!0;for(const Ee of ue)if(ie.checkAttribute(Ee,"listType"))return!0;return!1}}class c extends m.Command{constructor(j,ie){super(j),this._direction=ie}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:j=!1}={}){const ie=this.editor.model,ue=ie.document.selection,Ee=[];ie.change(Re=>{const{firstElement:ze,lastElement:Ne}=this._getMergeSubjectElements(ue,j),Fe=ze.getAttribute("listIndent")||0,lt=Ne.getAttribute("listIndent"),gt=Ne.getAttribute("listItemId");if(Fe!=lt){const vt=(ut=Ne,Array.from(new v(ut,{direction:"forward",higherIndent:!0})));Ee.push(...g([Ne,...vt],Re,{indentBy:Fe-lt,expand:Fe<lt}))}var ut;if(j){let vt=ue;ue.isCollapsed&&(vt=Re.createSelection(Re.createRange(Re.createPositionAt(ze,"end"),Re.createPositionAt(Ne,0)))),ie.deleteContent(vt,{doNotResetEntireContent:ue.isCollapsed});const Ot=vt.getLastPosition().parent,ei=Ot.nextSibling;Ee.push(Ot),ei&&ei!==Ne&&ei.getAttribute("listItemId")==gt&&Ee.push(...h(ei,Ot,Re))}else Ee.push(...h(Ne,ze,Re));this._fireAfterExecute(Ee)})}_fireAfterExecute(j){this.fire("afterExecute",w(new Set(j)))}_checkEnabled(){const j=this.editor.model,ie=j.document.selection,ue=_(j);if(ie.isCollapsed||ue){const Ee=ue||ie.getFirstPosition().parent;if(!H(Ee))return!1;const Re=this._direction=="backward"?Ee.previousSibling:Ee.nextSibling;if(!Re||u([Ee,Re]))return!1}else{const Ee=ie.getLastPosition(),Re=ie.getFirstPosition();if(Ee.parent===Re.parent||!H(Ee.parent))return!1}return!0}_getMergeSubjectElements(j,ie){const ue=_(this.editor.model);let Ee,Re;if(j.isCollapsed||ue){const ze=ue||j.getFirstPosition().parent,Ne=pe(ze);this._direction=="backward"?(Re=ze,Ee=Ne&&!ie?v.first(ze,{sameIndent:!0,lowerIndent:!0}):ze.previousSibling):(Ee=ze,Re=ze.nextSibling)}else Ee=j.getFirstPosition().parent,Re=j.getLastPosition().parent;return{firstElement:Ee,lastElement:Re}}}class D extends m.Command{constructor(j,ie){super(j),this._direction=ie}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(j=>{const ie=Z(this._getStartBlock(),j);this._fireAfterExecute(ie)})}_fireAfterExecute(j){this.fire("afterExecute",w(new Set(j)))}_checkEnabled(){const j=this.editor.model.document.selection,ie=this._getStartBlock();return j.isCollapsed&&H(ie)&&!pe(ie)}_getStartBlock(){const j=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?j:j.nextSibling}}class W extends m.Plugin{static get pluginName(){return"DocumentListUtils"}expandListBlocksToCompleteList(j){return te(j)}isFirstBlockOfListItem(j){return pe(j)}isListItemBlock(j){return H(j)}}var q=Y(492);function ae(Be){return Be.is("element","ol")||Be.is("element","ul")}function Ie(Be){return Be.is("element","li")}function Ve(Be){let j=0,ie=Be.parent;for(;ie;){if(Ie(ie))j++;else{const ue=ie.previousSibling;ue&&Ie(ue)&&j++}ie=ie.parent}return j}function _e(Be,j,ie,ue=dt(ie,j)){return Be.createAttributeElement(Qe(ie),null,{priority:2*j/100-100,id:ue})}function Me(Be,j,ie){return Be.createAttributeElement("li",null,{priority:(2*j+1)/100-100,id:ie})}function Qe(Be){return Be=="numbered"?"ol":"ul"}function dt(Be,j){return`list-${Be}-${j}`}function nt(Be,j){const ie=Be.nodeBefore;if(H(ie)){let ue=ie;for(const{node:Ee}of a(ue,"backward"))if(ue=Ee,j.has(ue))return;j.set(ie,ue)}else{const ue=Be.nodeAfter;H(ue)&&j.set(ue,ue)}}function qe(){return(Be,j,ie)=>{if(!ie.consumable.test(j.viewItem,{name:!0}))return;const ue=new q.UpcastWriter(j.viewItem.document);for(const Ee of Array.from(j.viewItem.getChildren()))Ie(Ee)||ae(Ee)||ue.remove(Ee)}}function et(Be,j,ie){const ue=function(Ee){return(Re,ze)=>{const Ne=[];for(const Fe of Ee)Re.hasAttribute(Fe)&&Ne.push(`attribute:${Fe}`);return!!Ne.every(Fe=>ze.test(Re,Fe)!==!1)&&(Ne.forEach(Fe=>ze.consume(Re,Fe)),!0)}}(Be);return(Ee,Re,ze)=>{const{writer:Ne,mapper:Fe,consumable:lt}=ze,gt=Re.item;if(!Be.includes(Re.attributeKey)||!ue(gt,lt))return;const ut=function(vt,Ot,ei){const xt=ei.createRangeOn(vt);return Ot.toViewRange(xt).getTrimmed().getContainedElement()}(gt,Fe,ie);(function(vt,Ot){let ei=vt.parent;for(;ei.is("attributeElement")&&["ul","ol","li"].includes(ei.name);){const xt=ei.parent;Ot.unwrap(Ot.createRangeOn(vt),ei),ei=xt}})(ut,Ne),function(vt,Ot,ei,xt){if(!vt.hasAttribute("listIndent"))return;const ri=vt.getAttribute("listIndent");let vi=vt;for(let Vi=ri;Vi>=0;Vi--){const Wi=Me(xt,Vi,vi.getAttribute("listItemId")),tn=_e(xt,Vi,vi.getAttribute("listType"));for(const bn of ei)vi.hasAttribute(bn.attributeName)&&bn.setAttributeOnDowncast(xt,vi.getAttribute(bn.attributeName),bn.scope=="list"?tn:Wi);if(Ot=xt.wrap(Ot,Wi),Ot=xt.wrap(Ot,tn),Vi==0||(vi=v.first(vi,{lowerIndent:!0}),!vi))break}}(gt,Ne.createRangeOn(ut),j,Ne)}}function Nt(Be,{dataPipeline:j}={}){return(ie,{writer:ue})=>{if(!jt(ie,Be))return null;if(!j)return ue.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const Ee=ue.createContainerElement("p");return ue.setCustomProperty("dataPipeline:transparentRendering",!0,Ee),Ee}}function jt(Be,j,ie=I(Be)){if(!H(Be))return!1;for(const ue of Be.getAttributeKeys())if(!ue.startsWith("selection:")&&!j.includes(ue))return!1;return ie.length<2}var yt=Y(62),tt=Y.n(yt),Bt=Y(78),ye={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};tt()(Bt.Z,ye),Bt.Z.locals;var Ae=Y(272),Ke={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};tt()(Ae.Z,Ke),Ae.Z.locals;const kt=["listType","listIndent","listItemId"];class It extends m.Plugin{constructor(){super(...arguments),this._downcastStrategies=[]}static get pluginName(){return"DocumentListEditing"}static get requires(){return[y.Enter,E.Delete,W]}init(){const j=this.editor,ie=j.model;if(j.plugins.has("ListEditing"))throw new f.CKEditorError("document-list-feature-conflict",this,{conflictPlugin:"ListEditing"});ie.schema.extend("$container",{allowAttributes:kt}),ie.schema.extend("$block",{allowAttributes:kt}),ie.schema.extend("$blockObject",{allowAttributes:kt});for(const ue of kt)ie.schema.setAttributeProperties(ue,{copyOnReplace:!0});j.commands.add("numberedList",new x(j,"numbered")),j.commands.add("bulletedList",new x(j,"bulleted")),j.commands.add("indentList",new z(j,"forward")),j.commands.add("outdentList",new z(j,"backward")),j.commands.add("mergeListItemBackward",new c(j,"backward")),j.commands.add("mergeListItemForward",new c(j,"forward")),j.commands.add("splitListItemBefore",new D(j,"before")),j.commands.add("splitListItemAfter",new D(j,"after")),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration()}afterInit(){const j=this.editor.commands,ie=j.get("indent"),ue=j.get("outdent");ie&&ie.registerChildCommand(j.get("indentList"),{priority:"high"}),ue&&ue.registerChildCommand(j.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(j){this._downcastStrategies.push(j)}_getListAttributeNames(){return[...kt,...this._downcastStrategies.map(j=>j.attributeName)]}_setupDeleteIntegration(){const j=this.editor,ie=j.commands.get("mergeListItemBackward"),ue=j.commands.get("mergeListItemForward");this.listenTo(j.editing.view.document,"delete",(Ee,Re)=>{const ze=j.model.document.selection;_(j.model)||j.model.change(()=>{const Ne=ze.getFirstPosition();if(ze.isCollapsed&&Re.direction=="backward"){if(!Ne.isAtStart)return;const Fe=Ne.parent;if(!H(Fe))return;if(v.first(Fe,{sameAttributes:"listType",sameIndent:!0})||Fe.getAttribute("listIndent")!==0){if(!ie.isEnabled)return;ie.execute({shouldMergeOnBlocksContentLevel:Yt(j.model,"backward")})}else ge(Fe)||j.execute("splitListItemAfter"),j.execute("outdentList");Re.preventDefault(),Ee.stop()}else{if(ze.isCollapsed&&!ze.getLastPosition().isAtEnd||!ue.isEnabled)return;ue.execute({shouldMergeOnBlocksContentLevel:Yt(j.model,"forward")}),Re.preventDefault(),Ee.stop()}})},{context:"li"})}_setupEnterIntegration(){const j=this.editor,ie=j.model,ue=j.commands,Ee=ue.get("enter");this.listenTo(j.editing.view.document,"enter",(Re,ze)=>{const Ne=ie.document,Fe=Ne.selection.getFirstPosition().parent;if(Ne.selection.isCollapsed&&H(Fe)&&Fe.isEmpty&&!ze.isSoft){const lt=pe(Fe),gt=ge(Fe);lt&&gt?(j.execute("outdentList"),ze.preventDefault(),Re.stop()):lt&&!gt?(j.execute("splitListItemAfter"),ze.preventDefault(),Re.stop()):gt&&(j.execute("splitListItemBefore"),ze.preventDefault(),Re.stop())}},{context:"li"}),this.listenTo(Ee,"afterExecute",()=>{const Re=ue.get("splitListItemBefore");Re.refresh(),Re.isEnabled&&I(j.model.document.selection.getLastPosition().parent).length===2&&Re.execute()})}_setupTabIntegration(){const j=this.editor;this.listenTo(j.editing.view.document,"tab",(ie,ue)=>{const Ee=ue.shiftKey?"outdentList":"indentList";this.editor.commands.get(Ee).isEnabled&&(j.execute(Ee),ue.stopPropagation(),ue.preventDefault(),ie.stop())},{context:"li"})}_setupConversion(){const j=this.editor,ie=j.model,ue=this._getListAttributeNames();j.conversion.for("upcast").elementToElement({view:"li",model:"paragraph"}).add(Ee=>{Ee.on("element:li",(Re,ze,Ne)=>{const{writer:Fe,schema:lt}=Ne;if(!ze.modelRange)return;const gt=Array.from(ze.modelRange.getItems({shallow:!0})).filter(vt=>lt.checkAttribute(vt,"listItemId"));if(!gt.length)return;const ut={listItemId:A.next(),listIndent:Ve(ze.viewItem),listType:ze.viewItem.parent&&ze.viewItem.parent.is("element","ol")?"numbered":"bulleted"};for(const vt of gt)H(vt)||Fe.setAttributes(ut,vt);gt.length>1&&gt[1].getAttribute("listItemId")!=ut.listItemId&&Ne.keepEmptyElement(gt[0])}),Ee.on("element:ul",qe(),{priority:"high"}),Ee.on("element:ol",qe(),{priority:"high"})}),j.conversion.for("editingDowncast").elementToElement({model:"paragraph",view:Nt(ue),converterPriority:"high"}),j.conversion.for("dataDowncast").elementToElement({model:"paragraph",view:Nt(ue,{dataPipeline:!0}),converterPriority:"high"}),j.conversion.for("downcast").add(Ee=>{Ee.on("attribute",et(ue,this._downcastStrategies,ie))}),this.listenTo(ie.document,"change:data",function(Ee,Re,ze,Ne){return()=>{const ut=Ee.document.differ.getChanges(),vt=[],Ot=new Map,ei=new Set;for(const xt of ut)if(xt.type=="insert"&&xt.name!="$text")nt(xt.position,Ot),xt.attributes.has("listItemId")?ei.add(xt.position.nodeAfter):nt(xt.position.getShiftedBy(xt.length),Ot);else if(xt.type=="remove"&&xt.attributes.has("listItemId"))nt(xt.position,Ot);else if(xt.type=="attribute"){const ri=xt.range.start.nodeAfter;ze.includes(xt.attributeKey)?(nt(xt.range.start,Ot),xt.attributeNewValue===null?(nt(xt.range.start.getShiftedBy(1),Ot),lt(ri)&&vt.push(ri)):ei.add(ri)):H(ri)&&lt(ri)&&vt.push(ri)}for(const xt of Ot.values())vt.push(...Fe(xt,ei));for(const xt of new Set(vt))Re.reconvertItem(xt)};function Fe(ut,vt){const Ot=[],ei=new Set,xt=[];for(const{node:ri,previous:vi}of a(ut,"forward")){if(ei.has(ri))continue;const Vi=ri.getAttribute("listIndent");vi&&Vi<vi.getAttribute("listIndent")&&(xt.length=Vi+1),xt[Vi]=Object.fromEntries(Array.from(ri.getAttributes()).filter(([tn])=>ze.includes(tn)));const Wi=C(ri,{direction:"forward"});for(const tn of Wi)ei.add(tn),(lt(tn,Wi)||gt(tn,xt,vt))&&Ot.push(tn)}return Ot}function lt(ut,vt){if(!ut.is("element","paragraph"))return!1;const Ot=Re.mapper.toViewElement(ut);if(!Ot)return!1;const ei=jt(ut,ze,vt);return!(!ei||!Ot.is("element","p"))||!(ei||!Ot.is("element","span"))}function gt(ut,vt,Ot){if(Ot.has(ut))return!1;const ei=Re.mapper.toViewElement(ut);let xt=vt.length-1;for(let ri=ei.parent;!ri.is("editableElement");ri=ri.parent){const vi=Ie(ri),Vi=ae(ri);if(!Vi&&!vi)continue;const Wi="checkAttributes:"+(vi?"item":"list");if(Ne.fire(Wi,{viewElement:ri,modelAttributes:vt[xt]}))break;if(Vi&&(xt--,xt<0))return!1}return!0}}(ie,j.editing,ue,this),{priority:"high"}),this.on("checkAttributes:item",(Ee,{viewElement:Re,modelAttributes:ze})=>{Re.id!=ze.listItemId&&(Ee.return=!0,Ee.stop())}),this.on("checkAttributes:list",(Ee,{viewElement:Re,modelAttributes:ze})=>{Re.name==Qe(ze.listType)&&Re.id==dt(ze.listType,ze.listIndent)||(Ee.return=!0,Ee.stop())})}_setupModelPostFixing(){const j=this.editor.model,ie=this._getListAttributeNames();j.document.registerPostFixer(ue=>function(Ee,Re,ze,Ne){const Fe=Ee.document.differ.getChanges(),lt=new Map;let gt=!1;for(const vt of Fe)if(vt.type=="insert"&&vt.name!="$text"){const Ot=vt.position.nodeAfter;if(!Ee.schema.checkAttribute(Ot,"listItemId"))for(const ei of Array.from(Ot.getAttributeKeys()))ze.includes(ei)&&(Re.removeAttribute(ei,Ot),gt=!0);nt(vt.position,lt),vt.attributes.has("listItemId")||nt(vt.position.getShiftedBy(vt.length),lt);for(const{item:ei,previousPosition:xt}of Ee.createRangeIn(Ot))H(ei)&&nt(xt,lt)}else vt.type=="remove"?nt(vt.position,lt):vt.type=="attribute"&&ze.includes(vt.attributeKey)&&(nt(vt.range.start,lt),vt.attributeNewValue===null&&nt(vt.range.start.getShiftedBy(1),lt));const ut=new Set;for(const vt of lt.values())gt=Ne.fire("postFixer",{listNodes:new d(vt),listHead:vt,writer:Re,seenIds:ut})||gt;return gt}(j,ue,ie,this)),this.on("postFixer",(ue,{listNodes:Ee,writer:Re})=>{ue.return=function(ze,Ne){let Fe=0,lt=-1,gt=null,ut=!1;for(const{node:vt}of ze){const Ot=vt.getAttribute("listIndent");if(Ot>Fe){let ei;gt===null?(gt=Ot-Fe,ei=Fe):(gt>Ot&&(gt=Ot),ei=Ot-gt),ei>lt+1&&(ei=lt+1),Ne.setAttribute("listIndent",ei,vt),ut=!0,lt=ei}else gt=null,Fe=Ot+1,lt=Ot}return ut}(Ee,Re)||ue.return},{priority:"high"}),this.on("postFixer",(ue,{listNodes:Ee,writer:Re,seenIds:ze})=>{ue.return=function(Ne,Fe,lt){const gt=new Set;let ut=!1;for(const{node:vt}of Ne){if(gt.has(vt))continue;let Ot=vt.getAttribute("listType"),ei=vt.getAttribute("listItemId");Fe.has(ei)&&(ei=A.next()),Fe.add(ei);for(const xt of C(vt,{direction:"forward"}))gt.add(xt),xt.getAttribute("listType")!=Ot&&(ei=A.next(),Ot=xt.getAttribute("listType")),xt.getAttribute("listItemId")!=ei&&(lt.setAttribute("listItemId",ei,xt),ut=!0)}return ut}(Ee,ze,Re)||ue.return},{priority:"high"})}_setupClipboardIntegration(){const j=this.editor.model;this.listenTo(j,"insertContent",function(ie){return(ue,[Ee,Re])=>{const ze=Ee.is("documentFragment")?Ee.getChild(0):Ee;if(!H(ze))return;let Ne;Ne=Re?ie.createSelection(Re):ie.document.selection;const Fe=Ne.getFirstPosition();let lt=null;if(H(Fe.parent)?lt=Fe.parent:H(Fe.nodeBefore)&&(lt=Fe.nodeBefore),!lt)return;const gt=lt.getAttribute("listIndent")-ze.getAttribute("listIndent");gt<=0||ie.change(ut=>{for(const{node:vt}of a(ze,"forward"))ut.setAttribute("listIndent",vt.getAttribute("listIndent")+gt,vt)})}}(j),{priority:"high"}),this.listenTo(j,"getSelectedContent",(ie,[ue])=>{u(Array.from(ue.getSelectedBlocks()))&&j.change(Ee=>r(Array.from(ie.return.getChildren()),Ee))})}}function Yt(Be,j){const ie=Be.document.selection;if(!ie.isCollapsed)return!_(Be);if(j==="forward")return!0;const ue=ie.getFirstPosition().parent,Ee=ue.previousSibling;return!Be.schema.isObject(Ee)&&(!!Ee.isEmpty||u([ue,Ee]))}var zt=Y(273);function ot(Be,j){const ie=j.mapper,ue=j.writer,Ee=Be.getAttribute("listType")=="numbered"?"ol":"ul",Re=function(Ne){const Fe=Ne.createContainerElement("li");return Fe.getFillerOffset=St,Fe}(ue),ze=ue.createContainerElement(Ee,null);return ue.insert(ue.createPositionAt(ze,0),Re),ie.bindElements(Be,Re),Re}function Dt(Be,j,ie,ue){const Ee=j.parent,Re=ie.mapper,ze=ie.writer;let Ne=Re.toViewPosition(ue.createPositionBefore(Be));const Fe=di(Be.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:Be.getAttribute("listIndent")}),lt=Be.previousSibling;if(Fe&&Fe.getAttribute("listIndent")==Be.getAttribute("listIndent")){const gt=Re.toViewElement(Fe);Ne=ze.breakContainer(ze.createPositionAfter(gt))}else if(lt&&lt.name=="listItem"){Ne=Re.toViewPosition(ue.createPositionAt(lt,"end"));const gt=Re.findMappedViewAncestor(Ne),ut=bt(gt);Ne=ut?ze.createPositionBefore(ut):ze.createPositionAt(gt,"end")}else Ne=Re.toViewPosition(ue.createPositionBefore(Be));if(Ne=ni(Ne),ze.insert(Ne,Ee),lt&&lt.name=="listItem"){const gt=Re.toViewElement(lt),ut=ze.createRange(ze.createPositionAt(gt,0),Ne).getWalker({ignoreElementEnd:!0});for(const vt of ut)if(vt.item.is("element","li")){const Ot=ze.breakContainer(ze.createPositionBefore(vt.item)),ei=vt.item.parent,xt=ze.createPositionAt(j,"end");wt(ze,xt.nodeBefore,xt.nodeAfter),ze.move(ze.createRangeOn(ei),xt),ut.position=Ot}}else{const gt=Ee.nextSibling;if(gt&&(gt.is("element","ul")||gt.is("element","ol"))){let ut=null;for(const vt of gt.getChildren()){const Ot=Re.toModelElement(vt);if(!(Ot&&Ot.getAttribute("listIndent")>Be.getAttribute("listIndent")))break;ut=vt}ut&&(ze.breakContainer(ze.createPositionAfter(ut)),ze.move(ze.createRangeOn(ut.parent),ze.createPositionAt(j,"end")))}}wt(ze,Ee,Ee.nextSibling),wt(ze,Ee.previousSibling,Ee)}function wt(Be,j,ie){return!j||!ie||j.name!="ul"&&j.name!="ol"||j.name!=ie.name||j.getAttribute("class")!==ie.getAttribute("class")?null:Be.mergeContainers(Be.createPositionAfter(j))}function ni(Be){return Be.getLastMatchingPosition(j=>j.item.is("uiElement"))}function di(Be,j){const ie=!!j.sameIndent,ue=!!j.smallerIndent,Ee=j.listIndent;let Re=Be;for(;Re&&Re.name=="listItem";){const ze=Re.getAttribute("listIndent");if(ie&&Ee==ze||ue&&Ee>ze)return Re;Re=j.direction==="forward"?Re.nextSibling:Re.previousSibling}return null}function xi(Be,j,ie,ue){Be.ui.componentFactory.add(j,Ee=>{const Re=Be.commands.get(j),ze=new zt.ButtonView(Ee);return ze.set({label:ie,icon:ue,tooltip:!0,isToggleable:!0}),ze.bind("isOn","isEnabled").to(Re,"value","isEnabled"),ze.on("execute",()=>{Be.execute(j),Be.editing.view.focus()}),ze})}function bt(Be){for(const j of Be.getChildren())if(j.name=="ul"||j.name=="ol")return j;return null}function fe(Be,j){const ie=[],ue=Be.parent,Ee={ignoreElementEnd:!1,startPosition:Be,shallow:!0,direction:j},Re=ue.getAttribute("listIndent"),ze=[...new q.TreeWalker(Ee)].filter(Ne=>Ne.item.is("element")).map(Ne=>Ne.item);for(const Ne of ze){if(!Ne.is("element","listItem")||Ne.getAttribute("listIndent")<Re)break;if(!(Ne.getAttribute("listIndent")>Re)){if(Ne.getAttribute("listType")!==ue.getAttribute("listType")||Ne.getAttribute("listStyle")!==ue.getAttribute("listStyle")||Ne.getAttribute("listReversed")!==ue.getAttribute("listReversed")||Ne.getAttribute("listStart")!==ue.getAttribute("listStart"))break;j==="backward"?ie.unshift(Ne):ie.push(Ne)}}return ie}function je(Be){let j=[...Be.document.selection.getSelectedBlocks()].filter(ie=>ie.is("element","listItem")).map(ie=>{const ue=Be.change(Ee=>Ee.createPositionAt(ie,0));return[...fe(ue,"backward"),...fe(ue,"forward")]}).flat();return j=[...new Set(j)],j}const Ze=["disc","circle","square"],pt=["decimal","decimal-leading-zero","lower-roman","upper-roman","lower-latin","upper-latin"];function Ct(Be){return Ze.includes(Be)?"bulleted":pt.includes(Be)?"numbered":null}function St(){const Be=!this.isEmpty&&(this.getChild(0).name=="ul"||this.getChild(0).name=="ol");return this.isEmpty||Be?0:q.getFillerOffset.call(this)}const Xt='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Zt='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>';class oi extends m.Plugin{static get pluginName(){return"ListUI"}init(){const j=this.editor.t;xi(this.editor,"numberedList",j("Numbered List"),Xt),xi(this.editor,"bulletedList",j("Bulleted List"),Zt)}}class bi extends m.Plugin{static get requires(){return[It,oi]}static get pluginName(){return"DocumentList"}}class gi extends m.Command{refresh(){const j=this._getValue();this.value=j,this.isEnabled=j!=null}execute({startIndex:j=1}={}){const ie=this.editor.model,ue=ie.document;let Ee=Array.from(ue.selection.getSelectedBlocks()).filter(Re=>H(Re)&&Re.getAttribute("listType")=="numbered");Ee=te(Ee),ie.change(Re=>{for(const ze of Ee)Re.setAttribute("listStart",j>=0?j:1,ze)})}_getValue(){const j=this.editor.model.document,ie=(0,f.first)(j.selection.getSelectedBlocks());return ie&&H(ie)&&ie.getAttribute("listType")=="numbered"?ie.getAttribute("listStart"):null}}const Ti={},Mt={},Ei={},Ri=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:Be,typeAttribute:j,listType:ie}of Ri)Ti[Be]=ie,Mt[Be]=j,j&&(Ei[j]=Be);function Yi(){return Ri.map(Be=>Be.listStyle)}function ji(Be){return Ti[Be]||null}function Pi(Be){return Ei[Be]||null}function qi(Be){return Mt[Be]||null}class nn extends m.Command{constructor(j,ie,ue){super(j),this.defaultType=ie,this._supportedTypes=ue}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(j={}){const ie=this.editor.model,ue=ie.document;ie.change(Ee=>{this._tryToConvertItemsToList(j);let Re=Array.from(ue.selection.getSelectedBlocks()).filter(ze=>ze.hasAttribute("listType"));if(Re.length){Re=te(Re);for(const ze of Re)Ee.setAttribute("listStyle",j.type||this.defaultType,ze)}})}isStyleTypeSupported(j){return!this._supportedTypes||this._supportedTypes.includes(j)}_getValue(){const j=(0,f.first)(this.editor.model.document.selection.getSelectedBlocks());return H(j)?j.getAttribute("listStyle"):null}_checkEnabled(){const j=this.editor,ie=j.commands.get("numberedList"),ue=j.commands.get("bulletedList");return ie.isEnabled||ue.isEnabled}_tryToConvertItemsToList(j){if(!j.type)return;const ie=ji(j.type);if(!ie)return;const ue=this.editor,Ee=`${ie}List`;ue.commands.get(Ee).value||ue.execute(Ee)}}class Li extends m.Command{refresh(){const j=this._getValue();this.value=j,this.isEnabled=j!=null}execute(j={}){const ie=this.editor.model,ue=ie.document;let Ee=Array.from(ue.selection.getSelectedBlocks()).filter(Re=>H(Re)&&Re.getAttribute("listType")=="numbered");Ee=te(Ee),ie.change(Re=>{for(const ze of Ee)Re.setAttribute("listReversed",!!j.reversed,ze)})}_getValue(){const j=this.editor.model.document,ie=(0,f.first)(j.selection.getSelectedBlocks());return H(ie)&&ie.getAttribute("listType")=="numbered"?ie.getAttribute("listReversed"):null}}function dn(Be){return(j,ie,ue)=>{const{writer:Ee,schema:Re,consumable:ze}=ue;if(ze.test(ie.viewItem,Be.viewConsumables)===!1)return;ie.modelRange||Object.assign(ie,ue.convertChildren(ie.viewItem,ie.modelCursor));let Ne=!1;for(const Fe of ie.modelRange.getItems({shallow:!0}))Re.checkAttribute(Fe,Be.attributeName)&&Be.appliesToListItem(Fe)&&(Fe.hasAttribute(Be.attributeName)||(Ee.setAttribute(Be.attributeName,Be.getAttributeOnUpcast(ie.viewItem),Fe),Ne=!0));Ne&&ze.consume(ie.viewItem,Be.viewConsumables)}}class pi extends m.Plugin{static get pluginName(){return"DocumentListPropertiesUtils"}getAllSupportedStyleTypes(){return Yi()}getListTypeFromListStyleType(j){return ji(j)}getListStyleTypeFromTypeAttribute(j){return Pi(j)}getTypeAttributeFromListStyleType(j){return qi(j)}}const fi="default";class Ki extends m.Plugin{static get requires(){return[It,pi]}static get pluginName(){return"DocumentListPropertiesEditing"}constructor(j){super(j),j.config.define("list",{properties:{styles:!0,startIndex:!1,reversed:!1}})}init(){const j=this.editor,ie=j.model,ue=j.plugins.get(It),Ee=function(Re){const ze=[];if(Re.styles){const Ne=typeof Re.styles=="object"&&Re.styles.useAttribute;ze.push({attributeName:"listStyle",defaultValue:fi,viewConsumables:{styles:"list-style-type"},addCommand(Fe){let lt=Yi();Ne&&(lt=lt.filter(gt=>!!qi(gt))),Fe.commands.add("listStyle",new nn(Fe,fi,lt))},appliesToListItem:()=>!0,hasValidAttribute(Fe){if(!Fe.hasAttribute("listStyle"))return!1;const lt=Fe.getAttribute("listStyle");return lt==fi||ji(lt)==Fe.getAttribute("listType")},setAttributeOnDowncast(Fe,lt,gt){if(lt&&lt!==fi){if(!Ne)return void Fe.setStyle("list-style-type",lt,gt);{const ut=qi(lt);if(ut)return void Fe.setAttribute("type",ut,gt)}}Fe.removeStyle("list-style-type",gt),Fe.removeAttribute("type",gt)},getAttributeOnUpcast(Fe){const lt=Fe.getStyle("list-style-type");if(lt)return lt;const gt=Fe.getAttribute("type");return gt?Pi(gt):fi}})}return Re.reversed&&ze.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(Ne){Ne.commands.add("listReversed",new Li(Ne))},appliesToListItem:Ne=>Ne.getAttribute("listType")=="numbered",hasValidAttribute(Ne){return this.appliesToListItem(Ne)==Ne.hasAttribute("listReversed")},setAttributeOnDowncast(Ne,Fe,lt){Fe?Ne.setAttribute("reversed","reversed",lt):Ne.removeAttribute("reversed",lt)},getAttributeOnUpcast:Ne=>Ne.hasAttribute("reversed")}),Re.startIndex&&ze.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(Ne){Ne.commands.add("listStart",new gi(Ne))},appliesToListItem:Ne=>Ne.getAttribute("listType")=="numbered",hasValidAttribute(Ne){return this.appliesToListItem(Ne)==Ne.hasAttribute("listStart")},setAttributeOnDowncast(Ne,Fe,lt){Fe==0||Fe>1?Ne.setAttribute("start",Fe,lt):Ne.removeAttribute("start",lt)},getAttributeOnUpcast(Ne){const Fe=Ne.getAttribute("start");return Fe>=0?Fe:1}}),ze}(j.config.get("list.properties"));for(const Re of Ee)Re.addCommand(j),ie.schema.extend("$container",{allowAttributes:Re.attributeName}),ie.schema.extend("$block",{allowAttributes:Re.attributeName}),ie.schema.extend("$blockObject",{allowAttributes:Re.attributeName}),ue.registerDowncastStrategy({scope:"list",attributeName:Re.attributeName,setAttributeOnDowncast(ze,Ne,Fe){Re.setAttributeOnDowncast(ze,Ne,Fe)}});j.conversion.for("upcast").add(Re=>{for(const ze of Ee)Re.on("element:ol",dn(ze)),Re.on("element:ul",dn(ze))}),ue.on("checkAttributes:list",(Re,{viewElement:ze,modelAttributes:Ne})=>{for(const Fe of Ee)Fe.getAttributeOnUpcast(ze)!=Ne[Fe.attributeName]&&(Re.return=!0,Re.stop())}),this.listenTo(j.commands.get("indentList"),"afterExecute",(Re,ze)=>{ie.change(Ne=>{for(const Fe of ze)for(const lt of Ee)lt.appliesToListItem(Fe)&&Ne.setAttribute(lt.attributeName,lt.defaultValue,Fe)})}),ue.on("postFixer",(Re,{listNodes:ze,writer:Ne})=>{for(const{node:Fe}of ze)for(const lt of Ee)lt.hasValidAttribute(Fe)||(lt.appliesToListItem(Fe)?Ne.setAttribute(lt.attributeName,lt.defaultValue,Fe):Ne.removeAttribute(lt.attributeName,Fe),Re.return=!0)}),ue.on("postFixer",(Re,{listNodes:ze,writer:Ne})=>{const Fe=[];for(const{node:lt,previous:gt}of ze){if(!gt)continue;const ut=lt.getAttribute("listIndent"),vt=gt.getAttribute("listIndent");let Ot=null;if(ut>vt?Fe[vt]=gt:ut<vt?(Ot=Fe[ut],Fe.length=ut):Ot=gt,Ot&&Ot.getAttribute("listType")==lt.getAttribute("listType"))for(const ei of Ee){const{attributeName:xt}=ei;if(!ei.appliesToListItem(lt))continue;const ri=Ot.getAttribute(xt);lt.getAttribute(xt)!=ri&&(Ne.setAttribute(xt,ri,lt),Re.return=!0)}}})}}var ke=Y(389),V={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};tt()(ke.Z,V),ke.Z.locals;class F extends zt.View{constructor(j,ie){super(j);const ue=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),ie&&this.children.addMany(ie),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",ue.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:ue.if("isCollapsed","hidden"),"aria-labelledby":ue.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}_createButtonView(){const j=new zt.ButtonView(this.locale),ie=j.bindTemplate;return j.set({withText:!0,icon:'<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>'}),j.extendTemplate({attributes:{"aria-expanded":ie.to("isOn",ue=>String(ue))}}),j.bind("label").to(this),j.bind("isOn").to(this,"isCollapsed",ue=>!ue),j.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),j}}var P=Y(543),N={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};tt()(P.Z,N),P.Z.locals;class de extends zt.View{constructor(j,{enabledProperties:ie,styleButtonViews:ue,styleGridAriaLabel:Ee}){super(j),this.stylesView=null,this.additionalPropertiesCollapsibleView=null,this.startIndexFieldView=null,this.reversedSwitchButtonView=null,this.focusTracker=new f.FocusTracker,this.keystrokes=new f.KeystrokeHandler,this.focusables=new zt.ViewCollection;const Re=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new zt.FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),ie.styles?(this.stylesView=this._createStylesView(ue,Ee),this.children.add(this.stylesView)):Re.push("ck-list-properties_without-styles"),(ie.startIndex||ie.reversed)&&(this._addNumberedListPropertyViews(ie),Re.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:Re},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const j of this.stylesView.children)this.stylesView.focusTracker.add(j.element);(0,zt.addKeyboardHandlingForGrid)({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>f.global.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element),this.listenTo(this.startIndexFieldView.element,"selectstart",(ie,ue)=>{ue.stopPropagation()},{priority:"high"});const j=ie=>ie.stopPropagation();this.keystrokes.set("arrowright",j),this.keystrokes.set("arrowleft",j),this.keystrokes.set("arrowup",j),this.keystrokes.set("arrowdown",j)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(j,ie){const ue=new zt.View(this.locale);return ue.children=ue.createCollection(),ue.children.addMany(j),ue.setTemplate({tag:"div",attributes:{"aria-label":ie,class:["ck","ck-list-styles-list"]},children:ue.children}),ue.children.delegate("execute").to(this),ue.focus=function(){this.children.first.focus()},ue.focusTracker=new f.FocusTracker,ue.keystrokes=new f.KeystrokeHandler,ue.render(),ue.keystrokes.listenTo(ue.element),ue}_addNumberedListPropertyViews(j){const ie=this.locale.t,ue=[];j.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),ue.push(this.startIndexFieldView)),j.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),ue.push(this.reversedSwitchButtonView)),j.styles?(this.additionalPropertiesCollapsibleView=new F(this.locale,ue),this.additionalPropertiesCollapsibleView.set({label:ie("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(ue,"isEnabled",(...Ee)=>Ee.some(Re=>Re)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(Ee,Re,ze)=>{ze||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(ue)}_createStartIndexField(){const j=this.locale.t,ie=new zt.LabeledFieldView(this.locale,zt.createLabeledInputNumber);return ie.set({label:j("Start at"),class:"ck-numbered-list-properties__start-index"}),ie.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),ie.fieldView.on("input",()=>{const ue=ie.fieldView.element,Ee=ue.valueAsNumber;Number.isNaN(Ee)||(ue.checkValidity()?this.fire("listStart",{startIndex:Ee}):ie.errorText=j("Start index must be greater than 0."))}),ie}_createReversedSwitchButton(){const j=this.locale.t,ie=new zt.SwitchButtonView(this.locale);return ie.set({withText:!0,label:j("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),ie.delegate("execute").to(this,"listReversed"),ie}}var Ce=Y(657),$e={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};tt()(Ce.Z,$e),Ce.Z.locals;class at extends m.Plugin{static get pluginName(){return"ListPropertiesUI"}init(){const j=this.editor,ie=j.locale.t,ue=j.config.get("list.properties");ue.styles&&j.ui.componentFactory.add("bulletedList",Tt({editor:j,parentCommandName:"bulletedList",buttonLabel:ie("Bulleted List"),buttonIcon:Zt,styleGridAriaLabel:ie("Bulleted list styles toolbar"),styleDefinitions:[{label:ie("Toggle the disc list style"),tooltip:ie("Disc"),type:"disc",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>'},{label:ie("Toggle the circle list style"),tooltip:ie("Circle"),type:"circle",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>'},{label:ie("Toggle the square list style"),tooltip:ie("Square"),type:"square",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>'}]})),(ue.styles||ue.startIndex||ue.reversed)&&j.ui.componentFactory.add("numberedList",Tt({editor:j,parentCommandName:"numberedList",buttonLabel:ie("Numbered List"),buttonIcon:Xt,styleGridAriaLabel:ie("Numbered list styles toolbar"),styleDefinitions:[{label:ie("Toggle the decimal list style"),tooltip:ie("Decimal"),type:"decimal",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>'},{label:ie("Toggle the decimal with leading zero list style"),tooltip:ie("Decimal with leading zero"),type:"decimal-leading-zero",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>'},{label:ie("Toggle the lower\u2013roman list style"),tooltip:ie("Lower\u2013roman"),type:"lower-roman",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>'},{label:ie("Toggle the upper\u2013roman list style"),tooltip:ie("Upper-roman"),type:"upper-roman",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>'},{label:ie("Toggle the lower\u2013latin list style"),tooltip:ie("Lower-latin"),type:"lower-latin",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>'},{label:ie("Toggle the upper\u2013latin list style"),tooltip:ie("Upper-latin"),type:"upper-latin",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>'}]}))}}function Tt({editor:Be,parentCommandName:j,buttonLabel:ie,buttonIcon:ue,styleGridAriaLabel:Ee,styleDefinitions:Re}){const ze=Be.commands.get(j);return Ne=>{const Fe=(0,zt.createDropdown)(Ne,zt.SplitButtonView),lt=Fe.buttonView;return Fe.bind("isEnabled").to(ze),Fe.class="ck-list-styles-dropdown",lt.on("execute",()=>{Be.execute(j),Be.editing.view.focus()}),lt.set({label:ie,icon:ue,tooltip:!0,isToggleable:!0}),lt.bind("isOn").to(ze,"value",gt=>!!gt),Fe.once("change:isOpen",()=>{const gt=function({editor:ut,dropdownView:vt,parentCommandName:Ot,styleDefinitions:ei,styleGridAriaLabel:xt}){const ri=ut.locale,vi=ut.config.get("list.properties");let Vi=null;if(Ot!="numberedList"&&(vi.startIndex=!1,vi.reversed=!1),vi.styles){const tn=ut.commands.get("listStyle"),bn=function({editor:k,listStyleCommand:O,parentCommandName:he}){const Se=k.locale,ht=k.commands.get(he);return({label:ct,type:st,icon:qt,tooltip:Mi})=>{const Gi=new zt.ButtonView(Se);return Gi.set({label:ct,icon:qt,tooltip:Mi}),O.on("change:value",()=>{Gi.isOn=O.value===st}),Gi.on("execute",()=>{ht.value?O.value!==st?k.execute("listStyle",{type:st}):k.execute("listStyle",{type:O.defaultType}):k.model.change(()=>{k.execute("listStyle",{type:st})})}),Gi}}({editor:ut,parentCommandName:Ot,listStyleCommand:tn}),Pe=typeof tn.isStyleTypeSupported=="function"?k=>tn.isStyleTypeSupported(k.type):()=>!0;Vi=ei.filter(Pe).map(bn)}const Wi=new de(ri,{styleGridAriaLabel:xt,enabledProperties:vi,styleButtonViews:Vi});if(vi.styles&&(0,zt.focusChildOnDropdownOpen)(vt,()=>Wi.stylesView.children.find(tn=>tn.isOn)),vi.startIndex){const tn=ut.commands.get("listStart");Wi.startIndexFieldView.bind("isEnabled").to(tn),Wi.startIndexFieldView.fieldView.bind("value").to(tn),Wi.on("listStart",(bn,Pe)=>ut.execute("listStart",Pe))}if(vi.reversed){const tn=ut.commands.get("listReversed");Wi.reversedSwitchButtonView.bind("isEnabled").to(tn),Wi.reversedSwitchButtonView.bind("isOn").to(tn,"value",bn=>!!bn),Wi.on("listReversed",()=>{const bn=tn.value;ut.execute("listReversed",{reversed:!bn})})}return Wi.delegate("execute").to(vt),Wi}({editor:Be,dropdownView:Fe,parentCommandName:j,styleGridAriaLabel:Ee,styleDefinitions:Re});Fe.panelView.children.add(gt)}),Fe.on("execute",()=>{Be.editing.view.focus()}),Fe}}class Ge extends m.Plugin{static get requires(){return[Ki,at]}static get pluginName(){return"DocumentListProperties"}}class Ut extends m.Command{constructor(j,ie){super(j),this.type=ie}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(j={}){const ie=this.editor.model,ue=ie.document,Ee=Array.from(ue.selection.getSelectedBlocks()).filter(ze=>yi(ze,ie.schema)),Re=j.forceValue!==void 0?!j.forceValue:this.value;ie.change(ze=>{if(Re){let Ne=Ee[Ee.length-1].nextSibling,Fe=Number.POSITIVE_INFINITY,lt=[];for(;Ne&&Ne.name=="listItem"&&Ne.getAttribute("listIndent")!==0;){const gt=Ne.getAttribute("listIndent");gt<Fe&&(Fe=gt);const ut=gt-Fe;lt.push({element:Ne,listIndent:ut}),Ne=Ne.nextSibling}lt=lt.reverse();for(const gt of lt)ze.setAttribute("listIndent",gt.listIndent,gt.element)}if(!Re){let Ne=Number.POSITIVE_INFINITY;for(const Fe of Ee)Fe.is("element","listItem")&&Fe.getAttribute("listIndent")<Ne&&(Ne=Fe.getAttribute("listIndent"));Ne=Ne===0?1:Ne,ci(Ee,!0,Ne),ci(Ee,!1,Ne)}for(const Ne of Ee.reverse())Re&&Ne.name=="listItem"?ze.rename(Ne,"paragraph"):Re||Ne.name=="listItem"?Re||Ne.name!="listItem"||Ne.getAttribute("listType")==this.type||ze.setAttribute("listType",this.type,Ne):(ze.setAttributes({listType:this.type,listIndent:0},Ne),ze.rename(Ne,"listItem"));this.fire("_executeCleanup",Ee)})}_getValue(){const j=(0,f.first)(this.editor.model.document.selection.getSelectedBlocks());return!!j&&j.is("element","listItem")&&j.getAttribute("listType")==this.type}_checkEnabled(){if(this.value)return!0;const j=this.editor.model.document.selection,ie=this.editor.model.schema,ue=(0,f.first)(j.getSelectedBlocks());return!!ue&&yi(ue,ie)}}function ci(Be,j,ie){const ue=j?Be[0]:Be[Be.length-1];if(ue.is("element","listItem")){let Ee=ue[j?"previousSibling":"nextSibling"],Re=ue.getAttribute("listIndent");for(;Ee&&Ee.is("element","listItem")&&Ee.getAttribute("listIndent")>=ie;)Re>Ee.getAttribute("listIndent")&&(Re=Ee.getAttribute("listIndent")),Ee.getAttribute("listIndent")==Re&&Be[j?"unshift":"push"](Ee),Ee=Ee[j?"previousSibling":"nextSibling"]}}function yi(Be,j){return j.checkChild(Be.parent,"listItem")&&!j.isObject(Be)}class Ni extends m.Command{constructor(j,ie){super(j),this._indentBy=ie=="forward"?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const j=this.editor.model,ie=j.document;let ue=Array.from(ie.selection.getSelectedBlocks());j.change(Ee=>{const Re=ue[ue.length-1];let ze=Re.nextSibling;for(;ze&&ze.name=="listItem"&&ze.getAttribute("listIndent")>Re.getAttribute("listIndent");)ue.push(ze),ze=ze.nextSibling;this._indentBy<0&&(ue=ue.reverse());for(const Ne of ue){const Fe=Ne.getAttribute("listIndent")+this._indentBy;Fe<0?Ee.rename(Ne,"paragraph"):Ee.setAttribute("listIndent",Fe,Ne)}this.fire("_executeCleanup",ue)})}_checkEnabled(){const j=(0,f.first)(this.editor.model.document.selection.getSelectedBlocks());if(!j||!j.is("element","listItem"))return!1;if(this._indentBy>0){const ie=j.getAttribute("listIndent"),ue=j.getAttribute("listType");let Ee=j.previousSibling;for(;Ee&&Ee.is("element","listItem")&&Ee.getAttribute("listIndent")>=ie;){if(Ee.getAttribute("listIndent")==ie)return Ee.getAttribute("listType")==ue;Ee=Ee.previousSibling}return!1}return!0}}class Ii extends m.Plugin{static get pluginName(){return"ListUtils"}getListTypeFromListStyleType(j){return Ct(j)}getSelectedListItems(j){return je(j)}getSiblingNodes(j,ie){return fe(j,ie)}}function zi(Be){return(j,ie,ue)=>{const Ee=ue.consumable;if(!Ee.test(ie.item,"insert")||!Ee.test(ie.item,"attribute:listType")||!Ee.test(ie.item,"attribute:listIndent"))return;Ee.consume(ie.item,"insert"),Ee.consume(ie.item,"attribute:listType"),Ee.consume(ie.item,"attribute:listIndent");const Re=ie.item;Dt(Re,ot(Re,ue),ue,Be)}}const Oi=(Be,j,ie)=>{if(!ie.consumable.test(j.item,Be.name))return;const ue=ie.mapper.toViewElement(j.item),Ee=ie.writer;Ee.breakContainer(Ee.createPositionBefore(ue)),Ee.breakContainer(Ee.createPositionAfter(ue));const Re=ue.parent,ze=j.attributeNewValue=="numbered"?"ol":"ul";Ee.rename(ze,Re)},Ui=(Be,j,ie)=>{ie.consumable.consume(j.item,Be.name);const ue=ie.mapper.toViewElement(j.item).parent,Ee=ie.writer;wt(Ee,ue,ue.nextSibling),wt(Ee,ue.previousSibling,ue)},Wt=(Be,j,ie)=>{if(ie.consumable.test(j.item,Be.name)&&j.item.name!="listItem"){let ue=ie.mapper.toViewPosition(j.range.start);const Ee=ie.writer,Re=[];for(;(ue.parent.name=="ul"||ue.parent.name=="ol")&&(ue=Ee.breakContainer(ue),ue.parent.name=="li");){const ze=ue,Ne=Ee.createPositionAt(ue.parent,"end");if(!ze.isEqual(Ne)){const Fe=Ee.remove(Ee.createRange(ze,Ne));Re.push(Fe)}ue=Ee.createPositionAfter(ue.parent)}if(Re.length>0){for(let ze=0;ze<Re.length;ze++){const Ne=ue.nodeBefore;if(ue=Ee.insert(ue,Re[ze]).end,ze>0){const Fe=wt(Ee,Ne,Ne.nextSibling);Fe&&Fe.parent==Ne&&ue.offset--}}wt(Ee,ue.nodeBefore,ue.nodeAfter)}}},we=(Be,j,ie)=>{const ue=ie.mapper.toViewPosition(j.position),Ee=ue.nodeBefore,Re=ue.nodeAfter;wt(ie.writer,Ee,Re)},He=(Be,j,ie)=>{if(ie.consumable.consume(j.viewItem,{name:!0})){const ue=ie.writer,Ee=ue.createElement("listItem"),Re=function(Fe){let lt=0,gt=Fe.parent;for(;gt;){if(gt.is("element","li"))lt++;else{const ut=gt.previousSibling;ut&&ut.is("element","li")&&lt++}gt=gt.parent}return lt}(j.viewItem);ue.setAttribute("listIndent",Re,Ee);const ze=j.viewItem.parent&&j.viewItem.parent.name=="ol"?"numbered":"bulleted";if(ue.setAttribute("listType",ze,Ee),!ie.safeInsert(Ee,j.modelCursor))return;const Ne=function(Fe,lt,gt){const{writer:ut,schema:vt}=gt;let Ot=ut.createPositionAfter(Fe);for(const ei of lt)if(ei.name=="ul"||ei.name=="ol")Ot=gt.convertItem(ei,Ot).modelCursor;else{const xt=gt.convertItem(ei,ut.createPositionAt(Fe,"end")),ri=xt.modelRange.start.nodeAfter;ri&&ri.is("element")&&!vt.checkChild(Fe,ri.name)&&(Fe=xt.modelCursor.parent.is("element","listItem")?xt.modelCursor.parent:De(xt.modelCursor),Ot=ut.createPositionAfter(Fe))}return Ot}(Ee,j.viewItem.getChildren(),ie);j.modelRange=ue.createRange(j.modelCursor,Ne),ie.updateConversionResult(Ee,j)}},J=(Be,j,ie)=>{if(ie.consumable.test(j.viewItem,{name:!0})){const ue=Array.from(j.viewItem.getChildren());for(const Ee of ue)!(Ee.is("element","li")||Pt(Ee))&&Ee._remove()}},R=(Be,j,ie)=>{if(ie.consumable.test(j.viewItem,{name:!0})){if(j.viewItem.childCount===0)return;const ue=[...j.viewItem.getChildren()];let Ee=!1;for(const Re of ue)Ee&&!Pt(Re)&&Re._remove(),Pt(Re)&&(Ee=!0)}};function Q(Be){return(j,ie)=>{if(ie.isPhantom)return;const ue=ie.modelPosition.nodeBefore;if(ue&&ue.is("element","listItem")){const Ee=ie.mapper.toViewElement(ue),Re=Ee.getAncestors().find(Pt),ze=Be.createPositionAt(Ee,0).getWalker();for(const Ne of ze){if(Ne.type=="elementStart"&&Ne.item.is("element","li")){ie.viewPosition=Ne.previousPosition;break}if(Ne.type=="elementEnd"&&Ne.item==Re){ie.viewPosition=Ne.nextPosition;break}}}}}const ve=function(Be,[j,ie,ue]){const Ee=this;let Re,ze=j.is("documentFragment")?j.getChild(0):j;if(Re=ie?Ee.createSelection(ie,ue):Ee.document.selection,ze&&ze.is("element","listItem")){const Ne=Re.getFirstPosition();let Fe=null;if(Ne.parent.is("element","listItem")?Fe=Ne.parent:Ne.nodeBefore&&Ne.nodeBefore.is("element","listItem")&&(Fe=Ne.nodeBefore),Fe){const lt=Fe.getAttribute("listIndent");if(lt>0)for(;ze&&ze.is("element","listItem");)ze._setAttribute("listIndent",ze.getAttribute("listIndent")+lt),ze=ze.nextSibling}}};function De(Be){const j=new q.TreeWalker({startPosition:Be});let ie;do ie=j.next();while(!ie.value.item.is("element","listItem"));return ie.value.item}function rt(Be,j,ie,ue,Ee,Re){const ze=di(j.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:Be}),Ne=Ee.mapper,Fe=Ee.writer,lt=ze?ze.getAttribute("listIndent"):null;let gt;if(ze)if(lt==Be){const ut=Ne.toViewElement(ze).parent;gt=Fe.createPositionAfter(ut)}else{const ut=Re.createPositionAt(ze,"end");gt=Ne.toViewPosition(ut)}else gt=ie;gt=ni(gt);for(const ut of[...ue.getChildren()])Pt(ut)&&(gt=Fe.move(Fe.createRangeOn(ut),gt).end,wt(Fe,ut,ut.nextSibling),wt(Fe,ut.previousSibling,ut))}function Pt(Be){return Be.is("element","ol")||Be.is("element","ul")}class ai extends m.Plugin{static get pluginName(){return"ListEditing"}static get requires(){return[y.Enter,E.Delete,Ii]}init(){const j=this.editor;j.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});const ie=j.data,ue=j.editing;var Ee;j.model.document.registerPostFixer(ze=>function(Ne,Fe){const lt=Ne.document.differ.getChanges(),gt=new Map;let ut=!1;for(const xt of lt)if(xt.type=="insert"&&xt.name=="listItem")vt(xt.position);else if(xt.type=="insert"&&xt.name!="listItem"){if(xt.name!="$text"){const ri=xt.position.nodeAfter;ri.hasAttribute("listIndent")&&(Fe.removeAttribute("listIndent",ri),ut=!0),ri.hasAttribute("listType")&&(Fe.removeAttribute("listType",ri),ut=!0),ri.hasAttribute("listStyle")&&(Fe.removeAttribute("listStyle",ri),ut=!0),ri.hasAttribute("listReversed")&&(Fe.removeAttribute("listReversed",ri),ut=!0),ri.hasAttribute("listStart")&&(Fe.removeAttribute("listStart",ri),ut=!0);for(const vi of Array.from(Ne.createRangeIn(ri)).filter(Vi=>Vi.item.is("element","listItem")))vt(vi.previousPosition)}vt(xt.position.getShiftedBy(xt.length))}else xt.type=="remove"&&xt.name=="listItem"?vt(xt.position):(xt.type=="attribute"&&xt.attributeKey=="listIndent"||xt.type=="attribute"&&xt.attributeKey=="listType")&&vt(xt.range.start);for(const xt of gt.values())Ot(xt),ei(xt);return ut;function vt(xt){const ri=xt.nodeBefore;if(ri&&ri.is("element","listItem")){let vi=ri;if(gt.has(vi))return;for(let Vi=vi.previousSibling;Vi&&Vi.is("element","listItem");Vi=vi.previousSibling)if(vi=Vi,gt.has(vi))return;gt.set(ri,vi)}else{const vi=xt.nodeAfter;vi&&vi.is("element","listItem")&&gt.set(vi,vi)}}function Ot(xt){let ri=0,vi=null;for(;xt&&xt.is("element","listItem");){const Vi=xt.getAttribute("listIndent");if(Vi>ri){let Wi;vi===null?(vi=Vi-ri,Wi=ri):(vi>Vi&&(vi=Vi),Wi=Vi-vi),Fe.setAttribute("listIndent",Wi,xt),ut=!0}else vi=null,ri=xt.getAttribute("listIndent")+1;xt=xt.nextSibling}}function ei(xt){let ri=[],vi=null;for(;xt&&xt.is("element","listItem");){const Vi=xt.getAttribute("listIndent");if(vi&&vi.getAttribute("listIndent")>Vi&&(ri=ri.slice(0,Vi+1)),Vi!=0)if(ri[Vi]){const Wi=ri[Vi];xt.getAttribute("listType")!=Wi&&(Fe.setAttribute("listType",Wi,xt),ut=!0)}else ri[Vi]=xt.getAttribute("listType");vi=xt,xt=xt.nextSibling}}}(j.model,ze)),ue.mapper.registerViewToModelLength("li",wi),ie.mapper.registerViewToModelLength("li",wi),ue.mapper.on("modelToViewPosition",Q(ue.view)),ue.mapper.on("viewToModelPosition",(Ee=j.model,(ze,Ne)=>{const Fe=Ne.viewPosition,lt=Fe.parent,gt=Ne.mapper;if(lt.name=="ul"||lt.name=="ol"){if(Fe.isAtEnd){const ut=gt.toModelElement(Fe.nodeBefore),vt=gt.getModelLength(Fe.nodeBefore);Ne.modelPosition=Ee.createPositionBefore(ut).getShiftedBy(vt)}else{const ut=gt.toModelElement(Fe.nodeAfter);Ne.modelPosition=Ee.createPositionBefore(ut)}ze.stop()}else if(lt.name=="li"&&Fe.nodeBefore&&(Fe.nodeBefore.name=="ul"||Fe.nodeBefore.name=="ol")){const ut=gt.toModelElement(lt);let vt=1,Ot=Fe.nodeBefore;for(;Ot&&Pt(Ot);)vt+=gt.getModelLength(Ot),Ot=Ot.previousSibling;Ne.modelPosition=Ee.createPositionBefore(ut).getShiftedBy(vt),ze.stop()}})),ie.mapper.on("modelToViewPosition",Q(ue.view)),j.conversion.for("editingDowncast").add(ze=>{ze.on("insert",Wt,{priority:"high"}),ze.on("insert:listItem",zi(j.model)),ze.on("attribute:listType:listItem",Oi,{priority:"high"}),ze.on("attribute:listType:listItem",Ui,{priority:"low"}),ze.on("attribute:listIndent:listItem",function(Ne){return(Fe,lt,gt)=>{if(!gt.consumable.consume(lt.item,"attribute:listIndent"))return;const ut=gt.mapper.toViewElement(lt.item),vt=gt.writer;vt.breakContainer(vt.createPositionBefore(ut)),vt.breakContainer(vt.createPositionAfter(ut));const Ot=ut.parent,ei=Ot.previousSibling,xt=vt.createRangeOn(Ot);vt.remove(xt),ei&&ei.nextSibling&&wt(vt,ei,ei.nextSibling),rt(lt.attributeOldValue+1,lt.range.start,xt.start,ut,gt,Ne),Dt(lt.item,ut,gt,Ne);for(const ri of lt.item.getChildren())gt.consumable.consume(ri,"insert")}}(j.model)),ze.on("remove:listItem",function(Ne){return(Fe,lt,gt)=>{const ut=gt.mapper.toViewPosition(lt.position).getLastMatchingPosition(vi=>!vi.item.is("element","li")).nodeAfter,vt=gt.writer;vt.breakContainer(vt.createPositionBefore(ut)),vt.breakContainer(vt.createPositionAfter(ut));const Ot=ut.parent,ei=Ot.previousSibling,xt=vt.createRangeOn(Ot),ri=vt.remove(xt);ei&&ei.nextSibling&&wt(vt,ei,ei.nextSibling),rt(gt.mapper.toModelElement(ut).getAttribute("listIndent")+1,lt.position,xt.start,ut,gt,Ne);for(const vi of vt.createRangeIn(ri).getItems())gt.mapper.unbindViewElement(vi);Fe.stop()}}(j.model)),ze.on("remove",we,{priority:"low"})}),j.conversion.for("dataDowncast").add(ze=>{ze.on("insert",Wt,{priority:"high"}),ze.on("insert:listItem",zi(j.model))}),j.conversion.for("upcast").add(ze=>{ze.on("element:ul",J,{priority:"high"}),ze.on("element:ol",J,{priority:"high"}),ze.on("element:li",R,{priority:"high"}),ze.on("element:li",He)}),j.model.on("insertContent",ve,{priority:"high"}),j.commands.add("numberedList",new Ut(j,"numbered")),j.commands.add("bulletedList",new Ut(j,"bulleted")),j.commands.add("indentList",new Ni(j,"forward")),j.commands.add("outdentList",new Ni(j,"backward"));const Re=ue.view.document;this.listenTo(Re,"enter",(ze,Ne)=>{const Fe=this.editor.model.document,lt=Fe.selection.getLastPosition().parent;Fe.selection.isCollapsed&&lt.name=="listItem"&&lt.isEmpty&&(this.editor.execute("outdentList"),Ne.preventDefault(),ze.stop())},{context:"li"}),this.listenTo(Re,"delete",(ze,Ne)=>{if(Ne.direction!=="backward")return;const Fe=this.editor.model.document.selection;if(!Fe.isCollapsed)return;const lt=Fe.getFirstPosition();if(!lt.isAtStart)return;const gt=lt.parent;gt.name==="listItem"&&(gt.previousSibling&&gt.previousSibling.name==="listItem"||(this.editor.execute("outdentList"),Ne.preventDefault(),ze.stop()))},{context:"li"}),this.listenTo(j.editing.view.document,"tab",(ze,Ne)=>{const Fe=Ne.shiftKey?"outdentList":"indentList";this.editor.commands.get(Fe).isEnabled&&(j.execute(Fe),Ne.stopPropagation(),Ne.preventDefault(),ze.stop())},{context:"li"})}afterInit(){const j=this.editor.commands,ie=j.get("indent"),ue=j.get("outdent");ie&&ie.registerChildCommand(j.get("indentList")),ue&&ue.registerChildCommand(j.get("outdentList"))}}function wi(Be){let j=1;for(const ie of Be.getChildren())if(ie.name=="ul"||ie.name=="ol")for(const ue of ie.getChildren())j+=wi(ue);return j}class mt extends m.Plugin{static get requires(){return[ai,oi]}static get pluginName(){return"List"}}class U extends m.Command{constructor(j,ie){super(j),this.defaultType=ie}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(j={}){this._tryToConvertItemsToList(j);const ie=this.editor.model,ue=je(ie);ue.length&&ie.change(Ee=>{for(const Re of ue)Ee.setAttribute("listStyle",j.type||this.defaultType,Re)})}_getValue(){const j=this.editor.model.document.selection.getFirstPosition().parent;return j&&j.is("element","listItem")?j.getAttribute("listStyle"):null}_checkEnabled(){const j=this.editor,ie=j.commands.get("numberedList"),ue=j.commands.get("bulletedList");return ie.isEnabled||ue.isEnabled}_tryToConvertItemsToList(j){if(!j.type)return;const ie=Ct(j.type);if(!ie)return;const ue=this.editor,Ee=`${ie}List`;ue.commands.get(Ee).value||ue.execute(Ee)}}class se extends m.Command{refresh(){const j=this._getValue();this.value=j,this.isEnabled=j!=null}execute(j={}){const ie=this.editor.model,ue=je(ie).filter(Ee=>Ee.getAttribute("listType")=="numbered");ie.change(Ee=>{for(const Re of ue)Ee.setAttribute("listReversed",!!j.reversed,Re)})}_getValue(){const j=this.editor.model.document.selection.getFirstPosition().parent;return j&&j.is("element","listItem")&&j.getAttribute("listType")=="numbered"?j.getAttribute("listReversed"):null}}class Te extends m.Command{refresh(){const j=this._getValue();this.value=j,this.isEnabled=j!=null}execute({startIndex:j=1}={}){const ie=this.editor.model,ue=je(ie).filter(Ee=>Ee.getAttribute("listType")=="numbered");ie.change(Ee=>{for(const Re of ue)Ee.setAttribute("listStart",j>=0?j:1,Re)})}_getValue(){const j=this.editor.model.document.selection.getFirstPosition().parent;return j&&j.is("element","listItem")&&j.getAttribute("listType")=="numbered"?j.getAttribute("listStart"):null}}const Le="default";class Ye extends m.Plugin{static get requires(){return[ai]}static get pluginName(){return"ListPropertiesEditing"}constructor(j){super(j),j.config.define("list",{properties:{styles:!0,startIndex:!1,reversed:!1}})}init(){const j=this.editor,ie=j.model,ue=function(Re){const ze=[];return Re.styles&&ze.push({attributeName:"listStyle",defaultValue:Le,addCommand(Ne){Ne.commands.add("listStyle",new U(Ne,Le))},appliesToListItem:()=>!0,setAttributeOnDowncast(Ne,Fe,lt){Fe&&Fe!==Le?Ne.setStyle("list-style-type",Fe,lt):Ne.removeStyle("list-style-type",lt)},getAttributeOnUpcast:Ne=>Ne.getStyle("list-style-type")||Le}),Re.reversed&&ze.push({attributeName:"listReversed",defaultValue:!1,addCommand(Ne){Ne.commands.add("listReversed",new se(Ne))},appliesToListItem:Ne=>Ne.getAttribute("listType")=="numbered",setAttributeOnDowncast(Ne,Fe,lt){Fe?Ne.setAttribute("reversed","reversed",lt):Ne.removeAttribute("reversed",lt)},getAttributeOnUpcast:Ne=>Ne.hasAttribute("reversed")}),Re.startIndex&&ze.push({attributeName:"listStart",defaultValue:1,addCommand(Ne){Ne.commands.add("listStart",new Te(Ne))},appliesToListItem:Ne=>Ne.getAttribute("listType")=="numbered",setAttributeOnDowncast(Ne,Fe,lt){Fe==0||Fe>1?Ne.setAttribute("start",Fe,lt):Ne.removeAttribute("start",lt)},getAttributeOnUpcast(Ne){const Fe=Ne.getAttribute("start");return Fe>=0?Fe:1}}),ze}(j.config.get("list.properties"));ie.schema.extend("listItem",{allowAttributes:ue.map(Re=>Re.attributeName)});for(const Re of ue)Re.addCommand(j);var Ee;this.listenTo(j.commands.get("indentList"),"_executeCleanup",function(Re,ze){return(Ne,Fe)=>{const lt=Fe[0],gt=lt.getAttribute("listIndent"),ut=Fe.filter(Ot=>Ot.getAttribute("listIndent")===gt);let vt=null;lt.previousSibling.getAttribute("listIndent")+1!==gt&&(vt=di(lt.previousSibling,{sameIndent:!0,direction:"backward",listIndent:gt})),Re.model.change(Ot=>{for(const ei of ut)for(const xt of ze)if(xt.appliesToListItem(ei)){const ri=vt==null?xt.defaultValue:vt.getAttribute(xt.attributeName);Ot.setAttribute(xt.attributeName,ri,ei)}})}}(j,ue)),this.listenTo(j.commands.get("outdentList"),"_executeCleanup",function(Re,ze){return(Ne,Fe)=>{if(!(Fe=Fe.reverse().filter(vt=>vt.is("element","listItem"))).length)return;const lt=Fe[0].getAttribute("listIndent"),gt=Fe[0].getAttribute("listType");let ut=Fe[0].previousSibling;if(ut.is("element","listItem"))for(;ut.getAttribute("listIndent")!==lt;)ut=ut.previousSibling;else ut=null;ut||(ut=Fe[Fe.length-1].nextSibling),ut&&ut.is("element","listItem")&&ut.getAttribute("listType")===gt&&Re.model.change(vt=>{const Ot=Fe.filter(ei=>ei.getAttribute("listIndent")===lt);for(const ei of Ot)for(const xt of ze)if(xt.appliesToListItem(ei)){const ri=xt.attributeName,vi=ut.getAttribute(ri);vt.setAttribute(ri,vi,ei)}})}}(j,ue)),this.listenTo(j.commands.get("bulletedList"),"_executeCleanup",_t(j)),this.listenTo(j.commands.get("numberedList"),"_executeCleanup",_t(j)),ie.document.registerPostFixer(function(Re,ze){return Ne=>{let Fe=!1;const lt=Rt(Re.model.document.differ.getChanges()).filter(ut=>ut.getAttribute("listType")!=="todo");if(!lt.length)return Fe;let gt=lt[lt.length-1].nextSibling;if((!gt||!gt.is("element","listItem"))&&(gt=lt[0].previousSibling,gt)){const ut=lt[0].getAttribute("listIndent");for(;gt.is("element","listItem")&&gt.getAttribute("listIndent")!==ut&&(gt=gt.previousSibling,gt););}for(const ut of ze){const vt=ut.attributeName;for(const Ot of lt)if(ut.appliesToListItem(Ot))if(Ot.hasAttribute(vt)){const ei=Ot.previousSibling;At(ei,Ot,ut.attributeName)&&(Ne.setAttribute(vt,ei.getAttribute(vt),Ot),Fe=!0)}else Je(gt,Ot,ut)?Ne.setAttribute(vt,gt.getAttribute(vt),Ot):Ne.setAttribute(vt,ut.defaultValue,Ot),Fe=!0;else Ne.removeAttribute(vt,Ot)}return Fe}}(j,ue)),j.conversion.for("upcast").add((Ee=ue,Re=>{Re.on("element:li",(ze,Ne,Fe)=>{const lt=Ne.viewItem.parent,gt=Ne.modelRange.start.nodeAfter||Ne.modelRange.end.nodeBefore;for(const ut of Ee)if(ut.appliesToListItem(gt)){const vt=ut.getAttributeOnUpcast(lt);Fe.writer.setAttribute(ut.attributeName,vt,gt)}},{priority:"low"})})),j.conversion.for("downcast").add(function(Re){return Ne=>{for(const Fe of Re)Ne.on(`attribute:${Fe.attributeName}:listItem`,(lt,gt,ut)=>{const vt=ut.writer,Ot=gt.item,ei=di(Ot.previousSibling,{sameIndent:!0,listIndent:Ot.getAttribute("listIndent"),direction:"backward"}),xt=ut.mapper.toViewElement(Ot);ze(Ot,ei)||vt.breakContainer(vt.createPositionBefore(xt)),Fe.setAttributeOnDowncast(vt,gt.attributeNewValue,xt.parent)},{priority:"low"})};function ze(Ne,Fe){return Fe&&Ne.getAttribute("listType")===Fe.getAttribute("listType")&&Ne.getAttribute("listIndent")===Fe.getAttribute("listIndent")&&Ne.getAttribute("listStyle")===Fe.getAttribute("listStyle")&&Ne.getAttribute("listReversed")===Fe.getAttribute("listReversed")&&Ne.getAttribute("listStart")===Fe.getAttribute("listStart")}}(ue)),this._mergeListAttributesWhileMergingLists(ue)}afterInit(){const j=this.editor;j.commands.get("todoList")&&j.model.document.registerPostFixer(function(ie){return ue=>{const Ee=Rt(ie.model.document.differ.getChanges()).filter(Re=>Re.getAttribute("listType")==="todo"&&(Re.hasAttribute("listStyle")||Re.hasAttribute("listReversed")||Re.hasAttribute("listStart")));if(!Ee.length)return!1;for(const Re of Ee)ue.removeAttribute("listStyle",Re),ue.removeAttribute("listReversed",Re),ue.removeAttribute("listStart",Re);return!0}}(j))}_mergeListAttributesWhileMergingLists(j){const ie=this.editor.model;let ue;this.listenTo(ie,"deleteContent",(Ee,[Re])=>{const ze=Re.getFirstPosition(),Ne=Re.getLastPosition();if(ze.parent===Ne.parent||!ze.parent.is("element","listItem"))return;const Fe=Ne.parent.nextSibling;if(!Fe||!Fe.is("element","listItem"))return;const lt=di(ze.parent,{sameIndent:!0,listIndent:Fe.getAttribute("listIndent")});lt&&lt.getAttribute("listType")===Fe.getAttribute("listType")&&(ue=lt)},{priority:"high"}),this.listenTo(ie,"deleteContent",()=>{ue&&(ie.change(Ee=>{const Re=di(ue.nextSibling,{sameIndent:!0,listIndent:ue.getAttribute("listIndent"),direction:"forward"});if(!Re)return void(ue=null);const ze=[Re,...fe(Ee.createPositionAt(Re,0),"forward")];for(const Ne of ze)for(const Fe of j)if(Fe.appliesToListItem(Ne)){const lt=Fe.attributeName,gt=ue.getAttribute(lt);Ee.setAttribute(lt,gt,Ne)}}),ue=null)},{priority:"low"})}}function Je(Be,j,ie){if(!Be)return!1;const ue=Be.getAttribute(ie.attributeName);return!!ue&&ue!=ie.defaultValue&&Be.getAttribute("listType")===j.getAttribute("listType")}function At(Be,j,ie){if(!Be||!Be.is("element","listItem")||j.getAttribute("listType")!==Be.getAttribute("listType"))return!1;const ue=Be.getAttribute("listIndent");if(ue<1||ue!==j.getAttribute("listIndent"))return!1;const Ee=Be.getAttribute(ie);return!(!Ee||Ee===j.getAttribute(ie))}function _t(Be){return(j,ie)=>{ie=ie.filter(ue=>ue.is("element","listItem")),Be.model.change(ue=>{for(const Ee of ie)ue.removeAttribute("listStyle",Ee)})}}function Rt(Be){const j=[];for(const ie of Be){const ue=Vt(ie);ue&&ue.is("element","listItem")&&j.push(ue)}return j}function Vt(Be){return Be.type==="attribute"?Be.range.start.nodeAfter:Be.type==="insert"?Be.position.nodeAfter:null}class $t extends m.Plugin{static get requires(){return[Ye,at]}static get pluginName(){return"ListProperties"}}const li="todoListChecked";class Ci extends m.Command{constructor(j){super(j),this._selectedElements=[],this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){this._selectedElements=this._getSelectedItems(),this.value=this._selectedElements.every(j=>!!j.getAttribute(li)),this.isEnabled=!!this._selectedElements.length}_getSelectedItems(){const j=this.editor.model,ie=j.schema,ue=j.document.selection.getFirstRange(),Ee=ue.start.parent,Re=[];ie.checkAttribute(Ee,li)&&Re.push(Ee);for(const ze of ue.getItems())ie.checkAttribute(ze,li)&&!Re.includes(ze)&&Re.push(ze);return Re}execute(j={}){this.editor.model.change(ie=>{for(const ue of this._selectedElements)(j.forceValue===void 0?!this.value:j.forceValue)?ie.setAttribute(li,!0,ue):ie.removeAttribute(li,ue)})}}const hi=(Be,j,ie)=>{const ue=j.modelCursor,Ee=ue.parent,Re=j.viewItem;if(Re.getAttribute("type")!="checkbox"||Ee.name!="listItem"||!ue.isAtStart||!ie.consumable.consume(Re,{name:!0}))return;const ze=ie.writer;ze.setAttribute("listType","todo",Ee),j.viewItem.hasAttribute("checked")&&ze.setAttribute("todoListChecked",!0,Ee),j.modelRange=ze.createRange(ue)};function Fi(Be){return(j,ie)=>{const ue=ie.modelPosition,Ee=ue.parent;if(!Ee.is("element","listItem")||Ee.getAttribute("listType")!="todo")return;const Re=an(ie.mapper.toViewElement(Ee),Be);Re&&(ie.viewPosition=ie.mapper.findPositionIn(Re,ue.offset))}}function un(Be,j,ie,ue){return j.createUIElement("label",{class:"todo-list__label",contenteditable:!1},function(Ee){const Re=(0,f.createElement)(document,"input",{type:"checkbox",tabindex:"-1"});ie&&Re.setAttribute("checked","checked"),Re.addEventListener("change",()=>ue(Be));const ze=this.toDomElement(Ee);return ze.appendChild(Re),ze})}function an(Be,j){const ie=j.createRangeIn(Be);for(const ue of ie)if(ue.item.is("containerElement","span")&&ue.item.hasClass("todo-list__label__description"))return ue.item}const Cn=(0,f.parseKeystroke)("Ctrl+Enter");class fn extends m.Plugin{static get pluginName(){return"TodoListEditing"}static get requires(){return[ai]}init(){const j=this.editor,{editing:ie,data:ue,model:Ee}=j;Ee.schema.extend("listItem",{allowAttributes:["todoListChecked"]}),Ee.schema.addAttributeCheck((lt,gt)=>{const ut=lt.last;if(gt=="todoListChecked"&&ut.name=="listItem"&&ut.getAttribute("listType")!="todo")return!1}),j.commands.add("todoList",new Ut(j,"todo"));const Re=new Ci(j);var ze,Ne;j.commands.add("checkTodoList",Re),j.commands.add("todoListCheck",Re),ue.downcastDispatcher.on("insert:listItem",function(lt){return(gt,ut,vt)=>{const Ot=vt.consumable;if(!Ot.test(ut.item,"insert")||!Ot.test(ut.item,"attribute:listType")||!Ot.test(ut.item,"attribute:listIndent")||ut.item.getAttribute("listType")!="todo")return;const ei=ut.item;Ot.consume(ei,"insert"),Ot.consume(ei,"attribute:listType"),Ot.consume(ei,"attribute:listIndent"),Ot.consume(ei,"attribute:todoListChecked");const xt=vt.writer,ri=ot(ei,vt);xt.addClass("todo-list",ri.parent);const vi=xt.createContainerElement("label",{class:"todo-list__label"}),Vi=xt.createEmptyElement("input",{type:"checkbox",disabled:"disabled"}),Wi=xt.createContainerElement("span",{class:"todo-list__label__description"});ei.getAttribute("todoListChecked")&&xt.setAttribute("checked","checked",Vi),xt.insert(xt.createPositionAt(ri,0),vi),xt.insert(xt.createPositionAt(vi,0),Vi),xt.insert(xt.createPositionAfter(Vi),Wi),Dt(ei,ri,vt,lt)}}(Ee),{priority:"high"}),ue.upcastDispatcher.on("element:input",hi,{priority:"high"}),ie.downcastDispatcher.on("insert:listItem",function(lt,gt){return(ut,vt,Ot)=>{const ei=Ot.consumable;if(!ei.test(vt.item,"insert")||!ei.test(vt.item,"attribute:listType")||!ei.test(vt.item,"attribute:listIndent")||vt.item.getAttribute("listType")!="todo")return;const xt=vt.item;ei.consume(xt,"insert"),ei.consume(xt,"attribute:listType"),ei.consume(xt,"attribute:listIndent"),ei.consume(xt,"attribute:todoListChecked");const ri=Ot.writer,vi=ot(xt,Ot),Vi=!!xt.getAttribute("todoListChecked"),Wi=un(xt,ri,Vi,gt),tn=ri.createContainerElement("span",{class:"todo-list__label__description"});ri.addClass("todo-list",vi.parent),ri.insert(ri.createPositionAt(vi,0),Wi),ri.insert(ri.createPositionAfter(Wi),tn),Dt(xt,vi,Ot,lt)}}(Ee,lt=>this._handleCheckmarkChange(lt)),{priority:"high"}),ie.downcastDispatcher.on("attribute:listType:listItem",(ze=lt=>this._handleCheckmarkChange(lt),Ne=ie.view,(lt,gt,ut)=>{if(!ut.consumable.consume(gt.item,lt.name))return;const vt=ut.mapper.toViewElement(gt.item),Ot=ut.writer,ei=function(xt,ri){const vi=ri.createRangeIn(xt);for(const Vi of vi)if(Vi.item.is("uiElement","label"))return Vi.item}(vt,Ne);if(gt.attributeNewValue=="todo"){const xt=!!gt.item.getAttribute("todoListChecked"),ri=un(gt.item,Ot,xt,ze),vi=Ot.createContainerElement("span",{class:"todo-list__label__description"}),Vi=Ot.createRangeIn(vt),Wi=bt(vt),tn=ni(Vi.start),bn=Wi?Ot.createPositionBefore(Wi):Vi.end,Pe=Ot.createRange(tn,bn);Ot.addClass("todo-list",vt.parent),Ot.move(Pe,Ot.createPositionAt(vi,0)),Ot.insert(Ot.createPositionAt(vt,0),ri),Ot.insert(Ot.createPositionAfter(ri),vi)}else if(gt.attributeOldValue=="todo"){const xt=an(vt,Ne);Ot.removeClass("todo-list",vt.parent),Ot.remove(ei),Ot.move(Ot.createRangeIn(xt),Ot.createPositionBefore(xt)),Ot.remove(xt)}})),ie.downcastDispatcher.on("attribute:todoListChecked:listItem",function(lt){return(gt,ut,vt)=>{if(ut.item.getAttribute("listType")!="todo"||!vt.consumable.consume(ut.item,"attribute:todoListChecked"))return;const{mapper:Ot,writer:ei}=vt,xt=!!ut.item.getAttribute("todoListChecked"),ri=Ot.toViewElement(ut.item).getChild(0),vi=un(ut.item,ei,xt,lt);ei.insert(ei.createPositionAfter(ri),vi),ei.remove(ri)}}(lt=>this._handleCheckmarkChange(lt))),ie.mapper.on("modelToViewPosition",Fi(ie.view)),ue.mapper.on("modelToViewPosition",Fi(ie.view)),this.listenTo(ie.view.document,"arrowKey",function(lt,gt){return(ut,vt)=>{if((0,f.getLocalizedArrowKeyCodeDirection)(vt.keyCode,gt.contentLanguageDirection)!="left")return;const Ot=lt.schema,ei=lt.document.selection;if(!ei.isCollapsed)return;const xt=ei.getFirstPosition(),ri=xt.parent;if(ri.name==="listItem"&&ri.getAttribute("listType")=="todo"&&xt.isAtStart){const vi=Ot.getNearestSelectionRange(lt.createPositionBefore(ri),"backward");vi&&lt.change(Vi=>Vi.setSelection(vi)),vt.preventDefault(),vt.stopPropagation(),ut.stop()}}}(Ee,j.locale),{context:"li"}),this.listenTo(ie.view.document,"keydown",(lt,gt)=>{(0,f.getCode)(gt)===Cn&&(j.execute("checkTodoList"),lt.stop())},{priority:"high"});const Fe=new Set;this.listenTo(Ee,"applyOperation",(lt,gt)=>{const ut=gt[0];if(ut.type=="rename"&&ut.oldName=="listItem"){const vt=ut.position.nodeAfter;vt.hasAttribute("todoListChecked")&&Fe.add(vt)}else if(ut.type=="changeAttribute"&&ut.key=="listType"&&ut.oldValue==="todo")for(const vt of ut.range.getItems())vt.hasAttribute("todoListChecked")&&vt.getAttribute("listType")!=="todo"&&Fe.add(vt)}),Ee.document.registerPostFixer(lt=>{let gt=!1;for(const ut of Fe)lt.removeAttribute("todoListChecked",ut),gt=!0;return Fe.clear(),gt})}_handleCheckmarkChange(j){const ie=this.editor,ue=ie.model,Ee=Array.from(ue.document.selection.getRanges());ue.change(Re=>{Re.setSelection(j,"end"),ie.execute("checkTodoList"),Re.setSelection(Ee)})}}class Tn extends m.Plugin{static get pluginName(){return"TodoListUI"}init(){const j=this.editor.t;xi(this.editor,"todoList",j("To-do List"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>')}}var In=Y(250),Dn={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};tt()(In.Z,Dn),In.Z.locals;class Fn extends m.Plugin{static get requires(){return[fn,Tn]}static get pluginName(){return"TodoList"}}})(),(window.CKEditor5=window.CKEditor5||{}).list=Qt})()},31546:()=>{/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(()=>{var ii={704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},492:(m,E,y)=>{m.exports=y(79)("./src/engine.js")},79:m=>{"use strict";m.exports=CKEditor5.dll},915:()=>{}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{Markdown:()=>Ki});var m=Y(704),E=Y(492);function y(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let f={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const v=/[&<>"']/,a=/[&<>"']/g,d=/[<>"']|&(?!#?\w+;)/,A=/[<>"']|&(?!#?\w+;)/g,H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},I=ke=>H[ke];function C(ke,V){if(V){if(v.test(ke))return ke.replace(a,I)}else if(d.test(ke))return ke.replace(A,I);return ke}const me=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function pe(ke){return ke.replace(me,(V,F)=>(F=F.toLowerCase())==="colon"?":":F.charAt(0)==="#"?F.charAt(1)==="x"?String.fromCharCode(parseInt(F.substring(2),16)):String.fromCharCode(+F.substring(1)):"")}const ge=/(^|[^\[])\^/g;function X(ke,V){ke=ke.source||ke,V=V||"";const F={replace:(P,N)=>(N=(N=N.source||N).replace(ge,"$1"),ke=ke.replace(P,N),F),getRegex:()=>new RegExp(ke,V)};return F}const te=/[^\w:]/g,Z=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function h(ke,V,F){if(ke){let P;try{P=decodeURIComponent(pe(F)).replace(te,"").toLowerCase()}catch{return null}if(P.indexOf("javascript:")===0||P.indexOf("vbscript:")===0||P.indexOf("data:")===0)return null}V&&!Z.test(F)&&(F=function(P,N){g[" "+P]||(r.test(P)?g[" "+P]=P+"/":g[" "+P]=L(P,"/",!0)),P=g[" "+P];const de=P.indexOf(":")===-1;return N.substring(0,2)==="//"?de?N:P.replace(u,"$1")+N:N.charAt(0)==="/"?de?N:P.replace(w,"$1")+N:P+N}(V,F));try{F=encodeURI(F).replace(/%25/g,"%")}catch{return null}return F}const g={},r=/^[^:]+:\/*[^/]*$/,u=/^([^:]+:)[\s\S]*$/,w=/^([^:]+:\/*[^/]*)[\s\S]*$/,_={exec:function(){}};function T(ke){let V,F,P=1;for(;P<arguments.length;P++)for(F in V=arguments[P],V)Object.prototype.hasOwnProperty.call(V,F)&&(ke[F]=V[F]);return ke}function z(ke,V){const F=ke.replace(/\|/g,(N,de,Ce)=>{let $e=!1,at=de;for(;--at>=0&&Ce[at]==="\\";)$e=!$e;return $e?"|":" |"}).split(/ \|/);let P=0;if(F[0].trim()||F.shift(),F.length>0&&!F[F.length-1].trim()&&F.pop(),F.length>V)F.splice(V);else for(;F.length<V;)F.push("");for(;P<F.length;P++)F[P]=F[P].trim().replace(/\\\|/g,"|");return F}function L(ke,V,F){const P=ke.length;if(P===0)return"";let N=0;for(;N<P;){const de=ke.charAt(P-N-1);if(de!==V||F){if(de===V||!F)break;N++}else N++}return ke.substr(0,P-N)}function x(ke){ke&&ke.sanitize&&!ke.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function c(ke,V){if(V<1)return"";let F="";for(;V>1;)1&V&&(F+=ke),V>>=1,ke+=ke;return F+ke}function D(ke,V,F,P){const N=V.href,de=V.title?C(V.title):null,Ce=ke[1].replace(/\\([\[\]])/g,"$1");if(ke[0].charAt(0)!=="!"){P.state.inLink=!0;const $e={type:"link",raw:F,href:N,title:de,text:Ce,tokens:P.inlineTokens(Ce,[])};return P.state.inLink=!1,$e}return{type:"image",raw:F,href:N,title:de,text:C(Ce)}}class W{constructor(V){this.options=V||f}space(V){const F=this.rules.block.newline.exec(V);if(F&&F[0].length>0)return{type:"space",raw:F[0]}}code(V){const F=this.rules.block.code.exec(V);if(F){const P=F[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:F[0],codeBlockStyle:"indented",text:this.options.pedantic?P:L(P,`
`)}}}fences(V){const F=this.rules.block.fences.exec(V);if(F){const P=F[0],N=function(de,Ce){const $e=de.match(/^(\s+)(?:```)/);if($e===null)return Ce;const at=$e[1];return Ce.split(`
`).map(Tt=>{const Ge=Tt.match(/^\s+/);if(Ge===null)return Tt;const[Ut]=Ge;return Ut.length>=at.length?Tt.slice(at.length):Tt}).join(`
`)}(P,F[3]||"");return{type:"code",raw:P,lang:F[2]?F[2].trim():F[2],text:N}}}heading(V){const F=this.rules.block.heading.exec(V);if(F){let P=F[2].trim();if(/#$/.test(P)){const de=L(P,"#");this.options.pedantic?P=de.trim():de&&!/ $/.test(de)||(P=de.trim())}const N={type:"heading",raw:F[0],depth:F[1].length,text:P,tokens:[]};return this.lexer.inline(N.text,N.tokens),N}}hr(V){const F=this.rules.block.hr.exec(V);if(F)return{type:"hr",raw:F[0]}}blockquote(V){const F=this.rules.block.blockquote.exec(V);if(F){const P=F[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:F[0],tokens:this.lexer.blockTokens(P,[]),text:P}}}list(V){let F=this.rules.block.list.exec(V);if(F){let P,N,de,Ce,$e,at,Tt,Ge,Ut,ci,yi,Ni,Ii=F[1].trim();const zi=Ii.length>1,Oi={type:"list",raw:"",ordered:zi,start:zi?+Ii.slice(0,-1):"",loose:!1,items:[]};Ii=zi?`\\d{1,9}\\${Ii.slice(-1)}`:`\\${Ii}`,this.options.pedantic&&(Ii=zi?Ii:"[*+-]");const Ui=new RegExp(`^( {0,3}${Ii})((?: [^\\n]*)?(?:\\n|$))`);for(;V&&(Ni=!1,F=Ui.exec(V))&&!this.rules.block.hr.test(V);){if(P=F[0],V=V.substring(P.length),Ge=F[2].split(`
`,1)[0],Ut=V.split(`
`,1)[0],this.options.pedantic?(Ce=2,yi=Ge.trimLeft()):(Ce=F[2].search(/[^ ]/),Ce=Ce>4?1:Ce,yi=Ge.slice(Ce),Ce+=F[1].length),at=!1,!Ge&&/^ *$/.test(Ut)&&(P+=Ut+`
`,V=V.substring(Ut.length+1),Ni=!0),!Ni){const we=new RegExp(`^ {0,${Math.min(3,Ce-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;V&&(ci=V.split(`
`,1)[0],Ge=ci,this.options.pedantic&&(Ge=Ge.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!we.test(Ge));){if(Ge.search(/[^ ]/)>=Ce||!Ge.trim())yi+=`
`+Ge.slice(Ce);else{if(at)break;yi+=`
`+Ge}at||Ge.trim()||(at=!0),P+=ci+`
`,V=V.substring(ci.length+1)}}Oi.loose||(Tt?Oi.loose=!0:/\n *\n *$/.test(P)&&(Tt=!0)),this.options.gfm&&(N=/^\[[ xX]\] /.exec(yi),N&&(de=N[0]!=="[ ] ",yi=yi.replace(/^\[[ xX]\] +/,""))),Oi.items.push({type:"list_item",raw:P,task:!!N,checked:de,loose:!1,text:yi}),Oi.raw+=P}Oi.items[Oi.items.length-1].raw=P.trimRight(),Oi.items[Oi.items.length-1].text=yi.trimRight(),Oi.raw=Oi.raw.trimRight();const Wt=Oi.items.length;for($e=0;$e<Wt;$e++){this.lexer.state.top=!1,Oi.items[$e].tokens=this.lexer.blockTokens(Oi.items[$e].text,[]);const we=Oi.items[$e].tokens.filter(J=>J.type==="space"),He=we.every(J=>{const R=J.raw.split("");let Q=0;for(const ve of R)if(ve===`
`&&(Q+=1),Q>1)return!0;return!1});!Oi.loose&&we.length&&He&&(Oi.loose=!0,Oi.items[$e].loose=!0)}return Oi}}html(V){const F=this.rules.block.html.exec(V);if(F){const P={type:"html",raw:F[0],pre:!this.options.sanitizer&&(F[1]==="pre"||F[1]==="script"||F[1]==="style"),text:F[0]};return this.options.sanitize&&(P.type="paragraph",P.text=this.options.sanitizer?this.options.sanitizer(F[0]):C(F[0]),P.tokens=[],this.lexer.inline(P.text,P.tokens)),P}}def(V){const F=this.rules.block.def.exec(V);if(F)return F[3]&&(F[3]=F[3].substring(1,F[3].length-1)),{type:"def",tag:F[1].toLowerCase().replace(/\s+/g," "),raw:F[0],href:F[2],title:F[3]}}table(V){const F=this.rules.block.table.exec(V);if(F){const P={type:"table",header:z(F[1]).map(N=>({text:N})),align:F[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:F[3]&&F[3].trim()?F[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(P.header.length===P.align.length){P.raw=F[0];let N,de,Ce,$e,at=P.align.length;for(N=0;N<at;N++)/^ *-+: *$/.test(P.align[N])?P.align[N]="right":/^ *:-+: *$/.test(P.align[N])?P.align[N]="center":/^ *:-+ *$/.test(P.align[N])?P.align[N]="left":P.align[N]=null;for(at=P.rows.length,N=0;N<at;N++)P.rows[N]=z(P.rows[N],P.header.length).map(Tt=>({text:Tt}));for(at=P.header.length,de=0;de<at;de++)P.header[de].tokens=[],this.lexer.inlineTokens(P.header[de].text,P.header[de].tokens);for(at=P.rows.length,de=0;de<at;de++)for($e=P.rows[de],Ce=0;Ce<$e.length;Ce++)$e[Ce].tokens=[],this.lexer.inlineTokens($e[Ce].text,$e[Ce].tokens);return P}}}lheading(V){const F=this.rules.block.lheading.exec(V);if(F){const P={type:"heading",raw:F[0],depth:F[2].charAt(0)==="="?1:2,text:F[1],tokens:[]};return this.lexer.inline(P.text,P.tokens),P}}paragraph(V){const F=this.rules.block.paragraph.exec(V);if(F){const P={type:"paragraph",raw:F[0],text:F[1].charAt(F[1].length-1)===`
`?F[1].slice(0,-1):F[1],tokens:[]};return this.lexer.inline(P.text,P.tokens),P}}text(V){const F=this.rules.block.text.exec(V);if(F){const P={type:"text",raw:F[0],text:F[0],tokens:[]};return this.lexer.inline(P.text,P.tokens),P}}escape(V){const F=this.rules.inline.escape.exec(V);if(F)return{type:"escape",raw:F[0],text:C(F[1])}}tag(V){const F=this.rules.inline.tag.exec(V);if(F)return!this.lexer.state.inLink&&/^<a /i.test(F[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(F[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(F[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(F[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:F[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(F[0]):C(F[0]):F[0]}}link(V){const F=this.rules.inline.link.exec(V);if(F){const P=F[2].trim();if(!this.options.pedantic&&/^</.test(P)){if(!/>$/.test(P))return;const Ce=L(P.slice(0,-1),"\\");if((P.length-Ce.length)%2==0)return}else{const Ce=function($e,at){if($e.indexOf(at[1])===-1)return-1;const Tt=$e.length;let Ge=0,Ut=0;for(;Ut<Tt;Ut++)if($e[Ut]==="\\")Ut++;else if($e[Ut]===at[0])Ge++;else if($e[Ut]===at[1]&&(Ge--,Ge<0))return Ut;return-1}(F[2],"()");if(Ce>-1){const $e=(F[0].indexOf("!")===0?5:4)+F[1].length+Ce;F[2]=F[2].substring(0,Ce),F[0]=F[0].substring(0,$e).trim(),F[3]=""}}let N=F[2],de="";if(this.options.pedantic){const Ce=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(N);Ce&&(N=Ce[1],de=Ce[3])}else de=F[3]?F[3].slice(1,-1):"";return N=N.trim(),/^</.test(N)&&(N=this.options.pedantic&&!/>$/.test(P)?N.slice(1):N.slice(1,-1)),D(F,{href:N&&N.replace(this.rules.inline._escapes,"$1"),title:de&&de.replace(this.rules.inline._escapes,"$1")},F[0],this.lexer)}}reflink(V,F){let P;if((P=this.rules.inline.reflink.exec(V))||(P=this.rules.inline.nolink.exec(V))){let N=(P[2]||P[1]).replace(/\s+/g," ");if(N=F[N.toLowerCase()],!N||!N.href){const de=P[0].charAt(0);return{type:"text",raw:de,text:de}}return D(P,N,P[0],this.lexer)}}emStrong(V,F,P=""){let N=this.rules.inline.emStrong.lDelim.exec(V);if(!N||N[3]&&P.match(/[\p{L}\p{N}]/u))return;const de=N[1]||N[2]||"";if(!de||de&&(P===""||this.rules.inline.punctuation.exec(P))){const Ce=N[0].length-1;let $e,at,Tt=Ce,Ge=0;const Ut=N[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Ut.lastIndex=0,F=F.slice(-1*V.length+Ce);(N=Ut.exec(F))!=null;){if($e=N[1]||N[2]||N[3]||N[4]||N[5]||N[6],!$e)continue;if(at=$e.length,N[3]||N[4]){Tt+=at;continue}if((N[5]||N[6])&&Ce%3&&!((Ce+at)%3)){Ge+=at;continue}if(Tt-=at,Tt>0)continue;if(at=Math.min(at,at+Tt+Ge),Math.min(Ce,at)%2){const yi=V.slice(1,Ce+N.index+at);return{type:"em",raw:V.slice(0,Ce+N.index+at+1),text:yi,tokens:this.lexer.inlineTokens(yi,[])}}const ci=V.slice(2,Ce+N.index+at-1);return{type:"strong",raw:V.slice(0,Ce+N.index+at+1),text:ci,tokens:this.lexer.inlineTokens(ci,[])}}}}codespan(V){const F=this.rules.inline.code.exec(V);if(F){let P=F[2].replace(/\n/g," ");const N=/[^ ]/.test(P),de=/^ /.test(P)&&/ $/.test(P);return N&&de&&(P=P.substring(1,P.length-1)),P=C(P,!0),{type:"codespan",raw:F[0],text:P}}}br(V){const F=this.rules.inline.br.exec(V);if(F)return{type:"br",raw:F[0]}}del(V){const F=this.rules.inline.del.exec(V);if(F)return{type:"del",raw:F[0],text:F[2],tokens:this.lexer.inlineTokens(F[2],[])}}autolink(V,F){const P=this.rules.inline.autolink.exec(V);if(P){let N,de;return P[2]==="@"?(N=C(this.options.mangle?F(P[1]):P[1]),de="mailto:"+N):(N=C(P[1]),de=N),{type:"link",raw:P[0],text:N,href:de,tokens:[{type:"text",raw:N,text:N}]}}}url(V,F){let P;if(P=this.rules.inline.url.exec(V)){let N,de;if(P[2]==="@")N=C(this.options.mangle?F(P[0]):P[0]),de="mailto:"+N;else{let Ce;do Ce=P[0],P[0]=this.rules.inline._backpedal.exec(P[0])[0];while(Ce!==P[0]);N=C(P[0]),de=P[1]==="www."?"http://"+N:N}return{type:"link",raw:P[0],text:N,href:de,tokens:[{type:"text",raw:N,text:N}]}}}inlineText(V,F){const P=this.rules.inline.text.exec(V);if(P){let N;return N=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(P[0]):C(P[0]):P[0]:C(this.options.smartypants?F(P[0]):P[0]),{type:"text",raw:P[0],text:N}}}}const q={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:_,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};q.def=X(q.def).replace("label",q._label).replace("title",q._title).getRegex(),q.bullet=/(?:[*+-]|\d{1,9}[.)])/,q.listItemStart=X(/^( *)(bull) */).replace("bull",q.bullet).getRegex(),q.list=X(q.list).replace(/bull/g,q.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+q.def.source+")").getRegex(),q._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",q._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,q.html=X(q.html,"i").replace("comment",q._comment).replace("tag",q._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),q.paragraph=X(q._paragraph).replace("hr",q.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",q._tag).getRegex(),q.blockquote=X(q.blockquote).replace("paragraph",q.paragraph).getRegex(),q.normal=T({},q),q.gfm=T({},q.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),q.gfm.table=X(q.gfm.table).replace("hr",q.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",q._tag).getRegex(),q.gfm.paragraph=X(q._paragraph).replace("hr",q.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",q.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",q._tag).getRegex(),q.pedantic=T({},q.normal,{html:X(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",q._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:_,paragraph:X(q.normal._paragraph).replace("hr",q.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",q.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const ae={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:_,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:_,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function Ie(ke){return ke.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Ve(ke){let V,F,P="";const N=ke.length;for(V=0;V<N;V++)F=ke.charCodeAt(V),Math.random()>.5&&(F="x"+F.toString(16)),P+="&#"+F+";";return P}ae._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",ae.punctuation=X(ae.punctuation).replace(/punctuation/g,ae._punctuation).getRegex(),ae.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,ae.escapedEmSt=/\\\*|\\_/g,ae._comment=X(q._comment).replace("(?:-->|$)","-->").getRegex(),ae.emStrong.lDelim=X(ae.emStrong.lDelim).replace(/punct/g,ae._punctuation).getRegex(),ae.emStrong.rDelimAst=X(ae.emStrong.rDelimAst,"g").replace(/punct/g,ae._punctuation).getRegex(),ae.emStrong.rDelimUnd=X(ae.emStrong.rDelimUnd,"g").replace(/punct/g,ae._punctuation).getRegex(),ae._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ae._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ae._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ae.autolink=X(ae.autolink).replace("scheme",ae._scheme).replace("email",ae._email).getRegex(),ae._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ae.tag=X(ae.tag).replace("comment",ae._comment).replace("attribute",ae._attribute).getRegex(),ae._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ae._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ae._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ae.link=X(ae.link).replace("label",ae._label).replace("href",ae._href).replace("title",ae._title).getRegex(),ae.reflink=X(ae.reflink).replace("label",ae._label).replace("ref",q._label).getRegex(),ae.nolink=X(ae.nolink).replace("ref",q._label).getRegex(),ae.reflinkSearch=X(ae.reflinkSearch,"g").replace("reflink",ae.reflink).replace("nolink",ae.nolink).getRegex(),ae.normal=T({},ae),ae.pedantic=T({},ae.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:X(/^!?\[(label)\]\((.*?)\)/).replace("label",ae._label).getRegex(),reflink:X(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ae._label).getRegex()}),ae.gfm=T({},ae.normal,{escape:X(ae.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),ae.gfm.url=X(ae.gfm.url,"i").replace("email",ae.gfm._extended_email).getRegex(),ae.breaks=T({},ae.gfm,{br:X(ae.br).replace("{2,}","*").getRegex(),text:X(ae.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class _e{constructor(V){this.tokens=[],this.tokens.links=Object.create(null),this.options=V||f,this.options.tokenizer=this.options.tokenizer||new W,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const F={block:q.normal,inline:ae.normal};this.options.pedantic?(F.block=q.pedantic,F.inline=ae.pedantic):this.options.gfm&&(F.block=q.gfm,this.options.breaks?F.inline=ae.breaks:F.inline=ae.gfm),this.tokenizer.rules=F}static get rules(){return{block:q,inline:ae}}static lex(V,F){return new _e(F).lex(V)}static lexInline(V,F){return new _e(F).inlineTokens(V)}lex(V){let F;for(V=V.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(V,this.tokens);F=this.inlineQueue.shift();)this.inlineTokens(F.src,F.tokens);return this.tokens}blockTokens(V,F=[]){let P,N,de,Ce;for(this.options.pedantic&&(V=V.replace(/^ +$/gm,""));V;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some($e=>!!(P=$e.call({lexer:this},V,F))&&(V=V.substring(P.raw.length),F.push(P),!0))))if(P=this.tokenizer.space(V))V=V.substring(P.raw.length),P.raw.length===1&&F.length>0?F[F.length-1].raw+=`
`:F.push(P);else if(P=this.tokenizer.code(V))V=V.substring(P.raw.length),N=F[F.length-1],!N||N.type!=="paragraph"&&N.type!=="text"?F.push(P):(N.raw+=`
`+P.raw,N.text+=`
`+P.text,this.inlineQueue[this.inlineQueue.length-1].src=N.text);else if(P=this.tokenizer.fences(V))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.heading(V))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.hr(V))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.blockquote(V))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.list(V))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.html(V))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.def(V))V=V.substring(P.raw.length),N=F[F.length-1],!N||N.type!=="paragraph"&&N.type!=="text"?this.tokens.links[P.tag]||(this.tokens.links[P.tag]={href:P.href,title:P.title}):(N.raw+=`
`+P.raw,N.text+=`
`+P.raw,this.inlineQueue[this.inlineQueue.length-1].src=N.text);else if(P=this.tokenizer.table(V))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.lheading(V))V=V.substring(P.raw.length),F.push(P);else{if(de=V,this.options.extensions&&this.options.extensions.startBlock){let $e=1/0;const at=V.slice(1);let Tt;this.options.extensions.startBlock.forEach(function(Ge){Tt=Ge.call({lexer:this},at),typeof Tt=="number"&&Tt>=0&&($e=Math.min($e,Tt))}),$e<1/0&&$e>=0&&(de=V.substring(0,$e+1))}if(this.state.top&&(P=this.tokenizer.paragraph(de)))N=F[F.length-1],Ce&&N.type==="paragraph"?(N.raw+=`
`+P.raw,N.text+=`
`+P.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=N.text):F.push(P),Ce=de.length!==V.length,V=V.substring(P.raw.length);else if(P=this.tokenizer.text(V))V=V.substring(P.raw.length),N=F[F.length-1],N&&N.type==="text"?(N.raw+=`
`+P.raw,N.text+=`
`+P.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=N.text):F.push(P);else if(V){const $e="Infinite loop on byte: "+V.charCodeAt(0);if(this.options.silent){console.error($e);break}throw new Error($e)}}return this.state.top=!0,F}inline(V,F){this.inlineQueue.push({src:V,tokens:F})}inlineTokens(V,F=[]){let P,N,de,Ce,$e,at,Tt=V;if(this.tokens.links){const Ge=Object.keys(this.tokens.links);if(Ge.length>0)for(;(Ce=this.tokenizer.rules.inline.reflinkSearch.exec(Tt))!=null;)Ge.includes(Ce[0].slice(Ce[0].lastIndexOf("[")+1,-1))&&(Tt=Tt.slice(0,Ce.index)+"["+c("a",Ce[0].length-2)+"]"+Tt.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Ce=this.tokenizer.rules.inline.blockSkip.exec(Tt))!=null;)Tt=Tt.slice(0,Ce.index)+"["+c("a",Ce[0].length-2)+"]"+Tt.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Ce=this.tokenizer.rules.inline.escapedEmSt.exec(Tt))!=null;)Tt=Tt.slice(0,Ce.index)+"++"+Tt.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;V;)if($e||(at=""),$e=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(Ge=>!!(P=Ge.call({lexer:this},V,F))&&(V=V.substring(P.raw.length),F.push(P),!0))))if(P=this.tokenizer.escape(V))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.tag(V))V=V.substring(P.raw.length),N=F[F.length-1],N&&P.type==="text"&&N.type==="text"?(N.raw+=P.raw,N.text+=P.text):F.push(P);else if(P=this.tokenizer.link(V))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.reflink(V,this.tokens.links))V=V.substring(P.raw.length),N=F[F.length-1],N&&P.type==="text"&&N.type==="text"?(N.raw+=P.raw,N.text+=P.text):F.push(P);else if(P=this.tokenizer.emStrong(V,Tt,at))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.codespan(V))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.br(V))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.del(V))V=V.substring(P.raw.length),F.push(P);else if(P=this.tokenizer.autolink(V,Ve))V=V.substring(P.raw.length),F.push(P);else if(this.state.inLink||!(P=this.tokenizer.url(V,Ve))){if(de=V,this.options.extensions&&this.options.extensions.startInline){let Ge=1/0;const Ut=V.slice(1);let ci;this.options.extensions.startInline.forEach(function(yi){ci=yi.call({lexer:this},Ut),typeof ci=="number"&&ci>=0&&(Ge=Math.min(Ge,ci))}),Ge<1/0&&Ge>=0&&(de=V.substring(0,Ge+1))}if(P=this.tokenizer.inlineText(de,Ie))V=V.substring(P.raw.length),P.raw.slice(-1)!=="_"&&(at=P.raw.slice(-1)),$e=!0,N=F[F.length-1],N&&N.type==="text"?(N.raw+=P.raw,N.text+=P.text):F.push(P);else if(V){const Ge="Infinite loop on byte: "+V.charCodeAt(0);if(this.options.silent){console.error(Ge);break}throw new Error(Ge)}}else V=V.substring(P.raw.length),F.push(P);return F}}class Me{constructor(V){this.options=V||f}code(V,F,P){const N=(F||"").match(/\S*/)[0];if(this.options.highlight){const de=this.options.highlight(V,N);de!=null&&de!==V&&(P=!0,V=de)}return V=V.replace(/\n$/,"")+`
`,N?'<pre><code class="'+this.options.langPrefix+C(N,!0)+'">'+(P?V:C(V,!0))+`</code></pre>
`:"<pre><code>"+(P?V:C(V,!0))+`</code></pre>
`}blockquote(V){return`<blockquote>
`+V+`</blockquote>
`}html(V){return V}heading(V,F,P,N){return this.options.headerIds?"<h"+F+' id="'+this.options.headerPrefix+N.slug(P)+'">'+V+"</h"+F+`>
`:"<h"+F+">"+V+"</h"+F+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(V,F,P){const N=F?"ol":"ul";return"<"+N+(F&&P!==1?' start="'+P+'"':"")+`>
`+V+"</"+N+`>
`}listitem(V){return"<li>"+V+`</li>
`}checkbox(V){return"<input "+(V?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(V){return"<p>"+V+`</p>
`}table(V,F){return F&&(F="<tbody>"+F+"</tbody>"),`<table>
<thead>
`+V+`</thead>
`+F+`</table>
`}tablerow(V){return`<tr>
`+V+`</tr>
`}tablecell(V,F){const P=F.header?"th":"td";return(F.align?"<"+P+' align="'+F.align+'">':"<"+P+">")+V+"</"+P+`>
`}strong(V){return"<strong>"+V+"</strong>"}em(V){return"<em>"+V+"</em>"}codespan(V){return"<code>"+V+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(V){return"<del>"+V+"</del>"}link(V,F,P){if((V=h(this.options.sanitize,this.options.baseUrl,V))===null)return P;let N='<a href="'+C(V)+'"';return F&&(N+=' title="'+F+'"'),N+=">"+P+"</a>",N}image(V,F,P){if((V=h(this.options.sanitize,this.options.baseUrl,V))===null)return P;let N='<img src="'+V+'" alt="'+P+'"';return F&&(N+=' title="'+F+'"'),N+=this.options.xhtml?"/>":">",N}text(V){return V}}class Qe{strong(V){return V}em(V){return V}codespan(V){return V}del(V){return V}html(V){return V}text(V){return V}link(V,F,P){return""+P}image(V,F,P){return""+P}br(){return""}}class dt{constructor(){this.seen={}}serialize(V){return V.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(V,F){let P=V,N=0;if(this.seen.hasOwnProperty(P)){N=this.seen[V];do N++,P=V+"-"+N;while(this.seen.hasOwnProperty(P))}return F||(this.seen[V]=N,this.seen[P]=0),P}slug(V,F={}){const P=this.serialize(V);return this.getNextSafeSlug(P,F.dryrun)}}class nt{constructor(V){this.options=V||f,this.options.renderer=this.options.renderer||new Me,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Qe,this.slugger=new dt}static parse(V,F){return new nt(F).parse(V)}static parseInline(V,F){return new nt(F).parseInline(V)}parse(V,F=!0){let P,N,de,Ce,$e,at,Tt,Ge,Ut,ci,yi,Ni,Ii,zi,Oi,Ui,Wt,we,He,J="";const R=V.length;for(P=0;P<R;P++)if(ci=V[P],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ci.type]&&(He=this.options.extensions.renderers[ci.type].call({parser:this},ci),He!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(ci.type)))J+=He||"";else switch(ci.type){case"space":continue;case"hr":J+=this.renderer.hr();continue;case"heading":J+=this.renderer.heading(this.parseInline(ci.tokens),ci.depth,pe(this.parseInline(ci.tokens,this.textRenderer)),this.slugger);continue;case"code":J+=this.renderer.code(ci.text,ci.lang,ci.escaped);continue;case"table":for(Ge="",Tt="",Ce=ci.header.length,N=0;N<Ce;N++)Tt+=this.renderer.tablecell(this.parseInline(ci.header[N].tokens),{header:!0,align:ci.align[N]});for(Ge+=this.renderer.tablerow(Tt),Ut="",Ce=ci.rows.length,N=0;N<Ce;N++){for(at=ci.rows[N],Tt="",$e=at.length,de=0;de<$e;de++)Tt+=this.renderer.tablecell(this.parseInline(at[de].tokens),{header:!1,align:ci.align[de]});Ut+=this.renderer.tablerow(Tt)}J+=this.renderer.table(Ge,Ut);continue;case"blockquote":Ut=this.parse(ci.tokens),J+=this.renderer.blockquote(Ut);continue;case"list":for(yi=ci.ordered,Ni=ci.start,Ii=ci.loose,Ce=ci.items.length,Ut="",N=0;N<Ce;N++)Oi=ci.items[N],Ui=Oi.checked,Wt=Oi.task,zi="",Oi.task&&(we=this.renderer.checkbox(Ui),Ii?Oi.tokens.length>0&&Oi.tokens[0].type==="paragraph"?(Oi.tokens[0].text=we+" "+Oi.tokens[0].text,Oi.tokens[0].tokens&&Oi.tokens[0].tokens.length>0&&Oi.tokens[0].tokens[0].type==="text"&&(Oi.tokens[0].tokens[0].text=we+" "+Oi.tokens[0].tokens[0].text)):Oi.tokens.unshift({type:"text",text:we}):zi+=we),zi+=this.parse(Oi.tokens,Ii),Ut+=this.renderer.listitem(zi,Wt,Ui);J+=this.renderer.list(Ut,yi,Ni);continue;case"html":J+=this.renderer.html(ci.text);continue;case"paragraph":J+=this.renderer.paragraph(this.parseInline(ci.tokens));continue;case"text":for(Ut=ci.tokens?this.parseInline(ci.tokens):ci.text;P+1<R&&V[P+1].type==="text";)ci=V[++P],Ut+=`
`+(ci.tokens?this.parseInline(ci.tokens):ci.text);J+=F?this.renderer.paragraph(Ut):Ut;continue;default:{const Q='Token with "'+ci.type+'" type was not found.';if(this.options.silent)return void console.error(Q);throw new Error(Q)}}return J}parseInline(V,F){F=F||this.renderer;let P,N,de,Ce="";const $e=V.length;for(P=0;P<$e;P++)if(N=V[P],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[N.type]&&(de=this.options.extensions.renderers[N.type].call({parser:this},N),de!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(N.type)))Ce+=de||"";else switch(N.type){case"escape":case"text":Ce+=F.text(N.text);break;case"html":Ce+=F.html(N.text);break;case"link":Ce+=F.link(N.href,N.title,this.parseInline(N.tokens,F));break;case"image":Ce+=F.image(N.href,N.title,N.text);break;case"strong":Ce+=F.strong(this.parseInline(N.tokens,F));break;case"em":Ce+=F.em(this.parseInline(N.tokens,F));break;case"codespan":Ce+=F.codespan(N.text);break;case"br":Ce+=F.br();break;case"del":Ce+=F.del(this.parseInline(N.tokens,F));break;default:{const at='Token with "'+N.type+'" type was not found.';if(this.options.silent)return void console.error(at);throw new Error(at)}}return Ce}}function qe(ke,V,F){if(ke==null)throw new Error("marked(): input parameter is undefined or null");if(typeof ke!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ke)+", string expected");if(typeof V=="function"&&(F=V,V=null),x(V=T({},qe.defaults,V||{})),F){const P=V.highlight;let N;try{N=_e.lex(ke,V)}catch($e){return F($e)}const de=function($e){let at;if(!$e)try{V.walkTokens&&qe.walkTokens(N,V.walkTokens),at=nt.parse(N,V)}catch(Tt){$e=Tt}return V.highlight=P,$e?F($e):F(null,at)};if(!P||P.length<3||(delete V.highlight,!N.length))return de();let Ce=0;return qe.walkTokens(N,function($e){$e.type==="code"&&(Ce++,setTimeout(()=>{P($e.text,$e.lang,function(at,Tt){if(at)return de(at);Tt!=null&&Tt!==$e.text&&($e.text=Tt,$e.escaped=!0),Ce--,Ce===0&&de()})},0))}),void(Ce===0&&de())}try{const P=_e.lex(ke,V);return V.walkTokens&&qe.walkTokens(P,V.walkTokens),nt.parse(P,V)}catch(P){if(P.message+=`
Please report this to https://github.com/markedjs/marked.`,V.silent)return"<p>An error occurred:</p><pre>"+C(P.message+"",!0)+"</pre>";throw P}}qe.options=qe.setOptions=function(ke){var V;return T(qe.defaults,ke),V=qe.defaults,f=V,qe},qe.getDefaults=y,qe.defaults=f,qe.use=function(...ke){const V=T({},...ke),F=qe.defaults.extensions||{renderers:{},childTokens:{}};let P;ke.forEach(N=>{if(N.extensions&&(P=!0,N.extensions.forEach(de=>{if(!de.name)throw new Error("extension name required");if(de.renderer){const Ce=F.renderers?F.renderers[de.name]:null;F.renderers[de.name]=Ce?function(...$e){let at=de.renderer.apply(this,$e);return at===!1&&(at=Ce.apply(this,$e)),at}:de.renderer}if(de.tokenizer){if(!de.level||de.level!=="block"&&de.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");F[de.level]?F[de.level].unshift(de.tokenizer):F[de.level]=[de.tokenizer],de.start&&(de.level==="block"?F.startBlock?F.startBlock.push(de.start):F.startBlock=[de.start]:de.level==="inline"&&(F.startInline?F.startInline.push(de.start):F.startInline=[de.start]))}de.childTokens&&(F.childTokens[de.name]=de.childTokens)})),N.renderer){const de=qe.defaults.renderer||new Me;for(const Ce in N.renderer){const $e=de[Ce];de[Ce]=(...at)=>{let Tt=N.renderer[Ce].apply(de,at);return Tt===!1&&(Tt=$e.apply(de,at)),Tt}}V.renderer=de}if(N.tokenizer){const de=qe.defaults.tokenizer||new W;for(const Ce in N.tokenizer){const $e=de[Ce];de[Ce]=(...at)=>{let Tt=N.tokenizer[Ce].apply(de,at);return Tt===!1&&(Tt=$e.apply(de,at)),Tt}}V.tokenizer=de}if(N.walkTokens){const de=qe.defaults.walkTokens;V.walkTokens=function(Ce){N.walkTokens.call(this,Ce),de&&de.call(this,Ce)}}P&&(V.extensions=F),qe.setOptions(V)})},qe.walkTokens=function(ke,V){for(const F of ke)switch(V.call(qe,F),F.type){case"table":for(const P of F.header)qe.walkTokens(P.tokens,V);for(const P of F.rows)for(const N of P)qe.walkTokens(N.tokens,V);break;case"list":qe.walkTokens(F.items,V);break;default:qe.defaults.extensions&&qe.defaults.extensions.childTokens&&qe.defaults.extensions.childTokens[F.type]?qe.defaults.extensions.childTokens[F.type].forEach(function(P){qe.walkTokens(F[P],V)}):F.tokens&&qe.walkTokens(F.tokens,V)}},qe.parseInline=function(ke,V){if(ke==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof ke!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ke)+", string expected");x(V=T({},qe.defaults,V||{}));try{const F=_e.lexInline(ke,V);return V.walkTokens&&qe.walkTokens(F,V.walkTokens),nt.parseInline(F,V)}catch(F){if(F.message+=`
Please report this to https://github.com/markedjs/marked.`,V.silent)return"<p>An error occurred:</p><pre>"+C(F.message+"",!0)+"</pre>";throw F}},qe.Parser=nt,qe.parser=nt.parse,qe.Renderer=Me,qe.TextRenderer=Qe,qe.Lexer=_e,qe.lexer=_e.lex,qe.Tokenizer=W,qe.Slugger=dt,qe.parse=qe,qe.options,qe.setOptions,qe.use,qe.walkTokens,qe.parseInline,nt.parse,_e.lex;function et(ke,V){return Array(V+1).join(ke)}qe.use({tokenizer:{autolink:()=>null,url:()=>null},renderer:{checkbox(...ke){return Object.getPrototypeOf(this).checkbox.call(this,...ke).trimRight()},code(...ke){return Object.getPrototypeOf(this).code.call(this,...ke).replace(`
</code>`,"</code>")}}});var Nt=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"];function jt(ke){return Nt.indexOf(ke.nodeName.toLowerCase())!==-1}var yt=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function tt(ke){return yt.indexOf(ke.nodeName.toLowerCase())!==-1}var Bt=yt.join(),ye={};function Ae(ke){for(var V in this.options=ke,this._keep=[],this._remove=[],this.blankRule={replacement:ke.blankReplacement},this.keepReplacement=ke.keepReplacement,this.defaultRule={replacement:ke.defaultReplacement},this.array=[],ke.rules)this.array.push(ke.rules[V])}function Ke(ke,V,F){for(var P=0;P<ke.length;P++){var N=ke[P];if(kt(N,V,F))return N}}function kt(ke,V,F){var P=ke.filter;if(typeof P=="string"){if(P===V.nodeName.toLowerCase())return!0}else if(Array.isArray(P)){if(P.indexOf(V.nodeName.toLowerCase())>-1)return!0}else{if(typeof P!="function")throw new TypeError("`filter` needs to be a string, array, or function");if(P.call(ke,V,F))return!0}}function It(ke){var V=ke.nextSibling||ke.parentNode;return ke.parentNode.removeChild(ke),V}function Yt(ke,V,F){return ke&&ke.parentNode===V||F(V)?V.nextSibling||V.parentNode:V.firstChild||V.nextSibling||V.parentNode}ye.paragraph={filter:"p",replacement:function(ke){return`

`+ke+`

`}},ye.lineBreak={filter:"br",replacement:function(ke,V,F){return F.br+`
`}},ye.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(ke,V,F){var P=Number(V.nodeName.charAt(1));return F.headingStyle==="setext"&&P<3?`

`+ke+`
`+et(P===1?"=":"-",ke.length)+`

`:`

`+et("#",P)+" "+ke+`

`}},ye.blockquote={filter:"blockquote",replacement:function(ke){return`

`+(ke=(ke=ke.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+`

`}},ye.list={filter:["ul","ol"],replacement:function(ke,V){var F=V.parentNode;return F.nodeName==="LI"&&F.lastElementChild===V?`
`+ke:`

`+ke+`

`}},ye.listItem={filter:"li",replacement:function(ke,V,F){ke=ke.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var P=F.bulletListMarker+"   ",N=V.parentNode;if(N.nodeName==="OL"){var de=N.getAttribute("start"),Ce=Array.prototype.indexOf.call(N.children,V);P=(de?Number(de)+Ce:Ce+1)+".  "}return P+ke+(V.nextSibling&&!/\n$/.test(ke)?`
`:"")}},ye.indentedCodeBlock={filter:function(ke,V){return V.codeBlockStyle==="indented"&&ke.nodeName==="PRE"&&ke.firstChild&&ke.firstChild.nodeName==="CODE"},replacement:function(ke,V,F){return`

    `+V.firstChild.textContent.replace(/\n/g,`
    `)+`

`}},ye.fencedCodeBlock={filter:function(ke,V){return V.codeBlockStyle==="fenced"&&ke.nodeName==="PRE"&&ke.firstChild&&ke.firstChild.nodeName==="CODE"},replacement:function(ke,V,F){for(var P,N=((V.firstChild.className||"").match(/language-(\S+)/)||[null,""])[1],de=V.firstChild.textContent,Ce=F.fence.charAt(0),$e=3,at=new RegExp("^"+Ce+"{3,}","gm");P=at.exec(de);)P[0].length>=$e&&($e=P[0].length+1);var Tt=et(Ce,$e);return`

`+Tt+N+`
`+de.replace(/\n$/,"")+`
`+Tt+`

`}},ye.horizontalRule={filter:"hr",replacement:function(ke,V,F){return`

`+F.hr+`

`}},ye.inlineLink={filter:function(ke,V){return V.linkStyle==="inlined"&&ke.nodeName==="A"&&ke.getAttribute("href")},replacement:function(ke,V){return"["+ke+"]("+V.getAttribute("href")+(V.title?' "'+V.title+'"':"")+")"}},ye.referenceLink={filter:function(ke,V){return V.linkStyle==="referenced"&&ke.nodeName==="A"&&ke.getAttribute("href")},replacement:function(ke,V,F){var P,N,de=V.getAttribute("href"),Ce=V.title?' "'+V.title+'"':"";switch(F.linkReferenceStyle){case"collapsed":P="["+ke+"][]",N="["+ke+"]: "+de+Ce;break;case"shortcut":P="["+ke+"]",N="["+ke+"]: "+de+Ce;break;default:var $e=this.references.length+1;P="["+ke+"]["+$e+"]",N="["+$e+"]: "+de+Ce}return this.references.push(N),P},references:[],append:function(ke){var V="";return this.references.length&&(V=`

`+this.references.join(`
`)+`

`,this.references=[]),V}},ye.emphasis={filter:["em","i"],replacement:function(ke,V,F){return ke.trim()?F.emDelimiter+ke+F.emDelimiter:""}},ye.strong={filter:["strong","b"],replacement:function(ke,V,F){return ke.trim()?F.strongDelimiter+ke+F.strongDelimiter:""}},ye.code={filter:function(ke){var V=ke.previousSibling||ke.nextSibling,F=ke.parentNode.nodeName==="PRE"&&!V;return ke.nodeName==="CODE"&&!F},replacement:function(ke){if(!ke.trim())return"";var V="`",F="",P="",N=ke.match(/`+/gm);if(N)for(/^`/.test(ke)&&(F=" "),/`$/.test(ke)&&(P=" ");N.indexOf(V)!==-1;)V+="`";return V+F+ke+P+V}},ye.image={filter:"img",replacement:function(ke,V){var F=V.alt||"",P=V.getAttribute("src")||"",N=V.title||"";return P?"!["+F+"]("+P+(N?' "'+N+'"':"")+")":""}},Ae.prototype={add:function(ke,V){this.array.unshift(V)},keep:function(ke){this._keep.unshift({filter:ke,replacement:this.keepReplacement})},remove:function(ke){this._remove.unshift({filter:ke,replacement:function(){return""}})},forNode:function(ke){return ke.isBlank?this.blankRule:(V=Ke(this.array,ke,this.options))||(V=Ke(this._keep,ke,this.options))||(V=Ke(this._remove,ke,this.options))?V:this.defaultRule;var V},forEach:function(ke){for(var V=0;V<this.array.length;V++)ke(this.array[V],V)}};var zt=typeof window<"u"?window:{},ot,Dt=function(){var ke=zt.DOMParser,V=!1;try{new ke().parseFromString("","text/html")&&(V=!0)}catch{}return V}()?zt.DOMParser:function(){var ke=function(){},V=Y(915).JSDOM;return ke.prototype.parseFromString=function(F){return new V(F).window.document},ke}();function wt(ke){var V;return typeof ke=="string"?V=(ot=ot||new Dt).parseFromString('<x-turndown id="turndown-root">'+ke+"</x-turndown>","text/html").getElementById("turndown-root"):V=ke.cloneNode(!0),function(F){var P=F.element,N=F.isBlock,de=F.isVoid,Ce=F.isPre||function(yi){return yi.nodeName==="PRE"};if(P.firstChild&&!Ce(P)){for(var $e=null,at=!1,Tt=null,Ge=Yt(Tt,P,Ce);Ge!==P;){if(Ge.nodeType===3||Ge.nodeType===4){var Ut=Ge.data.replace(/[ \r\n\t]+/g," ");if($e&&!/ $/.test($e.data)||at||Ut[0]!==" "||(Ut=Ut.substr(1)),!Ut){Ge=It(Ge);continue}Ge.data=Ut,$e=Ge}else{if(Ge.nodeType!==1){Ge=It(Ge);continue}N(Ge)||Ge.nodeName==="BR"?($e&&($e.data=$e.data.replace(/ $/,"")),$e=null,at=!1):de(Ge)&&($e=null,at=!0)}var ci=Yt(Tt,Ge,Ce);Tt=Ge,Ge=ci}$e&&($e.data=$e.data.replace(/ $/,""),$e.data||It($e))}}({element:V,isBlock:jt,isVoid:tt}),V}function ni(ke){return ke.isBlock=jt(ke),ke.isCode=ke.nodeName.toLowerCase()==="code"||ke.parentNode.isCode,ke.isBlank=function(V){return["A","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"].indexOf(V.nodeName)===-1&&/^\s*$/i.test(V.textContent)&&!tt(V)&&!function(F){return F.querySelector&&F.querySelector(Bt)}(V)}(ke),ke.flankingWhitespace=function(V){var F="",P="";if(!V.isBlock){var N=/^\s/.test(V.textContent),de=/\s$/.test(V.textContent),Ce=V.isBlank&&N&&de;N&&!di("left",V)&&(F=" "),Ce||!de||di("right",V)||(P=" ")}return{leading:F,trailing:P}}(ke),ke}function di(ke,V){var F,P,N;return ke==="left"?(F=V.previousSibling,P=/ $/):(F=V.nextSibling,P=/^ /),F&&(F.nodeType===3?N=P.test(F.nodeValue):F.nodeType!==1||jt(F)||(N=P.test(F.textContent))),N}var xi=Array.prototype.reduce,bt=/^\n*/,fe=/\n*$/,je=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Ze(ke){if(!(this instanceof Ze))return new Ze(ke);var V={rules:ye,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",blankReplacement:function(F,P){return P.isBlock?`

`:""},keepReplacement:function(F,P){return P.isBlock?`

`+P.outerHTML+`

`:P.outerHTML},defaultReplacement:function(F,P){return P.isBlock?`

`+F+`

`:F}};this.options=function(F){for(var P=1;P<arguments.length;P++){var N=arguments[P];for(var de in N)N.hasOwnProperty(de)&&(F[de]=N[de])}return F}({},V,ke),this.rules=new Ae(this.options)}function pt(ke){var V=this;return xi.call(ke.childNodes,function(F,P){var N="";return(P=new ni(P)).nodeType===3?N=P.isCode?P.nodeValue:V.escape(P.nodeValue):P.nodeType===1&&(N=St.call(V,P)),Xt(F,N)},"")}function Ct(ke){var V=this;return this.rules.forEach(function(F){typeof F.append=="function"&&(ke=Xt(ke,F.append(V.options)))}),ke.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function St(ke){var V=this.rules.forNode(ke),F=pt.call(this,ke),P=ke.flankingWhitespace;return(P.leading||P.trailing)&&(F=F.trim()),P.leading+V.replacement(F,ke,this.options)+P.trailing}function Xt(ke,V){var F,P,N,de=(F=V,P=[ke.match(fe)[0],F.match(bt)[0]].sort(),(N=P[P.length-1]).length<2?N:`

`);return(ke=ke.replace(fe,""))+de+(V=V.replace(bt,""))}Ze.prototype={turndown:function(ke){if(!function(F){return F!=null&&(typeof F=="string"||F.nodeType&&(F.nodeType===1||F.nodeType===9||F.nodeType===11))}(ke))throw new TypeError(ke+" is not a string, or an element/document/fragment node.");if(ke==="")return"";var V=pt.call(this,new wt(ke));return Ct.call(this,V)},use:function(ke){if(Array.isArray(ke))for(var V=0;V<ke.length;V++)this.use(ke[V]);else{if(typeof ke!="function")throw new TypeError("plugin must be a Function or an Array of Functions");ke(this)}return this},addRule:function(ke,V){return this.rules.add(ke,V),this},keep:function(ke){return this.rules.keep(ke),this},remove:function(ke){return this.rules.remove(ke),this},escape:function(ke){return je.reduce(function(V,F){return V.replace(F[0],F[1])},ke)}};const Zt=Ze;var oi=/highlight-(?:text|source)-([a-z0-9]+)/;function bi(ke){ke.addRule("highlightedCodeBlock",{filter:function(V){var F=V.firstChild;return V.nodeName==="DIV"&&oi.test(V.className)&&F&&F.nodeName==="PRE"},replacement:function(V,F,P){var N=((F.className||"").match(oi)||[null,""])[1];return`

`+P.fence+N+`
`+F.firstChild.textContent+`
`+P.fence+`

`}})}function gi(ke){ke.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(V){return"~"+V+"~"}})}var Ti=Array.prototype.indexOf,Mt=Array.prototype.every,Ei={};function Ri(ke){var V,F,P=ke.parentNode;return P.nodeName==="THEAD"||P.firstChild===ke&&(P.nodeName==="TABLE"||(F=(V=P).previousSibling,V.nodeName==="TBODY"&&(!F||F.nodeName==="THEAD"&&/^\s*$/i.test(F.textContent))))&&Mt.call(ke.childNodes,function(N){return N.nodeName==="TH"})}function Yi(ke,V){var F=" ";return Ti.call(V.parentNode.childNodes,V)===0&&(F="| "),F+ke+" |"}function ji(ke){for(var V in ke.keep(function(F){return F.nodeName==="TABLE"&&!Ri(F.rows[0])}),Ei)ke.addRule(V,Ei[V])}function Pi(ke){ke.addRule("taskListItems",{filter:function(V){return V.type==="checkbox"&&V.parentNode.nodeName==="LI"},replacement:function(V,F){return(F.checked?"[x]":"[ ]")+" "}})}Ei.tableCell={filter:["th","td"],replacement:function(ke,V){return Yi(ke,V)}},Ei.tableRow={filter:"tr",replacement:function(ke,V){var F="",P={left:":--",right:"--:",center:":-:"};if(Ri(V))for(var N=0;N<V.childNodes.length;N++){var de="---",Ce=(V.childNodes[N].getAttribute("align")||"").toLowerCase();Ce&&(de=P[Ce]||de),F+=Yi(de,V.childNodes[N])}return`
`+ke+(F?`
`+F:"")}},Ei.table={filter:function(ke){return ke.nodeName==="TABLE"&&Ri(ke.rows[0])},replacement:function(ke){return`

`+(ke=ke.replace(`

`,`
`))+`

`}},Ei.tableSection={filter:["thead","tbody","tfoot"],replacement:function(ke){return ke}};const qi=Zt.prototype.escape;function nn(ke){return ke=(ke=qi(ke)).replace(/</g,"\\<")}Zt.prototype.escape=function(ke){let V="",F=0;for(const P of function*(N){for(const de of N.matchAll(dn)){const Ce=de[0],$e=pi(Ce);yield Object.assign([Ce.substring(0,$e)],{index:de.index})}}(ke)){const N=P.index;N>F&&(V+=nn(ke.substring(F,N)));const de=P[0];V+=de,F=N+de.length}return F<ke.length&&(V+=nn(ke.substring(F,ke.length))),V};const Li=new Zt({codeBlockStyle:"fenced",hr:"---",headingStyle:"atx"});Li.use([function(ke){ke.use([bi,gi,ji,Pi])},function(ke){ke.addRule("taskListItems",{filter:V=>V.type==="checkbox"&&(V.parentNode.nodeName==="LI"||V.parentNode.parentNode.nodeName==="LI"),replacement:(V,F)=>(F.checked?"[x]":"[ ]")+" "})}]);const dn=new RegExp(/\b(?:(?:https?|ftp):\/\/|www\.)/.source+/(?![-_])(?:[-_a-z0-9\u00a1-\uffff]{1,63}\.)+(?:[a-z\u00a1-\uffff]{2,63})/.source+/(?:[^\s<>]*)/.source,"gi");function pi(ke){let V=ke.length;for(;V>0;){const F=ke[V-1];if(`?!.,:*_~'"`.includes(F))V--;else{if(F!=")")break;{let P=0;for(let N=0;N<V;N++)ke[N]=="("?P++:ke[N]==")"&&P--;if(!(P<0))break;V--}}}return V}class fi{constructor(V){this._htmlDP=new E.HtmlDataProcessor(V)}keepHtml(V){Li.keep([V])}toView(V){const F=(P=V,qe.parse(P,{gfm:!0,breaks:!0,tables:!0,xhtml:!0,headerIds:!1}));var P;return this._htmlDP.toView(F)}toData(V){return function(F){return Li.turndown(F)}(this._htmlDP.toData(V))}registerRawContentMatcher(V){this._htmlDP.registerRawContentMatcher(V)}useFillerType(){}}class Ki extends m.Plugin{constructor(V){super(V),V.data.processor=new fi(V.data.viewDocument)}static get pluginName(){return"Markdown"}}})(),(window.CKEditor5=window.CKEditor5||{}).markdownGfm=Qt})()},17680:()=>{(function(ii){const Gt=ii.en=ii.en||{};Gt.dictionary=Object.assign(Gt.dictionary||{},{"Insert media":"Insert media","Media toolbar":"Media toolbar","Media URL":"Media URL","media widget":"media widget","Open media in new tab":"Open media in new tab","Paste the media URL in the input.":"Paste the media URL in the input.","The URL must not be empty.":"The URL must not be empty.","This media URL is not supported.":"This media URL is not supported.","Tip: Paste the URL into the content to embed faster.":"Tip: Paste the URL into the content to embed faster."})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var ii={461:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck-content .media{clear:both;display:block;margin:.9em 0;min-width:15em}",""]);const a=v},721:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,'.ck-media__wrapper .ck-media__placeholder{align-items:center;display:flex;flex-direction:column}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{display:block;overflow:hidden}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{background:var(--ck-color-base-foreground);padding:calc(var(--ck-spacing-standard)*3)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{background-position:50%;background-size:cover;height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);min-width:var(--ck-media-embed-placeholder-icon-size)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{height:100%;width:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);font-style:italic;text-align:center;text-overflow:ellipsis;white-space:nowrap}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-height:380px;max-width:300px}.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Im0yMDYuNDc3IDI2MC45LTI4Ljk4NyAyOC45ODdhNS4yMTggNS4yMTggMCAwIDAgMy43OCAxLjYxaDQ5LjYyMWMxLjY5NCAwIDMuMTktLjc5OCA0LjE0Ni0yLjAzN3oiIGZpbGw9IiM1Yzg4YzUiLz48cGF0aCBkPSJNMjI2Ljc0MiAyMjIuOTg4Yy05LjI2NiAwLTE2Ljc3NyA3LjE3LTE2Ljc3NyAxNi4wMTQuMDA3IDIuNzYyLjY2MyA1LjQ3NCAyLjA5MyA3Ljg3NS40My43MDMuODMgMS40MDggMS4xOSAyLjEwNy4zMzMuNTAyLjY1IDEuMDA1Ljk1IDEuNTA4LjM0My40NzcuNjczLjk1Ny45ODggMS40NCAxLjMxIDEuNzY5IDIuNSAzLjUwMiAzLjYzNyA1LjE2OC43OTMgMS4yNzUgMS42ODMgMi42NCAyLjQ2NiAzLjk5IDIuMzYzIDQuMDk0IDQuMDA3IDguMDkyIDQuNiAxMy45MTR2LjAxMmMuMTgyLjQxMi41MTYuNjY2Ljg3OS42NjcuNDAzLS4wMDEuNzY4LS4zMTQuOTMtLjc5OS42MDMtNS43NTYgMi4yMzgtOS43MjkgNC41ODUtMTMuNzk0Ljc4Mi0xLjM1IDEuNjczLTIuNzE1IDIuNDY1LTMuOTkgMS4xMzctMS42NjYgMi4zMjgtMy40IDMuNjM4LTUuMTY5LjMxNS0uNDgyLjY0NS0uOTYyLjk4OC0xLjQzOS4zLS41MDMuNjE3LTEuMDA2Ljk1LTEuNTA4LjM1OS0uNy43Ni0xLjQwNCAxLjE5LTIuMTA3IDEuNDI2LTIuNDAyIDItNS4xMTQgMi4wMDQtNy44NzUgMC04Ljg0NC03LjUxMS0xNi4wMTQtMTYuNzc2LTE2LjAxNHoiIGZpbGw9IiNkZDRiM2UiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PGVsbGlwc2Ugcnk9IjUuNTY0IiByeD0iNS44MjgiIGN5PSIyMzkuMDAyIiBjeD0iMjI2Ljc0MiIgZmlsbD0iIzgwMmQyNyIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMTkwLjMwMSAyMzcuMjgzYy00LjY3IDAtOC40NTcgMy44NTMtOC40NTcgOC42MDZzMy43ODYgOC42MDcgOC40NTcgOC42MDdjMy4wNDMgMCA0LjgwNi0uOTU4IDYuMzM3LTIuNTE2IDEuNTMtMS41NTcgMi4wODctMy45MTMgMi4wODctNi4yOSAwLS4zNjItLjAyMy0uNzIyLS4wNjQtMS4wNzloLTguMjU3djMuMDQzaDQuODVjLS4xOTcuNzU5LS41MzEgMS40NS0xLjA1OCAxLjk4Ni0uOTQyLjk1OC0yLjAyOCAxLjU0OC0zLjkwMSAxLjU0OC0yLjg3NiAwLTUuMjA4LTIuMzcyLTUuMjA4LTUuMjk5IDAtMi45MjYgMi4zMzItNS4yOTkgNS4yMDgtNS4yOTkgMS4zOTkgMCAyLjYxOC40MDcgMy41ODQgMS4yOTNsMi4zODEtMi4zOGMwLS4wMDItLjAwMy0uMDA0LS4wMDQtLjAwNS0xLjU4OC0xLjUyNC0zLjYyLTIuMjE1LTUuOTU1LTIuMjE1em00LjQzIDUuNjYuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0ibTIxNS4xODQgMjUxLjkyOS03Ljk4IDcuOTc5IDI4LjQ3NyAyOC40NzVhNS4yMzMgNS4yMzMgMCAwIDAgLjQ0OS0yLjEyM3YtMzEuMTY1Yy0uNDY5LjY3NS0uOTM0IDEuMzQ5LTEuMzgyIDIuMDA1LS43OTIgMS4yNzUtMS42ODIgMi42NC0yLjQ2NSAzLjk5LTIuMzQ3IDQuMDY1LTMuOTgyIDguMDM4LTQuNTg1IDEzLjc5NC0uMTYyLjQ4NS0uNTI3Ljc5OC0uOTMuNzk5LS4zNjMtLjAwMS0uNjk3LS4yNTUtLjg3OS0uNjY3di0uMDEyYy0uNTkzLTUuODIyLTIuMjM3LTkuODItNC42LTEzLjkxNC0uNzgzLTEuMzUtMS42NzMtMi43MTUtMi40NjYtMy45OS0xLjEzNy0xLjY2Ni0yLjMyNy0zLjQtMy42MzctNS4xNjlsLS4wMDItLjAwM3oiIGZpbGw9IiNjM2MzYzMiLz48cGF0aCBkPSJtMjEyLjk4MyAyNDguNDk1LTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAgMCA1LjIzOCA1LjIzOGgxLjAxNWwzNS42NjYtMzUuNjY2YTEzNi4yNzUgMTM2LjI3NSAwIDAgMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAgMC0uOTg5LTEuNDQgMzUuMTI3IDM1LjEyNyAwIDAgMC0uOTUtMS41MDhjLS4wODMtLjE2Mi0uMTc2LS4zMjYtLjI2NC0uNDg5eiIgZmlsbD0iI2ZkZGM0ZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJtMjExLjk5OCAyNjEuMDgzLTYuMTUyIDYuMTUxIDI0LjI2NCAyNC4yNjRoLjc4MWE1LjIyNyA1LjIyNyAwIDAgMCA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OVptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OVoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzNabTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1Wk00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MDAgNDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIHN0eWxlPSJmaWxsOiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}',""]);const a=v},961:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,".ck.ck-media-form{align-items:flex-start;display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}",""]);const a=v},764:(m,E,y)=>{"use strict";y.d(E,{Z:()=>a});var f=y(609),v=y.n(f)()(function(d){return d[1]});v.push([m.id,'.ck-vertical-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck-vertical-form .ck-button:focus:after{display:none}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck.ck-responsive-form .ck-button:focus:after{display:none}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-width)*.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){border-radius:0;margin-top:var(--ck-spacing-large);padding:var(--ck-spacing-standard)}.ck.ck-responsive-form>.ck-button:last-child:not(:focus),.ck.ck-responsive-form>.ck-button:nth-last-child(2):not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}',""]);const a=v},609:m=>{"use strict";m.exports=function(E){var y=[];return y.toString=function(){return this.map(function(f){var v=E(f);return f[2]?"@media ".concat(f[2]," {").concat(v,"}"):v}).join("")},y.i=function(f,v,a){typeof f=="string"&&(f=[[null,f,""]]);var d={};if(a)for(var A=0;A<this.length;A++){var H=this[A][0];H!=null&&(d[H]=!0)}for(var I=0;I<f.length;I++){var C=[].concat(f[I]);a&&d[C[0]]||(v&&(C[2]?C[2]="".concat(v," and ").concat(C[2]):C[2]=v),y.push(C))}},y}},62:(m,E,y)=>{"use strict";var f,v=function(){return f===void 0&&(f=Boolean(window&&document&&document.all&&!window.atob)),f},a=function(){var h={};return function(g){if(h[g]===void 0){var r=document.querySelector(g);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}h[g]=r}return h[g]}}(),d=[];function A(h){for(var g=-1,r=0;r<d.length;r++)if(d[r].identifier===h){g=r;break}return g}function H(h,g){for(var r={},u=[],w=0;w<h.length;w++){var _=h[w],T=g.base?_[0]+g.base:_[0],z=r[T]||0,L="".concat(T," ").concat(z);r[T]=z+1;var x=A(L),c={css:_[1],media:_[2],sourceMap:_[3]};x!==-1?(d[x].references++,d[x].updater(c)):d.push({identifier:L,updater:Z(c,g),references:1}),u.push(L)}return u}function I(h){var g=document.createElement("style"),r=h.attributes||{};if(r.nonce===void 0){var u=y.nc;u&&(r.nonce=u)}if(Object.keys(r).forEach(function(_){g.setAttribute(_,r[_])}),typeof h.insert=="function")h.insert(g);else{var w=a(h.insert||"head");if(!w)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");w.appendChild(g)}return g}var C,me=(C=[],function(h,g){return C[h]=g,C.filter(Boolean).join(`
`)});function pe(h,g,r,u){var w=r?"":u.media?"@media ".concat(u.media," {").concat(u.css,"}"):u.css;if(h.styleSheet)h.styleSheet.cssText=me(g,w);else{var _=document.createTextNode(w),T=h.childNodes;T[g]&&h.removeChild(T[g]),T.length?h.insertBefore(_,T[g]):h.appendChild(_)}}function ge(h,g,r){var u=r.css,w=r.media,_=r.sourceMap;if(w?h.setAttribute("media",w):h.removeAttribute("media"),_&&typeof btoa<"u"&&(u+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(_))))," */")),h.styleSheet)h.styleSheet.cssText=u;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(u))}}var X=null,te=0;function Z(h,g){var r,u,w;if(g.singleton){var _=te++;r=X||(X=I(g)),u=pe.bind(null,r,_,!1),w=pe.bind(null,r,_,!0)}else r=I(g),u=ge.bind(null,r,g),w=function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(r)};return u(h),function(T){if(T){if(T.css===h.css&&T.media===h.media&&T.sourceMap===h.sourceMap)return;u(h=T)}else w()}}m.exports=function(h,g){(g=g||{}).singleton||typeof g.singleton=="boolean"||(g.singleton=v());var r=H(h=h||[],g);return function(u){if(u=u||[],Object.prototype.toString.call(u)==="[object Array]"){for(var w=0;w<r.length;w++){var _=A(r[w]);d[_].references--}for(var T=H(u,g),z=0;z<r.length;z++){var L=A(r[z]);d[L].references===0&&(d[L].updater(),d.splice(L,1))}r=T}}}},945:(m,E,y)=>{m.exports=y(79)("./src/clipboard.js")},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},492:(m,E,y)=>{m.exports=y(79)("./src/engine.js")},181:(m,E,y)=>{m.exports=y(79)("./src/typing.js")},273:(m,E,y)=>{m.exports=y(79)("./src/ui.js")},254:(m,E,y)=>{m.exports=y(79)("./src/undo.js")},209:(m,E,y)=>{m.exports=y(79)("./src/utils.js")},995:(m,E,y)=>{m.exports=y(79)("./src/widget.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={id:m,exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.n=m=>{var E=m&&m.__esModule?()=>m.default:()=>m;return Y.d(E,{a:E}),E},Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},Y.nc=void 0;var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{AutoMediaEmbed:()=>_,MediaEmbed:()=>ae,MediaEmbedEditing:()=>Z,MediaEmbedToolbar:()=>Ie,MediaEmbedUI:()=>D});var m=Y(704),E=Y(995),y=Y(209);function f(Ve,_e){return Qe=>{Qe.on("attribute:url:media",Me)};function Me(Qe,dt,nt){if(!nt.consumable.consume(dt.item,Qe.name))return;const qe=dt.attributeNewValue,et=nt.writer,Nt=nt.mapper.toViewElement(dt.item),jt=[...Nt.getChildren()].find(tt=>tt.getCustomProperty("media-content"));et.remove(jt);const yt=Ve.getMediaViewElement(et,qe,_e);et.insert(et.createPositionAt(Nt,0),yt)}}function v(Ve){const _e=Ve.getSelectedElement();return _e&&function(Me){return!!Me.getCustomProperty("media")&&(0,E.isWidget)(Me)}(_e)?_e:null}function a(Ve,_e,Me,Qe){return Ve.createContainerElement("figure",{class:"media"},[_e.getMediaViewElement(Ve,Me,Qe),Ve.createSlot()])}function d(Ve){const _e=Ve.getSelectedElement();return _e&&_e.is("element","media")?_e:null}function A(Ve,_e,Me,Qe){Ve.change(dt=>{const nt=dt.createElement("media",{url:_e});Ve.insertObject(nt,Me,null,{setSelection:"on",findOptimalPosition:Qe})})}class H extends m.Command{refresh(){const _e=this.editor.model,Me=_e.document.selection,Qe=d(Me);this.value=Qe?Qe.getAttribute("url"):null,this.isEnabled=function(dt){const nt=dt.getSelectedElement();return!!nt&&nt.name==="media"}(Me)||function(dt,nt){let et=(0,E.findOptimalInsertionRange)(dt,nt).start.parent;return et.isEmpty&&!nt.schema.isLimit(et)&&(et=et.parent),nt.schema.checkChild(et,"media")}(Me,_e)}execute(_e){const Me=this.editor.model,Qe=Me.document.selection,dt=d(Qe);dt?Me.change(nt=>{nt.setAttribute("url",_e,dt)}):A(Me,_e,Qe,!0)}}var I=Y(273);class C{constructor(_e,Me){const Qe=Me.providers,dt=Me.extraProviders||[],nt=new Set(Me.removeProviders),qe=Qe.concat(dt).filter(et=>{const Nt=et.name;return Nt?!nt.has(Nt):((0,y.logWarning)("media-embed-no-provider-name",{provider:et}),!1)});this.locale=_e,this.providerDefinitions=qe}hasMedia(_e){return!!this._getMedia(_e)}getMediaViewElement(_e,Me,Qe){return this._getMedia(Me).getViewElement(_e,Qe)}_getMedia(_e){if(!_e)return new me(this.locale);_e=_e.trim();for(const Me of this.providerDefinitions){const Qe=Me.html,dt=(0,y.toArray)(Me.url);for(const nt of dt){const qe=this._getUrlMatches(_e,nt);if(qe)return new me(this.locale,_e,qe,Qe)}}return null}_getUrlMatches(_e,Me){let Qe=_e.match(Me);if(Qe)return Qe;let dt=_e.replace(/^https?:\/\//,"");return Qe=dt.match(Me),Qe||(dt=dt.replace(/^www\./,""),Qe=dt.match(Me),Qe||null)}}class me{constructor(_e,Me,Qe,dt){this.url=this._getValidUrl(Me),this._locale=_e,this._match=Qe,this._previewRenderer=dt}getViewElement(_e,Me){const Qe={};let dt;if(Me.renderForEditingView||Me.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(Qe["data-oembed-url"]=this.url),Me.renderForEditingView&&(Qe.class="ck-media__wrapper");const nt=this._getPreviewHtml(Me);dt=_e.createRawElement("div",Qe,(qe,et)=>{et.setContentOf(qe,nt)})}else this.url&&(Qe.url=this.url),dt=_e.createEmptyElement(Me.elementName,Qe);return _e.setCustomProperty("media-content",!0,dt),dt}_getPreviewHtml(_e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&_e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const _e=new I.IconView,Me=this._locale.t;return _e.content='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',_e.viewBox="0 0 64 42",new I.Template({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[_e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":Me("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(_e){return _e?_e.match(/^https?/)?_e:"https://"+_e:null}}var pe=Y(62),ge=Y.n(pe),X=Y(721),te={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(X.Z,te),X.Z.locals;class Z extends m.Plugin{static get pluginName(){return"MediaEmbedEditing"}constructor(_e){super(_e),_e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:Me=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${Me[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:Me=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${Me[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:Me=>{const Qe=Me[1],dt=Me[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${Qe}${dt?`?start=${dt}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:Me=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${Me[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new C(_e.locale,_e.config.get("mediaEmbed"))}init(){const _e=this.editor,Me=_e.model.schema,Qe=_e.t,dt=_e.conversion,nt=_e.config.get("mediaEmbed.previewsInData"),qe=_e.config.get("mediaEmbed.elementName"),et=this.registry;_e.commands.add("mediaEmbed",new H(_e)),Me.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),dt.for("dataDowncast").elementToStructure({model:"media",view:(Nt,{writer:jt})=>{const yt=Nt.getAttribute("url");return a(jt,et,yt,{elementName:qe,renderMediaPreview:yt&&nt})}}),dt.for("dataDowncast").add(f(et,{elementName:qe,renderMediaPreview:nt})),dt.for("editingDowncast").elementToStructure({model:"media",view:(Nt,{writer:jt})=>{const yt=Nt.getAttribute("url");return function(tt,Bt,ye){return Bt.setCustomProperty("media",!0,tt),(0,E.toWidget)(tt,Bt,{label:ye})}(a(jt,et,yt,{elementName:qe,renderForEditingView:!0}),jt,Qe("media widget"))}}),dt.for("editingDowncast").add(f(et,{elementName:qe,renderForEditingView:!0})),dt.for("upcast").elementToElement({view:Nt=>["oembed",qe].includes(Nt.name)&&Nt.getAttribute("url")?{name:!0}:null,model:(Nt,{writer:jt})=>{const yt=Nt.getAttribute("url");if(et.hasMedia(yt))return jt.createElement("media",{url:yt})}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(Nt,{writer:jt})=>{const yt=Nt.getAttribute("data-oembed-url");if(et.hasMedia(yt))return jt.createElement("media",{url:yt})}}).add(Nt=>{Nt.on("element:figure",function(jt,yt,tt){if(!tt.consumable.consume(yt.viewItem,{name:!0,classes:"media"}))return;const{modelRange:Bt,modelCursor:ye}=tt.convertChildren(yt.viewItem,yt.modelCursor);yt.modelRange=Bt,yt.modelCursor=ye,(0,y.first)(Bt.getItems())||tt.consumable.revert(yt.viewItem,{name:!0,classes:"media"})})})}}var h=Y(492),g=Y(945),r=Y(181),u=Y(254);const w=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class _ extends m.Plugin{static get requires(){return[g.Clipboard,r.Delete,u.Undo]}static get pluginName(){return"AutoMediaEmbed"}constructor(_e){super(_e),this._timeoutId=null,this._positionToInsert=null}init(){const _e=this.editor,Me=_e.model.document;this.listenTo(_e.plugins.get("ClipboardPipeline"),"inputTransformation",()=>{const Qe=Me.selection.getFirstRange(),dt=h.LivePosition.fromPosition(Qe.start);dt.stickiness="toPrevious";const nt=h.LivePosition.fromPosition(Qe.end);nt.stickiness="toNext",Me.once("change:data",()=>{this._embedMediaBetweenPositions(dt,nt),dt.detach(),nt.detach()},{priority:"high"})}),_e.commands.get("undo").on("execute",()=>{this._timeoutId&&(y.global.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(_e,Me){const Qe=this.editor,dt=Qe.plugins.get(Z).registry,nt=new h.LiveRange(_e,Me),qe=nt.getWalker({ignoreElementEnd:!0});let et="";for(const Nt of qe)Nt.item.is("$textProxy")&&(et+=Nt.item.data);if(et=et.trim(),!et.match(w)||!dt.hasMedia(et))return void nt.detach();Qe.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=h.LivePosition.fromPosition(_e),this._timeoutId=y.global.window.setTimeout(()=>{Qe.model.change(Nt=>{let jt;this._timeoutId=null,Nt.remove(nt),nt.detach(),this._positionToInsert.root.rootName!=="$graveyard"&&(jt=this._positionToInsert),A(Qe.model,et,jt,!1),this._positionToInsert.detach(),this._positionToInsert=null}),Qe.plugins.get("Delete").requestUndoOnBackspace()},100)):nt.detach()}}var T=Y(764),z={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(T.Z,z),T.Z.locals;var L=Y(961),x={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(L.Z,x),L.Z.locals;class c extends I.View{constructor(_e,Me){super(Me);const Qe=Me.t;this.focusTracker=new y.FocusTracker,this.keystrokes=new y.KeystrokeHandler,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(Qe("Save"),m.icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.saveButtonView.bind("isEnabled").to(this,"mediaURLInputValue",dt=>!!dt),this.cancelButtonView=this._createButton(Qe("Cancel"),m.icons.cancel,"ck-button-cancel","cancel"),this._focusables=new I.ViewCollection,this._focusCycler=new I.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=_e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView,this.saveButtonView,this.cancelButtonView]}),(0,I.injectCssTransitionDisabler)(this)}render(){super.render(),(0,I.submitHandler)({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(Me=>{this._focusables.add(Me),this.focusTracker.add(Me.element)}),this.keystrokes.listenTo(this.element);const _e=Me=>Me.stopPropagation();this.keystrokes.set("arrowright",_e),this.keystrokes.set("arrowleft",_e),this.keystrokes.set("arrowup",_e),this.keystrokes.set("arrowdown",_e),this.listenTo(this.urlInputView.element,"selectstart",(Me,Qe)=>{Qe.stopPropagation()},{priority:"high"})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(_e){this.urlInputView.fieldView.element.value=_e.trim()}isValid(){this.resetFormStatus();for(const _e of this._validators){const Me=_e(this);if(Me)return this.urlInputView.errorText=Me,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const _e=this.locale.t,Me=new I.LabeledFieldView(this.locale,I.createLabeledInputText),Qe=Me.fieldView;return this._urlInputViewInfoDefault=_e("Paste the media URL in the input."),this._urlInputViewInfoTip=_e("Tip: Paste the URL into the content to embed faster."),Me.label=_e("Media URL"),Me.infoText=this._urlInputViewInfoDefault,Qe.on("input",()=>{Me.infoText=Qe.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=Qe.element.value.trim()}),Me}_createButton(_e,Me,Qe,dt){const nt=new I.ButtonView(this.locale);return nt.set({label:_e,icon:Me,tooltip:!0}),nt.extendTemplate({attributes:{class:Qe}}),dt&&nt.delegate("execute").to(this,dt),nt}}class D extends m.Plugin{static get requires(){return[Z]}static get pluginName(){return"MediaEmbedUI"}init(){const _e=this.editor,Me=_e.commands.get("mediaEmbed");_e.ui.componentFactory.add("mediaEmbed",Qe=>{const dt=(0,I.createDropdown)(Qe);return this._setUpDropdown(dt,Me),dt})}_setUpDropdown(_e,Me){const Qe=this.editor,dt=Qe.t,nt=_e.buttonView,qe=Qe.plugins.get(Z).registry;_e.once("change:isOpen",()=>{const et=new c(function(Nt,jt){return[yt=>{if(!yt.url.length)return Nt("The URL must not be empty.")},yt=>{if(!jt.hasMedia(yt.url))return Nt("This media URL is not supported.")}]}(Qe.t,qe),Qe.locale);_e.panelView.children.add(et),nt.on("open",()=>{et.disableCssTransitions(),et.url=Me.value||"",et.urlInputView.fieldView.select(),et.enableCssTransitions()},{priority:"low"}),_e.on("submit",()=>{et.isValid()&&(Qe.execute("mediaEmbed",et.url),Qe.editing.view.focus())}),_e.on("change:isOpen",()=>et.resetFormStatus()),_e.on("cancel",()=>{Qe.editing.view.focus()}),et.delegate("submit","cancel").to(_e),et.urlInputView.bind("value").to(Me,"value"),et.urlInputView.bind("isReadOnly").to(Me,"isEnabled",Nt=>!Nt)}),_e.bind("isEnabled").to(Me),nt.set({label:dt("Insert media"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>',tooltip:!0})}}var W=Y(461),q={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};ge()(W.Z,q),W.Z.locals;class ae extends m.Plugin{static get requires(){return[Z,D,_,E.Widget]}static get pluginName(){return"MediaEmbed"}}class Ie extends m.Plugin{static get requires(){return[E.WidgetToolbarRepository]}static get pluginName(){return"MediaEmbedToolbar"}afterInit(){const _e=this.editor,Me=_e.t;_e.plugins.get(E.WidgetToolbarRepository).register("mediaEmbed",{ariaLabel:Me("Media toolbar"),items:_e.config.get("mediaEmbed.toolbar")||[],getRelatedElement:v})}}})(),(window.CKEditor5=window.CKEditor5||{}).mediaEmbed=Qt})()},51609:()=>{/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(()=>{var ii={945:(m,E,y)=>{m.exports=y(79)("./src/clipboard.js")},704:(m,E,y)=>{m.exports=y(79)("./src/core.js")},492:(m,E,y)=>{m.exports=y(79)("./src/engine.js")},79:m=>{"use strict";m.exports=CKEditor5.dll}},Gt={};function Y(m){var E=Gt[m];if(E!==void 0)return E.exports;var y=Gt[m]={exports:{}};return ii[m](y,y.exports,Y),y.exports}Y.d=(m,E)=>{for(var y in E)Y.o(E,y)&&!Y.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:E[y]})},Y.o=(m,E)=>Object.prototype.hasOwnProperty.call(m,E),Y.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var Qt={};(()=>{"use strict";Y.r(Qt),Y.d(Qt,{PasteFromOffice:()=>g});var m=Y(704),E=Y(945),y=Y(492);function f(r,u,w,{blockElements:_,inlineObjectElements:T}){let z=w.createPositionAt(r,u=="forward"?"after":"before");return z=z.getLastMatchingPosition(({item:L})=>L.is("element")&&!_.includes(L.name)&&!T.includes(L.name),{direction:u}),u=="forward"?z.nodeAfter:z.nodeBefore}function v(r,u){return!!r&&r.is("element")&&u.includes(r.name)}function a(r,u){if(!r.childCount)return;const w=new y.UpcastWriter(r.document),_=function(L,x){const c=x.createRangeIn(L),D=new y.Matcher({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),W=[];for(const q of c)if(q.type==="elementStart"&&D.match(q.item)){const ae=H(q.item);W.push({element:q.item,id:ae.id,order:ae.order,indent:ae.indent})}return W}(r,w);if(!_.length)return;let T=null,z=1;_.forEach((L,x)=>{const c=function(Ve,_e){if(!Ve)return!0;if(Ve.id!==_e.id)return _e.indent-Ve.indent!=1;const Me=_e.element.previousSibling;if(!Me)return!0;return Qe=Me,!(Qe.is("element","ol")||Qe.is("element","ul"));var Qe}(_[x-1],L),D=c?null:_[x-1],W=(ae=L,(q=D)?ae.indent-q.indent:ae.indent-1);var q,ae;if(c&&(T=null,z=1),!T||W!==0){const Ve=function(_e,Me){const Qe=new RegExp(`@list l${_e.id}:level${_e.indent}\\s*({[^}]*)`,"gi"),dt=/mso-level-number-format:([^;]{0,100});/gi,nt=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,qe=Qe.exec(Me);let et="decimal",Nt="ol",jt=null;if(qe&&qe[1]){const yt=dt.exec(qe[1]);if(yt&&yt[1]&&(et=yt[1].trim(),Nt=et!=="bullet"&&et!=="image"?"ol":"ul"),et==="bullet"){const tt=function(Bt){const ye=function(Ke){if(Ke.getChild(0).is("$text"))return null;for(const kt of Ke.getChildren()){if(!kt.is("element","span"))continue;const It=kt.getChild(0);return It.is("$text")?It:It.getChild(0)}return null}(Bt);if(!ye)return null;const Ae=ye._data;return Ae==="o"?"circle":Ae==="\xB7"?"disc":Ae==="\xA7"?"square":null}(_e.element);tt&&(et=tt)}else{const tt=nt.exec(qe[1]);tt&&tt[1]&&(jt=parseInt(tt[1]))}}return{type:Nt,startIndex:jt,style:d(et)}}(L,u);if(T){if(L.indent>z){const _e=T.getChild(T.childCount-1),Me=_e.getChild(_e.childCount-1);T=A(Ve,Me,w),z+=1}else if(L.indent<z){const _e=z-L.indent;T=function(Me,Qe){const dt=Me.getAncestors({parentFirst:!0});let nt=null,qe=0;for(const et of dt)if((et.is("element","ul")||et.is("element","ol"))&&qe++,qe===Qe){nt=et;break}return nt}(T,_e),z=L.indent}}else T=A(Ve,L.element,w);L.indent<=z&&(T.is("element",Ve.type)||(T=w.rename(Ve.type,T)))}const Ie=function(Ve,_e){return function(Me,Qe){const dt=new y.Matcher({name:"span",styles:{"mso-list":"Ignore"}}),nt=Qe.createRangeIn(Me);for(const qe of nt)qe.type==="elementStart"&&dt.match(qe.item)&&Qe.remove(qe.item)}(Ve,_e),_e.rename("li",Ve)}(L.element,w);w.appendChild(Ie,T)})}function d(r){if(r.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(r){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return r;default:return null}}function A(r,u,w){const _=u.parent,T=w.createElement(r.type),z=_.getChildIndex(u)+1;return w.insertChild(z,T,_),r.style&&w.setStyle("list-style-type",r.style,T),r.startIndex&&r.startIndex>1&&w.setAttribute("start",r.startIndex,T),T}function H(r){const u={},w=r.getStyle("mso-list");if(w){const _=w.match(/(^|\s{1,100})l(\d+)/i),T=w.match(/\s{0,100}lfo(\d+)/i),z=w.match(/\s{0,100}level(\d+)/i);_&&T&&z&&(u.id=_[2],u.order=T[1],u.indent=parseInt(z[1]))}return u}const I=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class C{constructor(u){this.document=u}isActive(u){return I.test(u)}execute(u){const w=new y.UpcastWriter(this.document),{body:_}=u._parsedData;(function(T,z){for(const L of T.getChildren())if(L.is("element","b")&&L.getStyle("font-weight")==="normal"){const x=T.getChildIndex(L);z.remove(L),z.insertChild(x,L.getChildren(),T)}})(_,w),function(T,z){for(const L of z.createRangeIn(T)){const x=L.item;if(x.is("element","li")){const c=x.getChild(0);c&&c.is("element","p")&&z.unwrapElement(c)}}}(_,w),function(T,z){const L=new y.ViewDocument(z.document.stylesProcessor),x=new y.DomConverter(L,{renderingMode:"data"}),c=x.blockElements,D=x.inlineObjectElements,W=[];for(const q of z.createRangeIn(T)){const ae=q.item;if(ae.is("element","br")){const Ie=f(ae,"forward",z,{blockElements:c,inlineObjectElements:D}),Ve=f(ae,"backward",z,{blockElements:c,inlineObjectElements:D}),_e=v(Ie,c);(v(Ve,c)||_e)&&W.push(ae)}}for(const q of W)q.hasClass("Apple-interchange-newline")?z.remove(q):z.replace(q,z.createElement("p"))}(_,w),u.content=_}}function me(r,u){if(!r.childCount)return;const w=new y.UpcastWriter(r.document),_=function(z,L){const x=L.createRangeIn(z),c=new y.Matcher({name:/v:(.+)/}),D=[];for(const W of x){if(W.type!="elementStart")continue;const q=W.item,ae=q.previousSibling,Ie=ae&&ae.is("element")?ae.name:null;c.match(q)&&q.getAttribute("o:gfxdata")&&Ie!=="v:shapetype"&&D.push(W.item.getAttribute("id"))}return D}(r,w);(function(z,L,x){const c=x.createRangeIn(L),D=new y.Matcher({name:"img"}),W=[];for(const q of c)if(q.item.is("element")&&D.match(q.item)){const ae=q.item,Ie=ae.getAttribute("v:shapes")?ae.getAttribute("v:shapes").split(" "):[];Ie.length&&Ie.every(Ve=>z.indexOf(Ve)>-1)?W.push(ae):ae.getAttribute("src")||W.push(ae)}for(const q of W)x.remove(q)})(_,r,w),function(z,L,x){const c=x.createRangeIn(L),D=[];for(const ae of c)if(ae.type=="elementStart"&&ae.item.is("element","v:shape")){const Ie=ae.item.getAttribute("id");if(z.includes(Ie))continue;W(ae.item.parent.getChildren(),Ie)||D.push(ae.item)}for(const ae of D){const Ie={src:q(ae)};ae.hasAttribute("alt")&&(Ie.alt=ae.getAttribute("alt"));const Ve=x.createElement("img",Ie);x.insertChild(ae.index+1,Ve,ae.parent)}function W(ae,Ie){for(const Ve of ae)if(Ve.is("element")&&(Ve.name=="img"&&Ve.getAttribute("v:shapes")==Ie||W(Ve.getChildren(),Ie)))return!0;return!1}function q(ae){for(const Ie of ae.getChildren())if(Ie.is("element")&&Ie.getAttribute("src"))return Ie.getAttribute("src")}}(_,r,w),function(z,L){const x=L.createRangeIn(z),c=new y.Matcher({name:/v:(.+)/}),D=[];for(const W of x)W.type=="elementStart"&&c.match(W.item)&&D.push(W.item);for(const W of D)L.remove(W)}(r,w);const T=function(z,L){const x=L.createRangeIn(z),c=new y.Matcher({name:"img"}),D=[];for(const W of x)W.item.is("element")&&c.match(W.item)&&W.item.getAttribute("src").startsWith("file://")&&D.push(W.item);return D}(r,w);T.length&&function(z,L,x){if(z.length===L.length)for(let c=0;c<z.length;c++){const D=`data:${L[c].type};base64,${pe(L[c].hex)}`;x.setAttribute("src",D,z[c])}}(T,function(z){if(!z)return[];const L=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,x=new RegExp("(?:("+L.source+"))([\\da-fA-F\\s]+)\\}","g"),c=z.match(x),D=[];if(c)for(const W of c){let q=!1;W.includes("\\pngblip")?q="image/png":W.includes("\\jpegblip")&&(q="image/jpeg"),q&&D.push({hex:W.replace(L,"").replace(/[^\da-fA-F]/g,""),type:q})}return D}(u),w)}function pe(r){return btoa(r.match(/\w{2}/g).map(u=>String.fromCharCode(parseInt(u,16))).join(""))}const ge=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,X=/xmlns:o="urn:schemas-microsoft-com/i;class te{constructor(u){this.document=u}isActive(u){return ge.test(u)||X.test(u)}execute(u){const{body:w,stylesString:_}=u._parsedData;a(w,_),me(w,u.dataTransfer.getData("text/rtf")),u.content=w}}function Z(r){return r.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(u,w)=>w.length===1?" ":Array(w.length+1).join("\xA0 ").substr(0,w.length))}function h(r,u){const w=new DOMParser,_=function(c){return Z(Z(c)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g,"\xA0</").replace(/ <o:p><\/o:p>/g,"\xA0<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}(function(c){const D="</body>",W="</html>",q=c.indexOf(D);if(q<0)return c;const ae=c.indexOf(W,q+D.length);return c.substring(0,q+D.length)+(ae>=0?c.substring(ae):"")}(r=r.replace(/<!--\[if gte vml 1]>/g,""))),T=w.parseFromString(_,"text/html");(function(c){c.querySelectorAll("span[style*=spacerun]").forEach(D=>{const W=D,q=W.innerText.length||0;W.innerText=Array(q+1).join("\xA0 ").substr(0,q)})})(T);const z=T.body.innerHTML,L=function(c,D){const W=new y.ViewDocument(D),q=new y.DomConverter(W,{renderingMode:"data"}),ae=c.createDocumentFragment(),Ie=c.body.childNodes;for(;Ie.length>0;)ae.appendChild(Ie[0]);return q.domToView(ae,{skipComments:!0})}(T,u),x=function(c){const D=[],W=[],q=Array.from(c.getElementsByTagName("style"));for(const ae of q)ae.sheet&&ae.sheet.cssRules&&ae.sheet.cssRules.length&&(D.push(ae.sheet),W.push(ae.innerHTML));return{styles:D,stylesString:W.join(" ")}}(T);return{body:L,bodyString:z,styles:x.styles,stylesString:x.stylesString}}class g extends m.Plugin{static get pluginName(){return"PasteFromOffice"}static get requires(){return[E.ClipboardPipeline]}init(){const u=this.editor,w=u.editing.view.document,_=[];_.push(new te(w)),_.push(new C(w)),u.plugins.get("ClipboardPipeline").on("inputTransformation",(T,z)=>{if(z._isTransformedWithPasteFromOffice||u.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const L=z.dataTransfer.getData("text/html"),x=_.find(c=>c.isActive(L));x&&(z._parsedData=h(L,w.stylesProcessor),x.execute(z),z._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}})(),(window.CKEditor5=window.CKEditor5||{}).pasteFromOffice=Qt})()},89390:(ii,Gt,Y)=>{ii=Y.nmd(ii);/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(function(Qt,m){ii.exports=m(Y(67294))})(self,Qt=>(()=>{var m={703:(v,a,d)=>{"use strict";var A=d(414);function H(){}function I(){}I.resetWarningCache=H,v.exports=function(){function C(ge,X,te,Z,h,g){if(g!==A){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function me(){return C}C.isRequired=C;var pe={array:C,bigint:C,bool:C,func:C,number:C,object:C,string:C,symbol:C,any:C,arrayOf:me,element:C,elementType:C,instanceOf:me,node:C,objectOf:me,oneOf:me,oneOfType:me,shape:me,exact:me,checkPropTypes:I,resetWarningCache:H};return pe.PropTypes=pe,pe}},697:(v,a,d)=>{v.exports=d(703)()},414:v=>{"use strict";v.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},787:v=>{"use strict";v.exports=Qt}},E={};function y(v){var a=E[v];if(a!==void 0)return a.exports;var d=E[v]={exports:{}};return m[v](d,d.exports,y),d.exports}y.n=v=>{var a=v&&v.__esModule?()=>v.default:()=>v;return y.d(a,{a}),a},y.d=(v,a)=>{for(var d in a)y.o(a,d)&&!y.o(v,d)&&Object.defineProperty(v,d,{enumerable:!0,get:a[d]})},y.o=(v,a)=>Object.prototype.hasOwnProperty.call(v,a),y.r=v=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})};var f={};return(()=>{"use strict";y.r(f),y.d(f,{CKEditor:()=>Xi,CKEditorContext:()=>hn});var v=y(787),a=y.n(v),d=y(697),A=y.n(d);const H=function(oe){var ce=typeof oe;return oe!=null&&(ce=="object"||ce=="function")},I=typeof Y.g=="object"&&Y.g&&Y.g.Object===Object&&Y.g;var C=typeof self=="object"&&self&&self.Object===Object&&self;const me=I||C||Function("return this")(),pe=function(){return me.Date.now()};var ge=/\s/;const X=function(oe){for(var ce=oe.length;ce--&&ge.test(oe.charAt(ce)););return ce};var te=/^\s+/;const Z=function(oe){return oe&&oe.slice(0,X(oe)+1).replace(te,"")},h=me.Symbol;var g=Object.prototype,r=g.hasOwnProperty,u=g.toString,w=h?h.toStringTag:void 0;const _=function(oe){var ce=r.call(oe,w),Ue=oe[w];try{oe[w]=void 0;var Et=!0}catch{}var Si=u.call(oe);return Et&&(ce?oe[w]=Ue:delete oe[w]),Si};var T=Object.prototype.toString;const z=function(oe){return T.call(oe)};var L="[object Null]",x="[object Undefined]",c=h?h.toStringTag:void 0;const D=function(oe){return oe==null?oe===void 0?x:L:c&&c in Object(oe)?_(oe):z(oe)},W=function(oe){return oe!=null&&typeof oe=="object"};var q="[object Symbol]";const ae=function(oe){return typeof oe=="symbol"||W(oe)&&D(oe)==q};var Ie=NaN,Ve=/^[-+]0x[0-9a-f]+$/i,_e=/^0b[01]+$/i,Me=/^0o[0-7]+$/i,Qe=parseInt;const dt=function(oe){if(typeof oe=="number")return oe;if(ae(oe))return Ie;if(H(oe)){var ce=typeof oe.valueOf=="function"?oe.valueOf():oe;oe=H(ce)?ce+"":ce}if(typeof oe!="string")return oe===0?oe:+oe;oe=Z(oe);var Ue=_e.test(oe);return Ue||Me.test(oe)?Qe(oe.slice(2),Ue?2:8):Ve.test(oe)?Ie:+oe};var nt="Expected a function",qe=Math.max,et=Math.min;const Nt=function(oe,ce,Ue){var Et,Si,Di,Zi,$i,gn,wn=0,Lo=!1,io=!1,Bn=!0;if(typeof oe!="function")throw new TypeError(nt);function vo(_n){var Jn=Et,lo=Si;return Et=Si=void 0,wn=_n,Zi=oe.apply(lo,Jn)}function Qn(_n){var Jn=_n-gn;return gn===void 0||Jn>=ce||Jn<0||io&&_n-wn>=Di}function Wn(){var _n=pe();if(Qn(_n))return zn(_n);$i=setTimeout(Wn,function(Jn){var lo=ce-(Jn-gn);return io?et(lo,Di-(Jn-wn)):lo}(_n))}function zn(_n){return $i=void 0,Bn&&Et?vo(_n):(Et=Si=void 0,Zi)}function Zn(){var _n=pe(),Jn=Qn(_n);if(Et=arguments,Si=this,gn=_n,Jn){if($i===void 0)return function(lo){return wn=lo,$i=setTimeout(Wn,ce),Lo?vo(lo):Zi}(gn);if(io)return clearTimeout($i),$i=setTimeout(Wn,ce),vo(gn)}return $i===void 0&&($i=setTimeout(Wn,ce)),Zi}return ce=dt(ce)||0,H(Ue)&&(Lo=!!Ue.leading,Di=(io="maxWait"in Ue)?qe(dt(Ue.maxWait)||0,ce):Di,Bn="trailing"in Ue?!!Ue.trailing:Bn),Zn.cancel=function(){$i!==void 0&&clearTimeout($i),wn=0,Et=gn=Si=$i=void 0},Zn.flush=function(){return $i===void 0?Zi:zn(pe())},Zn};var jt="Expected a function";const yt=function(oe,ce,Ue){var Et=!0,Si=!0;if(typeof oe!="function")throw new TypeError(jt);return H(Ue)&&(Et="leading"in Ue?!!Ue.leading:Et,Si="trailing"in Ue?!!Ue.trailing:Si),Nt(oe,ce,{leading:Et,maxWait:ce,trailing:Si})},tt=function(){this.__data__=[],this.size=0},Bt=function(oe,ce){return oe===ce||oe!=oe&&ce!=ce},ye=function(oe,ce){for(var Ue=oe.length;Ue--;)if(Bt(oe[Ue][0],ce))return Ue;return-1};var Ae=Array.prototype.splice;const Ke=function(oe){var ce=this.__data__,Ue=ye(ce,oe);return!(Ue<0)&&(Ue==ce.length-1?ce.pop():Ae.call(ce,Ue,1),--this.size,!0)},kt=function(oe){var ce=this.__data__,Ue=ye(ce,oe);return Ue<0?void 0:ce[Ue][1]},It=function(oe){return ye(this.__data__,oe)>-1},Yt=function(oe,ce){var Ue=this.__data__,Et=ye(Ue,oe);return Et<0?(++this.size,Ue.push([oe,ce])):Ue[Et][1]=ce,this};function zt(oe){var ce=-1,Ue=oe==null?0:oe.length;for(this.clear();++ce<Ue;){var Et=oe[ce];this.set(Et[0],Et[1])}}zt.prototype.clear=tt,zt.prototype.delete=Ke,zt.prototype.get=kt,zt.prototype.has=It,zt.prototype.set=Yt;const ot=zt,Dt=function(){this.__data__=new ot,this.size=0},wt=function(oe){var ce=this.__data__,Ue=ce.delete(oe);return this.size=ce.size,Ue},ni=function(oe){return this.__data__.get(oe)},di=function(oe){return this.__data__.has(oe)};var xi="[object AsyncFunction]",bt="[object Function]",fe="[object GeneratorFunction]",je="[object Proxy]";const Ze=function(oe){if(!H(oe))return!1;var ce=D(oe);return ce==bt||ce==fe||ce==xi||ce==je},pt=me["__core-js_shared__"];var Ct=function(){var oe=/[^.]+$/.exec(pt&&pt.keys&&pt.keys.IE_PROTO||"");return oe?"Symbol(src)_1."+oe:""}();const St=function(oe){return!!Ct&&Ct in oe};var Xt=Function.prototype.toString;const Zt=function(oe){if(oe!=null){try{return Xt.call(oe)}catch{}try{return oe+""}catch{}}return""};var oi=/^\[object .+?Constructor\]$/,bi=Function.prototype,gi=Object.prototype,Ti=bi.toString,Mt=gi.hasOwnProperty,Ei=RegExp("^"+Ti.call(Mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Ri=function(oe){return!(!H(oe)||St(oe))&&(Ze(oe)?Ei:oi).test(Zt(oe))},Yi=function(oe,ce){return oe?.[ce]},ji=function(oe,ce){var Ue=Yi(oe,ce);return Ri(Ue)?Ue:void 0},Pi=ji(me,"Map"),qi=ji(Object,"create"),nn=function(){this.__data__=qi?qi(null):{},this.size=0},Li=function(oe){var ce=this.has(oe)&&delete this.__data__[oe];return this.size-=ce?1:0,ce};var dn="__lodash_hash_undefined__",pi=Object.prototype.hasOwnProperty;const fi=function(oe){var ce=this.__data__;if(qi){var Ue=ce[oe];return Ue===dn?void 0:Ue}return pi.call(ce,oe)?ce[oe]:void 0};var Ki=Object.prototype.hasOwnProperty;const ke=function(oe){var ce=this.__data__;return qi?ce[oe]!==void 0:Ki.call(ce,oe)};var V="__lodash_hash_undefined__";const F=function(oe,ce){var Ue=this.__data__;return this.size+=this.has(oe)?0:1,Ue[oe]=qi&&ce===void 0?V:ce,this};function P(oe){var ce=-1,Ue=oe==null?0:oe.length;for(this.clear();++ce<Ue;){var Et=oe[ce];this.set(Et[0],Et[1])}}P.prototype.clear=nn,P.prototype.delete=Li,P.prototype.get=fi,P.prototype.has=ke,P.prototype.set=F;const N=P,de=function(){this.size=0,this.__data__={hash:new N,map:new(Pi||ot),string:new N}},Ce=function(oe){var ce=typeof oe;return ce=="string"||ce=="number"||ce=="symbol"||ce=="boolean"?oe!=="__proto__":oe===null},$e=function(oe,ce){var Ue=oe.__data__;return Ce(ce)?Ue[typeof ce=="string"?"string":"hash"]:Ue.map},at=function(oe){var ce=$e(this,oe).delete(oe);return this.size-=ce?1:0,ce},Tt=function(oe){return $e(this,oe).get(oe)},Ge=function(oe){return $e(this,oe).has(oe)},Ut=function(oe,ce){var Ue=$e(this,oe),Et=Ue.size;return Ue.set(oe,ce),this.size+=Ue.size==Et?0:1,this};function ci(oe){var ce=-1,Ue=oe==null?0:oe.length;for(this.clear();++ce<Ue;){var Et=oe[ce];this.set(Et[0],Et[1])}}ci.prototype.clear=de,ci.prototype.delete=at,ci.prototype.get=Tt,ci.prototype.has=Ge,ci.prototype.set=Ut;const yi=ci;var Ni=200;const Ii=function(oe,ce){var Ue=this.__data__;if(Ue instanceof ot){var Et=Ue.__data__;if(!Pi||Et.length<Ni-1)return Et.push([oe,ce]),this.size=++Ue.size,this;Ue=this.__data__=new yi(Et)}return Ue.set(oe,ce),this.size=Ue.size,this};function zi(oe){var ce=this.__data__=new ot(oe);this.size=ce.size}zi.prototype.clear=Dt,zi.prototype.delete=wt,zi.prototype.get=ni,zi.prototype.has=di,zi.prototype.set=Ii;const Oi=zi,Ui=function(oe,ce){for(var Ue=-1,Et=oe==null?0:oe.length;++Ue<Et&&ce(oe[Ue],Ue,oe)!==!1;);return oe},Wt=function(){try{var oe=ji(Object,"defineProperty");return oe({},"",{}),oe}catch{}}(),we=function(oe,ce,Ue){ce=="__proto__"&&Wt?Wt(oe,ce,{configurable:!0,enumerable:!0,value:Ue,writable:!0}):oe[ce]=Ue};var He=Object.prototype.hasOwnProperty;const J=function(oe,ce,Ue){var Et=oe[ce];He.call(oe,ce)&&Bt(Et,Ue)&&(Ue!==void 0||ce in oe)||we(oe,ce,Ue)},R=function(oe,ce,Ue,Et){var Si=!Ue;Ue||(Ue={});for(var Di=-1,Zi=ce.length;++Di<Zi;){var $i=ce[Di],gn=Et?Et(Ue[$i],oe[$i],$i,Ue,oe):void 0;gn===void 0&&(gn=oe[$i]),Si?we(Ue,$i,gn):J(Ue,$i,gn)}return Ue},Q=function(oe,ce){for(var Ue=-1,Et=Array(oe);++Ue<oe;)Et[Ue]=ce(Ue);return Et};var ve="[object Arguments]";const De=function(oe){return W(oe)&&D(oe)==ve};var rt=Object.prototype,Pt=rt.hasOwnProperty,ai=rt.propertyIsEnumerable;const wi=De(function(){return arguments}())?De:function(oe){return W(oe)&&Pt.call(oe,"callee")&&!ai.call(oe,"callee")},mt=Array.isArray,U=function(){return!1};var se=Gt&&!Gt.nodeType&&Gt,Te=se&&!0&&ii&&!ii.nodeType&&ii,Le=Te&&Te.exports===se?me.Buffer:void 0;const Ye=(Le?Le.isBuffer:void 0)||U;var Je=9007199254740991,At=/^(?:0|[1-9]\d*)$/;const _t=function(oe,ce){var Ue=typeof oe;return!!(ce=ce??Je)&&(Ue=="number"||Ue!="symbol"&&At.test(oe))&&oe>-1&&oe%1==0&&oe<ce};var Rt=9007199254740991;const Vt=function(oe){return typeof oe=="number"&&oe>-1&&oe%1==0&&oe<=Rt};var $t={};$t["[object Float32Array]"]=$t["[object Float64Array]"]=$t["[object Int8Array]"]=$t["[object Int16Array]"]=$t["[object Int32Array]"]=$t["[object Uint8Array]"]=$t["[object Uint8ClampedArray]"]=$t["[object Uint16Array]"]=$t["[object Uint32Array]"]=!0,$t["[object Arguments]"]=$t["[object Array]"]=$t["[object ArrayBuffer]"]=$t["[object Boolean]"]=$t["[object DataView]"]=$t["[object Date]"]=$t["[object Error]"]=$t["[object Function]"]=$t["[object Map]"]=$t["[object Number]"]=$t["[object Object]"]=$t["[object RegExp]"]=$t["[object Set]"]=$t["[object String]"]=$t["[object WeakMap]"]=!1;const li=function(oe){return W(oe)&&Vt(oe.length)&&!!$t[D(oe)]},Ci=function(oe){return function(ce){return oe(ce)}};var hi=Gt&&!Gt.nodeType&&Gt,Fi=hi&&!0&&ii&&!ii.nodeType&&ii,un=Fi&&Fi.exports===hi&&I.process;const an=function(){try{var oe=Fi&&Fi.require&&Fi.require("util").types;return oe||un&&un.binding&&un.binding("util")}catch{}}();var Cn=an&&an.isTypedArray;const fn=Cn?Ci(Cn):li;var Tn=Object.prototype.hasOwnProperty;const In=function(oe,ce){var Ue=mt(oe),Et=!Ue&&wi(oe),Si=!Ue&&!Et&&Ye(oe),Di=!Ue&&!Et&&!Si&&fn(oe),Zi=Ue||Et||Si||Di,$i=Zi?Q(oe.length,String):[],gn=$i.length;for(var wn in oe)!ce&&!Tn.call(oe,wn)||Zi&&(wn=="length"||Si&&(wn=="offset"||wn=="parent")||Di&&(wn=="buffer"||wn=="byteLength"||wn=="byteOffset")||_t(wn,gn))||$i.push(wn);return $i};var Dn=Object.prototype;const Fn=function(oe){var ce=oe&&oe.constructor;return oe===(typeof ce=="function"&&ce.prototype||Dn)},Be=function(oe,ce){return function(Ue){return oe(ce(Ue))}},j=Be(Object.keys,Object);var ie=Object.prototype.hasOwnProperty;const ue=function(oe){if(!Fn(oe))return j(oe);var ce=[];for(var Ue in Object(oe))ie.call(oe,Ue)&&Ue!="constructor"&&ce.push(Ue);return ce},Ee=function(oe){return oe!=null&&Vt(oe.length)&&!Ze(oe)},Re=function(oe){return Ee(oe)?In(oe):ue(oe)},ze=function(oe,ce){return oe&&R(ce,Re(ce),oe)},Ne=function(oe){var ce=[];if(oe!=null)for(var Ue in Object(oe))ce.push(Ue);return ce};var Fe=Object.prototype.hasOwnProperty;const lt=function(oe){if(!H(oe))return Ne(oe);var ce=Fn(oe),Ue=[];for(var Et in oe)(Et!="constructor"||!ce&&Fe.call(oe,Et))&&Ue.push(Et);return Ue},gt=function(oe){return Ee(oe)?In(oe,!0):lt(oe)},ut=function(oe,ce){return oe&&R(ce,gt(ce),oe)};var vt=Gt&&!Gt.nodeType&&Gt,Ot=vt&&!0&&ii&&!ii.nodeType&&ii,ei=Ot&&Ot.exports===vt?me.Buffer:void 0,xt=ei?ei.allocUnsafe:void 0;const ri=function(oe,ce){if(ce)return oe.slice();var Ue=oe.length,Et=xt?xt(Ue):new oe.constructor(Ue);return oe.copy(Et),Et},vi=function(oe,ce){var Ue=-1,Et=oe.length;for(ce||(ce=Array(Et));++Ue<Et;)ce[Ue]=oe[Ue];return ce},Vi=function(oe,ce){for(var Ue=-1,Et=oe==null?0:oe.length,Si=0,Di=[];++Ue<Et;){var Zi=oe[Ue];ce(Zi,Ue,oe)&&(Di[Si++]=Zi)}return Di},Wi=function(){return[]};var tn=Object.prototype.propertyIsEnumerable,bn=Object.getOwnPropertySymbols;const Pe=bn?function(oe){return oe==null?[]:(oe=Object(oe),Vi(bn(oe),function(ce){return tn.call(oe,ce)}))}:Wi,k=function(oe,ce){return R(oe,Pe(oe),ce)},O=function(oe,ce){for(var Ue=-1,Et=ce.length,Si=oe.length;++Ue<Et;)oe[Si+Ue]=ce[Ue];return oe},he=Be(Object.getPrototypeOf,Object),Se=Object.getOwnPropertySymbols?function(oe){for(var ce=[];oe;)O(ce,Pe(oe)),oe=he(oe);return ce}:Wi,ht=function(oe,ce){return R(oe,Se(oe),ce)},ct=function(oe,ce,Ue){var Et=ce(oe);return mt(oe)?Et:O(Et,Ue(oe))},st=function(oe){return ct(oe,Re,Pe)},qt=function(oe){return ct(oe,gt,Se)},Mi=ji(me,"DataView"),Gi=ji(me,"Promise"),mn=ji(me,"Set"),eo=ji(me,"WeakMap");var to="[object Map]",uo="[object Promise]",Ro="[object Set]",Oo="[object WeakMap]",jo="[object DataView]",ir=Zt(Mi),nr=Zt(Pi),or=Zt(Gi),rr=Zt(mn),No=Zt(eo),Hn=D;(Mi&&Hn(new Mi(new ArrayBuffer(1)))!=jo||Pi&&Hn(new Pi)!=to||Gi&&Hn(Gi.resolve())!=uo||mn&&Hn(new mn)!=Ro||eo&&Hn(new eo)!=Oo)&&(Hn=function(oe){var ce=D(oe),Ue=ce=="[object Object]"?oe.constructor:void 0,Et=Ue?Zt(Ue):"";if(Et)switch(Et){case ir:return jo;case nr:return to;case or:return uo;case rr:return Ro;case No:return Oo}return ce});const ho=Hn;var sr=Object.prototype.hasOwnProperty;const Nn=function(oe){var ce=oe.length,Ue=new oe.constructor(ce);return ce&&typeof oe[0]=="string"&&sr.call(oe,"index")&&(Ue.index=oe.index,Ue.input=oe.input),Ue},Vo=me.Uint8Array,mo=function(oe){var ce=new oe.constructor(oe.byteLength);return new Vo(ce).set(new Vo(oe)),ce},yo=function(oe,ce){var Ue=ce?mo(oe.buffer):oe.buffer;return new oe.constructor(Ue,oe.byteOffset,oe.byteLength)};var ar=/\w*$/;const Bo=function(oe){var ce=new oe.constructor(oe.source,ar.exec(oe));return ce.lastIndex=oe.lastIndex,ce};var zo=h?h.prototype:void 0,Do=zo?zo.valueOf:void 0;const lr=function(oe){return Do?Object(Do.call(oe)):{}},Fo=function(oe,ce){var Ue=ce?mo(oe.buffer):oe.buffer;return new oe.constructor(Ue,oe.byteOffset,oe.length)};var Ho="[object Boolean]",xo="[object Date]",Co="[object Map]",go="[object Number]",Uo="[object RegExp]",cr="[object Set]",oo="[object String]",Wo="[object Symbol]",To="[object ArrayBuffer]",dr="[object DataView]",Ao="[object Float32Array]",Zo="[object Float64Array]",So="[object Int8Array]",$o="[object Int16Array]",ro="[object Int32Array]",ur="[object Uint8Array]",qo="[object Uint8ClampedArray]",Eo="[object Uint16Array]",Io="[object Uint32Array]";const Un=function(oe,ce,Ue){var Et=oe.constructor;switch(ce){case To:return mo(oe);case Ho:case xo:return new Et(+oe);case dr:return yo(oe,Ue);case Ao:case Zo:case So:case $o:case ro:case ur:case qo:case Eo:case Io:return Fo(oe,Ue);case Co:return new Et;case go:case oo:return new Et(oe);case Uo:return Bo(oe);case cr:return new Et;case Wo:return lr(oe)}};var Gn=Object.create;const so=function(){function oe(){}return function(ce){if(!H(ce))return{};if(Gn)return Gn(ce);oe.prototype=ce;var Ue=new oe;return oe.prototype=void 0,Ue}}(),on=function(oe){return typeof oe.constructor!="function"||Fn(oe)?{}:so(he(oe))};var Pn="[object Map]";const rn=function(oe){return W(oe)&&ho(oe)==Pn};var Rn=an&&an.isMap;const Vn=Rn?Ci(Rn):rn;var si="[object Set]";const ao=function(oe){return W(oe)&&ho(oe)==si};var po=an&&an.isSet;const Po=po?Ci(po):ao;var fo=1,An=2,Ht=4,bo="[object Arguments]",Ko="[object Function]",wo="[object GeneratorFunction]",ko="[object Object]",cn={};cn[bo]=cn["[object Array]"]=cn["[object ArrayBuffer]"]=cn["[object DataView]"]=cn["[object Boolean]"]=cn["[object Date]"]=cn["[object Float32Array]"]=cn["[object Float64Array]"]=cn["[object Int8Array]"]=cn["[object Int16Array]"]=cn["[object Int32Array]"]=cn["[object Map]"]=cn["[object Number]"]=cn[ko]=cn["[object RegExp]"]=cn["[object Set]"]=cn["[object String]"]=cn["[object Symbol]"]=cn["[object Uint8Array]"]=cn["[object Uint8ClampedArray]"]=cn["[object Uint16Array]"]=cn["[object Uint32Array]"]=!0,cn["[object Error]"]=cn[Ko]=cn["[object WeakMap]"]=!1;const Go=function oe(ce,Ue,Et,Si,Di,Zi){var $i,gn=Ue&fo,wn=Ue&An,Lo=Ue&Ht;if(Et&&($i=Di?Et(ce,Si,Di,Zi):Et(ce)),$i!==void 0)return $i;if(!H(ce))return ce;var io=mt(ce);if(io){if($i=Nn(ce),!gn)return vi(ce,$i)}else{var Bn=ho(ce),vo=Bn==Ko||Bn==wo;if(Ye(ce))return ri(ce,gn);if(Bn==ko||Bn==bo||vo&&!Di){if($i=wn||vo?{}:on(ce),!gn)return wn?ht(ce,ut($i,ce)):k(ce,ze($i,ce))}else{if(!cn[Bn])return Di?ce:{};$i=Un(ce,Bn,gn)}}Zi||(Zi=new Oi);var Qn=Zi.get(ce);if(Qn)return Qn;Zi.set(ce,$i),Po(ce)?ce.forEach(function(zn){$i.add(oe(zn,Ue,Et,zn,ce,Zi))}):Vn(ce)&&ce.forEach(function(zn,Zn){$i.set(Zn,oe(zn,Ue,Et,Zn,ce,Zi))});var Wn=io?void 0:(Lo?wn?qt:st:wn?gt:Re)(ce);return Ui(Wn||ce,function(zn,Zn){Wn&&(zn=ce[Zn=zn]),J($i,Zn,oe(zn,Ue,Et,Zn,ce,Zi))}),$i};var On=1,ee=4;const l=function(oe,ce){return Go(oe,On|ee,ce=typeof ce=="function"?ce:void 0)};var b="[object Object]",M=Function.prototype,S=Object.prototype,$=M.toString,K=S.hasOwnProperty,ne=$.call(Object);const re=function(oe){if(!W(oe)||D(oe)!=b)return!1;var ce=he(oe);if(ce===null)return!0;var Ue=K.call(ce,"constructor")&&ce.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&$.call(Ue)==ne},xe=function(oe){return W(oe)&&oe.nodeType===1&&!re(oe)};function Oe(oe,ce=new Set){const Ue=[oe],Et=new Set;let Si=0;for(;Ue.length>Si;){const Di=Ue[Si++];if(!(Et.has(Di)||Xe(Di)||ce.has(Di)))if(Et.add(Di),Di[Symbol.iterator])try{for(const Zi of Di)Ue.push(Zi)}catch{}else for(const Zi in Di)Zi!=="defaultValue"&&Ue.push(Di[Zi])}return Et}function Xe(oe){const ce=Object.prototype.toString.call(oe),Ue=typeof oe;return Ue==="number"||Ue==="boolean"||Ue==="string"||Ue==="symbol"||Ue==="function"||ce==="[object Date]"||ce==="[object RegExp]"||ce==="[object Module]"||oe==null||oe._watchdogExcluded===!0||oe instanceof EventTarget||oe instanceof Event}function ft(oe,ce,Ue=new Set){if(oe===ce&&typeof(Et=oe)=="object"&&Et!==null)return!0;var Et;const Si=Oe(oe,Ue),Di=Oe(ce,Ue);for(const Zi of Si)if(Di.has(Zi))return!0;return!1}class Ft{constructor(ce){if(this.crashes=[],this.state="initializing",this._crashNumberLimit=typeof ce.crashNumberLimit=="number"?ce.crashNumberLimit:3,this._now=Date.now,this._minimumNonErrorTimePeriod=typeof ce.minimumNonErrorTimePeriod=="number"?ce.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=Ue=>{const Et=Ue.error||Ue.reason;Et instanceof Error&&this._handleError(Et,Ue)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}setCreator(ce){this._creator=ce}setDestructor(ce){this._destructor=ce}destroy(){this._stopErrorHandling(),this._listeners={}}on(ce,Ue){this._listeners[ce]||(this._listeners[ce]=[]),this._listeners[ce].push(Ue)}off(ce,Ue){this._listeners[ce]=this._listeners[ce].filter(Et=>Et!==Ue)}_fire(ce,...Ue){const Et=this._listeners[ce]||[];for(const Si of Et)Si.apply(this,[null,...Ue])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(ce,Ue){if(this._shouldReactToError(ce)){this.crashes.push({message:ce.message,stack:ce.stack,filename:Ue.filename,lineno:Ue.lineno,colno:Ue.colno,date:this._now()});const Et=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:ce,causesRestart:Et}),Et?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(ce){return ce.is&&ce.is("CKEditorError")&&ce.context!==void 0&&ce.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(ce)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit?!0:(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}class ti extends Ft{constructor(ce,Ue={}){super(Ue),this._editor=null,this._throttledSave=yt(this._save.bind(this),typeof Ue.saveInterval=="number"?Ue.saveInterval:5e3),this._creator=(Et,Si)=>ce.create(Et,Si),this._destructor=Et=>Et.destroy()}get editor(){return this._editor}get _item(){return this._editor}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(ce=>{console.error("An error happened during the editor destroying.",ce)}).then(()=>{if(typeof this._elementOrData=="string")return this.create(this._data,this._config,this._config.context);{const ce=Object.assign({},this._config,{initialData:this._data});return this.create(this._elementOrData,ce,ce.context)}}).then(()=>{this._fire("restart")})}create(ce=this._elementOrData,Ue=this._config,Et){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=ce,this._config=this._cloneEditorConfiguration(Ue)||{},this._config.context=Et,this._creator(ce,this._config))).then(Si=>{this._editor=Si,Si.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=Si.model.document.version,this._data=this._getData(),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.flush();const ce=this._editor;return this._editor=null,ce.model.document.off("change:data",this._throttledSave),this._destructor(ce)})}_save(){const ce=this._editor.model.document.version;try{this._data=this._getData(),this._lastDocumentVersion=ce}catch(Ue){console.error(Ue,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(ce){this._excludedProps=ce}_getData(){const ce={};for(const Ue of this._editor.model.document.getRootNames())ce[Ue]=this._editor.data.get({rootName:Ue});return ce}_isErrorComingFromThisItem(ce){return ft(this._editor,ce.context,this._excludedProps)}_cloneEditorConfiguration(ce){return l(ce,(Ue,Et)=>xe(Ue)||Et==="context"?Ue:void 0)}}const Kt=new Array(256).fill("").map((oe,ce)=>("0"+ce.toString(16)).slice(-2)),ui=Symbol("MainQueueId");class ki extends Ft{constructor(ce,Ue={}){super(Ue),this._watchdogs=new Map,this._watchdogConfig=Ue,this._context=null,this._contextProps=new Set,this._actionQueues=new Ai,this._creator=Et=>ce.create(Et),this._destructor=Et=>Et.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}get context(){return this._context}create(ce={}){return this._actionQueues.enqueue(ui,()=>(this._contextConfig=ce,this._create()))}getItem(ce){return this._getWatchdog(ce)._item}getItemState(ce){return this._getWatchdog(ce).state}add(ce){const Ue=Hi(ce);return Promise.all(Ue.map(Et=>this._actionQueues.enqueue(Et.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let Si;if(this._watchdogs.has(Et.id))throw new Error(`Item with the given id is already added: '${Et.id}'.`);if(Et.type==="editor")return Si=new ti(this._watchdogConfig),Si.setCreator(Et.creator),Si._setExcludedProperties(this._contextProps),Et.destructor&&Si.setDestructor(Et.destructor),this._watchdogs.set(Et.id,Si),Si.on("error",(Di,{error:Zi,causesRestart:$i})=>{this._fire("itemError",{itemId:Et.id,error:Zi}),$i&&this._actionQueues.enqueue(Et.id,()=>new Promise(gn=>{Si.on("restart",function wn(){Si.off("restart",wn),this._fire("itemRestart",{itemId:Et.id}),gn()}.bind(this))}))}),Si.create(Et.sourceElementOrData,Et.config,this._context);throw new Error(`Not supported item type: '${Et.type}'.`)})))}remove(ce){const Ue=Hi(ce);return Promise.all(Ue.map(Et=>this._actionQueues.enqueue(Et,()=>{const Si=this._getWatchdog(Et);return this._watchdogs.delete(Et),Si.destroy()})))}destroy(){return this._actionQueues.enqueue(ui,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(ui,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(ce=>{console.error("An error happened during destroying the context or items.",ce)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(ce=>(this._context=ce,this._contextProps=Oe(this._context),Promise.all(Array.from(this._watchdogs.values()).map(Ue=>(Ue._setExcludedProperties(this._contextProps),Ue.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const ce=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(Ue=>Ue.destroy())).then(()=>this._destructor(ce))})}_getWatchdog(ce){const Ue=this._watchdogs.get(ce);if(!Ue)throw new Error(`Item with the given id was not registered: ${ce}.`);return Ue}_isErrorComingFromThisItem(ce){for(const Ue of this._watchdogs.values())if(Ue._isErrorComingFromThisItem(ce))return!1;return ft(this._context,ce.context)}}class Ai{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._actions=new WeakMap,this._lastActionId=0,this._activeActions=0}onEmpty(ce){this._onEmptyCallbacks.push(ce)}enqueue(ce,Ue){const Et=ce===ui;this._activeActions++,this._queues.get(ce)||this._queues.set(ce,Promise.resolve());const Si=(Et?Promise.all(this._queues.values()):Promise.all([this._queues.get(ui),this._queues.get(ce)])).then(Ue),Di=Si.catch(()=>{});return this._queues.set(ce,Di),Si.finally(()=>{this._activeActions--,this._queues.get(ce)===Di&&this._activeActions===0&&this._onEmptyCallbacks.forEach(Zi=>Zi())})}}function Hi(oe){return Array.isArray(oe)?oe:[oe]}const Qi=a().createContext("contextWatchdog");class hn extends a().Component{constructor(ce,Ue){super(ce,Ue),this.contextWatchdog=null,this.props.isLayoutReady&&this._initializeContextWatchdog(this.props.config)}async shouldComponentUpdate(ce){return ce.id!==this.props.id&&(this.contextWatchdog&&await this.contextWatchdog.destroy(),await this._initializeContextWatchdog(ce.config)),ce.isLayoutReady&&!this.contextWatchdog?(await this._initializeContextWatchdog(ce.config),!0):this.props.children!==ce.children}render(){return a().createElement(Qi.Provider,{value:this.contextWatchdog},this.props.children)}async componentWillUnmount(){await this._destroyContext()}async _initializeContextWatchdog(ce){this.contextWatchdog=new ki(this.props.context,this.props.watchdogConfig),this.contextWatchdog.on("error",(Ue,Et)=>{this.props.onError(Et.error,{phase:"runtime",willContextRestart:Et.causesRestart})}),this.contextWatchdog.on("stateChange",()=>{this.contextWatchdog.state==="ready"&&this.props.onReady&&this.props.onReady(this.contextWatchdog.context)}),await this.contextWatchdog.create(ce).catch(Ue=>{this.props.onError(Ue,{phase:"initialization",willContextRestart:!1})})}async _destroyContext(){this.contextWatchdog&&(await this.contextWatchdog.destroy(),this.contextWatchdog=null)}}hn.defaultProps={isLayoutReady:!0,onError:(oe,ce)=>console.error(oe,ce)},hn.propTypes={id:A().string,isLayoutReady:A().bool,context:A().func,watchdogConfig:A().object,config:A().object,onReady:A().func,onError:A().func};const kn="Lock from React integration (@ckeditor/ckeditor5-react)";class Xi extends a().Component{constructor(ce){super(ce),this.editorDestructionInProgress=null,this.domContainer=a().createRef(),this.watchdog=null;const{CKEDITOR_VERSION:Ue}=window;if(Ue){const[Et]=Ue.split(".").map(Number);Et<34&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 34 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}get editor(){return this.watchdog?this.watchdog.editor:null}shouldComponentUpdate(ce){return!!this.editor&&(ce.id!==this.props.id||(this._shouldUpdateEditor(ce)&&this.editor.setData(ce.data),"disabled"in ce&&(ce.disabled?this.editor.enableReadOnlyMode(kn):this.editor.disableReadOnlyMode(kn)),!1))}async componentDidMount(){await this._initializeEditor()}async componentDidUpdate(){await this._destroyEditor(),await this._initializeEditor()}async componentWillUnmount(){await this._destroyEditor()}render(){return a().createElement("div",{ref:this.domContainer})}async _initializeEditor(){await this.editorDestructionInProgress,this.watchdog||(this.context instanceof ki?this.watchdog=new Yn(this.context):this.watchdog=new Xi._EditorWatchdog(this.props.editor,this.props.watchdogConfig),this.watchdog.setCreator((ce,Ue)=>this._createEditor(ce,Ue)),this.watchdog.on("error",(ce,{error:Ue,causesRestart:Et})=>{this.props.onError(Ue,{phase:"runtime",willEditorRestart:Et})}),await this.watchdog.create(this.domContainer.current,this._getConfig()).catch(ce=>this.props.onError(ce,{phase:"initialization",willEditorRestart:!1})))}_createEditor(ce,Ue){return this.props.editor.create(ce,Ue).then(Et=>{"disabled"in this.props&&this.props.disabled&&Et.enableReadOnlyMode(kn);const Si=Et.model.document,Di=Et.editing.view.document;return Si.on("change:data",Zi=>{this.props.onChange&&this.props.onChange(Zi,Et)}),Di.on("focus",Zi=>{this.props.onFocus&&this.props.onFocus(Zi,Et)}),Di.on("blur",Zi=>{this.props.onBlur&&this.props.onBlur(Zi,Et)}),setTimeout(()=>{this.props.onReady&&this.props.onReady(Et)}),Et})}async _destroyEditor(){this.editorDestructionInProgress=new Promise(ce=>{setTimeout(()=>{this.watchdog?this.watchdog.destroy().then(()=>{this.watchdog=null,ce()}):ce()})})}_shouldUpdateEditor(ce){return this.props.data!==ce.data&&this.editor.getData()!==ce.data}_getConfig(){return this.props.data&&this.props.config.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` properties. The config property is over the data value and the first one will be used when specified both."),{...this.props.config,initialData:this.props.config.initialData||this.props.data||""}}}class Yn{constructor(ce){this._contextWatchdog=ce,this._id=function(){const Ue=4294967296*Math.random()>>>0,Et=4294967296*Math.random()>>>0,Si=4294967296*Math.random()>>>0,Di=4294967296*Math.random()>>>0;return"e"+Kt[Ue>>0&255]+Kt[Ue>>8&255]+Kt[Ue>>16&255]+Kt[Ue>>24&255]+Kt[Et>>0&255]+Kt[Et>>8&255]+Kt[Et>>16&255]+Kt[Et>>24&255]+Kt[Si>>0&255]+Kt[Si>>8&255]+Kt[Si>>16&255]+Kt[Si>>24&255]+Kt[Di>>0&255]+Kt[Di>>8&255]+Kt[Di>>16&255]+Kt[Di>>24&255]}()}setCreator(ce){this._creator=ce}create(ce,Ue){return this._contextWatchdog.add({sourceElementOrData:ce,config:Ue,creator:this._creator,id:this._id,type:"editor"})}on(ce,Ue){this._contextWatchdog.on("itemError",(Et,{itemId:Si,causesRestart:Di,error:Zi})=>{Si===this._id&&Ue(null,{error:Zi,causesRestart:Di})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}Xi.contextType=Qi,Xi.propTypes={editor:A().func.isRequired,data:A().string,config:A().object,watchdogConfig:A().object,onChange:A().func,onReady:A().func,onFocus:A().func,onBlur:A().func,onError:A().func,disabled:A().bool,onInit:(oe,ce)=>{if(oe[ce])return new Error('The "onInit" property is not supported anymore by the CKEditor component. Use the "onReady" property instead.')}},Xi.defaultProps={config:{},onError:(oe,ce)=>console.error(oe,ce)},Xi._EditorWatchdog=ti})(),f})())},20060:(ii,Gt,Y)=>{(function(Qt){const m=Qt.en=Qt.en||{};m.dictionary=Object.assign(m.dictionary||{},{"Align cell text to the bottom":"Align cell text to the bottom","Align cell text to the center":"Align cell text to the center","Align cell text to the left":"Align cell text to the left","Align cell text to the middle":"Align cell text to the middle","Align cell text to the right":"Align cell text to the right","Align cell text to the top":"Align cell text to the top","Align table to the left":"Align table to the left","Align table to the right":"Align table to the right",Alignment:"Alignment",Background:"Background",Border:"Border","Cell properties":"Cell properties","Center table":"Center table",Color:"Color","Color picker":"Color picker",Column:"Column",Dashed:"Dashed","Delete column":"Delete column","Delete row":"Delete row",Dimensions:"Dimensions",Dotted:"Dotted",Double:"Double","Enter table caption":"Enter table caption",Groove:"Groove","Header column":"Header column","Header row":"Header row",Height:"Height","Horizontal text alignment toolbar":"Horizontal text alignment toolbar","Insert column left":"Insert column left","Insert column right":"Insert column right","Insert row above":"Insert row above","Insert row below":"Insert row below","Insert table":"Insert table",Inset:"Inset","Justify cell text":"Justify cell text","Merge cell down":"Merge cell down","Merge cell left":"Merge cell left","Merge cell right":"Merge cell right","Merge cell up":"Merge cell up","Merge cells":"Merge cells",None:"None",Outset:"Outset",Padding:"Padding",Ridge:"Ridge",Row:"Row","Select column":"Select column","Select row":"Select row",Solid:"Solid","Split cell horizontally":"Split cell horizontally","Split cell vertically":"Split cell vertically",Style:"Style","Table alignment toolbar":"Table alignment toolbar","Table cell text alignment":"Table cell text alignment","Table properties":"Table properties","Table toolbar":"Table toolbar",'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".':'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".','The value is invalid. Try "10px" or "2em" or simply "2".':'The value is invalid. Try "10px" or "2em" or simply "2".',"Toggle caption off":"Toggle caption off","Toggle caption on":"Toggle caption on","Vertical text alignment toolbar":"Vertical text alignment toolbar",Width:"Width"})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var Qt={252:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-input-color{display:flex;flex-direction:row-reverse;width:100%}.ck.ck-input-color>input.ck.ck-input-text{flex-grow:1;min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown{min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown>.ck-input-color__button .ck-dropdown__arrow{display:none}.ck.ck-input-color .ck.ck-input-color__button{display:flex}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview{overflow:hidden;position:relative}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{display:block;position:absolute}[dir=ltr] .ck.ck-input-color>.ck.ck-input-text{border-bottom-right-radius:0;border-top-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-input-text{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-input-color>.ck.ck-input-text:focus{z-index:0}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{padding:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-bottom-left-radius:0;border-top-left-radius:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-left:1px solid transparent}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-bottom-right-radius:0;border-top-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-right:1px solid transparent}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button.ck-disabled{background:var(--ck-color-input-disabled-background)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview{border-radius:0}.ck-rounded-corners .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview,.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview{border:1px solid var(--ck-color-input-border);height:20px;width:20px}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{background:red;border-radius:2px;height:150%;left:50%;top:-30%;transform:rotate(45deg);transform-origin:50%;width:8%}.ck.ck-input-color .ck.ck-input-color__remove-color{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);width:100%}.ck.ck-input-color .ck.ck-input-color__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-input-border)}[dir=ltr] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-right-radius:0}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-left-radius:0}.ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard);margin-right:0}",""]);const H=A},934:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-form{padding:0 0 var(--ck-spacing-large)}.ck.ck-form:focus{outline:none}.ck.ck-form .ck.ck-input-text{min-width:100%;width:0}.ck.ck-form .ck.ck-dropdown{min-width:100%}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button .ck-button__label{width:100%}",""]);const H=A},333:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-form__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__row>:not(.ck-label){flex-grow:1}.ck.ck-form__row.ck-table-form__action-row .ck-button-cancel,.ck.ck-form__row.ck-table-form__action-row .ck-button-save{justify-content:center}.ck.ck-form__row{padding:var(--ck-spacing-standard) var(--ck-spacing-large) 0}[dir=ltr] .ck.ck-form__row>:not(.ck-label)+*{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-form__row>:not(.ck-label)+*{margin-right:var(--ck-spacing-large)}.ck.ck-form__row>.ck-label{min-width:100%;width:100%}.ck.ck-form__row.ck-table-form__action-row{margin-top:var(--ck-spacing-large)}.ck.ck-form__row.ck-table-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}",""]);const H=A},272:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0;width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2)}.ck .ck-insert-table-dropdown__label,.ck[dir=rtl] .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{border:1px solid var(--ck-color-base-border);border-radius:1px;margin:var(--ck-insert-table-dropdown-box-margin);min-height:var(--ck-insert-table-dropdown-box-height);min-width:var(--ck-insert-table-dropdown-box-width);outline:none;transition:none}.ck .ck-insert-table-dropdown-grid-box:focus{box-shadow:none}.ck .ck-insert-table-dropdown-grid-box.ck-on{background:var(--ck-color-focus-outer-shadow);border-color:var(--ck-color-focus-border)}",""]);const H=A},660:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck-content .table{display:table;margin:.9em auto}.ck-content .table table{border:1px double #b3b3b3;border-collapse:collapse;border-spacing:0;height:100%;width:100%}.ck-content .table table td,.ck-content .table table th{border:1px solid #bfbfbf;min-width:2em;padding:.4em}.ck-content .table table th{background:rgba(0,0,0,.05);font-weight:700}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}.ck-editor__editable .ck-table-bogus-paragraph{display:inline-block;width:100%}",""]);const H=A},665:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,":root{--ck-color-table-caption-background:#f7f7f7;--ck-color-table-caption-text:#333;--ck-color-table-caption-highlighted-background:#fd0}.ck-content .table>figcaption{background-color:var(--ck-color-table-caption-background);caption-side:top;color:var(--ck-color-table-caption-text);display:table-caption;font-size:.75em;outline-offset:-1px;padding:.6em;text-align:center;word-break:break-word}.ck.ck-editor__editable .table>figcaption.table__caption_highlighted{animation:ck-table-caption-highlight .6s ease-out}.ck.ck-editor__editable .table>figcaption.ck-placeholder:before{overflow:hidden;padding-left:inherit;padding-right:inherit;text-overflow:ellipsis;white-space:nowrap}@keyframes ck-table-caption-highlight{0%{background-color:var(--ck-color-table-caption-highlighted-background)}to{background-color:var(--ck-color-table-caption-background)}}",""]);const H=A},773:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row{flex-wrap:wrap}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:first-of-type{flex-grow:0.57}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:last-of-type{flex-grow:0.43}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar .ck-button{flex-grow:1}.ck.ck-table-cell-properties-form{width:320px}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__padding-row{align-self:flex-end;padding:0;width:25%}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}",""]);const H=A},975:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,":root{--ck-color-table-column-resizer-hover:var(--ck-color-base-active);--ck-table-column-resizer-width:7px;--ck-table-column-resizer-position-offset:calc(var(--ck-table-column-resizer-width)*-0.5 - 0.5px)}.ck-content .table .ck-table-resized{table-layout:fixed}.ck-content .table table{overflow:hidden}.ck-content .table td,.ck-content .table th{position:relative}.ck.ck-editor__editable .table .ck-table-column-resizer{bottom:-999999px;cursor:col-resize;position:absolute;right:var(--ck-table-column-resizer-position-offset);top:-999999px;user-select:none;width:var(--ck-table-column-resizer-width);z-index:var(--ck-z-default)}.ck.ck-editor__editable .table[draggable] .ck-table-column-resizer,.ck.ck-editor__editable.ck-column-resize_disabled .table .ck-table-column-resizer{display:none}.ck.ck-editor__editable .table .ck-table-column-resizer:hover,.ck.ck-editor__editable .table .ck-table-column-resizer__active{background-color:var(--ck-color-table-column-resizer-hover);opacity:.25}.ck.ck-editor__editable[dir=rtl] .table .ck-table-column-resizer{left:var(--ck-table-column-resizer-position-offset);right:unset}",""]);const H=A},482:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,":root{--ck-color-table-focused-cell-background:rgba(158,201,250,.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}",""]);const H=A},686:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,'.ck.ck-table-form .ck-form__row.ck-table-form__background-row,.ck.ck-table-form .ck-form__row.ck-table-form__border-row{flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{align-items:center;flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view{align-items:center;display:flex;flex-direction:column-reverse}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view .ck.ck-dropdown,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{flex-grow:0}.ck.ck-table-form .ck.ck-labeled-field-view{position:relative}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{bottom:calc(var(--ck-table-properties-error-arrow-size)*-1);left:50%;position:absolute;transform:translate(-50%,100%);z-index:1}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{content:"";left:50%;position:absolute;top:calc(var(--ck-table-properties-error-arrow-size)*-1);transform:translateX(-50%)}:root{--ck-table-properties-error-arrow-size:6px;--ck-table-properties-min-error-width:150px}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-field-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style,.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width{max-width:80px;min-width:80px;width:80px}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{padding:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__height,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__width{margin:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{align-self:flex-end;display:inline-block;height:var(--ck-ui-component-min-height);line-height:var(--ck-ui-component-min-height);margin:0 var(--ck-spacing-small)}.ck.ck-table-form .ck.ck-labeled-field-view{padding-top:var(--ck-spacing-standard)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{border-radius:0}.ck-rounded-corners .ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status,.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{background:var(--ck-color-base-error);color:var(--ck-color-base-background);min-width:var(--ck-table-properties-min-error-width);padding:var(--ck-spacing-small) var(--ck-spacing-medium);text-align:center}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{border-color:transparent transparent var(--ck-color-base-error) transparent;border-style:solid;border-width:0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:ck-table-form-labeled-view-status-appear .15s ease both}.ck.ck-table-form .ck.ck-labeled-field-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-field-view__status{display:none}@keyframes ck-table-form-labeled-view-status-appear{0%{opacity:0}to{opacity:1}}',""]);const H=A},99:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,".ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-content:baseline;flex-basis:0;flex-wrap:wrap}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items{flex-wrap:nowrap}.ck.ck-table-properties-form{width:320px}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-self:flex-end;padding:0}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items>*{width:40px}",""]);const H=A},475:(f,v,a)=>{"use strict";a.d(v,{Z:()=>H});var d=a(609),A=a.n(d)()(function(I){return I[1]});A.push([f.id,':root{--ck-table-selected-cell-background:rgba(158,207,250,.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{box-shadow:unset;caret-color:transparent;outline:unset;position:relative}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{background-color:var(--ck-table-selected-cell-background);bottom:0;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget{outline:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle{display:none}',""]);const H=A},609:f=>{"use strict";f.exports=function(v){var a=[];return a.toString=function(){return this.map(function(d){var A=v(d);return d[2]?"@media ".concat(d[2]," {").concat(A,"}"):A}).join("")},a.i=function(d,A,H){typeof d=="string"&&(d=[[null,d,""]]);var I={};if(H)for(var C=0;C<this.length;C++){var me=this[C][0];me!=null&&(I[me]=!0)}for(var pe=0;pe<d.length;pe++){var ge=[].concat(d[pe]);H&&I[ge[0]]||(A&&(ge[2]?ge[2]="".concat(A," and ").concat(ge[2]):ge[2]=A),a.push(ge))}},a}},62:(f,v,a)=>{"use strict";var d,A=function(){return d===void 0&&(d=Boolean(window&&document&&document.all&&!window.atob)),d},H=function(){var u={};return function(w){if(u[w]===void 0){var _=document.querySelector(w);if(window.HTMLIFrameElement&&_ instanceof window.HTMLIFrameElement)try{_=_.contentDocument.head}catch{_=null}u[w]=_}return u[w]}}(),I=[];function C(u){for(var w=-1,_=0;_<I.length;_++)if(I[_].identifier===u){w=_;break}return w}function me(u,w){for(var _={},T=[],z=0;z<u.length;z++){var L=u[z],x=w.base?L[0]+w.base:L[0],c=_[x]||0,D="".concat(x," ").concat(c);_[x]=c+1;var W=C(D),q={css:L[1],media:L[2],sourceMap:L[3]};W!==-1?(I[W].references++,I[W].updater(q)):I.push({identifier:D,updater:r(q,w),references:1}),T.push(D)}return T}function pe(u){var w=document.createElement("style"),_=u.attributes||{};if(_.nonce===void 0){var T=a.nc;T&&(_.nonce=T)}if(Object.keys(_).forEach(function(L){w.setAttribute(L,_[L])}),typeof u.insert=="function")u.insert(w);else{var z=H(u.insert||"head");if(!z)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");z.appendChild(w)}return w}var ge,X=(ge=[],function(u,w){return ge[u]=w,ge.filter(Boolean).join(`
`)});function te(u,w,_,T){var z=_?"":T.media?"@media ".concat(T.media," {").concat(T.css,"}"):T.css;if(u.styleSheet)u.styleSheet.cssText=X(w,z);else{var L=document.createTextNode(z),x=u.childNodes;x[w]&&u.removeChild(x[w]),x.length?u.insertBefore(L,x[w]):u.appendChild(L)}}function Z(u,w,_){var T=_.css,z=_.media,L=_.sourceMap;if(z?u.setAttribute("media",z):u.removeAttribute("media"),L&&typeof btoa<"u"&&(T+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(L))))," */")),u.styleSheet)u.styleSheet.cssText=T;else{for(;u.firstChild;)u.removeChild(u.firstChild);u.appendChild(document.createTextNode(T))}}var h=null,g=0;function r(u,w){var _,T,z;if(w.singleton){var L=g++;_=h||(h=pe(w)),T=te.bind(null,_,L,!1),z=te.bind(null,_,L,!0)}else _=pe(w),T=Z.bind(null,_,w),z=function(){(function(x){if(x.parentNode===null)return!1;x.parentNode.removeChild(x)})(_)};return T(u),function(x){if(x){if(x.css===u.css&&x.media===u.media&&x.sourceMap===u.sourceMap)return;T(u=x)}else z()}}f.exports=function(u,w){(w=w||{}).singleton||typeof w.singleton=="boolean"||(w.singleton=A());var _=me(u=u||[],w);return function(T){if(T=T||[],Object.prototype.toString.call(T)==="[object Array]"){for(var z=0;z<_.length;z++){var L=C(_[z]);I[L].references--}for(var x=me(T,w),c=0;c<_.length;c++){var D=C(_[c]);I[D].references===0&&(I[D].updater(),I.splice(D,1))}_=x}}}},704:(f,v,a)=>{f.exports=a(79)("./src/core.js")},492:(f,v,a)=>{f.exports=a(79)("./src/engine.js")},273:(f,v,a)=>{f.exports=a(79)("./src/ui.js")},209:(f,v,a)=>{f.exports=a(79)("./src/utils.js")},995:(f,v,a)=>{f.exports=a(79)("./src/widget.js")},79:f=>{"use strict";f.exports=CKEditor5.dll}},m={};function E(f){var v=m[f];if(v!==void 0)return v.exports;var a=m[f]={id:f,exports:{}};return Qt[f](a,a.exports,E),a.exports}E.n=f=>{var v=f&&f.__esModule?()=>f.default:()=>f;return E.d(v,{a:v}),v},E.d=(f,v)=>{for(var a in v)E.o(v,a)&&!E.o(f,a)&&Object.defineProperty(f,a,{enumerable:!0,get:v[a]})},E.o=(f,v)=>Object.prototype.hasOwnProperty.call(f,v),E.r=f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},E.nc=void 0;var y={};(()=>{"use strict";E.r(y),E.d(y,{PlainTableOutput:()=>Tt,Table:()=>at,TableCaption:()=>Gn,TableCaptionEditing:()=>qo,TableCaptionUI:()=>Eo,TableCellProperties:()=>sr,TableCellPropertiesEditing:()=>ho,TableCellPropertiesUI:()=>Gi,TableCellWidthEditing:()=>to,TableClipboard:()=>dn,TableColumnResize:()=>On,TableColumnResizeEditing:()=>ko,TableEditing:()=>gi,TableKeyboard:()=>V,TableMouse:()=>N,TableProperties:()=>dr,TablePropertiesEditing:()=>Ho,TablePropertiesUI:()=>To,TableSelection:()=>Li,TableToolbar:()=>Ni,TableUI:()=>ji,TableUtils:()=>Bt});var f=E(704),v=E(995);function a(ee,l){const{viewElement:b,defaultValue:M,modelAttribute:S,styleName:$,reduceBoxSides:K=!1,shouldUpcast:ne=()=>!0}=l;ee.for("upcast").attributeToAttribute({view:{name:b,styles:{[$]:/[\s\S]+/}},model:{key:S,value:re=>{if(!ne(re))return;const xe=re.getNormalizedStyle($),Oe=K?I(xe):xe;return M!==Oe?Oe:void 0}}})}function d(ee,l,b,M){ee.for("upcast").add(S=>S.on("element:"+l,($,K,ne)=>{if(!K.modelRange)return;const re=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(Ft=>K.viewItem.hasStyle(Ft));if(!re.length)return;const xe={styles:re};if(!ne.consumable.test(K.viewItem,xe))return;const Oe=[...K.modelRange.getItems({shallow:!0})].pop();ne.consumable.consume(K.viewItem,xe);const Xe={style:K.viewItem.getNormalizedStyle("border-style"),color:K.viewItem.getNormalizedStyle("border-color"),width:K.viewItem.getNormalizedStyle("border-width")},ft={style:I(Xe.style),color:I(Xe.color),width:I(Xe.width)};ft.style!==M.style&&ne.writer.setAttribute(b.style,ft.style,Oe),ft.color!==M.color&&ne.writer.setAttribute(b.color,ft.color,Oe),ft.width!==M.width&&ne.writer.setAttribute(b.width,ft.width,Oe)}))}function A(ee,{modelElement:l,modelAttribute:b,styleName:M}){ee.for("downcast").attributeToAttribute({model:{name:l,key:b},view:S=>({key:"style",value:{[M]:S}})})}function H(ee,{modelAttribute:l,styleName:b}){ee.for("downcast").add(M=>M.on(`attribute:${l}:table`,(S,$,K)=>{const{item:ne,attributeNewValue:re}=$,{mapper:xe,writer:Oe}=K;if(!K.consumable.consume($.item,S.name))return;const Xe=[...xe.toViewElement(ne).getChildren()].find(ft=>ft.is("element","table"));re?Oe.setStyle(b,re,Xe):Oe.removeStyle(b,Xe)}))}function I(ee){if(ee)return["top","right","bottom","left"].map(l=>ee[l]).reduce((l,b)=>l==b?l:null)||ee}function C(ee,l,b,M,S=1){l>S?M.setAttribute(ee,l,b):M.removeAttribute(ee,b)}function me(ee,l,b={}){const M=ee.createElement("tableCell",b);return ee.insertElement("paragraph",M),ee.insert(M,l),M}function pe(ee,l){const b=l.parent.parent,M=parseInt(b.getAttribute("headingColumns")||0),{column:S}=ee.getCellLocation(l);return!!M&&S<M}function ge(ee,l,b){const{modelAttribute:M}=b;ee.extend("tableCell",{allowAttributes:[M]}),a(l,{viewElement:/^(td|th)$/,...b}),A(l,{modelElement:"tableCell",...b})}var X=E(209);function te(){return ee=>{ee.on("element:table",(l,b,M)=>{const S=b.viewItem;if(!M.consumable.test(S,{name:!0}))return;const{rows:$,headingRows:K,headingColumns:ne}=function(Oe){const Xe={headingRows:0,headingColumns:0},ft=[],Ft=[];let ti;for(const Kt of Array.from(Oe.getChildren()))if(Kt.name==="tbody"||Kt.name==="thead"||Kt.name==="tfoot"){Kt.name!=="thead"||ti||(ti=Kt);const ui=Array.from(Kt.getChildren()).filter(ki=>ki.is("element","tr"));for(const ki of ui)if(ki.parent.name==="thead"&&ki.parent===ti)Xe.headingRows++,ft.push(ki);else{Ft.push(ki);const Ai=h(ki);Ai>Xe.headingColumns&&(Xe.headingColumns=Ai)}}return Xe.rows=[...ft,...Ft],Xe}(S),re={};ne&&(re.headingColumns=ne),K&&(re.headingRows=K);const xe=M.writer.createElement("table",re);if(M.safeInsert(xe,b.modelCursor)){if(M.consumable.consume(S,{name:!0}),$.forEach(Oe=>M.convertItem(Oe,M.writer.createPositionAt(xe,"end"))),M.convertChildren(S,M.writer.createPositionAt(xe,"end")),xe.isEmpty){const Oe=M.writer.createElement("tableRow");M.writer.insert(Oe,M.writer.createPositionAt(xe,"end")),me(M.writer,M.writer.createPositionAt(Oe,"end"))}M.updateConversionResult(xe,b)}})}}function Z(ee){return l=>{l.on(`element:${ee}`,(b,M,{writer:S})=>{if(!M.modelRange)return;const $=M.modelRange.start.nodeAfter,K=S.createPositionAt($,0);if(M.viewItem.isEmpty)return void S.insertElement("paragraph",K);const ne=Array.from($.getChildren());if(ne.every(re=>re.is("element","$marker"))){const re=S.createElement("paragraph");S.insert(re,S.createPositionAt($,0));for(const xe of ne)S.move(S.createRangeOn(xe),S.createPositionAt(re,"end"))}},{priority:"low"})}}function h(ee){let l=0,b=0;const M=Array.from(ee.getChildren()).filter(S=>S.name==="th"||S.name==="td");for(;b<M.length&&M[b].name==="th";){const S=M[b];l+=parseInt(S.getAttribute("colspan")||1),b++}return l}class g{constructor(l,b={}){this._table=l,this._startRow=b.row!==void 0?b.row:b.startRow||0,this._endRow=b.row!==void 0?b.row:b.endRow,this._startColumn=b.column!==void 0?b.column:b.startColumn||0,this._endColumn=b.column!==void 0?b.column:b.endColumn,this._includeAllSlots=!!b.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){const l=this._table.getChild(this._rowIndex);if(!l||this._isOverEndRow())return{done:!0};if(!l.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let b=null;const M=this._getSpanned();if(M)this._includeAllSlots&&!this._shouldSkipSlot()&&(b=this._formatOutValue(M.cell,M.row,M.column));else{const S=l.getChild(this._cellIndex);if(!S)return this._advanceToNextRow();const $=parseInt(S.getAttribute("colspan")||1),K=parseInt(S.getAttribute("rowspan")||1);($>1||K>1)&&this._recordSpans(S,K,$),this._shouldSkipSlot()||(b=this._formatOutValue(S)),this._nextCellAtColumn=this._column+$}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,b||this.next()}skipRow(l){this._skipRows.add(l)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(l,b=this._row,M=this._column){return{done:!1,value:new r(this,l,b,M)}}_shouldSkipSlot(){const l=this._skipRows.has(this._row),b=this._row<this._startRow,M=this._column<this._startColumn,S=this._endColumn!==void 0&&this._column>this._endColumn;return l||b||M||S}_getSpanned(){const l=this._spannedCells.get(this._row);return l&&l.get(this._column)||null}_recordSpans(l,b,M){const S={cell:l,row:this._row,column:this._column};for(let $=this._row;$<this._row+b;$++)for(let K=this._column;K<this._column+M;K++)$==this._row&&K==this._column||this._markSpannedCell($,K,S)}_markSpannedCell(l,b,M){this._spannedCells.has(l)||this._spannedCells.set(l,new Map),this._spannedCells.get(l).set(b,M)}}class r{constructor(l,b,M,S){this.cell=b,this.row=l._row,this.column=l._column,this.cellAnchorRow=M,this.cellAnchorColumn=S,this._cellIndex=l._cellIndex,this._rowIndex=l._rowIndex,this._table=l._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||1)}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||1)}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function u(ee,l={}){return(b,{writer:M})=>{const S=b.getAttribute("headingRows")||0,$=[];S>0&&$.push(M.createContainerElement("thead",null,M.createSlot(ne=>ne.is("element","tableRow")&&ne.index<S))),S<ee.getRows(b)&&$.push(M.createContainerElement("tbody",null,M.createSlot(ne=>ne.is("element","tableRow")&&ne.index>=S)));const K=M.createContainerElement("figure",{class:"table"},[M.createContainerElement("table",null,$),M.createSlot(ne=>!ne.is("element","tableRow"))]);return l.asWidget?function(ne,re){return re.setCustomProperty("table",!0,ne),(0,v.toWidget)(ne,re,{hasSelectionHandle:!0})}(K,M):K}}function w(ee={}){return(l,{writer:b})=>{const M=l.parent,S=M.parent,$=S.getChildIndex(M),K=new g(S,{row:$}),ne=S.getAttribute("headingRows")||0,re=S.getAttribute("headingColumns")||0;for(const xe of K)if(xe.cell==l){const Oe=xe.row<ne||xe.column<re?"th":"td";return ee.asWidget?(0,v.toWidgetEditable)(b.createEditableElement(Oe),b):b.createContainerElement(Oe)}}}function _(ee={}){return(l,{writer:b})=>{if(l.parent.is("element","tableCell")&&T(l)){if(ee.asWidget)return b.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const M=b.createContainerElement("p");return b.setCustomProperty("dataPipeline:transparentRendering",!0,M),M}}}}function T(ee){return ee.parent.childCount==1&&![...ee.getAttributeKeys()].length}class z extends f.Command{refresh(){const l=this.editor.model,b=l.document.selection,M=l.schema;this.isEnabled=function(S,$){const K=S.getFirstPosition().parent,ne=K===K.root?K:K.parent;return $.checkChild(ne,"table")}(b,M)}execute(l={}){const b=this.editor.model,M=this.editor.plugins.get("TableUtils"),S=this.editor.config.get("table"),$=S.defaultHeadings.rows,K=S.defaultHeadings.columns;l.headingRows===void 0&&$&&(l.headingRows=$),l.headingColumns===void 0&&K&&(l.headingColumns=K),b.change(ne=>{const re=M.createTable(ne,l);b.insertObject(re,null,null,{findOptimalPosition:"auto"}),ne.setSelection(ne.createPositionAt(re.getNodeByPath([0,0,0]),0))})}}class L extends f.Command{constructor(l,b={}){super(l),this.order=b.order||"below"}refresh(){const l=this.editor.model.document.selection,b=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(l).length;this.isEnabled=b}execute(){const l=this.editor,b=l.model.document.selection,M=l.plugins.get("TableUtils"),S=this.order==="above",$=M.getSelectionAffectedTableCells(b),K=M.getRowIndexes($),ne=S?K.first:K.last,re=$[0].findAncestor("table");M.insertRows(re,{at:S?ne:ne+1,copyStructureFromAbove:!S})}}class x extends f.Command{constructor(l,b={}){super(l),this.order=b.order||"right"}refresh(){const l=this.editor.model.document.selection,b=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(l).length;this.isEnabled=b}execute(){const l=this.editor,b=l.model.document.selection,M=l.plugins.get("TableUtils"),S=this.order==="left",$=M.getSelectionAffectedTableCells(b),K=M.getColumnIndexes($),ne=S?K.first:K.last,re=$[0].findAncestor("table");M.insertColumns(re,{columns:1,at:S?ne:ne+1})}}class c extends f.Command{constructor(l,b={}){super(l),this.direction=b.direction||"horizontally"}refresh(){const l=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=l.length===1}execute(){const l=this.editor.plugins.get("TableUtils"),b=l.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?l.splitCellHorizontally(b,2):l.splitCellVertically(b,2)}}function D(ee,l,b){const{startRow:M,startColumn:S,endRow:$,endColumn:K}=l,ne=b.createElement("table"),re=$-M+1;for(let Oe=0;Oe<re;Oe++)b.insertElement("tableRow",ne,"end");const xe=[...new g(ee,{startRow:M,endRow:$,startColumn:S,endColumn:K,includeAllSlots:!0})];for(const{row:Oe,column:Xe,cell:ft,isAnchor:Ft,cellAnchorRow:ti,cellAnchorColumn:Kt}of xe){const ui=Oe-M,ki=ne.getChild(ui);if(Ft){const Ai=b.cloneElement(ft);b.append(Ai,ki),Ve(Ai,Oe,Xe,$,K,b)}else(ti<M||Kt<S)&&me(b,b.createPositionAt(ki,"end"))}return function(Oe,Xe,ft,Ft,ti){const Kt=parseInt(Xe.getAttribute("headingRows")||0);Kt>0&&C("headingRows",Kt-ft,Oe,ti,0);const ui=parseInt(Xe.getAttribute("headingColumns")||0);ui>0&&C("headingColumns",ui-Ft,Oe,ti,0)}(ne,ee,M,S,b),ne}function W(ee,l,b=0){const M=[],S=new g(ee,{startRow:b,endRow:l-1});for(const $ of S){const{row:K,cellHeight:ne}=$;K<l&&l<=K+ne-1&&M.push($)}return M}function q(ee,l,b){const M=ee.parent,S=M.parent,$=M.index,K=l-$,ne={},re=parseInt(ee.getAttribute("rowspan"))-K;re>1&&(ne.rowspan=re);const xe=parseInt(ee.getAttribute("colspan")||1);xe>1&&(ne.colspan=xe);const Oe=$+K,Xe=[...new g(S,{startRow:$,endRow:Oe,includeAllSlots:!0})];let ft,Ft=null;for(const ti of Xe){const{row:Kt,column:ui,cell:ki}=ti;ki===ee&&ft===void 0&&(ft=ui),ft!==void 0&&ft===ui&&Kt===Oe&&(Ft=me(b,ti.getPositionBefore(),ne))}return C("rowspan",K,ee,b),Ft}function ae(ee,l){const b=[],M=new g(ee);for(const S of M){const{column:$,cellWidth:K}=S;$<l&&l<=$+K-1&&b.push(S)}return b}function Ie(ee,l,b,M){const S=b-l,$={},K=parseInt(ee.getAttribute("colspan"))-S;K>1&&($.colspan=K);const ne=parseInt(ee.getAttribute("rowspan")||1);ne>1&&($.rowspan=ne);const re=me(M,M.createPositionAfter(ee),$);return C("colspan",S,ee,M),re}function Ve(ee,l,b,M,S,$){const K=parseInt(ee.getAttribute("colspan")||1),ne=parseInt(ee.getAttribute("rowspan")||1);b+K-1>S&&C("colspan",S-b+1,ee,$,1),l+ne-1>M&&C("rowspan",M-l+1,ee,$,1)}function _e(ee,l){const b=l.getColumns(ee),M=new Array(b).fill(0);for(const{column:$}of new g(ee))M[$]++;const S=M.reduce(($,K,ne)=>K?$:[...$,ne],[]);if(S.length>0){const $=S[S.length-1];return l.removeColumns(ee,{at:$}),!0}return!1}function Me(ee,l){const b=[],M=l.getRows(ee);for(let S=0;S<M;S++)ee.getChild(S).isEmpty&&b.push(S);if(b.length>0){const S=b[b.length-1];return l.removeRows(ee,{at:S}),!0}return!1}function Qe(ee,l){_e(ee,l)||Me(ee,l)}function dt(ee,l){const b=Array.from(new g(ee,{startColumn:l.firstColumn,endColumn:l.lastColumn,row:l.lastRow}));if(b.every(({cellHeight:S})=>S===1))return l.lastRow;const M=b[0].cellHeight-1;return l.lastRow+M}function nt(ee,l){const b=Array.from(new g(ee,{startRow:l.firstRow,endRow:l.lastRow,column:l.lastColumn}));if(b.every(({cellWidth:S})=>S===1))return l.lastColumn;const M=b[0].cellWidth-1;return l.lastColumn+M}class qe extends f.Command{constructor(l,b){super(l),this.direction=b.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const l=this._getMergeableCell();this.value=l,this.isEnabled=!!l}execute(){const l=this.editor.model,b=l.document,M=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(b.selection)[0],S=this.value,$=this.direction;l.change(K=>{const ne=$=="right"||$=="down",re=ne?M:S,xe=ne?S:M,Oe=xe.parent;(function(Kt,ui,ki){et(Kt)||(et(ui)&&ki.remove(ki.createRangeIn(ui)),ki.move(ki.createRangeIn(Kt),ki.createPositionAt(ui,"end"))),ki.remove(Kt)})(xe,re,K);const Xe=this.isHorizontal?"colspan":"rowspan",ft=parseInt(M.getAttribute(Xe)||1),Ft=parseInt(S.getAttribute(Xe)||1);K.setAttribute(Xe,ft+Ft,re),K.setSelection(K.createRangeIn(re));const ti=this.editor.plugins.get("TableUtils");Qe(Oe.findAncestor("table"),ti)})}_getMergeableCell(){const l=this.editor.model.document,b=this.editor.plugins.get("TableUtils"),M=b.getTableCellsContainingSelection(l.selection)[0];if(!M)return;const S=this.isHorizontal?function(ne,re,xe){const Oe=ne.parent,Xe=Oe.parent,ft=re=="right"?ne.nextSibling:ne.previousSibling,Ft=(Xe.getAttribute("headingColumns")||0)>0;if(!ft)return;const ti=re=="right"?ne:ft,Kt=re=="right"?ft:ne,{column:ui}=xe.getCellLocation(ti),{column:ki}=xe.getCellLocation(Kt),Ai=parseInt(ti.getAttribute("colspan")||1),Hi=pe(xe,ti),Qi=pe(xe,Kt);if(!(Ft&&Hi!=Qi))return ui+Ai===ki?ft:void 0}(M,this.direction,b):function(ne,re,xe){const Oe=ne.parent,Xe=Oe.parent,ft=Xe.getChildIndex(Oe);if(re=="down"&&ft===xe.getRows(Xe)-1||re=="up"&&ft===0)return;const Ft=parseInt(ne.getAttribute("rowspan")||1),ti=Xe.getAttribute("headingRows")||0,Kt=re=="down"&&ft+Ft===ti,ui=re=="up"&&ft===ti;if(ti&&(Kt||ui))return;const ki=parseInt(ne.getAttribute("rowspan")||1),Ai=re=="down"?ft+ki:ft,Hi=[...new g(Xe,{endRow:Ai})],Qi=Hi.find(Xi=>Xi.cell===ne),hn=Qi.column,kn=Hi.find(({row:Xi,cellHeight:Yn,column:oe})=>oe===hn&&(re=="down"?Xi===Ai:Ai===Xi+Yn));return kn&&kn.cell}(M,this.direction,b);if(!S)return;const $=this.isHorizontal?"rowspan":"colspan",K=parseInt(M.getAttribute($)||1);return parseInt(S.getAttribute($)||1)===K?S:void 0}}function et(ee){return ee.childCount==1&&ee.getChild(0).is("element","paragraph")&&ee.getChild(0).isEmpty}class Nt extends f.Command{refresh(){const l=this.editor.plugins.get("TableUtils"),b=l.getSelectionAffectedTableCells(this.editor.model.document.selection),M=b[0];if(M){const S=M.findAncestor("table"),$=this.editor.plugins.get("TableUtils").getRows(S)-1,K=l.getRowIndexes(b),ne=K.first===0&&K.last===$;this.isEnabled=!ne}else this.isEnabled=!1}execute(){const l=this.editor.model,b=this.editor.plugins.get("TableUtils"),M=b.getSelectionAffectedTableCells(l.document.selection),S=b.getRowIndexes(M),$=M[0],K=$.findAncestor("table"),ne=b.getCellLocation($).column;l.change(re=>{const xe=S.last-S.first+1;b.removeRows(K,{at:S.first,rows:xe});const Oe=function(Xe,ft,Ft,ti){const Kt=Xe.getChild(Math.min(ft,ti-1));let ui=Kt.getChild(0),ki=0;for(const Ai of Kt.getChildren()){if(ki>Ft)return ui;ui=Ai,ki+=parseInt(Ai.getAttribute("colspan")||1)}return ui}(K,S.first,ne,b.getRows(K));re.setSelection(re.createPositionAt(Oe,0))})}}class jt extends f.Command{refresh(){const l=this.editor.plugins.get("TableUtils"),b=l.getSelectionAffectedTableCells(this.editor.model.document.selection),M=b[0];if(M){const S=M.findAncestor("table"),$=l.getColumns(S),{first:K,last:ne}=l.getColumnIndexes(b);this.isEnabled=ne-K<$-1}else this.isEnabled=!1}execute(){const l=this.editor.plugins.get("TableUtils"),[b,M]=function(re,xe){const Oe=xe.getSelectionAffectedTableCells(re),Xe=Oe[0],ft=Oe.pop(),Ft=[Xe,ft];return Xe.isBefore(ft)?Ft:Ft.reverse()}(this.editor.model.document.selection,l),S=b.parent.parent,$=[...new g(S)],K={first:$.find(re=>re.cell===b).column,last:$.find(re=>re.cell===M).column},ne=function(re,xe,Oe,Xe){return parseInt(Oe.getAttribute("colspan")||1)>1?Oe:xe.previousSibling||Oe.nextSibling?Oe.nextSibling||xe.previousSibling:Xe.first?re.reverse().find(({column:Ft})=>Ft<Xe.first).cell:re.reverse().find(({column:Ft})=>Ft>Xe.last).cell}($,b,M,K);this.editor.model.change(re=>{const xe=K.last-K.first+1;this.editor.plugins.get("TableUtils").removeColumns(S,{at:K.first,columns:xe}),re.setSelection(re.createPositionAt(ne,0))})}}class yt extends f.Command{refresh(){const l=this.editor.plugins.get("TableUtils"),b=this.editor.model,M=l.getSelectionAffectedTableCells(b.document.selection),S=M.length>0;this.isEnabled=S,this.value=S&&M.every($=>this._isInHeading($,$.parent.parent))}execute(l={}){if(l.forceValue===this.value)return;const b=this.editor.plugins.get("TableUtils"),M=this.editor.model,S=b.getSelectionAffectedTableCells(M.document.selection),$=S[0].findAncestor("table"),{first:K,last:ne}=b.getRowIndexes(S),re=this.value?K:ne+1,xe=$.getAttribute("headingRows")||0;M.change(Oe=>{if(re){const Xe=W($,re,re>xe?xe:0);for(const{cell:ft}of Xe)q(ft,re,Oe)}C("headingRows",re,$,Oe,0)})}_isInHeading(l,b){const M=parseInt(b.getAttribute("headingRows")||0);return!!M&&l.parent.index<M}}class tt extends f.Command{refresh(){const l=this.editor.model,b=this.editor.plugins.get("TableUtils"),M=b.getSelectionAffectedTableCells(l.document.selection),S=M.length>0;this.isEnabled=S,this.value=S&&M.every($=>pe(b,$))}execute(l={}){if(l.forceValue===this.value)return;const b=this.editor.plugins.get("TableUtils"),M=this.editor.model,S=b.getSelectionAffectedTableCells(M.document.selection),$=S[0].findAncestor("table"),{first:K,last:ne}=b.getColumnIndexes(S),re=this.value?K:ne+1;M.change(xe=>{if(re){const Oe=ae($,re);for(const{cell:Xe,column:ft}of Oe)Ie(Xe,ft,re,xe)}C("headingColumns",re,$,xe,0)})}}class Bt extends f.Plugin{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(l){const b=l.parent,M=b.parent,S=M.getChildIndex(b),$=new g(M,{row:S});for(const{cell:K,row:ne,column:re}of $)if(K===l)return{row:ne,column:re}}createTable(l,b){const M=l.createElement("table"),S=parseInt(b.rows)||2,$=parseInt(b.columns)||2;return ye(l,M,0,S,$),b.headingRows&&C("headingRows",Math.min(b.headingRows,S),M,l,0),b.headingColumns&&C("headingColumns",Math.min(b.headingColumns,$),M,l,0),M}insertRows(l,b={}){const M=this.editor.model,S=b.at||0,$=b.rows||1,K=b.copyStructureFromAbove!==void 0,ne=b.copyStructureFromAbove?S-1:S,re=this.getRows(l),xe=this.getColumns(l);if(S>re)throw new X.CKEditorError("tableutils-insertrows-insert-out-of-range",this,{options:b});M.change(Oe=>{const Xe=l.getAttribute("headingRows")||0;if(Xe>S&&C("headingRows",Xe+$,l,Oe,0),!K&&(S===0||S===re))return void ye(Oe,l,S,$,xe);const ft=K?Math.max(S,ne):S,Ft=new g(l,{endRow:ft}),ti=new Array(xe).fill(1);for(const{row:Kt,column:ui,cellHeight:ki,cellWidth:Ai,cell:Hi}of Ft){const Qi=Kt+ki-1,hn=Kt<=ne&&ne<=Qi;Kt<S&&S<=Qi?(Oe.setAttribute("rowspan",ki+$,Hi),ti[ui]=-Ai):K&&hn&&(ti[ui]=Ai)}for(let Kt=0;Kt<$;Kt++){const ui=Oe.createElement("tableRow");Oe.insert(ui,l,S);for(let ki=0;ki<ti.length;ki++){const Ai=ti[ki],Hi=Oe.createPositionAt(ui,"end");Ai>0&&me(Oe,Hi,Ai>1?{colspan:Ai}:null),ki+=Math.abs(Ai)-1}}})}insertColumns(l,b={}){const M=this.editor.model,S=b.at||0,$=b.columns||1;M.change(K=>{const ne=l.getAttribute("headingColumns");S<ne&&K.setAttribute("headingColumns",ne+$,l);const re=this.getColumns(l);if(S===0||re===S){for(const Oe of l.getChildren())Oe.is("element","tableRow")&&Ae($,K,K.createPositionAt(Oe,S?"end":0));return}const xe=new g(l,{column:S,includeAllSlots:!0});for(const Oe of xe){const{row:Xe,cell:ft,cellAnchorColumn:Ft,cellAnchorRow:ti,cellWidth:Kt,cellHeight:ui}=Oe;if(Ft<S){K.setAttribute("colspan",Kt+$,ft);const ki=ti+ui-1;for(let Ai=Xe;Ai<=ki;Ai++)xe.skipRow(Ai)}else Ae($,K,Oe.getPositionBefore())}})}removeRows(l,b){const M=this.editor.model,S=b.rows||1,$=this.getRows(l),K=b.at,ne=K+S-1;if(ne>$-1)throw new X.CKEditorError("tableutils-removerows-row-index-out-of-range",this,{table:l,options:b});M.change(re=>{const{cellsToMove:xe,cellsToTrim:Oe}=function(Xe,ft,Ft){const ti=new Map,Kt=[];for(const{row:ui,column:ki,cellHeight:Ai,cell:Hi}of new g(Xe,{endRow:Ft})){const Qi=ui+Ai-1;if(ui>=ft&&ui<=Ft&&Qi>Ft){const hn=Ai-(Ft-ui+1);ti.set(ki,{cell:Hi,rowspan:hn})}if(ui<ft&&Qi>=ft){let hn;hn=Qi>=Ft?Ft-ft+1:Qi-ft+1,Kt.push({cell:Hi,rowspan:Ai-hn})}}return{cellsToMove:ti,cellsToTrim:Kt}}(l,K,ne);xe.size&&function(Xe,ft,Ft,ti){const Kt=new g(Xe,{includeAllSlots:!0,row:ft}),ui=[...Kt],ki=Xe.getChild(ft);let Ai;for(const{column:Hi,cell:Qi,isAnchor:hn}of ui)if(Ft.has(Hi)){const{cell:kn,rowspan:Xi}=Ft.get(Hi),Yn=Ai?ti.createPositionAfter(Ai):ti.createPositionAt(ki,0);ti.move(ti.createRangeOn(kn),Yn),C("rowspan",Xi,kn,ti),Ai=kn}else hn&&(Ai=Qi)}(l,ne+1,xe,re);for(let Xe=ne;Xe>=K;Xe--)re.remove(l.getChild(Xe));for(const{rowspan:Xe,cell:ft}of Oe)C("rowspan",Xe,ft,re);(function(Xe,ft,Ft,ti){const Kt=Xe.getAttribute("headingRows")||0;ft<Kt&&C("headingRows",Ft<Kt?Kt-(Ft-ft+1):ft,Xe,ti,0)})(l,K,ne,re),_e(l,this)||Me(l,this)})}removeColumns(l,b){const M=this.editor.model,S=b.at,$=b.columns||1,K=b.at+$-1;M.change(ne=>{(function(re,xe,Oe){const Xe=re.getAttribute("headingColumns")||0;if(Xe&&xe.first<Xe){const ft=Math.min(Xe-1,xe.last)-xe.first+1;Oe.setAttribute("headingColumns",Xe-ft,re)}})(l,{first:S,last:K},ne);for(let re=K;re>=S;re--)for(const{cell:xe,column:Oe,cellWidth:Xe}of[...new g(l)])Oe<=re&&Xe>1&&Oe+Xe>re?C("colspan",Xe-1,xe,ne):Oe===re&&ne.remove(xe);Me(l,this)||_e(l,this)})}splitCellVertically(l,b=2){const M=this.editor.model,S=l.parent.parent,$=parseInt(l.getAttribute("rowspan")||1),K=parseInt(l.getAttribute("colspan")||1);M.change(ne=>{if(K>1){const{newCellsSpan:re,updatedSpan:xe}=Ke(K,b);C("colspan",xe,l,ne);const Oe={};re>1&&(Oe.colspan=re),$>1&&(Oe.rowspan=$),Ae(K>b?b-1:K-1,ne,ne.createPositionAfter(l),Oe)}if(K<b){const re=b-K,xe=[...new g(S)],{column:Oe}=xe.find(({cell:ti})=>ti===l),Xe=xe.filter(({cell:ti,cellWidth:Kt,column:ui})=>ti!==l&&ui===Oe||ui<Oe&&ui+Kt>Oe);for(const{cell:ti,cellWidth:Kt}of Xe)ne.setAttribute("colspan",Kt+re,ti);const ft={};$>1&&(ft.rowspan=$),Ae(re,ne,ne.createPositionAfter(l),ft);const Ft=S.getAttribute("headingColumns")||0;Ft>Oe&&C("headingColumns",Ft+re,S,ne)}})}splitCellHorizontally(l,b=2){const M=this.editor.model,S=l.parent,$=S.parent,K=$.getChildIndex(S),ne=parseInt(l.getAttribute("rowspan")||1),re=parseInt(l.getAttribute("colspan")||1);M.change(xe=>{if(ne>1){const Oe=[...new g($,{startRow:K,endRow:K+ne-1,includeAllSlots:!0})],{newCellsSpan:Xe,updatedSpan:ft}=Ke(ne,b);C("rowspan",ft,l,xe);const{column:Ft}=Oe.find(({cell:Kt})=>Kt===l),ti={};Xe>1&&(ti.rowspan=Xe),re>1&&(ti.colspan=re);for(const Kt of Oe){const{column:ui,row:ki}=Kt;ki>=K+ft&&ui===Ft&&(ki+K+ft)%Xe==0&&Ae(1,xe,Kt.getPositionBefore(),ti)}}if(ne<b){const Oe=b-ne,Xe=[...new g($,{startRow:0,endRow:K})];for(const{cell:ti,cellHeight:Kt,row:ui}of Xe)if(ti!==l&&ui+Kt>K){const ki=Kt+Oe;xe.setAttribute("rowspan",ki,ti)}const ft={};re>1&&(ft.colspan=re),ye(xe,$,K+1,Oe,1,ft);const Ft=$.getAttribute("headingRows")||0;Ft>K&&C("headingRows",Ft+Oe,$,xe)}})}getColumns(l){return[...l.getChild(0).getChildren()].reduce((b,M)=>b+parseInt(M.getAttribute("colspan")||1),0)}getRows(l){return Array.from(l.getChildren()).reduce((b,M)=>M.is("element","tableRow")?b+1:b,0)}createTableWalker(l,b={}){return new g(l,b)}getSelectedTableCells(l){const b=[];for(const M of this.sortRanges(l.getRanges())){const S=M.getContainedElement();S&&S.is("element","tableCell")&&b.push(S)}return b}getTableCellsContainingSelection(l){const b=[];for(const M of l.getRanges()){const S=M.start.findAncestor("tableCell");S&&b.push(S)}return b}getSelectionAffectedTableCells(l){const b=this.getSelectedTableCells(l);return b.length?b:this.getTableCellsContainingSelection(l)}getRowIndexes(l){const b=l.map(M=>M.parent.index);return this._getFirstLastIndexesObject(b)}getColumnIndexes(l){const b=l[0].findAncestor("table"),M=[...new g(b)].filter(S=>l.includes(S.cell)).map(S=>S.column);return this._getFirstLastIndexesObject(M)}isSelectionRectangular(l){if(l.length<2||!this._areCellInTheSameTableSection(l))return!1;const b=new Set,M=new Set;let S=0;for(const K of l){const{row:ne,column:re}=this.getCellLocation(K),xe=parseInt(K.getAttribute("rowspan")||1),Oe=parseInt(K.getAttribute("colspan")||1);b.add(ne),M.add(re),xe>1&&b.add(ne+xe-1),Oe>1&&M.add(re+Oe-1),S+=xe*Oe}return function(K,ne){const re=Array.from(K.values()),xe=Array.from(ne.values()),Oe=Math.max(...re),Xe=Math.min(...re),ft=Math.max(...xe),Ft=Math.min(...xe);return(Oe-Xe+1)*(ft-Ft+1)}(b,M)==S}sortRanges(l){return Array.from(l).sort(kt)}_getFirstLastIndexesObject(l){const b=l.sort((M,S)=>M-S);return{first:b[0],last:b[b.length-1]}}_areCellInTheSameTableSection(l){const b=l[0].findAncestor("table"),M=this.getRowIndexes(l),S=parseInt(b.getAttribute("headingRows")||0);if(!this._areIndexesInSameSection(M,S))return!1;const $=parseInt(b.getAttribute("headingColumns")||0),K=this.getColumnIndexes(l);return this._areIndexesInSameSection(K,$)}_areIndexesInSameSection({first:l,last:b},M){return l<M==b<M}}function ye(ee,l,b,M,S,$={}){for(let K=0;K<M;K++){const ne=ee.createElement("tableRow");ee.insert(ne,l,b),Ae(S,ee,ee.createPositionAt(ne,"end"),$)}}function Ae(ee,l,b,M={}){for(let S=0;S<ee;S++)me(l,b,M)}function Ke(ee,l){if(ee<l)return{newCellsSpan:1,updatedSpan:1};const b=Math.floor(ee/l);return{newCellsSpan:b,updatedSpan:ee-b*l+b}}function kt(ee,l){const b=ee.start,M=l.start;return b.isBefore(M)?-1:1}class It extends f.Command{refresh(){const l=this.editor.plugins.get(Bt),b=l.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=l.isSelectionRectangular(b,this.editor.plugins.get(Bt))}execute(){const l=this.editor.model,b=this.editor.plugins.get(Bt);l.change(M=>{const S=b.getSelectedTableCells(l.document.selection),$=S.shift(),{mergeWidth:K,mergeHeight:ne}=function(re,xe,Oe){let Xe=0,ft=0;for(const ki of xe){const{row:Ai,column:Hi}=Oe.getCellLocation(ki);Xe=ot(ki,Hi,Xe,"colspan"),ft=ot(ki,Ai,ft,"rowspan")}const{row:Ft,column:ti}=Oe.getCellLocation(re),Kt=Xe-ti,ui=ft-Ft;return{mergeWidth:Kt,mergeHeight:ui}}($,S,b);C("colspan",K,$,M),C("rowspan",ne,$,M);for(const re of S)Yt(re,$,M);Qe($.findAncestor("table"),b),M.setSelection($,"in")})}}function Yt(ee,l,b){zt(ee)||(zt(l)&&b.remove(b.createRangeIn(l)),b.move(b.createRangeIn(ee),b.createPositionAt(l,"end"))),b.remove(ee)}function zt(ee){return ee.childCount==1&&ee.getChild(0).is("element","paragraph")&&ee.getChild(0).isEmpty}function ot(ee,l,b,M){const S=parseInt(ee.getAttribute(M)||1);return Math.max(b,l+S)}class Dt extends f.Command{constructor(l){super(l),this.affectsData=!1}refresh(){const l=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=l.length>0}execute(){const l=this.editor.model,b=this.editor.plugins.get("TableUtils"),M=b.getSelectionAffectedTableCells(l.document.selection),S=b.getRowIndexes(M),$=M[0].findAncestor("table"),K=[];for(let ne=S.first;ne<=S.last;ne++)for(const re of $.getChild(ne).getChildren())K.push(l.createRangeOn(re));l.change(ne=>{ne.setSelection(K)})}}class wt extends f.Command{constructor(l){super(l),this.affectsData=!1}refresh(){const l=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=l.length>0}execute(){const l=this.editor.plugins.get("TableUtils"),b=this.editor.model,M=l.getSelectionAffectedTableCells(b.document.selection),S=M[0],$=M.pop(),K=S.findAncestor("table"),ne=l.getCellLocation(S),re=l.getCellLocation($),xe=Math.min(ne.column,re.column),Oe=Math.max(ne.column,re.column),Xe=[];for(const ft of new g(K,{startColumn:xe,endColumn:Oe}))Xe.push(b.createRangeOn(ft.cell));b.change(ft=>{ft.setSelection(Xe)})}}function ni(ee){ee.document.registerPostFixer(l=>function(b,M){const S=M.document.differ.getChanges();let $=!1;const K=new Set;for(const ne of S){let re;ne.name=="table"&&ne.type=="insert"&&(re=ne.position.nodeAfter),ne.name!="tableRow"&&ne.name!="tableCell"||(re=ne.position.findAncestor("table")),bt(ne)&&(re=ne.range.start.findAncestor("table")),re&&!K.has(re)&&($=di(re,b)||$,$=xi(re,b)||$,K.add(re))}return $}(l,ee))}function di(ee,l){let b=!1;const M=function(S){const $=parseInt(S.getAttribute("headingRows")||0),K=Array.from(S.getChildren()).reduce((re,xe)=>xe.is("element","tableRow")?re+1:re,0),ne=[];for(const{row:re,cell:xe,cellHeight:Oe}of new g(S)){if(Oe<2)continue;const Xe=re<$?$:K;if(re+Oe>Xe){const ft=Xe-re;ne.push({cell:xe,rowspan:ft})}}return ne}(ee);if(M.length){b=!0;for(const S of M)C("rowspan",S.rowspan,S.cell,l,1)}return b}function xi(ee,l){let b=!1;const M=function(ne){const re=new Array(ne.childCount).fill(0);for(const{rowIndex:xe}of new g(ne,{includeAllSlots:!0}))re[xe]++;return re}(ee),S=[];for(const[ne,re]of M.entries())!re&&ee.getChild(ne).is("element","tableRow")&&S.push(ne);if(S.length){b=!0;for(const ne of S.reverse())l.remove(ee.getChild(ne)),M.splice(ne,1)}const $=M.filter((ne,re)=>ee.getChild(re).is("element","tableRow")),K=$[0];if(!$.every(ne=>ne===K)){const ne=$.reduce((re,xe)=>xe>re?xe:re,0);for(const[re,xe]of $.entries()){const Oe=ne-xe;if(Oe){for(let Xe=0;Xe<Oe;Xe++)me(l,l.createPositionAt(ee.getChild(re),"end"));b=!0}}}return b}function bt(ee){const l=ee.type==="attribute",b=ee.attributeKey;return l&&(b==="headingRows"||b==="colspan"||b==="rowspan")}function fe(ee){ee.document.registerPostFixer(l=>function(b,M){const S=M.document.differ.getChanges();let $=!1;for(const K of S)K.type=="insert"&&K.name=="table"&&($=je(K.position.nodeAfter,b)||$),K.type=="insert"&&K.name=="tableRow"&&($=Ze(K.position.nodeAfter,b)||$),K.type=="insert"&&K.name=="tableCell"&&($=pt(K.position.nodeAfter,b)||$),Ct(K)&&($=pt(K.position.parent,b)||$);return $}(l,ee))}function je(ee,l){let b=!1;for(const M of ee.getChildren())M.is("element","tableRow")&&(b=Ze(M,l)||b);return b}function Ze(ee,l){let b=!1;for(const M of ee.getChildren())b=pt(M,l)||b;return b}function pt(ee,l){if(ee.childCount==0)return l.insertElement("paragraph",ee),!0;const b=Array.from(ee.getChildren()).filter(M=>M.is("$text"));for(const M of b)l.wrap(l.createRangeOn(M),"paragraph");return!!b.length}function Ct(ee){return!(!ee.position||!ee.position.parent.is("element","tableCell"))&&(ee.type=="insert"&&ee.name=="$text"||ee.type=="remove")}function St(ee,l){if(!ee.is("element","paragraph"))return!1;const b=l.toViewElement(ee);return!!b&&T(ee)!==b.is("element","span")}var Xt=E(62),Zt=E.n(Xt),oi=E(482),bi={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Zt()(oi.Z,bi),oi.Z.locals;class gi extends f.Plugin{static get pluginName(){return"TableEditing"}static get requires(){return[Bt]}init(){const l=this.editor,b=l.model,M=b.schema,S=l.conversion,$=l.plugins.get(Bt);M.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),M.register("tableRow",{allowIn:"table",isLimit:!0}),M.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),S.for("upcast").add(K=>{K.on("element:figure",(ne,re,xe)=>{if(!xe.consumable.test(re.viewItem,{name:!0,classes:"table"}))return;const Oe=function(Ft){for(const ti of Ft.getChildren())if(ti.is("element","table"))return ti}(re.viewItem);if(!Oe||!xe.consumable.test(Oe,{name:!0}))return;xe.consumable.consume(re.viewItem,{name:!0,classes:"table"});const Xe=xe.convertItem(Oe,re.modelCursor),ft=(0,X.first)(Xe.modelRange.getItems());ft?(xe.convertChildren(re.viewItem,xe.writer.createPositionAt(ft,"end")),xe.updateConversionResult(ft,re)):xe.consumable.revert(re.viewItem,{name:!0,classes:"table"})})}),S.for("upcast").add(te()),S.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:u($,{asWidget:!0})}),S.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:u($)}),S.for("upcast").elementToElement({model:"tableRow",view:"tr"}),S.for("upcast").add(K=>{K.on("element:tr",(ne,re)=>{re.viewItem.isEmpty&&re.modelCursor.index==0&&ne.stop()},{priority:"high"})}),S.for("downcast").elementToElement({model:"tableRow",view:(K,{writer:ne})=>K.isEmpty?ne.createEmptyElement("tr"):ne.createContainerElement("tr")}),S.for("upcast").elementToElement({model:"tableCell",view:"td"}),S.for("upcast").elementToElement({model:"tableCell",view:"th"}),S.for("upcast").add(Z("td")),S.for("upcast").add(Z("th")),S.for("editingDowncast").elementToElement({model:"tableCell",view:w({asWidget:!0})}),S.for("dataDowncast").elementToElement({model:"tableCell",view:w()}),S.for("editingDowncast").elementToElement({model:"paragraph",view:_({asWidget:!0}),converterPriority:"high"}),S.for("dataDowncast").elementToElement({model:"paragraph",view:_(),converterPriority:"high"}),S.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),S.for("upcast").attributeToAttribute({model:{key:"colspan",value:Ti("colspan")},view:"colspan"}),S.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),S.for("upcast").attributeToAttribute({model:{key:"rowspan",value:Ti("rowspan")},view:"rowspan"}),l.config.define("table.defaultHeadings.rows",0),l.config.define("table.defaultHeadings.columns",0),l.commands.add("insertTable",new z(l)),l.commands.add("insertTableRowAbove",new L(l,{order:"above"})),l.commands.add("insertTableRowBelow",new L(l,{order:"below"})),l.commands.add("insertTableColumnLeft",new x(l,{order:"left"})),l.commands.add("insertTableColumnRight",new x(l,{order:"right"})),l.commands.add("removeTableRow",new Nt(l)),l.commands.add("removeTableColumn",new jt(l)),l.commands.add("splitTableCellVertically",new c(l,{direction:"vertically"})),l.commands.add("splitTableCellHorizontally",new c(l,{direction:"horizontally"})),l.commands.add("mergeTableCells",new It(l)),l.commands.add("mergeTableCellRight",new qe(l,{direction:"right"})),l.commands.add("mergeTableCellLeft",new qe(l,{direction:"left"})),l.commands.add("mergeTableCellDown",new qe(l,{direction:"down"})),l.commands.add("mergeTableCellUp",new qe(l,{direction:"up"})),l.commands.add("setTableColumnHeader",new tt(l)),l.commands.add("setTableRowHeader",new yt(l)),l.commands.add("selectTableRow",new Dt(l)),l.commands.add("selectTableColumn",new wt(l)),ni(b),fe(b),this.listenTo(b.document,"change:data",()=>{(function(K,ne){const re=K.document.differ;for(const xe of re.getChanges()){let Oe,Xe=!1;if(xe.type=="attribute"){const Kt=xe.range.start.nodeAfter;if(!Kt||!Kt.is("element","table")||xe.attributeKey!="headingRows"&&xe.attributeKey!="headingColumns")continue;Oe=Kt,Xe=xe.attributeKey=="headingRows"}else xe.name!="tableRow"&&xe.name!="tableCell"||(Oe=xe.position.findAncestor("table"),Xe=xe.name=="tableRow");if(!Oe)continue;const ft=Oe.getAttribute("headingRows")||0,Ft=Oe.getAttribute("headingColumns")||0,ti=new g(Oe);for(const Kt of ti){const ui=Kt.row<ft||Kt.column<Ft?"th":"td",ki=ne.mapper.toViewElement(Kt.cell);ki&&ki.is("element")&&ki.name!=ui&&ne.reconvertItem(Xe?Kt.cell.parent:Kt.cell)}}})(b,l.editing),function(K,ne){const re=K.document.differ,xe=new Set;for(const Oe of re.getChanges()){const Xe=Oe.type=="attribute"?Oe.range.start.parent:Oe.position.parent;Xe.is("element","tableCell")&&xe.add(Xe)}for(const Oe of xe.values()){const Xe=Array.from(Oe.getChildren()).filter(ft=>St(ft,ne.mapper));for(const ft of Xe)ne.reconvertItem(ft)}}(b,l.editing)})}}function Ti(ee){return l=>{const b=parseInt(l.getAttribute(ee));return Number.isNaN(b)||b<=0?null:b}}var Mt=E(273),Ei=E(272),Ri={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Zt()(Ei.Z,Ri),Ei.Z.locals;class Yi extends Mt.View{constructor(l){super(l);const b=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new X.KeystrokeHandler,this.focusTracker=new X.FocusTracker,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(M,S)=>`${S} \xD7 ${M}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":b.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:b.to("label")}]}],on:{mousedown:b.to(M=>{M.preventDefault()}),click:b.to(()=>{this.fire("execute")})}}),this.on("boxover",(M,S)=>{const{row:$,column:K}=S.target.dataset;this.items.get(10*(parseInt($,10)-1)+(parseInt(K,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(M,S,$)=>{if(!$)return;const{row:K,column:ne}=$.dataset;this.set({rows:parseInt(K),columns:parseInt(ne)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),(0,Mt.addKeyboardHandlingForGrid)({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const l of this.items)this.focusTracker.add(l.element);this.keystrokes.listenTo(this.element)}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const l=this.rows,b=this.columns;this.items.map((M,S)=>{const $=Math.floor(S/10)<l&&S%10<b;M.set("isOn",$)})}_createGridButton(l,b,M,S){const $=new Mt.ButtonView(l);return $.set({label:S,class:"ck-insert-table-dropdown-grid-box"}),$.extendTemplate({attributes:{"data-row":b,"data-column":M}}),$}_createGridCollection(){const l=[];for(let b=0;b<100;b++){const M=Math.floor(b/10),S=b%10,$=`${M+1} \xD7 ${S+1}`;l.push(this._createGridButton(this.locale,M+1,S+1,$))}return this.createCollection(l)}}class ji extends f.Plugin{static get pluginName(){return"TableUI"}init(){const l=this.editor,b=this.editor.t,M=l.locale.contentLanguageDirection==="ltr";l.ui.componentFactory.add("insertTable",S=>{const $=l.commands.get("insertTable"),K=(0,Mt.createDropdown)(S);let ne;return K.bind("isEnabled").to($),K.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',label:b("Insert table"),tooltip:!0}),K.on("change:isOpen",()=>{ne||(ne=new Yi(S),K.panelView.children.add(ne),ne.delegate("execute").to(K),K.on("execute",()=>{l.execute("insertTable",{rows:ne.rows,columns:ne.columns}),l.editing.view.focus()}))}),K}),l.ui.componentFactory.add("tableColumn",S=>{const $=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:b("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:M?"insertTableColumnLeft":"insertTableColumnRight",label:b("Insert column left")}},{type:"button",model:{commandName:M?"insertTableColumnRight":"insertTableColumnLeft",label:b("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:b("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:b("Select column")}}];return this._prepareDropdown(b("Column"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',$,S)}),l.ui.componentFactory.add("tableRow",S=>{const $=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:b("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:b("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:b("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:b("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:b("Select row")}}];return this._prepareDropdown(b("Row"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',$,S)}),l.ui.componentFactory.add("mergeTableCells",S=>{const $=[{type:"button",model:{commandName:"mergeTableCellUp",label:b("Merge cell up")}},{type:"button",model:{commandName:M?"mergeTableCellRight":"mergeTableCellLeft",label:b("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:b("Merge cell down")}},{type:"button",model:{commandName:M?"mergeTableCellLeft":"mergeTableCellRight",label:b("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:b("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:b("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(b("Merge cells"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',$,S)})}_prepareDropdown(l,b,M,S){const $=this.editor,K=(0,Mt.createDropdown)(S),ne=this._fillDropdownWithListOptions(K,M);return K.buttonView.set({label:l,icon:b,tooltip:!0}),K.bind("isEnabled").toMany(ne,"isEnabled",(...re)=>re.some(xe=>xe)),this.listenTo(K,"execute",re=>{$.execute(re.source.commandName),re.source instanceof Mt.SwitchButtonView||$.editing.view.focus()}),K}_prepareMergeSplitButtonDropdown(l,b,M,S){const $=this.editor,K=(0,Mt.createDropdown)(S,Mt.SplitButtonView),ne="mergeTableCells",re=$.commands.get(ne),xe=this._fillDropdownWithListOptions(K,M);return K.buttonView.set({label:l,icon:b,tooltip:!0,isEnabled:!0}),K.bind("isEnabled").toMany([re,...xe],"isEnabled",(...Oe)=>Oe.some(Xe=>Xe)),this.listenTo(K.buttonView,"execute",()=>{$.execute(ne),$.editing.view.focus()}),this.listenTo(K,"execute",Oe=>{$.execute(Oe.source.commandName),$.editing.view.focus()}),K}_fillDropdownWithListOptions(l,b){const M=this.editor,S=[],$=new X.Collection;for(const K of b)Pi(K,M,S,$);return(0,Mt.addListToDropdown)(l,$),S}}function Pi(ee,l,b,M){const S=ee.model=new Mt.Model(ee.model),{commandName:$,bindIsOn:K}=ee.model;if(ee.type==="button"||ee.type==="switchbutton"){const ne=l.commands.get($);b.push(ne),S.set({commandName:$}),S.bind("isEnabled").to(ne),K&&S.bind("isOn").to(ne,"value")}S.set({withText:!0}),M.add(ee)}var qi=E(475),nn={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Zt()(qi.Z,nn),qi.Z.locals;class Li extends f.Plugin{static get pluginName(){return"TableSelection"}static get requires(){return[Bt,Bt]}init(){const l=this.editor,b=l.model,M=l.editing.view;this.listenTo(b,"deleteContent",(S,$)=>this._handleDeleteContent(S,$),{priority:"high"}),this.listenTo(M.document,"insertText",(S,$)=>this._handleInsertTextEvent(S,$),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const l=this.editor.plugins.get(Bt),b=this.editor.model.document.selection,M=l.getSelectedTableCells(b);return M.length==0?null:M}getSelectionAsFragment(){const l=this.editor.plugins.get(Bt),b=this.getSelectedTableCells();return b?this.editor.model.change(M=>{const S=M.createDocumentFragment(),{first:$,last:K}=l.getColumnIndexes(b),{first:ne,last:re}=l.getRowIndexes(b),xe=b[0].findAncestor("table");let Oe=re,Xe=K;if(l.isSelectionRectangular(b)){const Ft={firstColumn:$,lastColumn:K,firstRow:ne,lastRow:re};Oe=dt(xe,Ft),Xe=nt(xe,Ft)}const ft=D(xe,{startRow:ne,startColumn:$,endRow:Oe,endColumn:Xe},M);return M.insert(ft,S,0),S}):null}setCellSelection(l,b){const M=this._getCellsToSelect(l,b);this.editor.model.change(S=>{S.setSelection(M.cells.map($=>S.createRangeOn($)),{backward:M.backward})})}getFocusCell(){const l=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return l&&l.is("element","tableCell")?l:null}getAnchorCell(){const l=this.editor.model.document.selection,b=(0,X.first)(l.getRanges()).getContainedElement();return b&&b.is("element","tableCell")?b:null}_defineSelectionConverter(){const l=this.editor,b=new Set;l.conversion.for("editingDowncast").add(M=>M.on("selection",(S,$,K)=>{const ne=K.writer;(function(Oe){for(const Xe of b)Oe.removeClass("ck-editor__editable_selected",Xe);b.clear()})(ne);const re=this.getSelectedTableCells();if(!re)return;for(const Oe of re){const Xe=K.mapper.toViewElement(Oe);ne.addClass("ck-editor__editable_selected",Xe),b.add(Xe)}const xe=K.mapper.toViewElement(re[re.length-1]);ne.setSelection(xe,0)},{priority:"lowest"}))}_enablePluginDisabling(){const l=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const b=this.getSelectedTableCells();if(!b)return;l.model.change(M=>{const S=M.createPositionAt(b[0],0),$=l.model.schema.getNearestSelectionRange(S);M.setSelection($)})}})}_handleDeleteContent(l,b){const M=this.editor.plugins.get(Bt),[S,$]=b,K=this.editor.model,ne=!$||$.direction=="backward",re=M.getSelectedTableCells(S);re.length&&(l.stop(),K.change(xe=>{const Oe=re[ne?re.length-1:0];K.change(ft=>{for(const Ft of re)K.deleteContent(ft.createSelection(Ft,"in"))});const Xe=K.schema.getNearestSelectionRange(xe.createPositionAt(Oe,0));S.is("documentSelection")?xe.setSelection(Xe):S.setTo(Xe)}))}_handleInsertTextEvent(l,b){const M=this.editor,S=M.model.document.selection,$=this.getSelectedTableCells(S);if(!$)return;const K=M.editing.view,ne=M.editing.mapper,re=$.map(xe=>K.createRangeOn(ne.toViewElement(xe)));b.selection=K.createSelection(re)}_getCellsToSelect(l,b){const M=this.editor.plugins.get("TableUtils"),S=M.getCellLocation(l),$=M.getCellLocation(b),K=Math.min(S.row,$.row),ne=Math.max(S.row,$.row),re=Math.min(S.column,$.column),xe=Math.max(S.column,$.column),Oe=new Array(ne-K+1).fill(null).map(()=>[]),Xe={startRow:K,endRow:ne,startColumn:re,endColumn:xe};for(const{row:ti,cell:Kt}of new g(l.findAncestor("table"),Xe))Oe[ti-K].push(Kt);const ft=$.row<S.row,Ft=$.column<S.column;return ft&&Oe.reverse(),Ft&&Oe.forEach(ti=>ti.reverse()),{cells:Oe.flat(),backward:ft||Ft}}}class dn extends f.Plugin{static get pluginName(){return"TableClipboard"}static get requires(){return[Li,Bt]}init(){const l=this.editor,b=l.editing.view.document;this.listenTo(b,"copy",(M,S)=>this._onCopyCut(M,S)),this.listenTo(b,"cut",(M,S)=>this._onCopyCut(M,S)),this.listenTo(l.model,"insertContent",(M,S)=>this._onInsertContent(M,...S),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(l,b){const M=this.editor.plugins.get(Li);if(!M.getSelectedTableCells()||l.name=="cut"&&this.editor.isReadOnly)return;b.preventDefault(),l.stop();const S=this.editor.data,$=this.editor.editing.view.document,K=S.toView(M.getSelectionAsFragment());$.fire("clipboardOutput",{dataTransfer:b.dataTransfer,content:K,method:l.name})}_onInsertContent(l,b,M){if(M&&!M.is("documentSelection"))return;const S=this.editor.model,$=this.editor.plugins.get(Bt);let K=pi(b,S);if(!K)return;const ne=$.getSelectionAffectedTableCells(S.document.selection);ne.length?(l.stop(),S.change(re=>{const xe={width:$.getColumns(K),height:$.getRows(K)},Oe=function(ui,ki,Ai,Hi){const Qi=ui[0].findAncestor("table"),hn=Hi.getColumnIndexes(ui),kn=Hi.getRowIndexes(ui),Xi={firstColumn:hn.first,lastColumn:hn.last,firstRow:kn.first,lastRow:kn.last},Yn=ui.length===1;return Yn&&(Xi.lastRow+=ki.height-1,Xi.lastColumn+=ki.width-1,function(oe,ce,Ue,Et){const Si=Et.getColumns(oe),Di=Et.getRows(oe);Ue>Si&&Et.insertColumns(oe,{at:Si,columns:Ue-Si}),ce>Di&&Et.insertRows(oe,{at:Di,rows:ce-Di})}(Qi,Xi.lastRow+1,Xi.lastColumn+1,Hi)),Yn||!Hi.isSelectionRectangular(ui)?function(oe,ce,Ue){const{firstRow:Et,lastRow:Si,firstColumn:Di,lastColumn:Zi}=ce,$i={first:Et,last:Si},gn={first:Di,last:Zi};Ki(oe,Di,$i,Ue),Ki(oe,Zi+1,$i,Ue),fi(oe,Et,gn,Ue),fi(oe,Si+1,gn,Ue,Et)}(Qi,Xi,Ai):(Xi.lastRow=dt(Qi,Xi),Xi.lastColumn=nt(Qi,Xi)),Xi}(ne,xe,re,$),Xe=Oe.lastRow-Oe.firstRow+1,ft=Oe.lastColumn-Oe.firstColumn+1,Ft={startRow:0,startColumn:0,endRow:Math.min(Xe,xe.height)-1,endColumn:Math.min(ft,xe.width)-1};K=D(K,Ft,re);const ti=ne[0].findAncestor("table"),Kt=this._replaceSelectedCellsWithPasted(K,xe,ti,Oe,re);if(this.editor.plugins.get("TableSelection").isEnabled){const ui=$.sortRanges(Kt.map(ki=>re.createRangeOn(ki)));re.setSelection(ui)}else re.setSelection(Kt[0],0)})):Qe(K,$)}_replaceSelectedCellsWithPasted(l,b,M,S,$){const{width:K,height:ne}=b,re=function(ui,ki,Ai){const Hi=new Array(Ai).fill(null).map(()=>new Array(ki).fill(null));for(const{column:Qi,row:hn,cell:kn}of new g(ui))Hi[hn][Qi]=kn;return Hi}(l,K,ne),xe=[...new g(M,{startRow:S.firstRow,endRow:S.lastRow,startColumn:S.firstColumn,endColumn:S.lastColumn,includeAllSlots:!0})],Oe=[];let Xe;for(const ui of xe){const{row:ki,column:Ai}=ui;Ai===S.firstColumn&&(Xe=ui.getPositionBefore());const Hi=ki-S.firstRow,Qi=Ai-S.firstColumn,hn=re[Hi%ne][Qi%K],kn=hn?$.cloneElement(hn):null,Xi=this._replaceTableSlotCell(ui,kn,Xe,$);Xi&&(Ve(Xi,ki,Ai,S.lastRow,S.lastColumn,$),Oe.push(Xi),Xe=$.createPositionAfter(Xi))}const ft=parseInt(M.getAttribute("headingRows")||0),Ft=parseInt(M.getAttribute("headingColumns")||0),ti=S.firstRow<ft&&ft<=S.lastRow,Kt=S.firstColumn<Ft&&Ft<=S.lastColumn;if(ti){const ui=fi(M,ft,{first:S.firstColumn,last:S.lastColumn},$,S.firstRow);Oe.push(...ui)}if(Kt){const ui=Ki(M,Ft,{first:S.firstRow,last:S.lastRow},$);Oe.push(...ui)}return Oe}_replaceTableSlotCell(l,b,M,S){const{cell:$,isAnchor:K}=l;return K&&S.remove($),b?(S.insert(b,M),b):null}getTableIfOnlyTableInContent(l,b){return pi(l,b)}}function pi(ee,l){if(!ee.is("documentFragment")&&!ee.is("element"))return null;if(ee.is("element","table"))return ee;if(ee.childCount==1&&ee.getChild(0).is("element","table"))return ee.getChild(0);const b=l.createRangeIn(ee);for(const M of b.getItems())if(M.is("element","table")){const S=l.createRange(b.start,l.createPositionBefore(M));if(l.hasContent(S,{ignoreWhitespaces:!0}))return null;const $=l.createRange(l.createPositionAfter(M),b.end);return l.hasContent($,{ignoreWhitespaces:!0})?null:M}return null}function fi(ee,l,b,M,S=0){if(!(l<1))return W(ee,l,S).filter(({column:$,cellWidth:K})=>ke($,K,b)).map(({cell:$})=>q($,l,M))}function Ki(ee,l,b,M){if(!(l<1))return ae(ee,l).filter(({row:S,cellHeight:$})=>ke(S,$,b)).map(({cell:S,column:$})=>Ie(S,$,l,M))}function ke(ee,l,b){const M=ee+l-1,{first:S,last:$}=b;return ee>=S&&ee<=$||ee<S&&M>=S}class V extends f.Plugin{static get pluginName(){return"TableKeyboard"}static get requires(){return[Li,Bt]}init(){const l=this.editor.editing.view.document;this.listenTo(l,"arrowKey",(...b)=>this._onArrowKey(...b),{context:"table"}),this.listenTo(l,"tab",(...b)=>this._handleTabOnSelectedTable(...b),{context:"figure"}),this.listenTo(l,"tab",(...b)=>this._handleTab(...b),{context:["th","td"]})}_handleTabOnSelectedTable(l,b){const M=this.editor,S=M.model.document.selection.getSelectedElement();S&&S.is("element","table")&&(b.preventDefault(),b.stopPropagation(),l.stop(),M.model.change($=>{$.setSelection($.createRangeIn(S.getChild(0).getChild(0)))}))}_handleTab(l,b){const M=this.editor,S=this.editor.plugins.get(Bt),$=M.model.document.selection,K=!b.shiftKey;let ne=S.getTableCellsContainingSelection($)[0];if(ne||(ne=this.editor.plugins.get("TableSelection").getFocusCell()),!ne)return;b.preventDefault(),b.stopPropagation(),l.stop();const re=ne.parent,xe=re.parent,Oe=xe.getChildIndex(re),Xe=re.getChildIndex(ne),ft=Xe===0;if(!K&&ft&&Oe===0)return void M.model.change(ui=>{ui.setSelection(ui.createRangeOn(xe))});const Ft=Xe===re.childCount-1,ti=Oe===S.getRows(xe)-1;if(K&&ti&&Ft&&(M.execute("insertTableRowBelow"),Oe===S.getRows(xe)-1))return void M.model.change(ui=>{ui.setSelection(ui.createRangeOn(xe))});let Kt;if(K&&Ft)Kt=xe.getChild(Oe+1).getChild(0);else if(!K&&ft){const ui=xe.getChild(Oe-1);Kt=ui.getChild(ui.childCount-1)}else Kt=re.getChild(Xe+(K?1:-1));M.model.change(ui=>{ui.setSelection(ui.createRangeIn(Kt))})}_onArrowKey(l,b){const M=this.editor,S=b.keyCode,$=(0,X.getLocalizedArrowKeyCodeDirection)(S,M.locale.contentLanguageDirection);this._handleArrowKeys($,b.shiftKey)&&(b.preventDefault(),b.stopPropagation(),l.stop())}_handleArrowKeys(l,b){const M=this.editor.plugins.get(Bt),S=this.editor.model,$=S.document.selection,K=["right","down"].includes(l),ne=M.getSelectedTableCells($);if(ne.length){let xe;return xe=b?this.editor.plugins.get("TableSelection").getFocusCell():K?ne[ne.length-1]:ne[0],this._navigateFromCellInDirection(xe,l,b),!0}const re=$.focus.findAncestor("tableCell");if(!re)return!1;if(!$.isCollapsed)if(b){if($.isBackward==K&&!$.containsEntireContent(re))return!1}else{const xe=$.getSelectedElement();if(!xe||!S.schema.isObject(xe))return!1}return!!this._isSelectionAtCellEdge($,re,K)&&(this._navigateFromCellInDirection(re,l,b),!0)}_isSelectionAtCellEdge(l,b,M){const S=this.editor.model,$=this.editor.model.schema,K=M?l.getLastPosition():l.getFirstPosition();if(!$.getLimitElement(K).is("element","tableCell"))return S.createPositionAt(b,M?"end":0).isTouching(K);const ne=S.createSelection(K);return S.modifySelection(ne,{direction:M?"forward":"backward"}),K.isEqual(ne.focus)}_navigateFromCellInDirection(l,b,M=!1){const S=this.editor.model,$=l.findAncestor("table"),K=[...new g($,{includeAllSlots:!0})],{row:ne,column:re}=K[K.length-1],xe=K.find(({cell:Kt})=>Kt==l);let{row:Oe,column:Xe}=xe;switch(b){case"left":Xe--;break;case"up":Oe--;break;case"right":Xe+=xe.cellWidth;break;case"down":Oe+=xe.cellHeight}if(Oe<0||Oe>ne||Xe<0&&Oe<=0||Xe>re&&Oe>=ne)return void S.change(Kt=>{Kt.setSelection(Kt.createRangeOn($))});Xe<0?(Xe=M?0:re,Oe--):Xe>re&&(Xe=M?re:0,Oe++);const ft=K.find(Kt=>Kt.row==Oe&&Kt.column==Xe).cell,Ft=["right","down"].includes(b),ti=this.editor.plugins.get("TableSelection");if(M&&ti.isEnabled){const Kt=ti.getAnchorCell()||l;ti.setCellSelection(Kt,ft)}else{const Kt=S.createPositionAt(ft,Ft?0:"end");S.change(ui=>{ui.setSelection(Kt)})}}}var F=E(492);class P extends F.DomEventObserver{constructor(l){super(l),this.domEventType=["mousemove","mouseleave"]}onDomEvent(l){this.fire(l.type,l)}}class N extends f.Plugin{static get pluginName(){return"TableMouse"}static get requires(){return[Li,Bt]}init(){this.editor.editing.view.addObserver(P),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const l=this.editor,b=l.plugins.get(Bt);let M=!1;const S=l.plugins.get(Li);this.listenTo(l.editing.view.document,"mousedown",($,K)=>{const ne=l.model.document.selection;if(!this.isEnabled||!S.isEnabled||!K.domEvent.shiftKey)return;const re=S.getAnchorCell()||b.getTableCellsContainingSelection(ne)[0];if(!re)return;const xe=this._getModelTableCellFromDomEvent(K);xe&&de(re,xe)&&(M=!0,S.setCellSelection(re,xe),K.preventDefault())}),this.listenTo(l.editing.view.document,"mouseup",()=>{M=!1}),this.listenTo(l.editing.view.document,"selectionChange",$=>{M&&$.stop()},{priority:"highest"})}_enableMouseDragSelection(){const l=this.editor;let b,M,S=!1,$=!1;const K=l.plugins.get(Li);this.listenTo(l.editing.view.document,"mousedown",(ne,re)=>{this.isEnabled&&K.isEnabled&&(re.domEvent.shiftKey||re.domEvent.ctrlKey||re.domEvent.altKey||(b=this._getModelTableCellFromDomEvent(re)))}),this.listenTo(l.editing.view.document,"mousemove",(ne,re)=>{if(!re.domEvent.buttons||!b)return;const xe=this._getModelTableCellFromDomEvent(re);xe&&de(b,xe)&&(M=xe,S||M==b||(S=!0)),S&&($=!0,K.setCellSelection(b,M),re.preventDefault())}),this.listenTo(l.editing.view.document,"mouseup",()=>{S=!1,$=!1,b=null,M=null}),this.listenTo(l.editing.view.document,"selectionChange",ne=>{$&&ne.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(l){const b=l.target,M=this.editor.editing.view.createPositionAt(b,0);return this.editor.editing.mapper.toModelPosition(M).parent.findAncestor("tableCell",{includeSelf:!0})}}function de(ee,l){return ee.parent.parent==l.parent.parent}var Ce=E(660),$e={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Zt()(Ce.Z,$e),Ce.Z.locals;class at extends f.Plugin{static get requires(){return[gi,ji,Li,N,V,dn,v.Widget]}static get pluginName(){return"Table"}}class Tt extends f.Plugin{static get pluginName(){return"PlainTableOutput"}static get requires(){return[at]}init(){const l=this.editor;l.conversion.for("dataDowncast").elementToStructure({model:"table",view:Ge,converterPriority:"high"}),l.plugins.has("TableCaption")&&l.conversion.for("dataDowncast").elementToElement({model:"caption",view:(b,{writer:M})=>{if(b.parent.name==="table")return M.createContainerElement("caption")},converterPriority:"high"}),l.plugins.has("TableProperties")&&function(b){const M={"border-width":"tableBorderWidth","border-color":"tableBorderColor","border-style":"tableBorderStyle","background-color":"tableBackgroundColor"};for(const[S,$]of Object.entries(M))b.conversion.for("dataDowncast").add(K=>K.on(`attribute:${$}:table`,(ne,re,xe)=>{const{item:Oe,attributeNewValue:Xe}=re,{mapper:ft,writer:Ft}=xe;if(!xe.consumable.consume(Oe,ne.name))return;const ti=ft.toViewElement(Oe);Xe?Ft.setStyle(S,Xe,ti):Ft.removeStyle(S,ti)},{priority:"high"}))}(l)}}function Ge(ee,{writer:l}){const b=ee.getAttribute("headingRows")||0,M=l.createSlot(xe=>xe.is("element","tableRow")&&xe.index<b),S=l.createSlot(xe=>xe.is("element","tableRow")&&xe.index>=b),$=l.createSlot(xe=>!xe.is("element","tableRow")),K=l.createContainerElement("thead",null,M),ne=l.createContainerElement("tbody",null,S),re=[];return b&&re.push(K),b<ee.childCount&&re.push(ne),l.createContainerElement("table",null,[$,...re])}function Ut(ee){const l=ee.getSelectedElement();return l&&yi(l)?l:null}function ci(ee){const l=ee.getFirstPosition();if(!l)return null;let b=l.parent;for(;b;){if(b.is("element")&&yi(b))return b;b=b.parent}return null}function yi(ee){return!!ee.getCustomProperty("table")&&(0,v.isWidget)(ee)}class Ni extends f.Plugin{static get requires(){return[v.WidgetToolbarRepository]}static get pluginName(){return"TableToolbar"}afterInit(){const l=this.editor,b=l.t,M=l.plugins.get(v.WidgetToolbarRepository),S=l.config.get("table.contentToolbar"),$=l.config.get("table.tableToolbar");S&&M.register("tableContent",{ariaLabel:b("Table toolbar"),items:S,getRelatedElement:ci}),$&&M.register("table",{ariaLabel:b("Table toolbar"),items:$,getRelatedElement:Ut})}}var Ii=E(252),zi={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Zt()(Ii.Z,zi),Ii.Z.locals;class Oi extends Mt.View{constructor(l,b){super(l),this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=b,this.focusTracker=new X.FocusTracker,this._focusables=new Mt.ViewCollection,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new X.KeystrokeHandler,this._stillTyping=!1,this._focusCycler=new Mt.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(M,S,$)=>this._setInputValue($))}render(){super.render(),this.keystrokes.listenTo(this.dropdownView.panelView.element)}focus(){this.inputView.focus()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const l=this.locale,b=l.t,M=this.bindTemplate,S=this._createColorGrid(l),$=(0,Mt.createDropdown)(l),K=new Mt.View,ne=this._createRemoveColorButton();return K.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:M.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",M.if("value","ck-hidden",re=>re!="")]}}]}),$.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),$.buttonView.children.add(K),$.buttonView.label=b("Color picker"),$.buttonView.tooltip=!0,$.panelPosition=l.uiLanguageDirection==="rtl"?"se":"sw",$.panelView.children.add(ne),$.panelView.children.add(S),$.bind("isEnabled").to(this,"isReadOnly",re=>!re),this._focusables.add(ne),this._focusables.add(S),this.focusTracker.add(ne.element),this.focusTracker.add(S.element),$}_createInputTextView(){const l=this.locale,b=new Mt.InputTextView(l);return b.extendTemplate({on:{blur:b.bindTemplate.to("blur")}}),b.value=this.value,b.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(b),b.on("input",()=>{const M=b.element.value,S=this.options.colorDefinitions.find($=>M===$.label);this._stillTyping=!0,this.value=S&&S.color||M}),b.on("blur",()=>{this._stillTyping=!1,this._setInputValue(b.element.value)}),b.delegate("input").to(this),b}_createRemoveColorButton(){const l=this.locale,b=l.t,M=new Mt.ButtonView(l),S=this.options.defaultColorValue||"",$=b(S?"Restore default":"Remove color");return M.class="ck-input-color__remove-color",M.withText=!0,M.icon=f.icons.eraser,M.label=$,M.on("execute",()=>{this.value=S,this.dropdownView.isOpen=!1,this.fire("input")}),M}_createColorGrid(l){const b=new Mt.ColorGridView(l,{colorDefinitions:this.options.colorDefinitions,columns:this.options.columns});return b.on("execute",(M,S)=>{this.value=S.value,this.dropdownView.isOpen=!1,this.fire("input")}),b.bind("selectedColor").to(this,"value"),b}_setInputValue(l){if(!this._stillTyping){const b=Ui(l),M=this.options.colorDefinitions.find(S=>b===Ui(S.color));this.inputView.value=M?M.label:l||""}}}function Ui(ee){return ee.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const Wt=ee=>ee==="";function we(ee){return{none:ee("None"),solid:ee("Solid"),dotted:ee("Dotted"),dashed:ee("Dashed"),double:ee("Double"),groove:ee("Groove"),ridge:ee("Ridge"),inset:ee("Inset"),outset:ee("Outset")}}function He(ee){return ee('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function J(ee){return ee('The value is invalid. Try "10px" or "2em" or simply "2".')}function R(ee){return ee=ee.trim(),Wt(ee)||(0,F.isColor)(ee)}function Q(ee){return ee=ee.trim(),Wt(ee)||wi(ee)||(0,F.isLength)(ee)||(0,F.isPercentage)(ee)}function ve(ee){return ee=ee.trim(),Wt(ee)||wi(ee)||(0,F.isLength)(ee)}function De(ee,l){const b=new X.Collection,M=we(ee.t);for(const S in M){const $={type:"button",model:new Mt.Model({_borderStyleValue:S,label:M[S],withText:!0})};S==="none"?$.model.bind("isOn").to(ee,"borderStyle",K=>l==="none"?!K:K===S):$.model.bind("isOn").to(ee,"borderStyle",K=>K===S),b.add($)}return b}function rt(ee){const{view:l,icons:b,toolbar:M,labels:S,propertyName:$,nameToValue:K,defaultValue:ne}=ee;for(const re in S){const xe=new Mt.ButtonView(l.locale);xe.set({label:S[re],icon:b[re],tooltip:S[re]});const Oe=K?K(re):re;xe.bind("isOn").to(l,$,Xe=>{let ft=Xe;return Xe===""&&ne&&(ft=ne),Oe===ft}),xe.on("execute",()=>{l[$]=Oe}),M.items.add(xe)}}const Pt=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function ai(ee){return(l,b,M)=>{const S=new Oi(l.locale,{colorDefinitions:($=ee.colorConfig,$.map(K=>({color:K.model,label:K.label,options:{hasBorder:K.hasBorder}}))),columns:ee.columns,defaultColorValue:ee.defaultColorValue});var $;return S.inputView.set({id:b,ariaDescribedById:M}),S.bind("isReadOnly").to(l,"isEnabled",K=>!K),S.bind("hasError").to(l,"errorText",K=>!!K),S.on("input",()=>{l.errorText=null}),l.bind("isEmpty","isFocused").to(S),S}}function wi(ee){const l=parseFloat(ee);return!Number.isNaN(l)&&ee===String(l)}var mt=E(333),U={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Zt()(mt.Z,U),mt.Z.locals;class se extends Mt.View{constructor(l,b={}){super(l);const M=this.bindTemplate;this.set("class",b.class||null),this.children=this.createCollection(),b.children&&b.children.forEach(S=>this.children.add(S)),this.set("_role",null),this.set("_ariaLabelledBy",null),b.labelView&&this.set({_role:"group",_ariaLabelledBy:b.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",M.to("class")],role:M.to("_role"),"aria-labelledby":M.to("_ariaLabelledBy")},children:this.children})}}var Te=E(934),Le={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Zt()(Te.Z,Le),Te.Z.locals;var Ye=E(686),Je={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Zt()(Ye.Z,Je),Ye.Z.locals;var At=E(773),_t={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Zt()(At.Z,_t),At.Z.locals;const Rt={left:f.icons.alignLeft,center:f.icons.alignCenter,right:f.icons.alignRight,justify:f.icons.alignJustify,top:f.icons.alignTop,middle:f.icons.alignMiddle,bottom:f.icons.alignBottom};class Vt extends Mt.View{constructor(l,b){super(l),this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=b;const{borderStyleDropdown:M,borderWidthInput:S,borderColorInput:$,borderRowLabel:K}=this._createBorderFields(),{backgroundRowLabel:ne,backgroundInput:re}=this._createBackgroundFields(),{widthInput:xe,operatorLabel:Oe,heightInput:Xe,dimensionsLabel:ft}=this._createDimensionFields(),{horizontalAlignmentToolbar:Ft,verticalAlignmentToolbar:ti,alignmentLabel:Kt}=this._createAlignmentFields();this.focusTracker=new X.FocusTracker,this.keystrokes=new X.KeystrokeHandler,this.children=this.createCollection(),this.borderStyleDropdown=M,this.borderWidthInput=S,this.borderColorInput=$,this.backgroundInput=re,this.paddingInput=this._createPaddingField(),this.widthInput=xe,this.heightInput=Xe,this.horizontalAlignmentToolbar=Ft,this.verticalAlignmentToolbar=ti;const{saveButtonView:ui,cancelButtonView:ki}=this._createActionButtons();this.saveButtonView=ui,this.cancelButtonView=ki,this._focusables=new Mt.ViewCollection,this._focusCycler=new Mt.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Mt.FormHeaderView(l,{label:this.t("Cell properties")})),this.children.add(new se(l,{labelView:K,children:[K,M,$,S],class:"ck-table-form__border-row"})),this.children.add(new se(l,{labelView:ne,children:[ne,re],class:"ck-table-form__background-row"})),this.children.add(new se(l,{children:[new se(l,{labelView:ft,children:[ft,xe,Oe,Xe],class:"ck-table-form__dimensions-row"}),new se(l,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new se(l,{labelView:Kt,children:[Kt,Ft,ti],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new se(l,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),(0,Mt.submitHandler)({view:this}),[this.borderStyleDropdown,this.borderColorInput,this.borderColorInput.fieldView.dropdownView.buttonView,this.borderWidthInput,this.backgroundInput,this.backgroundInput.fieldView.dropdownView.buttonView,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(l=>{this._focusables.add(l),this.focusTracker.add(l.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const l=this.options.defaultTableCellProperties,b={style:l.borderStyle,width:l.borderWidth,color:l.borderColor},M=ai({colorConfig:this.options.borderColors,columns:5,defaultColorValue:b.color}),S=this.locale,$=this.t,K=new Mt.LabelView(S);K.text=$("Border");const ne=we($),re=new Mt.LabeledFieldView(S,Mt.createLabeledDropdown);re.set({label:$("Style"),class:"ck-table-form__border-style"}),re.fieldView.buttonView.set({isOn:!1,withText:!0,tooltip:$("Style")}),re.fieldView.buttonView.bind("label").to(this,"borderStyle",Xe=>ne[Xe||"none"]),re.fieldView.on("execute",Xe=>{this.borderStyle=Xe.source._borderStyleValue}),re.bind("isEmpty").to(this,"borderStyle",Xe=>!Xe),(0,Mt.addListToDropdown)(re.fieldView,De(this,b.style));const xe=new Mt.LabeledFieldView(S,Mt.createLabeledInputText);xe.set({label:$("Width"),class:"ck-table-form__border-width"}),xe.fieldView.bind("value").to(this,"borderWidth"),xe.bind("isEnabled").to(this,"borderStyle",$t),xe.fieldView.on("input",()=>{this.borderWidth=xe.fieldView.element.value});const Oe=new Mt.LabeledFieldView(S,M);return Oe.set({label:$("Color"),class:"ck-table-form__border-color"}),Oe.fieldView.bind("value").to(this,"borderColor"),Oe.bind("isEnabled").to(this,"borderStyle",$t),Oe.fieldView.on("input",()=>{this.borderColor=Oe.fieldView.value}),this.on("change:borderStyle",(Xe,ft,Ft,ti)=>{$t(Ft)||(this.borderColor="",this.borderWidth=""),$t(ti)||(this.borderColor=b.color,this.borderWidth=b.width)}),{borderRowLabel:K,borderStyleDropdown:re,borderColorInput:Oe,borderWidthInput:xe}}_createBackgroundFields(){const l=this.locale,b=this.t,M=new Mt.LabelView(l);M.text=b("Background");const S=ai({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor}),$=new Mt.LabeledFieldView(l,S);return $.set({label:b("Color"),class:"ck-table-cell-properties-form__background"}),$.fieldView.bind("value").to(this,"backgroundColor"),$.fieldView.on("input",()=>{this.backgroundColor=$.fieldView.value}),{backgroundRowLabel:M,backgroundInput:$}}_createDimensionFields(){const l=this.locale,b=this.t,M=new Mt.LabelView(l);M.text=b("Dimensions");const S=new Mt.LabeledFieldView(l,Mt.createLabeledInputText);S.set({label:b("Width"),class:"ck-table-form__dimensions-row__width"}),S.fieldView.bind("value").to(this,"width"),S.fieldView.on("input",()=>{this.width=S.fieldView.element.value});const $=new Mt.View(l);$.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"\xD7"}]});const K=new Mt.LabeledFieldView(l,Mt.createLabeledInputText);return K.set({label:b("Height"),class:"ck-table-form__dimensions-row__height"}),K.fieldView.bind("value").to(this,"height"),K.fieldView.on("input",()=>{this.height=K.fieldView.element.value}),{dimensionsLabel:M,widthInput:S,operatorLabel:$,heightInput:K}}_createPaddingField(){const l=this.locale,b=this.t,M=new Mt.LabeledFieldView(l,Mt.createLabeledInputText);return M.set({label:b("Padding"),class:"ck-table-cell-properties-form__padding"}),M.fieldView.bind("value").to(this,"padding"),M.fieldView.on("input",()=>{this.padding=M.fieldView.element.value}),M}_createAlignmentFields(){const l=this.locale,b=this.t,M=new Mt.LabelView(l);M.text=b("Table cell text alignment");const S=new Mt.ToolbarView(l),$=this.locale.contentLanguageDirection==="rtl";S.set({isCompact:!0,ariaLabel:b("Horizontal text alignment toolbar")}),rt({view:this,icons:Rt,toolbar:S,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:ne=>{if($){if(ne==="left")return"right";if(ne==="right")return"left"}return ne},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const K=new Mt.ToolbarView(l);return K.set({isCompact:!0,ariaLabel:b("Vertical text alignment toolbar")}),rt({view:this,icons:Rt,toolbar:K,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:S,verticalAlignmentToolbar:K,alignmentLabel:M}}_createActionButtons(){const l=this.locale,b=this.t,M=new Mt.ButtonView(l),S=new Mt.ButtonView(l),$=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return M.set({label:b("Save"),icon:f.icons.check,class:"ck-button-save",type:"submit",withText:!0}),M.bind("isEnabled").toMany($,"errorText",(...K)=>K.every(ne=>!ne)),S.set({label:b("Cancel"),icon:f.icons.cancel,class:"ck-button-cancel",withText:!0}),S.delegate("execute").to(this,"cancel"),{saveButtonView:M,cancelButtonView:S}}get _horizontalAlignmentLabels(){const l=this.locale,b=this.t,M=b("Align cell text to the left"),S=b("Align cell text to the center"),$=b("Align cell text to the right"),K=b("Justify cell text");return l.uiLanguageDirection==="rtl"?{right:$,center:S,left:M,justify:K}:{left:M,center:S,right:$,justify:K}}get _verticalAlignmentLabels(){const l=this.t;return{top:l("Align cell text to the top"),middle:l("Align cell text to the middle"),bottom:l("Align cell text to the bottom")}}}function $t(ee){return ee!=="none"}const li=function(ee){var l=typeof ee;return ee!=null&&(l=="object"||l=="function")},Ci=typeof Y.g=="object"&&Y.g&&Y.g.Object===Object&&Y.g;var hi=typeof self=="object"&&self&&self.Object===Object&&self;const Fi=Ci||hi||Function("return this")(),un=function(){return Fi.Date.now()};var an=/\s/;const Cn=function(ee){for(var l=ee.length;l--&&an.test(ee.charAt(l)););return l};var fn=/^\s+/;const Tn=function(ee){return ee&&ee.slice(0,Cn(ee)+1).replace(fn,"")},In=Fi.Symbol;var Dn=Object.prototype,Fn=Dn.hasOwnProperty,Be=Dn.toString,j=In?In.toStringTag:void 0;const ie=function(ee){var l=Fn.call(ee,j),b=ee[j];try{ee[j]=void 0;var M=!0}catch{}var S=Be.call(ee);return M&&(l?ee[j]=b:delete ee[j]),S};var ue=Object.prototype.toString;const Ee=function(ee){return ue.call(ee)};var Re="[object Null]",ze="[object Undefined]",Ne=In?In.toStringTag:void 0;const Fe=function(ee){return ee==null?ee===void 0?ze:Re:Ne&&Ne in Object(ee)?ie(ee):Ee(ee)},lt=function(ee){return ee!=null&&typeof ee=="object"};var gt="[object Symbol]";const ut=function(ee){return typeof ee=="symbol"||lt(ee)&&Fe(ee)==gt};var vt=NaN,Ot=/^[-+]0x[0-9a-f]+$/i,ei=/^0b[01]+$/i,xt=/^0o[0-7]+$/i,ri=parseInt;const vi=function(ee){if(typeof ee=="number")return ee;if(ut(ee))return vt;if(li(ee)){var l=typeof ee.valueOf=="function"?ee.valueOf():ee;ee=li(l)?l+"":l}if(typeof ee!="string")return ee===0?ee:+ee;ee=Tn(ee);var b=ei.test(ee);return b||xt.test(ee)?ri(ee.slice(2),b?2:8):Ot.test(ee)?vt:+ee};var Vi="Expected a function",Wi=Math.max,tn=Math.min;const bn=function(ee,l,b){var M,S,$,K,ne,re,xe=0,Oe=!1,Xe=!1,ft=!0;if(typeof ee!="function")throw new TypeError(Vi);function Ft(Ai){var Hi=M,Qi=S;return M=S=void 0,xe=Ai,K=ee.apply(Qi,Hi)}function ti(Ai){var Hi=Ai-re;return re===void 0||Hi>=l||Hi<0||Xe&&Ai-xe>=$}function Kt(){var Ai=un();if(ti(Ai))return ui(Ai);ne=setTimeout(Kt,function(Hi){var Qi=l-(Hi-re);return Xe?tn(Qi,$-(Hi-xe)):Qi}(Ai))}function ui(Ai){return ne=void 0,ft&&M?Ft(Ai):(M=S=void 0,K)}function ki(){var Ai=un(),Hi=ti(Ai);if(M=arguments,S=this,re=Ai,Hi){if(ne===void 0)return function(Qi){return xe=Qi,ne=setTimeout(Kt,l),Oe?Ft(Qi):K}(re);if(Xe)return clearTimeout(ne),ne=setTimeout(Kt,l),Ft(re)}return ne===void 0&&(ne=setTimeout(Kt,l)),K}return l=vi(l)||0,li(b)&&(Oe=!!b.leading,$=(Xe="maxWait"in b)?Wi(vi(b.maxWait)||0,l):$,ft="trailing"in b?!!b.trailing:ft),ki.cancel=function(){ne!==void 0&&clearTimeout(ne),xe=0,M=re=S=ne=void 0},ki.flush=function(){return ne===void 0?K:ui(un())},ki},Pe=Mt.BalloonPanelView.defaultPositions,k=[Pe.northArrowSouth,Pe.northArrowSouthWest,Pe.northArrowSouthEast,Pe.southArrowNorth,Pe.southArrowNorthWest,Pe.southArrowNorthEast,Pe.viewportStickyNorth];function O(ee,l){const b=ee.plugins.get("ContextualBalloon");if(ci(ee.editing.view.document.selection)){let M;M=l==="cell"?Se(ee):he(ee),b.updatePosition(M)}}function he(ee){const l=ee.model.document.selection.getFirstPosition().findAncestor("table"),b=ee.editing.mapper.toViewElement(l);return{target:ee.editing.view.domConverter.mapViewToDom(b),positions:k}}function Se(ee){const l=ee.editing.mapper,b=ee.editing.view.domConverter,M=ee.model.document.selection;if(M.rangeCount>1)return{target:()=>function(K,ne){const re=ne.editing.mapper,xe=ne.editing.view.domConverter,Oe=Array.from(K).map(Xe=>{const ft=ht(Xe.start),Ft=re.toViewElement(ft);return new X.Rect(xe.mapViewToDom(Ft))});return X.Rect.getBoundingRect(Oe)}(M.getRanges(),ee),positions:k};const S=ht(M.getFirstPosition()),$=l.toViewElement(S);return{target:b.mapViewToDom($),positions:k}}function ht(ee){return ee.nodeAfter&&ee.nodeAfter.is("element","tableCell")?ee.nodeAfter:ee.findAncestor("tableCell")}function ct(ee){if(!ee||!li(ee))return ee;const{top:l,right:b,bottom:M,left:S}=ee;return l==b&&b==M&&M==S?l:void 0}function st(ee,l){const b=parseFloat(ee);return Number.isNaN(b)||String(b)!==String(ee)?ee:`${b}${l}`}function qt(ee,l={}){const b=Object.assign({borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:""},ee);return l.includeAlignmentProperty&&!b.alignment&&(b.alignment="center"),l.includePaddingProperty&&!b.padding&&(b.padding=""),l.includeVerticalAlignmentProperty&&!b.verticalAlignment&&(b.verticalAlignment="middle"),l.includeHorizontalAlignmentProperty&&!b.horizontalAlignment&&(b.horizontalAlignment=l.isRightToLeftContent?"right":"left"),b}const Mi={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class Gi extends f.Plugin{static get requires(){return[Mt.ContextualBalloon]}static get pluginName(){return"TableCellPropertiesUI"}constructor(l){super(l),l.config.define("table.tableCellProperties",{borderColors:Pt,backgroundColors:Pt})}init(){const l=this.editor,b=l.t;this._defaultTableCellProperties=qt(l.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:l.locale.contentLanguageDirection==="rtl"}),this._balloon=l.plugins.get(Mt.ContextualBalloon),this.view=null,this._undoStepBatch=null,this._isReady=!1,l.ui.componentFactory.add("tableCellProperties",M=>{const S=new Mt.ButtonView(M);S.set({label:b("Cell properties"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>',tooltip:!0}),this.listenTo(S,"execute",()=>this._showView());const $=Object.values(Mi).map(K=>l.commands.get(K));return S.bind("isEnabled").toMany($,"isEnabled",(...K)=>K.some(ne=>ne)),S})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const l=this.editor,b=l.config.get("table.tableCellProperties"),M=(0,Mt.normalizeColorOptions)(b.borderColors),S=(0,Mt.getLocalizedColorOptions)(l.locale,M),$=(0,Mt.normalizeColorOptions)(b.backgroundColors),K=(0,Mt.getLocalizedColorOptions)(l.locale,$),ne=new Vt(l.locale,{borderColors:S,backgroundColors:K,defaultTableCellProperties:this._defaultTableCellProperties}),re=l.t;ne.render(),this.listenTo(ne,"submit",()=>{this._hideView()}),this.listenTo(ne,"cancel",()=>{this._undoStepBatch.operations.length&&l.execute("undo",this._undoStepBatch),this._hideView()}),ne.keystrokes.set("Esc",(Xe,ft)=>{this._hideView(),ft()}),(0,Mt.clickOutsideHandler)({emitter:ne,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const xe=He(re),Oe=J(re);return ne.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle",this._defaultTableCellProperties.borderStyle)),ne.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:ne.borderColorInput,commandName:"tableCellBorderColor",errorText:xe,validator:R,defaultValue:this._defaultTableCellProperties.borderColor})),ne.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:ne.borderWidthInput,commandName:"tableCellBorderWidth",errorText:Oe,validator:ve,defaultValue:this._defaultTableCellProperties.borderWidth})),ne.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:ne.paddingInput,commandName:"tableCellPadding",errorText:Oe,validator:Q,defaultValue:this._defaultTableCellProperties.padding})),ne.on("change:width",this._getValidatedPropertyChangeCallback({viewField:ne.widthInput,commandName:"tableCellWidth",errorText:Oe,validator:Q,defaultValue:this._defaultTableCellProperties.width})),ne.on("change:height",this._getValidatedPropertyChangeCallback({viewField:ne.heightInput,commandName:"tableCellHeight",errorText:Oe,validator:Q,defaultValue:this._defaultTableCellProperties.height})),ne.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:ne.backgroundInput,commandName:"tableCellBackgroundColor",errorText:xe,validator:R,defaultValue:this._defaultTableCellProperties.backgroundColor})),ne.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment",this._defaultTableCellProperties.horizontalAlignment)),ne.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment",this._defaultTableCellProperties.verticalAlignment)),ne}_fillViewFormFromCommandValues(){const l=this.editor.commands,b=l.get("tableCellBorderStyle");Object.entries(Mi).map(([M,S])=>{const $=this._defaultTableCellProperties[M]||"";return[M,l.get(S).value||$]}).forEach(([M,S])=>{(M!=="borderColor"&&M!=="borderWidth"||b.value!=="none")&&this.view.set(M,S)}),this._isReady=!0}_showView(){const l=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(l.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:Se(l)}),this._undoStepBatch=l.model.createBatch(),this.view.focus()}_hideView(){const l=this.editor;this.stopListening(l.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const l=this.editor;ci(l.editing.view.document.selection)?this._isViewVisible&&O(l,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(l){return(b,M,S)=>{this._isReady&&this.editor.execute(l,{value:S,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(l){const{commandName:b,viewField:M,validator:S,errorText:$}=l,K=bn(()=>{M.errorText=$},500);return(ne,re,xe)=>{K.cancel(),this._isReady&&(S(xe)?(this.editor.execute(b,{value:xe,batch:this._undoStepBatch}),M.errorText=null):K())}}}class mn extends f.Command{constructor(l,b,M){super(l),this.attributeName=b,this._defaultValue=M}refresh(){const l=this.editor,b=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(l.model.document.selection);this.isEnabled=!!b.length,this.value=this._getSingleValue(b)}execute(l={}){const{value:b,batch:M}=l,S=this.editor.model,$=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(S.document.selection),K=this._getValueToSet(b);S.enqueueChange(M,ne=>{K?$.forEach(re=>ne.setAttribute(this.attributeName,K,re)):$.forEach(re=>ne.removeAttribute(this.attributeName,re))})}_getAttribute(l){if(!l)return;const b=l.getAttribute(this.attributeName);return b!==this._defaultValue?b:void 0}_getValueToSet(l){if(l!==this._defaultValue)return l}_getSingleValue(l){const b=this._getAttribute(l[0]);return l.every(M=>this._getAttribute(M)===b)?b:void 0}}class eo extends mn{constructor(l,b){super(l,"tableCellWidth",b)}_getValueToSet(l){if((l=st(l,"px"))!==this._defaultValue)return l}}class to extends f.Plugin{static get pluginName(){return"TableCellWidthEditing"}static get requires(){return[gi]}init(){const l=this.editor,b=qt(l.config.get("table.tableCellProperties.defaultProperties"));ge(l.model.schema,l.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:b.width}),l.commands.add("tableCellWidth",new eo(l,b.width))}}class uo extends mn{constructor(l,b){super(l,"tableCellPadding",b)}_getAttribute(l){if(!l)return;const b=ct(l.getAttribute(this.attributeName));return b!==this._defaultValue?b:void 0}_getValueToSet(l){if((l=st(l,"px"))!==this._defaultValue)return l}}class Ro extends mn{constructor(l,b){super(l,"tableCellHeight",b)}_getValueToSet(l){return(l=st(l,"px"))===this._defaultValue?null:l}}class Oo extends mn{constructor(l,b){super(l,"tableCellBackgroundColor",b)}}class jo extends mn{constructor(l,b){super(l,"tableCellVerticalAlignment",b)}}class ir extends mn{constructor(l,b){super(l,"tableCellHorizontalAlignment",b)}}class nr extends mn{constructor(l,b){super(l,"tableCellBorderStyle",b)}_getAttribute(l){if(!l)return;const b=ct(l.getAttribute(this.attributeName));return b!==this._defaultValue?b:void 0}}class or extends mn{constructor(l,b){super(l,"tableCellBorderColor",b)}_getAttribute(l){if(!l)return;const b=ct(l.getAttribute(this.attributeName));return b!==this._defaultValue?b:void 0}}class rr extends mn{constructor(l,b){super(l,"tableCellBorderWidth",b)}_getAttribute(l){if(!l)return;const b=ct(l.getAttribute(this.attributeName));return b!==this._defaultValue?b:void 0}_getValueToSet(l){if((l=st(l,"px"))!==this._defaultValue)return l}}const No=/^(top|middle|bottom)$/,Hn=/^(left|center|right|justify)$/;class ho extends f.Plugin{static get pluginName(){return"TableCellPropertiesEditing"}static get requires(){return[gi,to]}init(){const l=this.editor,b=l.model.schema,M=l.conversion;l.config.define("table.tableCellProperties.defaultProperties",{});const S=qt(l.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:l.locale.contentLanguageDirection==="rtl"});l.data.addStyleProcessorRules(F.addBorderRules),function($,K,ne){const re={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};$.extend("tableCell",{allowAttributes:Object.values(re)}),d(K,"td",re,ne),d(K,"th",re,ne),A(K,{modelElement:"tableCell",modelAttribute:re.style,styleName:"border-style"}),A(K,{modelElement:"tableCell",modelAttribute:re.color,styleName:"border-color"}),A(K,{modelElement:"tableCell",modelAttribute:re.width,styleName:"border-width"})}(b,M,{color:S.borderColor,style:S.borderStyle,width:S.borderWidth}),l.commands.add("tableCellBorderStyle",new nr(l,S.borderStyle)),l.commands.add("tableCellBorderColor",new or(l,S.borderColor)),l.commands.add("tableCellBorderWidth",new rr(l,S.borderWidth)),ge(b,M,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:S.height}),l.commands.add("tableCellHeight",new Ro(l,S.height)),l.data.addStyleProcessorRules(F.addPaddingRules),ge(b,M,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:S.padding}),l.commands.add("tableCellPadding",new uo(l,S.padding)),l.data.addStyleProcessorRules(F.addBackgroundRules),ge(b,M,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:S.backgroundColor}),l.commands.add("tableCellBackgroundColor",new Oo(l,S.backgroundColor)),function($,K,ne){$.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),K.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:re=>({key:"style",value:{"text-align":re}})}),K.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":Hn}},model:{key:"tableCellHorizontalAlignment",value:re=>{const xe=re.getStyle("text-align");return xe===ne?null:xe}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:Hn}},model:{key:"tableCellHorizontalAlignment",value:re=>{const xe=re.getAttribute("align");return xe===ne?null:xe}}})}(b,M,S.horizontalAlignment),l.commands.add("tableCellHorizontalAlignment",new ir(l,S.horizontalAlignment)),function($,K,ne){$.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),K.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:re=>({key:"style",value:{"vertical-align":re}})}),K.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":No}},model:{key:"tableCellVerticalAlignment",value:re=>{const xe=re.getStyle("vertical-align");return xe===ne?null:xe}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:No}},model:{key:"tableCellVerticalAlignment",value:re=>{const xe=re.getAttribute("valign");return xe===ne?null:xe}}})}(b,M,S.verticalAlignment),l.commands.add("tableCellVerticalAlignment",new jo(l,S.verticalAlignment))}}class sr extends f.Plugin{static get pluginName(){return"TableCellProperties"}static get requires(){return[ho,Gi]}}class Nn extends f.Command{constructor(l,b,M){super(l),this.attributeName=b,this._defaultValue=M}refresh(){const l=this.editor.model.document.selection.getFirstPosition().findAncestor("table");this.isEnabled=!!l,this.value=this._getValue(l)}execute(l={}){const b=this.editor.model,M=b.document.selection,{value:S,batch:$}=l,K=M.getFirstPosition().findAncestor("table"),ne=this._getValueToSet(S);b.enqueueChange($,re=>{ne?re.setAttribute(this.attributeName,ne,K):re.removeAttribute(this.attributeName,K)})}_getValue(l){if(!l)return;const b=l.getAttribute(this.attributeName);return b!==this._defaultValue?b:void 0}_getValueToSet(l){if(l!==this._defaultValue)return l}}class Vo extends Nn{constructor(l,b){super(l,"tableBackgroundColor",b)}}class mo extends Nn{constructor(l,b){super(l,"tableBorderColor",b)}_getValue(l){if(!l)return;const b=ct(l.getAttribute(this.attributeName));return b!==this._defaultValue?b:void 0}}class yo extends Nn{constructor(l,b){super(l,"tableBorderStyle",b)}_getValue(l){if(!l)return;const b=ct(l.getAttribute(this.attributeName));return b!==this._defaultValue?b:void 0}}class ar extends Nn{constructor(l,b){super(l,"tableBorderWidth",b)}_getValue(l){if(!l)return;const b=ct(l.getAttribute(this.attributeName));return b!==this._defaultValue?b:void 0}_getValueToSet(l){if((l=st(l,"px"))!==this._defaultValue)return l}}class Bo extends Nn{constructor(l,b){super(l,"tableWidth",b)}_getValueToSet(l){if((l=st(l,"px"))!==this._defaultValue)return l}}class zo extends Nn{constructor(l,b){super(l,"tableHeight",b)}_getValueToSet(l){return(l=st(l,"px"))===this._defaultValue?null:l}}class Do extends Nn{constructor(l,b){super(l,"tableAlignment",b)}}const lr=/^(left|center|right)$/,Fo=/^(left|none|right)$/;class Ho extends f.Plugin{static get pluginName(){return"TablePropertiesEditing"}static get requires(){return[gi]}init(){const l=this.editor,b=l.model.schema,M=l.conversion;l.config.define("table.tableProperties.defaultProperties",{});const S=qt(l.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});l.data.addStyleProcessorRules(F.addBorderRules),function($,K,ne){const re={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};$.extend("table",{allowAttributes:Object.values(re)}),d(K,"table",re,ne),H(K,{modelAttribute:re.color,styleName:"border-color"}),H(K,{modelAttribute:re.style,styleName:"border-style"}),H(K,{modelAttribute:re.width,styleName:"border-width"})}(b,M,{color:S.borderColor,style:S.borderStyle,width:S.borderWidth}),l.commands.add("tableBorderColor",new mo(l,S.borderColor)),l.commands.add("tableBorderStyle",new yo(l,S.borderStyle)),l.commands.add("tableBorderWidth",new ar(l,S.borderWidth)),function($,K,ne){$.extend("table",{allowAttributes:["tableAlignment"]}),K.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:re=>({key:"style",value:{float:re==="center"?"none":re}}),converterPriority:"high"}),K.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:Fo}},model:{key:"tableAlignment",value:re=>{let xe=re.getStyle("float");return xe==="none"&&(xe="center"),xe===ne?null:xe}}}).attributeToAttribute({view:{attributes:{align:lr}},model:{name:"table",key:"tableAlignment",value:re=>{const xe=re.getAttribute("align");return xe===ne?null:xe}}})}(b,M,S.alignment),l.commands.add("tableAlignment",new Do(l,S.alignment)),xo(b,M,{modelAttribute:"tableWidth",styleName:"width",defaultValue:S.width}),l.commands.add("tableWidth",new Bo(l,S.width)),xo(b,M,{modelAttribute:"tableHeight",styleName:"height",defaultValue:S.height}),l.commands.add("tableHeight",new zo(l,S.height)),l.data.addStyleProcessorRules(F.addBackgroundRules),function($,K,ne){const{modelAttribute:re}=ne;$.extend("table",{allowAttributes:[re]}),a(K,{viewElement:"table",...ne}),H(K,ne)}(b,M,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:S.backgroundColor}),l.commands.add("tableBackgroundColor",new Vo(l,S.backgroundColor))}}function xo(ee,l,b){const{modelAttribute:M}=b;ee.extend("table",{allowAttributes:[M]}),a(l,{viewElement:/^(table|figure)$/,shouldUpcast:S=>!(S.name=="table"&&S.parent.name=="figure"),...b}),A(l,{modelElement:"table",...b})}var Co=E(99),go={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Zt()(Co.Z,go),Co.Z.locals;const Uo={left:f.icons.objectLeft,center:f.icons.objectCenter,right:f.icons.objectRight};class cr extends Mt.View{constructor(l,b){super(l),this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=b;const{borderStyleDropdown:M,borderWidthInput:S,borderColorInput:$,borderRowLabel:K}=this._createBorderFields(),{backgroundRowLabel:ne,backgroundInput:re}=this._createBackgroundFields(),{widthInput:xe,operatorLabel:Oe,heightInput:Xe,dimensionsLabel:ft}=this._createDimensionFields(),{alignmentToolbar:Ft,alignmentLabel:ti}=this._createAlignmentFields();this.focusTracker=new X.FocusTracker,this.keystrokes=new X.KeystrokeHandler,this.children=this.createCollection(),this.borderStyleDropdown=M,this.borderWidthInput=S,this.borderColorInput=$,this.backgroundInput=re,this.widthInput=xe,this.heightInput=Xe,this.alignmentToolbar=Ft;const{saveButtonView:Kt,cancelButtonView:ui}=this._createActionButtons();this.saveButtonView=Kt,this.cancelButtonView=ui,this._focusables=new Mt.ViewCollection,this._focusCycler=new Mt.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Mt.FormHeaderView(l,{label:this.t("Table properties")})),this.children.add(new se(l,{labelView:K,children:[K,M,$,S],class:"ck-table-form__border-row"})),this.children.add(new se(l,{labelView:ne,children:[ne,re],class:"ck-table-form__background-row"})),this.children.add(new se(l,{children:[new se(l,{labelView:ft,children:[ft,xe,Oe,Xe],class:"ck-table-form__dimensions-row"}),new se(l,{labelView:ti,children:[ti,Ft],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new se(l,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),(0,Mt.submitHandler)({view:this}),[this.borderStyleDropdown,this.borderColorInput,this.borderColorInput.fieldView.dropdownView.buttonView,this.borderWidthInput,this.backgroundInput,this.backgroundInput.fieldView.dropdownView.buttonView,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(l=>{this._focusables.add(l),this.focusTracker.add(l.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const l=this.options.defaultTableProperties,b={style:l.borderStyle,width:l.borderWidth,color:l.borderColor},M=ai({colorConfig:this.options.borderColors,columns:5,defaultColorValue:b.color}),S=this.locale,$=this.t,K=new Mt.LabelView(S);K.text=$("Border");const ne=we(this.t),re=new Mt.LabeledFieldView(S,Mt.createLabeledDropdown);re.set({label:$("Style"),class:"ck-table-form__border-style"}),re.fieldView.buttonView.set({isOn:!1,withText:!0,tooltip:$("Style")}),re.fieldView.buttonView.bind("label").to(this,"borderStyle",Xe=>ne[Xe||"none"]),re.fieldView.on("execute",Xe=>{this.borderStyle=Xe.source._borderStyleValue}),re.bind("isEmpty").to(this,"borderStyle",Xe=>!Xe),(0,Mt.addListToDropdown)(re.fieldView,De(this,b.style));const xe=new Mt.LabeledFieldView(S,Mt.createLabeledInputText);xe.set({label:$("Width"),class:"ck-table-form__border-width"}),xe.fieldView.bind("value").to(this,"borderWidth"),xe.bind("isEnabled").to(this,"borderStyle",oo),xe.fieldView.on("input",()=>{this.borderWidth=xe.fieldView.element.value});const Oe=new Mt.LabeledFieldView(S,M);return Oe.set({label:$("Color"),class:"ck-table-form__border-color"}),Oe.fieldView.bind("value").to(this,"borderColor"),Oe.bind("isEnabled").to(this,"borderStyle",oo),Oe.fieldView.on("input",()=>{this.borderColor=Oe.fieldView.value}),this.on("change:borderStyle",(Xe,ft,Ft,ti)=>{oo(Ft)||(this.borderColor="",this.borderWidth=""),oo(ti)||(this.borderColor=b.color,this.borderWidth=b.width)}),{borderRowLabel:K,borderStyleDropdown:re,borderColorInput:Oe,borderWidthInput:xe}}_createBackgroundFields(){const l=this.locale,b=this.t,M=new Mt.LabelView(l);M.text=b("Background");const S=ai({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor}),$=new Mt.LabeledFieldView(l,S);return $.set({label:b("Color"),class:"ck-table-properties-form__background"}),$.fieldView.bind("value").to(this,"backgroundColor"),$.fieldView.on("input",()=>{this.backgroundColor=$.fieldView.value}),{backgroundRowLabel:M,backgroundInput:$}}_createDimensionFields(){const l=this.locale,b=this.t,M=new Mt.LabelView(l);M.text=b("Dimensions");const S=new Mt.LabeledFieldView(l,Mt.createLabeledInputText);S.set({label:b("Width"),class:"ck-table-form__dimensions-row__width"}),S.fieldView.bind("value").to(this,"width"),S.fieldView.on("input",()=>{this.width=S.fieldView.element.value});const $=new Mt.View(l);$.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"\xD7"}]});const K=new Mt.LabeledFieldView(l,Mt.createLabeledInputText);return K.set({label:b("Height"),class:"ck-table-form__dimensions-row__height"}),K.fieldView.bind("value").to(this,"height"),K.fieldView.on("input",()=>{this.height=K.fieldView.element.value}),{dimensionsLabel:M,widthInput:S,operatorLabel:$,heightInput:K}}_createAlignmentFields(){const l=this.locale,b=this.t,M=new Mt.LabelView(l);M.text=b("Alignment");const S=new Mt.ToolbarView(l);return S.set({isCompact:!0,ariaLabel:b("Table alignment toolbar")}),rt({view:this,icons:Uo,toolbar:S,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:M,alignmentToolbar:S}}_createActionButtons(){const l=this.locale,b=this.t,M=new Mt.ButtonView(l),S=new Mt.ButtonView(l),$=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return M.set({label:b("Save"),icon:f.icons.check,class:"ck-button-save",type:"submit",withText:!0}),M.bind("isEnabled").toMany($,"errorText",(...K)=>K.every(ne=>!ne)),S.set({label:b("Cancel"),icon:f.icons.cancel,class:"ck-button-cancel",withText:!0}),S.delegate("execute").to(this,"cancel"),{saveButtonView:M,cancelButtonView:S}}get _alignmentLabels(){const l=this.locale,b=this.t,M=b("Align table to the left"),S=b("Center table"),$=b("Align table to the right");return l.uiLanguageDirection==="rtl"?{right:$,center:S,left:M}:{left:M,center:S,right:$}}}function oo(ee){return ee!=="none"}const Wo={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class To extends f.Plugin{static get requires(){return[Mt.ContextualBalloon]}static get pluginName(){return"TablePropertiesUI"}constructor(l){super(l),l.config.define("table.tableProperties",{borderColors:Pt,backgroundColors:Pt})}init(){const l=this.editor,b=l.t;this._defaultTableProperties=qt(l.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=l.plugins.get(Mt.ContextualBalloon),this.view=null,this._undoStepBatch=null,this._isReady=!1,l.ui.componentFactory.add("tableProperties",M=>{const S=new Mt.ButtonView(M);S.set({label:b("Table properties"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>',tooltip:!0}),this.listenTo(S,"execute",()=>this._showView());const $=Object.values(Wo).map(K=>l.commands.get(K));return S.bind("isEnabled").toMany($,"isEnabled",(...K)=>K.some(ne=>ne)),S})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const l=this.editor,b=l.config.get("table.tableProperties"),M=(0,Mt.normalizeColorOptions)(b.borderColors),S=(0,Mt.getLocalizedColorOptions)(l.locale,M),$=(0,Mt.normalizeColorOptions)(b.backgroundColors),K=(0,Mt.getLocalizedColorOptions)(l.locale,$),ne=new cr(l.locale,{borderColors:S,backgroundColors:K,defaultTableProperties:this._defaultTableProperties}),re=l.t;ne.render(),this.listenTo(ne,"submit",()=>{this._hideView()}),this.listenTo(ne,"cancel",()=>{this._undoStepBatch.operations.length&&l.execute("undo",this._undoStepBatch),this._hideView()}),ne.keystrokes.set("Esc",(Xe,ft)=>{this._hideView(),ft()}),(0,Mt.clickOutsideHandler)({emitter:ne,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const xe=He(re),Oe=J(re);return ne.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle",this._defaultTableProperties.borderStyle)),ne.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:ne.borderColorInput,commandName:"tableBorderColor",errorText:xe,validator:R,defaultValue:this._defaultTableProperties.borderColor})),ne.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:ne.borderWidthInput,commandName:"tableBorderWidth",errorText:Oe,validator:ve,defaultValue:this._defaultTableProperties.borderWidth})),ne.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:ne.backgroundInput,commandName:"tableBackgroundColor",errorText:xe,validator:R,defaultValue:this._defaultTableProperties.backgroundColor})),ne.on("change:width",this._getValidatedPropertyChangeCallback({viewField:ne.widthInput,commandName:"tableWidth",errorText:Oe,validator:Q,defaultValue:this._defaultTableProperties.width})),ne.on("change:height",this._getValidatedPropertyChangeCallback({viewField:ne.heightInput,commandName:"tableHeight",errorText:Oe,validator:Q,defaultValue:this._defaultTableProperties.height})),ne.on("change:alignment",this._getPropertyChangeCallback("tableAlignment",this._defaultTableProperties.alignment)),ne}_fillViewFormFromCommandValues(){const l=this.editor.commands,b=l.get("tableBorderStyle");Object.entries(Wo).map(([M,S])=>{const $=this._defaultTableProperties[M]||"";return[M,l.get(S).value||$]}).forEach(([M,S])=>{(M!=="borderColor"&&M!=="borderWidth"||b.value!=="none")&&this.view.set(M,S)}),this._isReady=!0}_showView(){const l=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(l.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:he(l)}),this._undoStepBatch=l.model.createBatch(),this.view.focus()}_hideView(){const l=this.editor;this.stopListening(l.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const l=this.editor;ci(l.editing.view.document.selection)?this._isViewVisible&&O(l,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(l){return(b,M,S)=>{this._isReady&&this.editor.execute(l,{value:S,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(l){const{commandName:b,viewField:M,validator:S,errorText:$}=l,K=bn(()=>{M.errorText=$},500);return(ne,re,xe)=>{K.cancel(),this._isReady&&(S(xe)?(this.editor.execute(b,{value:xe,batch:this._undoStepBatch}),M.errorText=null):K())}}}class dr extends f.Plugin{static get pluginName(){return"TableProperties"}static get requires(){return[Ho,To]}}function Ao(ee){ee.document.registerPostFixer(l=>function(b,M){const S=M.document.differ.getChanges();let $=!1;for(const K of S)if(K.type=="insert"&&(K.position.parent.is("element","table")||K.name=="table")){const ne=K.name=="table"?K.position.nodeAfter:K.position.parent,re=Array.from(ne.getChildren()).filter(Oe=>Oe.is("element","caption")),xe=re.shift();if(!xe)continue;for(const Oe of re)b.move(b.createRangeIn(Oe),xe,"end"),b.remove(Oe);xe.nextSibling&&(b.move(b.createRangeOn(xe),ne,"end"),$=!0),$=!!re.length||$}return $}(l,ee))}function Zo(ee){return!!ee&&ee.is("element","table")}function So(ee){for(const l of ee.getChildren())if(l.is("element","caption"))return l;return null}function $o(ee){const l=ee.parent;return ee.name=="figcaption"&&l&&l.name=="figure"&&l.hasClass("table")||ee.name=="caption"&&l&&l.name=="table"?{name:!0}:null}function ro(ee){const l=ee.getSelectedElement();return l&&l.is("element","table")?l:ee.getFirstPosition().findAncestor("table")}class ur extends f.Command{refresh(){const l=ro(this.editor.model.document.selection);this.isEnabled=!!l,this.isEnabled?this.value=!!So(l):this.value=!1}execute(l={}){const{focusCaptionOnShow:b}=l;this.editor.model.change(M=>{this.value?this._hideTableCaption(M):this._showTableCaption(M,b)})}_showTableCaption(l,b){const M=this.editor.model,S=ro(M.document.selection),$=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(S)||l.createElement("caption");M.insertContent($,S,"end"),b&&l.setSelection($,"in")}_hideTableCaption(l){const b=this.editor.model,M=ro(b.document.selection),S=this.editor.plugins.get("TableCaptionEditing"),$=So(M);S._saveCaption(M,$),b.deleteContent(l.createSelection($,"on"))}}class qo extends f.Plugin{static get pluginName(){return"TableCaptionEditing"}constructor(l){super(l),this._savedCaptionsMap=new WeakMap}init(){const l=this.editor,b=l.model.schema,M=l.editing.view,S=l.t;b.isRegistered("caption")?b.extend("caption",{allowIn:"table"}):b.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),l.commands.add("toggleTableCaption",new ur(this.editor)),l.conversion.for("upcast").elementToElement({view:$o,model:"caption"}),l.conversion.for("dataDowncast").elementToElement({model:"caption",view:($,{writer:K})=>Zo($.parent)?K.createContainerElement("figcaption"):null}),l.conversion.for("editingDowncast").elementToElement({model:"caption",view:($,{writer:K})=>{if(!Zo($.parent))return null;const ne=K.createEditableElement("figcaption");return K.setCustomProperty("tableCaption",!0,ne),(0,F.enablePlaceholder)({view:M,element:ne,text:S("Enter table caption"),keepOnFocus:!0}),(0,v.toWidgetEditable)(ne,K)}}),Ao(l.model)}_getSavedCaption(l){const b=this._savedCaptionsMap.get(l);return b?F.Element.fromJSON(b):null}_saveCaption(l,b){this._savedCaptionsMap.set(l,b.toJSON())}}class Eo extends f.Plugin{static get pluginName(){return"TableCaptionUI"}init(){const l=this.editor,b=l.editing.view,M=l.t;l.ui.componentFactory.add("toggleTableCaption",S=>{const $=l.commands.get("toggleTableCaption"),K=new Mt.ButtonView(S);return K.set({icon:f.icons.caption,tooltip:!0,isToggleable:!0}),K.bind("isOn","isEnabled").to($,"value","isEnabled"),K.bind("label").to($,"value",ne=>M(ne?"Toggle caption off":"Toggle caption on")),this.listenTo(K,"execute",()=>{if(l.execute("toggleTableCaption",{focusCaptionOnShow:!0}),$.value){const ne=function(xe){const Oe=ro(xe);return Oe?So(Oe):null}(l.model.document.selection),re=l.editing.mapper.toViewElement(ne);if(!re)return;b.scrollToTheSelection(),b.change(xe=>{xe.addClass("table__caption_highlighted",re)})}l.editing.view.focus()}),K})}}var Io=E(665),Un={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Zt()(Io.Z,Un),Io.Z.locals;class Gn extends f.Plugin{static get pluginName(){return"TableCaption"}static get requires(){return[qo,Eo]}}var so="Expected a function";const on=function(ee,l,b){var M=!0,S=!0;if(typeof ee!="function")throw new TypeError(so);return li(b)&&(M="leading"in b?!!b.leading:M,S="trailing"in b?!!b.trailing:S),bn(ee,l,{leading:M,maxWait:l,trailing:S})};class Pn extends Nn{constructor(l,b){super(l,"tableWidth",b)}refresh(){this.isEnabled=!0}execute(l={}){const b=this.editor.model,M=l.table||b.document.selection.getSelectedElement(),{tableWidth:S,columnWidths:$}=l;b.change(K=>{S?K.setAttribute(this.attributeName,S,M):K.removeAttribute(this.attributeName,M),$?K.setAttribute("columnWidths",$,M):K.removeAttribute("columnWidths",M)})}}class rn extends Nn{constructor(l,b){super(l,"columnWidths",b)}refresh(){this.isEnabled=!0}execute(l={}){const b=this.editor.model,M=l.table||b.document.selection.getSelectedElement(),{columnWidths:S}=l;b.change($=>{S?$.setAttribute(this.attributeName,S,M):$.removeAttribute(this.attributeName,M)})}}const Rn=5,Vn=40,si=2;function ao(ee,l){return 100*Vn/po(ee,l)}function po(ee,l){const b=Po(ee,"tbody",l)||Po(ee,"thead",l);return fo(l.editing.view.domConverter.mapViewToDom(b))}function Po(ee,l,b){return[...[...b.editing.mapper.toViewElement(ee).getChildren()].find(M=>M.is("element","table")).getChildren()].find(M=>M.is("element",l))}function fo(ee){const l=X.global.window.getComputedStyle(ee);return l.boxSizing==="border-box"?parseFloat(l.width)-parseFloat(l.paddingLeft)-parseFloat(l.paddingRight)-parseFloat(l.borderLeftWidth)-parseFloat(l.borderRightWidth):parseFloat(l.width)}function An(ee){const l=Math.pow(10,si),b=parseFloat(ee);return Math.round(b*l)/l}function Ht(ee){return ee.map(l=>parseFloat(l)).filter(l=>!Number.isNaN(l)).reduce((l,b)=>l+b,0)}function bo(ee){ee=function(b){const M=b.filter(K=>K==="auto").length;if(M===0)return b.map(K=>An(K));const S=Ht(b),$=Math.max((100-S)/M,Rn);return b.map(K=>K==="auto"?$:K).map(K=>An(K))}(ee);const l=Ht(ee);return l===100?ee:ee.map(b=>An(100*b/l)).map((b,M,S)=>M!==S.length-1?b:An(b+100-Ht(S)))}function Ko(ee){const l=X.global.window.getComputedStyle(ee);return l.boxSizing==="border-box"?parseInt(l.width):parseFloat(l.width)+parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)+parseFloat(l.borderWidth)}function wo(){return ee=>ee.on("attribute:columnWidths:table",(l,b,M)=>{const S=M.writer,$=b.item,K=M.mapper.toViewElement($),ne=K.is("element","table")?K:Array.from(K.getChildren()).find(re=>re.is("element","table"));b.attributeNewValue?(function(re,xe,Oe){const Xe=Oe.split(",");let ft=[...xe.getChildren()].find(Ft=>Ft.is("element","colgroup"));if(ft)for(const Ft of[...ft.getChildren()])re.remove(Ft);else ft=re.createContainerElement("colgroup");for(const Ft of Array(Xe.length).keys()){const ti=re.createEmptyElement("col");re.setStyle("width",Xe[Ft],ti),re.insert(re.createPositionAt(ft,"end"),ti)}re.insert(re.createPositionAt(xe,"start"),ft)}(S,ne,b.attributeNewValue),S.addClass("ck-table-resized",ne)):(function(re,xe){const Oe=[...xe.getChildren()].find(Xe=>Xe.is("element","colgroup"));re.remove(Oe)}(S,ne),S.removeClass("ck-table-resized",ne))})}class ko extends f.Plugin{static get requires(){return[gi,Bt]}static get pluginName(){return"TableColumnResizeEditing"}constructor(l){super(l),this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=Object.create(X.DomEmitterMixin),this._tableUtilsPlugin=l.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(b,M,S)=>{l.editing.view.change($=>{$[S?"removeClass":"addClass"]("ck-column-resize_disabled",l.editing.view.document.getRoot())})})}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerColgroupFixer(),this._registerResizerInserter();const l=this.editor,b=l.plugins.get("TableColumnResize");l.commands.add("resizeTableWidth",new Pn(l)),l.commands.add("resizeColumnWidths",new rn(l));const M=l.commands.get("resizeTableWidth"),S=l.commands.get("resizeColumnWidths");this.bind("_isResizingAllowed").to(l,"isReadOnly",b,"isEnabled",M,"isEnabled",S,"isEnabled",($,K,ne,re)=>!$&&K&&ne&&re)}destroy(){this._domEmitter.stopListening(),super.destroy()}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth","columnWidths"]})}_registerPostFixer(){const l=this.editor.model;function b(M,S,$){const K=$._tableUtilsPlugin.getColumns(S);if(K-M.length===0)return;const ne=function(xe,Oe){const Xe=new Set;for(const ft of xe.getChanges())if(ft.type=="insert"&&ft.position.nodeAfter&&ft.position.nodeAfter.name=="tableCell"&&ft.position.nodeAfter.getAncestors().includes(Oe))Xe.add(ft.position.nodeAfter);else if(ft.type=="remove"){const Ft=ft.position.nodeBefore||ft.position.nodeAfter;Ft.name=="tableCell"&&Ft.getAncestors().includes(Oe)&&Xe.add(Ft)}return Xe}($.editor.model.document.differ,S);for(const xe of ne){const Oe=K-M.length;if(Oe===0)continue;const Xe=Oe>0,ft=$._tableUtilsPlugin.getCellLocation(xe).column;if(Xe){const Ft=ao(S,$.editor),ti=(re=Ft,Array(Oe).fill(re));M.splice(ft,0,...ti)}else{const Ft=M.splice(ft,Math.abs(Oe));M[ft]+=Ht(Ft)}}var re}l.document.registerPostFixer(M=>{let S=!1;for(const $ of function(K){const ne=new Set;for(const re of K.document.differ.getChanges()){let xe=null;switch(re.type){case"insert":xe=["table","tableRow","tableCell"].includes(re.name)?re.position:null;break;case"remove":xe=["tableRow","tableCell"].includes(re.name)?re.position:null;break;case"attribute":re.range.start.nodeAfter&&(xe=["table","tableRow","tableCell"].includes(re.range.start.nodeAfter.name)?re.range.start:null)}if(!xe)continue;const Oe=xe.nodeAfter&&xe.nodeAfter.name==="table"?xe.nodeAfter:xe.findAncestor("table");for(const Xe of K.createRangeOn(Oe).getItems())Xe.is("element")&&Xe.name==="table"&&Xe.hasAttribute("columnWidths")&&ne.add(Xe)}return ne}(l)){const K=bo($.getAttribute("columnWidths").split(","));b(K,$,this);const ne=K.map(re=>`${re}%`).join(",");$.getAttribute("columnWidths")!==ne&&(M.setAttribute("columnWidths",ne,$),S=!0)}return S})}_registerConverters(){const l=this.editor.conversion;var b;l.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:M=>M.getStyle("width")}}),l.for("upcast").add((b=this._tableUtilsPlugin,M=>M.on("element:colgroup",(S,$,K)=>{const ne=$.viewItem;if(!K.consumable.test(ne,{name:!0}))return;K.consumable.consume(ne,{name:!0});const re=$.modelCursor.findAncestor("table"),xe=b.getColumns(re);let Oe=[...Array(xe).keys()].map(Xe=>{const ft=ne.getChild(Xe);if(!ft||!ft.is("element","col"))return"auto";const Ft=ft.getStyle("width");return Ft&&Ft.endsWith("%")?Ft:"auto"});Oe.includes("auto")&&(Oe=bo(Oe).map(Xe=>Xe+"%")),K.writer.setAttribute("columnWidths",Oe.join(","),re)}))),l.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:M=>({name:"figure",key:"style",value:{width:M}})}),l.for("downcast").add(wo())}_registerResizingListeners(){const l=this.editor.editing.view;l.addObserver(P),l.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(X.global.window.document,"mousemove",on(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(X.global.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(l,b){const M=b.target;if(!M.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;b.preventDefault(),l.stop();const S=this.editor,$=function(re,xe,Oe){const Xe=Array(xe.getColumns(re)),ft=new g(re);for(const Ft of ft){const ti=Oe.editing.mapper.toViewElement(Ft.cell),Kt=Ko(Oe.editing.view.domConverter.mapViewToDom(ti));(!Xe[Ft.column]||Kt<Xe[Ft.column])&&(Xe[Ft.column]=An(Kt))}return Xe}(S.editing.mapper.toModelElement(M.findAncestor("figure")),this._tableUtilsPlugin,S),K=M.findAncestor("table"),ne=S.editing.view;[...K.getChildren()].find(re=>re.is("element","colgroup"))||ne.change(re=>{(function(xe,Oe,Xe){const ft=xe.createContainerElement("colgroup");for(let Ft=0;Ft<Oe.length;Ft++){const ti=xe.createEmptyElement("col"),Kt=`${An(Oe[Ft]/Ht(Oe)*100)}%`;xe.setStyle("width",Kt,ti),xe.insert(xe.createPositionAt(ft,"end"),ti)}xe.insert(xe.createPositionAt(Xe,"start"),ft)})(re,$,K)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(b,$),ne.change(re=>function(xe,Oe,Xe){const ft=Xe.widths.viewFigureWidth/Xe.widths.viewFigureParentWidth;xe.addClass("ck-table-resized",Oe),xe.addClass("ck-table-column-resizer__active",Xe.elements.viewResizer),xe.setStyle("width",`${An(100*ft)}%`,Oe.findAncestor("figure"))}(re,K,this._resizingData))}_onMouseMoveHandler(l,b){if(!this._isResizingActive)return;if(!this._isResizingAllowed)return void this._onMouseUpHandler();const{columnPosition:M,flags:{isRightEdge:S,isTableCentered:$,isLtrContent:K},elements:{viewFigure:ne,viewLeftColumn:re,viewRightColumn:xe},widths:{viewFigureParentWidth:Oe,tableWidth:Xe,leftColumnWidth:ft,rightColumnWidth:Ft}}=this._resizingData,ti=-ft+Vn,Kt=S?Oe-Xe:Ft-Vn,ui=(K?1:-1)*(S&&$?2:1),ki=(Ai=(b.clientX-M)*ui,Hi=Math.min(ti,0),Qi=Math.max(Kt,0),An(Ai<=Hi?Hi:Ai>=Qi?Qi:Ai));var Ai,Hi,Qi;ki!==0&&this.editor.editing.view.change(hn=>{const kn=An(100*(ft+ki)/Xe);if(hn.setStyle("width",`${kn}%`,re),S){const Xi=An(100*(Xe+ki)/Oe);hn.setStyle("width",`${Xi}%`,ne)}else{const Xi=An(100*(Ft-ki)/Xe);hn.setStyle("width",`${Xi}%`,xe)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:l,modelTable:b,viewFigure:M,viewColgroup:S}=this._resizingData.elements,$=this.editor,K=$.editing.view,ne=b.getAttribute("columnWidths"),re=[...S.getChildren()].map(Ft=>Ft.getStyle("width")).join(","),xe=ne!==re,Oe=b.getAttribute("tableWidth"),Xe=M.getStyle("width"),ft=Oe!==Xe;(xe||ft)&&(this._isResizingAllowed?ft?$.execute("resizeTableWidth",{table:b,tableWidth:`${An(Xe)}%`,columnWidths:re}):$.execute("resizeColumnWidths",{columnWidths:re,table:b}):K.change(Ft=>{if(ne){const ti=ne.split(",");for(const Kt of S.getChildren())Ft.setStyle("width",ti.shift(),Kt)}else Ft.remove(S);ft&&(Oe?Ft.setStyle("width",Oe,M):Ft.removeStyle("width",M)),ne||Oe||Ft.removeClass("ck-table-resized",[...M.getChildren()].find(ti=>ti.name==="table"))})),K.change(Ft=>{Ft.removeClass("ck-table-column-resizer__active",l)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(l,b){const M=this.editor,S=l.domEvent.clientX,$=l.target,K=$.findAncestor("td")||$.findAncestor("th"),ne=M.editing.mapper.toModelElement(K),re=ne.findAncestor("table"),xe=function(Ai,Hi){const Qi=Hi.getCellLocation(Ai).column;return{leftEdge:Qi,rightEdge:Qi+(Ai.getAttribute("colspan")||1)-1}}(ne,this._tableUtilsPlugin).rightEdge,Oe=xe===this._tableUtilsPlugin.getColumns(re)-1,Xe=!re.hasAttribute("tableAlignment"),ft=M.locale.contentLanguageDirection!=="rtl",Ft=K.findAncestor("table"),ti=Ft.findAncestor("figure"),Kt=[...Ft.getChildren()].find(Ai=>Ai.is("element","colgroup")),ui=Kt.getChild(xe),ki=Oe?void 0:Kt.getChild(xe+1);return{columnPosition:S,flags:{isRightEdge:Oe,isTableCentered:Xe,isLtrContent:ft},elements:{viewResizer:$,modelTable:re,viewFigure:ti,viewColgroup:Kt,viewLeftColumn:ui,viewRightColumn:ki},widths:{viewFigureParentWidth:fo(M.editing.view.domConverter.mapViewToDom(ti.parent)),viewFigureWidth:fo(M.editing.view.domConverter.mapViewToDom(ti)),tableWidth:po(re,M),leftColumnWidth:b[xe],rightColumnWidth:Oe?void 0:b[xe+1]}}}_registerColgroupFixer(){const l=this.editor;this.listenTo(l.editing.view.document,"layoutChanged",()=>{const b=l.editing.view.document.selection.getFirstPosition().getAncestors().reverse().find($=>$.name==="table"),M=b&&[...b.getChildren()].find($=>$.is("element","colgroup")),S=l.model.document.selection.getFirstPosition().findAncestor("table");S&&S.hasAttribute("columnWidths")&&b&&!M&&l.editing.reconvertItem(S)},{priority:"low"})}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(l=>{l.on("insert:tableCell",(b,M,S)=>{const $=M.item,K=S.mapper.toViewElement($),ne=S.writer;ne.insert(ne.createPositionAt(K,"end"),ne.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}var cn=E(975),Go={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};Zt()(cn.Z,Go),cn.Z.locals;class On extends f.Plugin{static get requires(){return[ko,to]}static get pluginName(){return"TableColumnResize"}}})(),(window.CKEditor5=window.CKEditor5||{}).table=y})()}}]);
